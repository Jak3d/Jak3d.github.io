{"ast":null,"code":"var _classStaticPrivateMethodGet=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classStaticPrivateMethodGet.js\").default;var _defineProperty=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/defineProperty.js\").default;var _classPrivateMethodInitSpec=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;var _classPrivateMethodGet=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classPrivateMethodGet.js\").default;var _classStaticPrivateFieldSpecSet=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classStaticPrivateFieldSpecSet.js\").default;var _classStaticPrivateFieldSpecGet=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classStaticPrivateFieldSpecGet.js\").default;var _classPrivateFieldInitSpec=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;var _classPrivateFieldGet=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classPrivateFieldGet.js\").default;var _classPrivateFieldSet=require(\"C:/Users/marro/OneDrive/Desktop/LeonardoMarro-master/node_modules/@babel/runtime/helpers/classPrivateFieldSet.js\").default;require(\"core-js/modules/es.error.cause.js\");require(\"core-js/modules/es.array.push.js\");require(\"core-js/modules/es.typed-array.at.js\");require(\"core-js/modules/es.typed-array.find-last.js\");require(\"core-js/modules/es.typed-array.find-last-index.js\");require(\"core-js/modules/web.dom-exception.stack.js\");require(\"core-js/modules/web.structured-clone.js\");require(\"core-js/modules/es.array.at.js\");require(\"core-js/modules/es.string.at-alternative.js\");/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')module.exports=factory();else if(typeof define==='function'&&define.amd)define(\"pdfjs-dist/build/pdf\",[],factory);else if(typeof exports==='object')exports[\"pdfjs-dist/build/pdf\"]=factory();else root[\"pdfjs-dist/build/pdf\"]=root.pdfjsLib=factory();})(globalThis,()=>{return(/******/(()=>{// webpackBootstrap\n/******/\"use strict\";/******/var __webpack_modules__=[/* 0 */,/* 1 */ /***/(__unused_webpack_module,exports)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.VerbosityLevel=exports.Util=exports.UnknownErrorException=exports.UnexpectedResponseException=exports.TextRenderingMode=exports.RenderingIntentFlag=exports.PromiseCapability=exports.PermissionFlag=exports.PasswordResponses=exports.PasswordException=exports.PageActionEventType=exports.OPS=exports.MissingPDFException=exports.MAX_IMAGE_SIZE_TO_CACHE=exports.LINE_FACTOR=exports.LINE_DESCENT_FACTOR=exports.InvalidPDFException=exports.ImageKind=exports.IDENTITY_MATRIX=exports.FormatError=exports.FeatureTest=exports.FONT_IDENTITY_MATRIX=exports.DocumentActionEventType=exports.CMapCompressionType=exports.BaseException=exports.BASELINE_FACTOR=exports.AnnotationType=exports.AnnotationStateModelType=exports.AnnotationReviewState=exports.AnnotationReplyType=exports.AnnotationMode=exports.AnnotationMarkedState=exports.AnnotationFlag=exports.AnnotationFieldFlag=exports.AnnotationEditorType=exports.AnnotationEditorPrefix=exports.AnnotationEditorParamsType=exports.AnnotationBorderStyleType=exports.AnnotationActionEventType=exports.AbortException=void 0;exports.assert=assert;exports.bytesToString=bytesToString;exports.createValidAbsoluteUrl=createValidAbsoluteUrl;exports.getModificationDate=getModificationDate;exports.getVerbosityLevel=getVerbosityLevel;exports.info=info;exports.isArrayBuffer=isArrayBuffer;exports.isArrayEqual=isArrayEqual;exports.normalizeUnicode=normalizeUnicode;exports.objectFromMap=objectFromMap;exports.objectSize=objectSize;exports.setVerbosityLevel=setVerbosityLevel;exports.shadow=shadow;exports.string32=string32;exports.stringToBytes=stringToBytes;exports.stringToPDFString=stringToPDFString;exports.stringToUTF8String=stringToUTF8String;exports.unreachable=unreachable;exports.utf8StringToString=utf8StringToString;exports.warn=warn;;const IDENTITY_MATRIX=[1,0,0,1,0,0];exports.IDENTITY_MATRIX=IDENTITY_MATRIX;const FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];exports.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;const MAX_IMAGE_SIZE_TO_CACHE=10e6;exports.MAX_IMAGE_SIZE_TO_CACHE=MAX_IMAGE_SIZE_TO_CACHE;const LINE_FACTOR=1.35;exports.LINE_FACTOR=LINE_FACTOR;const LINE_DESCENT_FACTOR=0.35;exports.LINE_DESCENT_FACTOR=LINE_DESCENT_FACTOR;const BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;exports.BASELINE_FACTOR=BASELINE_FACTOR;const RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,OPLIST:0x100};exports.RenderingIntentFlag=RenderingIntentFlag;const AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};exports.AnnotationMode=AnnotationMode;const AnnotationEditorPrefix=\"pdfjs_internal_editor_\";exports.AnnotationEditorPrefix=AnnotationEditorPrefix;const AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};exports.AnnotationEditorType=AnnotationEditorType;const AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};exports.AnnotationEditorParamsType=AnnotationEditorParamsType;const PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};exports.PermissionFlag=PermissionFlag;const TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};exports.TextRenderingMode=TextRenderingMode;const ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};exports.ImageKind=ImageKind;const AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};exports.AnnotationType=AnnotationType;const AnnotationStateModelType={MARKED:\"Marked\",REVIEW:\"Review\"};exports.AnnotationStateModelType=AnnotationStateModelType;const AnnotationMarkedState={MARKED:\"Marked\",UNMARKED:\"Unmarked\"};exports.AnnotationMarkedState=AnnotationMarkedState;const AnnotationReviewState={ACCEPTED:\"Accepted\",REJECTED:\"Rejected\",CANCELLED:\"Cancelled\",COMPLETED:\"Completed\",NONE:\"None\"};exports.AnnotationReviewState=AnnotationReviewState;const AnnotationReplyType={GROUP:\"Group\",REPLY:\"R\"};exports.AnnotationReplyType=AnnotationReplyType;const AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};exports.AnnotationFlag=AnnotationFlag;const AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};exports.AnnotationFieldFlag=AnnotationFieldFlag;const AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};exports.AnnotationBorderStyleType=AnnotationBorderStyleType;const AnnotationActionEventType={E:\"Mouse Enter\",X:\"Mouse Exit\",D:\"Mouse Down\",U:\"Mouse Up\",Fo:\"Focus\",Bl:\"Blur\",PO:\"PageOpen\",PC:\"PageClose\",PV:\"PageVisible\",PI:\"PageInvisible\",K:\"Keystroke\",F:\"Format\",V:\"Validate\",C:\"Calculate\"};exports.AnnotationActionEventType=AnnotationActionEventType;const DocumentActionEventType={WC:\"WillClose\",WS:\"WillSave\",DS:\"DidSave\",WP:\"WillPrint\",DP:\"DidPrint\"};exports.DocumentActionEventType=DocumentActionEventType;const PageActionEventType={O:\"PageOpen\",C:\"PageClose\"};exports.PageActionEventType=PageActionEventType;const VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};exports.VerbosityLevel=VerbosityLevel;const CMapCompressionType={NONE:0,BINARY:1};exports.CMapCompressionType=CMapCompressionType;const OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};exports.OPS=OPS;const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};exports.PasswordResponses=PasswordResponses;let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){console.log(`Info: ${msg}`);}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){console.log(`Warning: ${msg}`);}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url?.protocol){case\"http:\":case\"https:\":case\"ftp:\":case\"mailto:\":case\"tel:\":return true;default:return false;}}function createValidAbsoluteUrl(url,baseUrl=null,options=null){if(!url){return null;}try{if(options&&typeof url===\"string\"){if(options.addDefaultProtocol&&url.startsWith(\"www.\")){const dots=url.match(/\\./g);if(dots?.length>=2){url=`http://${url}`;}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch(ex){}}}const absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch(ex){}return null;}function shadow(obj,prop,value,nonSerializable=false){Object.defineProperty(obj,prop,{value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}const BaseException=function BaseExceptionClosure(){function BaseException(message,name){if(this.constructor===BaseException){unreachable(\"Cannot initialize BaseException.\");}this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();exports.BaseException=BaseException;class PasswordException extends BaseException{constructor(msg,code){super(msg,\"PasswordException\");this.code=code;}}exports.PasswordException=PasswordException;class UnknownErrorException extends BaseException{constructor(msg,details){super(msg,\"UnknownErrorException\");this.details=details;}}exports.UnknownErrorException=UnknownErrorException;class InvalidPDFException extends BaseException{constructor(msg){super(msg,\"InvalidPDFException\");}}exports.InvalidPDFException=InvalidPDFException;class MissingPDFException extends BaseException{constructor(msg){super(msg,\"MissingPDFException\");}}exports.MissingPDFException=MissingPDFException;class UnexpectedResponseException extends BaseException{constructor(msg,status){super(msg,\"UnexpectedResponseException\");this.status=status;}}exports.UnexpectedResponseException=UnexpectedResponseException;class FormatError extends BaseException{constructor(msg){super(msg,\"FormatError\");}}exports.FormatError=FormatError;class AbortException extends BaseException{constructor(msg){super(msg,\"AbortException\");}}exports.AbortException=AbortException;function bytesToString(bytes){if(typeof bytes!==\"object\"||bytes?.length===undefined){unreachable(\"Invalid argument for bytesToString\");}const length=bytes.length;const MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}const strBuf=[];for(let i=0;i<length;i+=MAX_ARGUMENT_COUNT){const chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);const chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join(\"\");}function stringToBytes(str){if(typeof str!==\"string\"){unreachable(\"Invalid argument for stringToBytes\");}const length=str.length;const bytes=new Uint8Array(length);for(let i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){const obj=Object.create(null);for(const[key,value]of map){obj[key]=value;}return obj;}function isLittleEndian(){const buffer8=new Uint8Array(4);buffer8[0]=1;const view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function(\"\");return true;}catch(e){return false;}}class FeatureTest{static get isLittleEndian(){return shadow(this,\"isLittleEndian\",isLittleEndian());}static get isEvalSupported(){return shadow(this,\"isEvalSupported\",isEvalSupported());}static get isOffscreenCanvasSupported(){return shadow(this,\"isOffscreenCanvasSupported\",typeof OffscreenCanvas!==\"undefined\");}static get platform(){if(typeof navigator===\"undefined\"){return shadow(this,\"platform\",{isWin:false,isMac:false});}return shadow(this,\"platform\",{isWin:navigator.platform.includes(\"Win\"),isMac:navigator.platform.includes(\"Mac\")});}}exports.FeatureTest=FeatureTest;const hexNumbers=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,\"0\"));class Util{static makeHexColor(r,g,b){return`#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;}static scaleMinMax(transform,minMax){let temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[0];minMax[1]*=transform[0];if(transform[3]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[2];minMax[1]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[4];minMax[2]+=transform[5];minMax[3]+=transform[5];}static transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}static applyTransform(p,m){const xt=p[0]*m[0]+p[1]*m[2]+m[4];const yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}static applyInverseTransform(p,m){const d=m[0]*m[3]-m[1]*m[2];const xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;const yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}static getAxialAlignedBoundingBox(r,m){const p1=Util.applyTransform(r,m);const p2=Util.applyTransform(r.slice(2,4),m);const p3=Util.applyTransform([r[0],r[3]],m);const p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}static inverseTransform(m){const d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}static singularValueDecompose2dScale(m){const transpose=[m[0],m[2],m[1],m[3]];const a=m[0]*transpose[0]+m[1]*transpose[2];const b=m[0]*transpose[1]+m[1]*transpose[3];const c=m[2]*transpose[0]+m[3]*transpose[2];const d=m[2]*transpose[1]+m[3]*transpose[3];const first=(a+d)/2;const second=Math.sqrt((a+d)**2-4*(a*d-c*b))/2;const sx=first+second||1;const sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}static normalizeRect(rect){const r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}static intersect(rect1,rect2){const xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));const xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}const yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));const yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}static bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){const tvalues=[],bounds=[[],[]];let a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(let i=0;i<2;++i){if(i===0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}if(Math.abs(a)<1e-12){if(Math.abs(b)<1e-12){continue;}t=-c/b;if(0<t&&t<1){tvalues.push(t);}continue;}b2ac=b*b-4*c*a;sqrtb2ac=Math.sqrt(b2ac);if(b2ac<0){continue;}t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}let j=tvalues.length,mt;const jlen=j;while(j--){t=tvalues[j];mt=1-t;bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3;bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;}bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;bounds[0].length=bounds[1].length=jlen+2;return[Math.min(...bounds[0]),Math.min(...bounds[1]),Math.max(...bounds[0]),Math.max(...bounds[1])];}}exports.Util=Util;const PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac];function stringToPDFString(str){if(str[0]>=\"\\xEF\"){let encoding;if(str[0]===\"\\xFE\"&&str[1]===\"\\xFF\"){encoding=\"utf-16be\";}else if(str[0]===\"\\xFF\"&&str[1]===\"\\xFE\"){encoding=\"utf-16le\";}else if(str[0]===\"\\xEF\"&&str[1]===\"\\xBB\"&&str[2]===\"\\xBF\"){encoding=\"utf-8\";}if(encoding){try{const decoder=new TextDecoder(encoding,{fatal:true});const buffer=stringToBytes(str);return decoder.decode(buffer);}catch(ex){warn(`stringToPDFString: \"${ex}\".`);}}}const strBuf=[];for(let i=0,ii=str.length;i<ii;i++){const code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join(\"\");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayBuffer(v){return typeof v===\"object\"&&v?.byteLength!==undefined;}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(let i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(date=new Date()){const buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,\"0\"),date.getUTCDate().toString().padStart(2,\"0\"),date.getUTCHours().toString().padStart(2,\"0\"),date.getUTCMinutes().toString().padStart(2,\"0\"),date.getUTCSeconds().toString().padStart(2,\"0\")];return buffer.join(\"\");}var _settled=/*#__PURE__*/new WeakMap();class PromiseCapability{constructor(){_classPrivateFieldInitSpec(this,_settled,{writable:true,value:false});this.promise=new Promise((resolve,reject)=>{this.resolve=data=>{_classPrivateFieldSet(this,_settled,true);resolve(data);};this.reject=reason=>{_classPrivateFieldSet(this,_settled,true);reject(reason);};});}get settled(){return _classPrivateFieldGet(this,_settled);}}exports.PromiseCapability=PromiseCapability;let NormalizeRegex=null;let NormalizationMap=null;function normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;NormalizationMap=new Map([[\"ﬅ\",\"ſt\"]]);}return str.replaceAll(NormalizeRegex,(_,p1,p2)=>{return p1?p1.normalize(\"NFKC\"):NormalizationMap.get(p2);});}/***/},/* 2 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.version=void 0;var _util=__w_pdfjs_require__(1);var _annotation_storage=__w_pdfjs_require__(3);var _display_utils=__w_pdfjs_require__(6);var _font_loader=__w_pdfjs_require__(9);var _canvas=__w_pdfjs_require__(11);var _worker_options=__w_pdfjs_require__(14);var _is_node=__w_pdfjs_require__(10);var _message_handler=__w_pdfjs_require__(15);var _metadata=__w_pdfjs_require__(16);var _optional_content_config=__w_pdfjs_require__(17);var _transport_stream=__w_pdfjs_require__(18);var _xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536;const RENDERING_CANCELLED_TIMEOUT=100;const DELAYED_CLEANUP_TIMEOUT=5000;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){const{NodeCanvasFactory,NodeCMapReaderFactory,NodeFilterFactory,NodeStandardFontDataFactory}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory;exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory;}let createPDFNetworkStream;{if(_is_node.isNodeJS){const{PDFNodeStream}=__w_pdfjs_require__(21);createPDFNetworkStream=params=>{return new PDFNodeStream(params);};}else{const{PDFNetworkStream}=__w_pdfjs_require__(24);const{PDFFetchStream}=__w_pdfjs_require__(25);createPDFNetworkStream=params=>{return(0,_display_utils.isValidFetchUrl)(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params);};}}function getDocument(src){if(typeof src===\"string\"||src instanceof URL){src={url:src};}else if((0,_util.isArrayBuffer)(src)){src={data:src};}if(typeof src!==\"object\"){throw new Error(\"Invalid parameter in getDocument, need parameter object.\");}if(!src.url&&!src.data&&!src.range){throw new Error(\"Invalid parameter object: need either .data, .range or .url\");}const task=new PDFDocumentLoadingTask();const{docId}=task;const url=src.url?getUrlProp(src.url):null;const data=src.data?getDataProp(src.data):null;const httpHeaders=src.httpHeaders||null;const withCredentials=src.withCredentials===true;const password=src.password??null;const rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null;const rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let worker=src.worker instanceof PDFWorker?src.worker:null;const verbosity=src.verbosity;const docBaseUrl=typeof src.docBaseUrl===\"string\"&&!(0,_display_utils.isDataScheme)(src.docBaseUrl)?src.docBaseUrl:null;const cMapUrl=typeof src.cMapUrl===\"string\"?src.cMapUrl:null;const cMapPacked=src.cMapPacked!==false;const CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory;const standardFontDataUrl=typeof src.standardFontDataUrl===\"string\"?src.standardFontDataUrl:null;const StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory;const ignoreErrors=src.stopAtErrors!==true;const maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1;const isEvalSupported=src.isEvalSupported!==false;const isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported===\"boolean\"?src.isOffscreenCanvasSupported:!_is_node.isNodeJS;const canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1;const disableFontFace=typeof src.disableFontFace===\"boolean\"?src.disableFontFace:_is_node.isNodeJS;const fontExtraProperties=src.fontExtraProperties===true;const enableXfa=src.enableXfa===true;const ownerDocument=src.ownerDocument||globalThis.document;const disableRange=src.disableRange===true;const disableStream=src.disableStream===true;const disableAutoFetch=src.disableAutoFetch===true;const pdfBug=src.pdfBug===true;const length=rangeTransport?rangeTransport.length:src.length??NaN;const useSystemFonts=typeof src.useSystemFonts===\"boolean\"?src.useSystemFonts:!_is_node.isNodeJS&&!disableFontFace;const useWorkerFetch=typeof src.useWorkerFetch===\"boolean\"?src.useWorkerFetch:CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(cMapUrl,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(standardFontDataUrl,document.baseURI);const canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument});const filterFactory=src.filterFactory||new DefaultFilterFactory({docId,ownerDocument});const styleElement=null;(0,_util.setVerbosityLevel)(verbosity);const transportFactory={canvasFactory,filterFactory};if(!useWorkerFetch){transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked});transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl});}if(!worker){const workerParams={verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams);task._worker=worker;}const fetchDocParams={docId,apiVersion:'3.7.107',data,password,disableAutoFetch,rangeChunkSize,length,docBaseUrl,enableXfa,evaluatorOptions:{maxImageSize,disableFontFace,ignoreErrors,isEvalSupported,isOffscreenCanvasSupported,canvasMaxAreaInBytes,fontExtraProperties,useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}};const transportParams={ignoreErrors,isEvalSupported,disableFontFace,fontExtraProperties,enableXfa,ownerDocument,disableAutoFetch,pdfBug,styleElement};worker.promise.then(function(){if(task.destroyed){throw new Error(\"Loading aborted\");}const workerIdPromise=_fetchDocument(worker,fetchDocParams);const networkStreamPromise=new Promise(function(resolve){let networkStream;if(rangeTransport){networkStream=new _transport_stream.PDFDataTransportStream({length,initialData:rangeTransport.initialData,progressiveDone:rangeTransport.progressiveDone,contentDispositionFilename:rangeTransport.contentDispositionFilename,disableRange,disableStream},rangeTransport);}else if(!data){networkStream=createPDFNetworkStream({url,length,httpHeaders,withCredentials,rangeChunkSize,disableRange,disableStream});}resolve(networkStream);});return Promise.all([workerIdPromise,networkStreamPromise]).then(function([workerId,networkStream]){if(task.destroyed){throw new Error(\"Loading aborted\");}const messageHandler=new _message_handler.MessageHandler(docId,workerId,worker.port);const transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport;messageHandler.send(\"Ready\",null);});}).catch(task._capability.reject);return task;}async function _fetchDocument(worker,source){if(worker.destroyed){throw new Error(\"Worker was destroyed\");}const workerId=await worker.messageHandler.sendWithPromise(\"GetDocRequest\",source,source.data?[source.data.buffer]:null);if(worker.destroyed){throw new Error(\"Worker was destroyed\");}return workerId;}function getUrlProp(val){if(val instanceof URL){return val.href;}try{return new URL(val,window.location).href;}catch(ex){if(_is_node.isNodeJS&&typeof val===\"string\"){return val;}}throw new Error(\"Invalid PDF url data: \"+\"either string or URL-object is expected in the url property.\");}function getDataProp(val){if(_is_node.isNodeJS&&typeof Buffer!==\"undefined\"&&val instanceof Buffer){(0,_display_utils.deprecated)(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");return new Uint8Array(val);}if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength){return val;}if(typeof val===\"string\"){return(0,_util.stringToBytes)(val);}if(typeof val===\"object\"&&!isNaN(val?.length)||(0,_util.isArrayBuffer)(val)){return new Uint8Array(val);}throw new Error(\"Invalid PDF binary data: either TypedArray, \"+\"string, or array-like object is expected in the data property.\");}class PDFDocumentLoadingTask{constructor(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;this._capability=new _util.PromiseCapability();this._transport=null;this._worker=null;this.docId=`d${(_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(_PDFDocumentLoadingTa=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa)),_PDFDocumentLoadingTa2)}`;this.destroyed=false;this.onPassword=null;this.onProgress=null;}get promise(){return this._capability.promise;}async destroy(){this.destroyed=true;await this._transport?.destroy();this._transport=null;if(this._worker){this._worker.destroy();this._worker=null;}}}var _docId={writable:true,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(length,initialData,progressiveDone=false,contentDispositionFilename=null){this.length=length;this.initialData=initialData;this.progressiveDone=progressiveDone;this.contentDispositionFilename=contentDispositionFilename;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=new _util.PromiseCapability();}addRangeListener(listener){this._rangeListeners.push(listener);}addProgressListener(listener){this._progressListeners.push(listener);}addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);}addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener);}onDataRange(begin,chunk){for(const listener of this._rangeListeners){listener(begin,chunk);}}onDataProgress(loaded,total){this._readyCapability.promise.then(()=>{for(const listener of this._progressListeners){listener(loaded,total);}});}onDataProgressiveRead(chunk){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveReadListeners){listener(chunk);}});}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const listener of this._progressiveDoneListeners){listener();}});}transportReady(){this._readyCapability.resolve();}requestDataRange(begin,end){(0,_util.unreachable)(\"Abstract method PDFDataRangeTransport.requestDataRange\");}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pdfInfo,transport){this._pdfInfo=pdfInfo;this._transport=transport;}get annotationStorage(){return this._transport.annotationStorage;}get filterFactory(){return this._transport.filterFactory;}get numPages(){return this._pdfInfo.numPages;}get fingerprints(){return this._pdfInfo.fingerprints;}get isPureXfa(){return(0,_util.shadow)(this,\"isPureXfa\",!!this._transport._htmlForXfa);}get allXfaHtml(){return this._transport._htmlForXfa;}getPage(pageNumber){return this._transport.getPage(pageNumber);}getPageIndex(ref){return this._transport.getPageIndex(ref);}getDestinations(){return this._transport.getDestinations();}getDestination(id){return this._transport.getDestination(id);}getPageLabels(){return this._transport.getPageLabels();}getPageLayout(){return this._transport.getPageLayout();}getPageMode(){return this._transport.getPageMode();}getViewerPreferences(){return this._transport.getViewerPreferences();}getOpenAction(){return this._transport.getOpenAction();}getAttachments(){return this._transport.getAttachments();}getJavaScript(){return this._transport.getJavaScript();}getJSActions(){return this._transport.getDocJSActions();}getOutline(){return this._transport.getOutline();}getOptionalContentConfig(){return this._transport.getOptionalContentConfig();}getPermissions(){return this._transport.getPermissions();}getMetadata(){return this._transport.getMetadata();}getMarkInfo(){return this._transport.getMarkInfo();}getData(){return this._transport.getData();}saveDocument(){return this._transport.saveDocument();}getDownloadInfo(){return this._transport.downloadInfoCapability.promise;}cleanup(keepLoadedFonts=false){return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa);}destroy(){return this.loadingTask.destroy();}get loadingParams(){return this._transport.loadingParams;}get loadingTask(){return this._transport.loadingTask;}getFieldObjects(){return this._transport.getFieldObjects();}hasJSActions(){return this._transport.hasJSActions();}getCalculationOrderIds(){return this._transport.getCalculationOrderIds();}}exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=/*#__PURE__*/new WeakMap();var _pendingCleanup=/*#__PURE__*/new WeakMap();var _tryCleanup=/*#__PURE__*/new WeakSet();var _abortDelayedCleanup=/*#__PURE__*/new WeakSet();class PDFPageProxy{constructor(pageIndex,pageInfo,transport,pdfBug=false){_classPrivateMethodInitSpec(this,_abortDelayedCleanup);_classPrivateMethodInitSpec(this,_tryCleanup);_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,{writable:true,value:null});_classPrivateFieldInitSpec(this,_pendingCleanup,{writable:true,value:false});this._pageIndex=pageIndex;this._pageInfo=pageInfo;this._transport=transport;this._stats=pdfBug?new _display_utils.StatTimer():null;this._pdfBug=pdfBug;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this._maybeCleanupAfterRender=false;this._intentStates=new Map();this.destroyed=false;}get pageNumber(){return this._pageIndex+1;}get rotate(){return this._pageInfo.rotate;}get ref(){return this._pageInfo.ref;}get userUnit(){return this._pageInfo.userUnit;}get view(){return this._pageInfo.view;}getViewport({scale,rotation=this.rotate,offsetX=0,offsetY=0,dontFlip=false}={}){return new _display_utils.PageViewport({viewBox:this.view,scale,rotation,offsetX,offsetY,dontFlip});}getAnnotations({intent=\"display\"}={}){const intentArgs=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent);}getJSActions(){return this._transport.getPageJSActions(this._pageIndex);}get isPureXfa(){return(0,_util.shadow)(this,\"isPureXfa\",!!this._transport._htmlForXfa);}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null;}render({canvasContext,viewport,intent=\"display\",annotationMode=_util.AnnotationMode.ENABLE,transform=null,background=null,optionalContentConfigPromise=null,annotationCanvasMap=null,pageColors=null,printAnnotationStorage=null}){if(arguments[0]?.canvasFactory){throw new Error(\"render no longer accepts the `canvasFactory`-option, \"+\"please pass it to the `getDocument`-function instead.\");}this._stats?.time(\"Overall\");const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);_classPrivateFieldSet(this,_pendingCleanup,false);_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);if(!optionalContentConfigPromise){optionalContentConfigPromise=this._transport.getOptionalContentConfig();}let intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}const intentPrint=!!(intentArgs.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!intentState.displayReadyCapability){intentState.displayReadyCapability=new _util.PromiseCapability();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};this._stats?.time(\"Page Request\");this._pumpOperatorList(intentArgs);}const complete=error=>{intentState.renderTasks.delete(internalRenderTask);if(this._maybeCleanupAfterRender||intentPrint){_classPrivateFieldSet(this,_pendingCleanup,true);}_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!intentPrint);if(error){internalRenderTask.capability.reject(error);this._abortOperatorList({intentState,reason:error instanceof Error?error:new Error(error)});}else{internalRenderTask.capability.resolve();}this._stats?.timeEnd(\"Rendering\");this._stats?.timeEnd(\"Overall\");};const internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext,viewport,transform,background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors});(intentState.renderTasks||=new Set()).add(internalRenderTask);const renderTask=internalRenderTask.task;Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(([transparency,optionalContentConfig])=>{if(_classPrivateFieldGet(this,_pendingCleanup)){complete();return;}this._stats?.time(\"Rendering\");internalRenderTask.initializeGraphics({transparency,optionalContentConfig});internalRenderTask.operatorListChanged();}).catch(complete);return renderTask;}getOperatorList({intent=\"display\",annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null}={}){function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);intentState.renderTasks.delete(opListTask);}}const intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,true);let intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}let opListTask;if(!intentState.opListReadCapability){opListTask=Object.create(null);opListTask.operatorListChanged=operatorListChanged;intentState.opListReadCapability=new _util.PromiseCapability();(intentState.renderTasks||=new Set()).add(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};this._stats?.time(\"Page Request\");this._pumpOperatorList(intentArgs);}return intentState.opListReadCapability.promise;}streamTextContent({includeMarkedContent=false,disableNormalization=false}={}){const TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream(\"GetTextContent\",{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===true,disableNormalization:disableNormalization===true},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size(textContent){return textContent.items.length;}});}getTextContent(params={}){if(this._transport._htmlForXfa){return this.getXfa().then(xfa=>{return _xfa_text.XfaText.textContent(xfa);});}const readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function({value,done}){if(done){resolve(textContent);return;}Object.assign(textContent.styles,value.styles);textContent.items.push(...value.items);pump();},reject);}const reader=readableStream.getReader();const textContent={items:[],styles:Object.create(null)};pump();});}getStructTree(){return this._transport.getStructTree(this._pageIndex);}_destroy(){this.destroyed=true;const waitOn=[];for(const intentState of this._intentStates.values()){this._abortOperatorList({intentState,reason:new Error(\"Page was destroyed.\"),force:true});if(intentState.opListReadCapability){continue;}for(const internalRenderTask of intentState.renderTasks){waitOn.push(internalRenderTask.completed);internalRenderTask.cancel();}}this.objs.clear();_classPrivateFieldSet(this,_pendingCleanup,false);_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);return Promise.all(waitOn);}cleanup(resetStats=false){_classPrivateFieldSet(this,_pendingCleanup,true);const success=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,false);if(resetStats&&success){this._stats&&=new _display_utils.StatTimer();}return success;}_startRenderPage(transparency,cacheKey){const intentState=this._intentStates.get(cacheKey);if(!intentState){return;}this._stats?.timeEnd(\"Page Request\");intentState.displayReadyCapability?.resolve(transparency);}_renderPageChunk(operatorListChunk,intentState){for(let i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;for(const internalRenderTask of intentState.renderTasks){internalRenderTask.operatorListChanged();}if(operatorListChunk.lastChunk){_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,true);}}_pumpOperatorList({renderingIntent,cacheKey,annotationStorageMap}){const readableStream=this._transport.messageHandler.sendWithStream(\"GetOperatorList\",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey,annotationStorage:annotationStorageMap});const reader=readableStream.getReader();const intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;const pump=()=>{reader.read().then(({value,done})=>{if(done){intentState.streamReader=null;return;}if(this._transport.destroyed){return;}this._renderPageChunk(value,intentState);pump();},reason=>{intentState.streamReader=null;if(this._transport.destroyed){return;}if(intentState.operatorList){intentState.operatorList.lastChunk=true;for(const internalRenderTask of intentState.renderTasks){internalRenderTask.operatorListChanged();}_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,true);}if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(reason);}else if(intentState.opListReadCapability){intentState.opListReadCapability.reject(reason);}else{throw reason;}});};pump();}_abortOperatorList({intentState,reason,force=false}){if(!intentState.streamReader){return;}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}if(!force){if(intentState.renderTasks.size>0){return;}if(reason instanceof _display_utils.RenderingCancelledException){let delay=RENDERING_CANCELLED_TIMEOUT;if(reason.extraDelay>0&&reason.extraDelay<1000){delay+=reason.extraDelay;}intentState.streamReaderCancelTimeout=setTimeout(()=>{intentState.streamReaderCancelTimeout=null;this._abortOperatorList({intentState,reason,force:true});},delay);return;}}intentState.streamReader.cancel(new _util.AbortException(reason.message)).catch(()=>{});intentState.streamReader=null;if(this._transport.destroyed){return;}for(const[curCacheKey,curIntentState]of this._intentStates){if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break;}}this.cleanup();}get stats(){return this._stats;}}function _tryCleanup2(delayed=false){_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this);if(!_classPrivateFieldGet(this,_pendingCleanup)){return false;}if(delayed){_classPrivateFieldSet(this,_delayedCleanupTimeout,setTimeout(()=>{_classPrivateFieldSet(this,_delayedCleanupTimeout,null);_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,false);},DELAYED_CLEANUP_TIMEOUT));return false;}for(const{renderTasks,operatorList}of this._intentStates.values()){if(renderTasks.size>0||!operatorList.lastChunk){return false;}}this._intentStates.clear();this.objs.clear();_classPrivateFieldSet(this,_pendingCleanup,false);return true;}function _abortDelayedCleanup2(){if(_classPrivateFieldGet(this,_delayedCleanupTimeout)){clearTimeout(_classPrivateFieldGet(this,_delayedCleanupTimeout));_classPrivateFieldSet(this,_delayedCleanupTimeout,null);}}exports.PDFPageProxy=PDFPageProxy;var _listeners=/*#__PURE__*/new WeakMap();var _deferred=/*#__PURE__*/new WeakMap();class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,{writable:true,value:new Set()});_classPrivateFieldInitSpec(this,_deferred,{writable:true,value:Promise.resolve()});}postMessage(obj,transfer){const event={data:structuredClone(obj,transfer?{transfer}:null)};_classPrivateFieldGet(this,_deferred).then(()=>{for(const listener of _classPrivateFieldGet(this,_listeners)){listener.call(this,event);}});}addEventListener(name,listener){_classPrivateFieldGet(this,_listeners).add(listener);}removeEventListener(name,listener){_classPrivateFieldGet(this,_listeners).delete(listener);}terminate(){_classPrivateFieldGet(this,_listeners).clear();}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:false,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof require===\"function\"){PDFWorkerUtil.isWorkerDisabled=true;PDFWorkerUtil.fallbackWorkerSrc=\"./pdf.worker.js\";}else if(typeof document===\"object\"){const pdfjsFilePath=document?.currentScript?.src;if(pdfjsFilePath){PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\\.(?:min\\.)?js)(\\?.*)?$/i,\".worker$1$2\");}}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){let base;try{base=new URL(baseUrl);if(!base.origin||base.origin===\"null\"){return false;}}catch(e){return false;}const other=new URL(otherUrl,base);return base.origin===other.origin;};PDFWorkerUtil.createCDNWrapper=function(url){const wrapper=`importScripts(\"${url}\");`;return URL.createObjectURL(new Blob([wrapper]));};}class PDFWorker{constructor({name=null,port=null,verbosity=(0,_util.getVerbosityLevel)()}={}){if(port&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(port)){throw new Error(\"Cannot use more than one PDFWorker per port.\");}this.name=name;this.destroyed=false;this.verbosity=verbosity;this._readyCapability=new _util.PromiseCapability();this._port=null;this._webWorker=null;this._messageHandler=null;if(port){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(port,this);this._initializeFromPort(port);return;}this._initialize();}get promise(){return this._readyCapability.promise;}get port(){return this._port;}get messageHandler(){return this._messageHandler;}_initializeFromPort(port){this._port=port;this._messageHandler=new _message_handler.MessageHandler(\"main\",\"worker\",port);this._messageHandler.on(\"ready\",function(){});this._readyCapability.resolve();this._messageHandler.send(\"configure\",{verbosity:this.verbosity});}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc}=PDFWorker;try{if(!PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)){workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href);}const worker=new Worker(workerSrc);const messageHandler=new _message_handler.MessageHandler(\"main\",\"worker\",worker);const terminateEarly=()=>{worker.removeEventListener(\"error\",onWorkerError);messageHandler.destroy();worker.terminate();if(this.destroyed){this._readyCapability.reject(new Error(\"Worker was destroyed\"));}else{this._setupFakeWorker();}};const onWorkerError=()=>{if(!this._webWorker){terminateEarly();}};worker.addEventListener(\"error\",onWorkerError);messageHandler.on(\"test\",data=>{worker.removeEventListener(\"error\",onWorkerError);if(this.destroyed){terminateEarly();return;}if(data){this._messageHandler=messageHandler;this._port=worker;this._webWorker=worker;this._readyCapability.resolve();messageHandler.send(\"configure\",{verbosity:this.verbosity});}else{this._setupFakeWorker();messageHandler.destroy();worker.terminate();}});messageHandler.on(\"ready\",data=>{worker.removeEventListener(\"error\",onWorkerError);if(this.destroyed){terminateEarly();return;}try{sendTest();}catch(e){this._setupFakeWorker();}});const sendTest=()=>{const testObj=new Uint8Array();messageHandler.send(\"test\",testObj,[testObj.buffer]);};sendTest();return;}catch(e){(0,_util.info)(\"The worker has been disabled.\");}}this._setupFakeWorker();}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)(\"Setting up fake worker.\");PDFWorkerUtil.isWorkerDisabled=true;}PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler=>{if(this.destroyed){this._readyCapability.reject(new Error(\"Worker was destroyed\"));return;}const port=new LoopbackPort();this._port=port;const id=`fake${PDFWorkerUtil.fakeWorkerId++}`;const workerHandler=new _message_handler.MessageHandler(id+\"_worker\",id,port);WorkerMessageHandler.setup(workerHandler,port);const messageHandler=new _message_handler.MessageHandler(id,id+\"_worker\",port);this._messageHandler=messageHandler;this._readyCapability.resolve();messageHandler.send(\"configure\",{verbosity:this.verbosity});}).catch(reason=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));});}destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null;}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null;}}static fromPort(params){if(!params?.port){throw new Error(\"PDFWorker.fromPort - invalid method signature.\");}if(_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(params.port)){return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(params.port);}return new PDFWorker(params);}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc){return _worker_options.GlobalWorkerOptions.workerSrc;}if(PDFWorkerUtil.fallbackWorkerSrc!==null){if(!_is_node.isNodeJS){(0,_display_utils.deprecated)('No \"GlobalWorkerOptions.workerSrc\" specified.');}return PDFWorkerUtil.fallbackWorkerSrc;}throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null;}catch(ex){return null;}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler){return mainWorkerMessageHandler;}if(_is_node.isNodeJS&&typeof require===\"function\"){const worker=eval(\"require\")(this.workerSrc);return worker.WorkerMessageHandler;}await(0,_display_utils.loadScript)(this.workerSrc);return window.pdfjsWorker.WorkerMessageHandler;};return(0,_util.shadow)(this,\"_setupFakeWorkerGlobal\",loader());}}var _workerPorts={writable:true,value:new WeakMap()};exports.PDFWorker=PDFWorker;var _methodPromises=/*#__PURE__*/new WeakMap();var _pageCache=/*#__PURE__*/new WeakMap();var _pagePromises=/*#__PURE__*/new WeakMap();var _cacheSimpleMethod=/*#__PURE__*/new WeakSet();class WorkerTransport{constructor(messageHandler,loadingTask,networkStream,params,factory){_classPrivateMethodInitSpec(this,_cacheSimpleMethod);_classPrivateFieldInitSpec(this,_methodPromises,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_pageCache,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_pagePromises,{writable:true,value:new Map()});this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.commonObjs=new PDFObjects();this.fontLoader=new _font_loader.FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement});this._params=params;this.canvasFactory=factory.canvasFactory;this.filterFactory=factory.filterFactory;this.cMapReaderFactory=factory.cMapReaderFactory;this.standardFontDataFactory=factory.standardFontDataFactory;this.destroyed=false;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=networkStream;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=new _util.PromiseCapability();this.setupMessageHandler();}get annotationStorage(){return(0,_util.shadow)(this,\"annotationStorage\",new _annotation_storage.AnnotationStorage());}getRenderingIntent(intent,annotationMode=_util.AnnotationMode.ENABLE,printAnnotationStorage=null,isOpList=false){let renderingIntent=_util.RenderingIntentFlag.DISPLAY;let annotationMap=null;switch(intent){case\"any\":renderingIntent=_util.RenderingIntentFlag.ANY;break;case\"display\":break;case\"print\":renderingIntent=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${intent}`);}switch(annotationMode){case _util.AnnotationMode.DISABLE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:renderingIntent+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;const annotationStorage=renderingIntent&_util.RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof _annotation_storage.PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage;annotationMap=annotationStorage.serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);}if(isOpList){renderingIntent+=_util.RenderingIntentFlag.OPLIST;}return{renderingIntent,cacheKey:`${renderingIntent}_${_annotation_storage.AnnotationStorage.getHash(annotationMap)}`,annotationStorageMap:annotationMap};}destroy(){if(this.destroyCapability){return this.destroyCapability.promise;}this.destroyed=true;this.destroyCapability=new _util.PromiseCapability();if(this._passwordCapability){this._passwordCapability.reject(new Error(\"Worker was destroyed during onPassword callback\"));}const waitOn=[];for(const page of _classPrivateFieldGet(this,_pageCache).values()){waitOn.push(page._destroy());}_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();if(this.hasOwnProperty(\"annotationStorage\")){this.annotationStorage.resetModified();}const terminated=this.messageHandler.sendWithPromise(\"Terminate\",null);waitOn.push(terminated);Promise.all(waitOn).then(()=>{this.commonObjs.clear();this.fontLoader.clear();_classPrivateFieldGet(this,_methodPromises).clear();this.filterFactory.destroy();if(this._networkStream){this._networkStream.cancelAllRequests(new _util.AbortException(\"Worker was terminated.\"));}if(this.messageHandler){this.messageHandler.destroy();this.messageHandler=null;}this.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;}setupMessageHandler(){const{messageHandler,loadingTask}=this;messageHandler.on(\"GetReader\",(data,sink)=>{(0,_util.assert)(this._networkStream,\"GetReader - no `IPDFStream` instance available.\");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=evt=>{this._lastProgress={loaded:evt.loaded,total:evt.total};};sink.onPull=()=>{this._fullReader.read().then(function({value,done}){if(done){sink.close();return;}(0,_util.assert)(value instanceof ArrayBuffer,\"GetReader - expected an ArrayBuffer.\");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(reason=>{sink.error(reason);});};sink.onCancel=reason=>{this._fullReader.cancel(reason);sink.ready.catch(readyReason=>{if(this.destroyed){return;}throw readyReason;});};});messageHandler.on(\"ReaderHeadersReady\",data=>{const headersCapability=new _util.PromiseCapability();const fullReader=this._fullReader;fullReader.headersReady.then(()=>{if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(this._lastProgress){loadingTask.onProgress?.(this._lastProgress);}fullReader.onProgress=evt=>{loadingTask.onProgress?.({loaded:evt.loaded,total:evt.total});};}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength});},headersCapability.reject);return headersCapability.promise;});messageHandler.on(\"GetRangeReader\",(data,sink)=>{(0,_util.assert)(this._networkStream,\"GetRangeReader - no `IPDFStream` instance available.\");const rangeReader=this._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return;}sink.onPull=()=>{rangeReader.read().then(function({value,done}){if(done){sink.close();return;}(0,_util.assert)(value instanceof ArrayBuffer,\"GetRangeReader - expected an ArrayBuffer.\");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(reason=>{sink.error(reason);});};sink.onCancel=reason=>{rangeReader.cancel(reason);sink.ready.catch(readyReason=>{if(this.destroyed){return;}throw readyReason;});};});messageHandler.on(\"GetDoc\",({pdfInfo})=>{this._numPages=pdfInfo.numPages;this._htmlForXfa=pdfInfo.htmlForXfa;delete pdfInfo.htmlForXfa;loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,this));});messageHandler.on(\"DocException\",function(ex){let reason;switch(ex.name){case\"PasswordException\":reason=new _util.PasswordException(ex.message,ex.code);break;case\"InvalidPDFException\":reason=new _util.InvalidPDFException(ex.message);break;case\"MissingPDFException\":reason=new _util.MissingPDFException(ex.message);break;case\"UnexpectedResponseException\":reason=new _util.UnexpectedResponseException(ex.message,ex.status);break;case\"UnknownErrorException\":reason=new _util.UnknownErrorException(ex.message,ex.details);break;default:(0,_util.unreachable)(\"DocException - expected a valid Error.\");}loadingTask._capability.reject(reason);});messageHandler.on(\"PasswordRequest\",exception=>{this._passwordCapability=new _util.PromiseCapability();if(loadingTask.onPassword){const updatePassword=password=>{if(password instanceof Error){this._passwordCapability.reject(password);}else{this._passwordCapability.resolve({password});}};try{loadingTask.onPassword(updatePassword,exception.code);}catch(ex){this._passwordCapability.reject(ex);}}else{this._passwordCapability.reject(new _util.PasswordException(exception.message,exception.code));}return this._passwordCapability.promise;});messageHandler.on(\"DataLoaded\",data=>{loadingTask.onProgress?.({loaded:data.length,total:data.length});this.downloadInfoCapability.resolve(data);});messageHandler.on(\"StartRenderPage\",data=>{if(this.destroyed){return;}const page=_classPrivateFieldGet(this,_pageCache).get(data.pageIndex);page._startRenderPage(data.transparency,data.cacheKey);});messageHandler.on(\"commonobj\",([id,type,exportedData])=>{if(this.destroyed){return;}if(this.commonObjs.has(id)){return;}switch(type){case\"Font\":const params=this._params;if(\"error\"in exportedData){const exportedError=exportedData.error;(0,_util.warn)(`Error during font loading: ${exportedError}`);this.commonObjs.resolve(id,exportedError);break;}const inspectFont=params.pdfBug&&globalThis.FontInspector?.enabled?(font,url)=>globalThis.FontInspector.fontAdded(font,url):null;const font=new _font_loader.FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont});this.fontLoader.bind(font).catch(reason=>{return messageHandler.sendWithPromise(\"FontFallback\",{id});}).finally(()=>{if(!params.fontExtraProperties&&font.data){font.data=null;}this.commonObjs.resolve(id,font);});break;case\"FontPath\":case\"Image\":case\"Pattern\":this.commonObjs.resolve(id,exportedData);break;default:throw new Error(`Got unknown common object type ${type}`);}});messageHandler.on(\"obj\",([id,pageIndex,type,imageData])=>{if(this.destroyed){return;}const pageProxy=_classPrivateFieldGet(this,_pageCache).get(pageIndex);if(pageProxy.objs.has(id)){return;}switch(type){case\"Image\":pageProxy.objs.resolve(id,imageData);if(imageData){let length;if(imageData.bitmap){const{width,height}=imageData;length=width*height*4;}else{length=imageData.data?.length||0;}if(length>_util.MAX_IMAGE_SIZE_TO_CACHE){pageProxy._maybeCleanupAfterRender=true;}}break;case\"Pattern\":pageProxy.objs.resolve(id,imageData);break;default:throw new Error(`Got unknown object type ${type}`);}});messageHandler.on(\"DocProgress\",data=>{if(this.destroyed){return;}loadingTask.onProgress?.({loaded:data.loaded,total:data.total});});messageHandler.on(\"FetchBuiltInCMap\",data=>{if(this.destroyed){return Promise.reject(new Error(\"Worker was destroyed.\"));}if(!this.cMapReaderFactory){return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));}return this.cMapReaderFactory.fetch(data);});messageHandler.on(\"FetchStandardFontData\",data=>{if(this.destroyed){return Promise.reject(new Error(\"Worker was destroyed.\"));}if(!this.standardFontDataFactory){return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));}return this.standardFontDataFactory.fetch(data);});}getData(){return this.messageHandler.sendWithPromise(\"GetData\",null);}saveDocument(){if(this.annotationStorage.size<=0){(0,_util.warn)(\"saveDocument called while `annotationStorage` is empty, \"+\"please use the getData-method instead.\");}return this.messageHandler.sendWithPromise(\"SaveDocument\",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified();});}getPage(pageNumber){if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages){return Promise.reject(new Error(\"Invalid page request.\"));}const pageIndex=pageNumber-1,cachedPromise=_classPrivateFieldGet(this,_pagePromises).get(pageIndex);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(\"GetPage\",{pageIndex}).then(pageInfo=>{if(this.destroyed){throw new Error(\"Transport destroyed\");}const page=new PDFPageProxy(pageIndex,pageInfo,this,this._params.pdfBug);_classPrivateFieldGet(this,_pageCache).set(pageIndex,page);return page;});_classPrivateFieldGet(this,_pagePromises).set(pageIndex,promise);return promise;}getPageIndex(ref){if(typeof ref!==\"object\"||ref===null||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0){return Promise.reject(new Error(\"Invalid pageIndex request.\"));}return this.messageHandler.sendWithPromise(\"GetPageIndex\",{num:ref.num,gen:ref.gen});}getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise(\"GetAnnotations\",{pageIndex,intent});}getFieldObjects(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,\"GetFieldObjects\");}hasJSActions(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,\"HasJSActions\");}getCalculationOrderIds(){return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\",null);}getDestinations(){return this.messageHandler.sendWithPromise(\"GetDestinations\",null);}getDestination(id){if(typeof id!==\"string\"){return Promise.reject(new Error(\"Invalid destination request.\"));}return this.messageHandler.sendWithPromise(\"GetDestination\",{id});}getPageLabels(){return this.messageHandler.sendWithPromise(\"GetPageLabels\",null);}getPageLayout(){return this.messageHandler.sendWithPromise(\"GetPageLayout\",null);}getPageMode(){return this.messageHandler.sendWithPromise(\"GetPageMode\",null);}getViewerPreferences(){return this.messageHandler.sendWithPromise(\"GetViewerPreferences\",null);}getOpenAction(){return this.messageHandler.sendWithPromise(\"GetOpenAction\",null);}getAttachments(){return this.messageHandler.sendWithPromise(\"GetAttachments\",null);}getJavaScript(){return this.messageHandler.sendWithPromise(\"GetJavaScript\",null);}getDocJSActions(){return this.messageHandler.sendWithPromise(\"GetDocJSActions\",null);}getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise(\"GetPageJSActions\",{pageIndex});}getStructTree(pageIndex){return this.messageHandler.sendWithPromise(\"GetStructTree\",{pageIndex});}getOutline(){return this.messageHandler.sendWithPromise(\"GetOutline\",null);}getOptionalContentConfig(){return this.messageHandler.sendWithPromise(\"GetOptionalContentConfig\",null).then(results=>{return new _optional_content_config.OptionalContentConfig(results);});}getPermissions(){return this.messageHandler.sendWithPromise(\"GetPermissions\",null);}getMetadata(){const name=\"GetMetadata\",cachedPromise=_classPrivateFieldGet(this,_methodPromises).get(name);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(name,null).then(results=>{return{info:results[0],metadata:results[1]?new _metadata.Metadata(results[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null};});_classPrivateFieldGet(this,_methodPromises).set(name,promise);return promise;}getMarkInfo(){return this.messageHandler.sendWithPromise(\"GetMarkInfo\",null);}async startCleanup(keepLoadedFonts=false){if(this.destroyed){return;}await this.messageHandler.sendWithPromise(\"Cleanup\",null);for(const page of _classPrivateFieldGet(this,_pageCache).values()){const cleanupSuccessful=page.cleanup();if(!cleanupSuccessful){throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);}}this.commonObjs.clear();if(!keepLoadedFonts){this.fontLoader.clear();}_classPrivateFieldGet(this,_methodPromises).clear();this.filterFactory.destroy(true);}get loadingParams(){const{disableAutoFetch,enableXfa}=this._params;return(0,_util.shadow)(this,\"loadingParams\",{disableAutoFetch,enableXfa});}}function _cacheSimpleMethod2(name,data=null){const cachedPromise=_classPrivateFieldGet(this,_methodPromises).get(name);if(cachedPromise){return cachedPromise;}const promise=this.messageHandler.sendWithPromise(name,data);_classPrivateFieldGet(this,_methodPromises).set(name,promise);return promise;}var _objs=/*#__PURE__*/new WeakMap();var _ensureObj=/*#__PURE__*/new WeakSet();class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:true,value:Object.create(null)});}get(objId,callback=null){if(callback){const obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);obj.capability.promise.then(()=>callback(obj.data));return null;}const obj=_classPrivateFieldGet(this,_objs)[objId];if(!obj?.capability.settled){throw new Error(`Requesting object that isn't resolved yet ${objId}.`);}return obj.data;}has(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];return obj?.capability.settled||false;}resolve(objId,data=null){const obj=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,objId);obj.data=data;obj.capability.resolve();}clear(){for(const objId in _classPrivateFieldGet(this,_objs)){const{data}=_classPrivateFieldGet(this,_objs)[objId];data?.bitmap?.close();}_classPrivateFieldSet(this,_objs,Object.create(null));}}function _ensureObj2(objId){const obj=_classPrivateFieldGet(this,_objs)[objId];if(obj){return obj;}return _classPrivateFieldGet(this,_objs)[objId]={capability:new _util.PromiseCapability(),data:null};}var _internalRenderTask=/*#__PURE__*/new WeakMap();class RenderTask{constructor(internalRenderTask){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:true,value:null});_classPrivateFieldSet(this,_internalRenderTask,internalRenderTask);this.onContinue=null;}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise;}cancel(extraDelay=0){_classPrivateFieldGet(this,_internalRenderTask).cancel(null,extraDelay);}get separateAnnots(){const{separateAnnots}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!separateAnnots){return false;}const{annotationCanvasMap}=_classPrivateFieldGet(this,_internalRenderTask);return separateAnnots.form||separateAnnots.canvas&&annotationCanvasMap?.size>0;}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback,params,objs,commonObjs,annotationCanvasMap,operatorList,pageIndex,canvasFactory,filterFactory,useRequestAnimationFrame=false,pdfBug=false,pageColors=null}){this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.annotationCanvasMap=annotationCanvasMap;this.operatorListIdx=null;this.operatorList=operatorList;this._pageIndex=pageIndex;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this._pdfBug=pdfBug;this.pageColors=pageColors;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=useRequestAnimationFrame===true&&typeof window!==\"undefined\";this.cancelled=false;this.capability=new _util.PromiseCapability();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=params.canvasContext.canvas;}get completed(){return this.capability.promise.catch(function(){});}initializeGraphics({transparency=false,optionalContentConfig}){if(this.cancelled){return;}if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas)){throw new Error(\"Cannot use the same canvas during multiple render() operations. \"+\"Use different canvas or ensure previous operations were \"+\"cancelled or completed.\");}_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas);}if(this._pdfBug&&globalThis.StepperManager?.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}const{canvasContext,viewport,transform,background}=this.params;this.gfx=new _canvas.CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig},this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform,viewport,transparency,background});this.operatorListIdx=0;this.graphicsReady=true;this.graphicsReadyCallback?.();}cancel(error=null,extraDelay=0){this.running=false;this.cancelled=true;this.gfx?.endDrawing();if(this._canvas){_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);}this.callback(error||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,\"canvas\",extraDelay));}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return;}this.stepper?.updateOperatorList(this.operatorList);if(this.running){return;}this._continue();}_continue(){this.running=true;if(this.cancelled){return;}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound);}else{this._scheduleNext();}}_scheduleNext(){if(this._useRequestAnimationFrame){window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound);});}else{Promise.resolve().then(this._nextBound).catch(this._cancelBound);}}async _next(){if(this.cancelled){return;}this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing(this.pageColors);if(this._canvas){_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);}this.callback();}}}}var _canvasInUse={writable:true,value:new WeakSet()};const version='3.7.107';exports.version=version;const build='036f855dc';exports.build=build;/***/},/* 3 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.PrintAnnotationStorage=exports.AnnotationStorage=void 0;var _util=__w_pdfjs_require__(1);var _editor=__w_pdfjs_require__(4);var _murmurhash=__w_pdfjs_require__(8);var _modified=/*#__PURE__*/new WeakMap();var _storage=/*#__PURE__*/new WeakMap();var _setModified=/*#__PURE__*/new WeakSet();class AnnotationStorage{constructor(){_classPrivateMethodInitSpec(this,_setModified);_classPrivateFieldInitSpec(this,_modified,{writable:true,value:false});_classPrivateFieldInitSpec(this,_storage,{writable:true,value:new Map()});this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null;}getValue(key,defaultValue){const value=_classPrivateFieldGet(this,_storage).get(key);if(value===undefined){return defaultValue;}return Object.assign(defaultValue,value);}getRawValue(key){return _classPrivateFieldGet(this,_storage).get(key);}remove(key){_classPrivateFieldGet(this,_storage).delete(key);if(_classPrivateFieldGet(this,_storage).size===0){this.resetModified();}if(typeof this.onAnnotationEditor===\"function\"){for(const value of _classPrivateFieldGet(this,_storage).values()){if(value instanceof _editor.AnnotationEditor){return;}}this.onAnnotationEditor(null);}}setValue(key,value){const obj=_classPrivateFieldGet(this,_storage).get(key);let modified=false;if(obj!==undefined){for(const[entry,val]of Object.entries(value)){if(obj[entry]!==val){modified=true;obj[entry]=val;}}}else{modified=true;_classPrivateFieldGet(this,_storage).set(key,value);}if(modified){_classPrivateMethodGet(this,_setModified,_setModified2).call(this);}if(value instanceof _editor.AnnotationEditor&&typeof this.onAnnotationEditor===\"function\"){this.onAnnotationEditor(value.constructor._type);}}has(key){return _classPrivateFieldGet(this,_storage).has(key);}getAll(){return _classPrivateFieldGet(this,_storage).size>0?(0,_util.objectFromMap)(_classPrivateFieldGet(this,_storage)):null;}setAll(obj){for(const[key,val]of Object.entries(obj)){this.setValue(key,val);}}get size(){return _classPrivateFieldGet(this,_storage).size;}resetModified(){if(_classPrivateFieldGet(this,_modified)){_classPrivateFieldSet(this,_modified,false);if(typeof this.onResetModified===\"function\"){this.onResetModified();}}}get print(){return new PrintAnnotationStorage(this);}get serializable(){if(_classPrivateFieldGet(this,_storage).size===0){return null;}const clone=new Map();for(const[key,val]of _classPrivateFieldGet(this,_storage)){const serialized=val instanceof _editor.AnnotationEditor?val.serialize():val;if(serialized){clone.set(key,serialized);}}return clone;}static getHash(map){if(!map){return\"\";}const hash=new _murmurhash.MurmurHash3_64();for(const[key,val]of map){hash.update(`${key}:${JSON.stringify(val)}`);}return hash.hexdigest();}}function _setModified2(){if(!_classPrivateFieldGet(this,_modified)){_classPrivateFieldSet(this,_modified,true);if(typeof this.onSetModified===\"function\"){this.onSetModified();}}}exports.AnnotationStorage=AnnotationStorage;var _serializable=/*#__PURE__*/new WeakMap();class PrintAnnotationStorage extends AnnotationStorage{constructor(parent){super();_classPrivateFieldInitSpec(this,_serializable,{writable:true,value:null});_classPrivateFieldSet(this,_serializable,structuredClone(parent.serializable));}get print(){(0,_util.unreachable)(\"Should not call PrintAnnotationStorage.print\");}get serializable(){return _classPrivateFieldGet(this,_serializable);}}exports.PrintAnnotationStorage=PrintAnnotationStorage;/***/},/* 4 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.AnnotationEditor=void 0;var _tools=__w_pdfjs_require__(5);var _util=__w_pdfjs_require__(1);var _boundFocusin=/*#__PURE__*/new WeakMap();var _boundFocusout=/*#__PURE__*/new WeakMap();var _hasBeenSelected=/*#__PURE__*/new WeakMap();var _isEditing=/*#__PURE__*/new WeakMap();var _isInEditMode=/*#__PURE__*/new WeakMap();var _zIndex=/*#__PURE__*/new WeakMap();class AnnotationEditor{constructor(parameters){_classPrivateFieldInitSpec(this,_boundFocusin,{writable:true,value:this.focusin.bind(this)});_classPrivateFieldInitSpec(this,_boundFocusout,{writable:true,value:this.focusout.bind(this)});_classPrivateFieldInitSpec(this,_hasBeenSelected,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isEditing,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isInEditMode,{writable:true,value:false});_defineProperty(this,\"_uiManager\",null);_classPrivateFieldInitSpec(this,_zIndex,{writable:true,value:AnnotationEditor._zIndex++});if(this.constructor===AnnotationEditor){(0,_util.unreachable)(\"Cannot initialize AnnotationEditor.\");}this.parent=parameters.parent;this.id=parameters.id;this.width=this.height=null;this.pageIndex=parameters.parent.pageIndex;this.name=parameters.name;this.div=null;this._uiManager=parameters.uiManager;const{rotation,rawDims:{pageWidth,pageHeight,pageX,pageY}}=this.parent.viewport;this.rotation=rotation;this.pageRotation=(360+rotation-this._uiManager.viewParameters.rotation)%360;this.pageDimensions=[pageWidth,pageHeight];this.pageTranslation=[pageX,pageY];const[width,height]=this.parentDimensions;this.x=parameters.x/width;this.y=parameters.y/height;this.isAttachedToDOM=false;}static get _defaultLineColor(){return(0,_util.shadow)(this,\"_defaultLineColor\",this._colorManager.getHexCode(\"CanvasText\"));}addCommands(params){this._uiManager.addCommands(params);}get currentLayer(){return this._uiManager.currentLayer;}setInBackground(){this.div.style.zIndex=0;}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,_zIndex);}setParent(parent){if(parent!==null){this.pageIndex=parent.pageIndex;this.pageDimensions=parent.pageDimensions;}this.parent=parent;}focusin(event){if(!_classPrivateFieldGet(this,_hasBeenSelected)){this.parent.setSelected(this);}else{_classPrivateFieldSet(this,_hasBeenSelected,false);}}focusout(event){if(!this.isAttachedToDOM){return;}const target=event.relatedTarget;if(target?.closest(`#${this.id}`)){return;}event.preventDefault();if(!this.parent?.isMultipleSelection){this.commitOrRemove();}}commitOrRemove(){if(this.isEmpty()){this.remove();}else{this.commit();}}commit(){this.addToAnnotationStorage();}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this);}dragstart(event){const rect=this.parent.div.getBoundingClientRect();this.startX=event.clientX-rect.x;this.startY=event.clientY-rect.y;event.dataTransfer.setData(\"text/plain\",this.id);event.dataTransfer.effectAllowed=\"move\";}setAt(x,y,tx,ty){const[width,height]=this.parentDimensions;[tx,ty]=this.screenToPageTranslation(tx,ty);this.x=(x+tx)/width;this.y=(y+ty)/height;this.div.style.left=`${100*this.x}%`;this.div.style.top=`${100*this.y}%`;}translate(x,y){const[width,height]=this.parentDimensions;[x,y]=this.screenToPageTranslation(x,y);this.x+=x/width;this.y+=y/height;this.div.style.left=`${100*this.x}%`;this.div.style.top=`${100*this.y}%`;}screenToPageTranslation(x,y){switch(this.parentRotation){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y];}}get parentScale(){return this._uiManager.viewParameters.realScale;}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360;}get parentDimensions(){const{realScale}=this._uiManager.viewParameters;const[pageWidth,pageHeight]=this.pageDimensions;return[pageWidth*realScale,pageHeight*realScale];}setDims(width,height){const[parentWidth,parentHeight]=this.parentDimensions;this.div.style.width=`${100*width/parentWidth}%`;this.div.style.height=`${100*height/parentHeight}%`;}fixDims(){const{style}=this.div;const{height,width}=style;const widthPercent=width.endsWith(\"%\");const heightPercent=height.endsWith(\"%\");if(widthPercent&&heightPercent){return;}const[parentWidth,parentHeight]=this.parentDimensions;if(!widthPercent){style.width=`${100*parseFloat(width)/parentWidth}%`;}if(!heightPercent){style.height=`${100*parseFloat(height)/parentHeight}%`;}}getInitialTranslation(){return[0,0];}render(){this.div=document.createElement(\"div\");this.div.setAttribute(\"data-editor-rotation\",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute(\"id\",this.id);this.div.setAttribute(\"tabIndex\",0);this.setInForeground();this.div.addEventListener(\"focusin\",_classPrivateFieldGet(this,_boundFocusin));this.div.addEventListener(\"focusout\",_classPrivateFieldGet(this,_boundFocusout));const[tx,ty]=this.getInitialTranslation();this.translate(tx,ty);(0,_tools.bindEvents)(this,this.div,[\"dragstart\",\"pointerdown\"]);return this.div;}pointerdown(event){const{isMac}=_util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return;}if(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac){this.parent.toggleSelected(this);}else{this.parent.setSelected(this);}_classPrivateFieldSet(this,_hasBeenSelected,true);}getRect(tx,ty){const scale=this.parentScale;const[pageWidth,pageHeight]=this.pageDimensions;const[pageX,pageY]=this.pageTranslation;const shiftX=tx/scale;const shiftY=ty/scale;const x=this.x*pageWidth;const y=this.y*pageHeight;const width=this.width*pageWidth;const height=this.height*pageHeight;switch(this.rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error(\"Invalid rotation\");}}getRectInCurrentCoords(rect,pageHeight){const[x1,y1,x2,y2]=rect;const width=x2-x1;const height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error(\"Invalid rotation\");}}onceAdded(){}isEmpty(){return false;}enableEditMode(){_classPrivateFieldSet(this,_isInEditMode,true);}disableEditMode(){_classPrivateFieldSet(this,_isInEditMode,false);}isInEditMode(){return _classPrivateFieldGet(this,_isInEditMode);}shouldGetKeyboardEvents(){return false;}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM;}rebuild(){this.div?.addEventListener(\"focusin\",_classPrivateFieldGet(this,_boundFocusin));}serialize(){(0,_util.unreachable)(\"An editor must be serializable\");}static deserialize(data,parent,uiManager){const editor=new this.prototype.constructor({parent,id:parent.getNextId(),uiManager});editor.rotation=data.rotation;const[pageWidth,pageHeight]=editor.pageDimensions;const[x,y,width,height]=editor.getRectInCurrentCoords(data.rect,pageHeight);editor.x=x/pageWidth;editor.y=y/pageHeight;editor.width=width/pageWidth;editor.height=height/pageHeight;return editor;}remove(){this.div.removeEventListener(\"focusin\",_classPrivateFieldGet(this,_boundFocusin));this.div.removeEventListener(\"focusout\",_classPrivateFieldGet(this,_boundFocusout));if(!this.isEmpty()){this.commit();}this.parent.remove(this);}select(){this.div?.classList.add(\"selectedEditor\");}unselect(){this.div?.classList.remove(\"selectedEditor\");}updateParams(type,value){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{};}get contentDiv(){return this.div;}get isEditing(){return _classPrivateFieldGet(this,_isEditing);}set isEditing(value){_classPrivateFieldSet(this,_isEditing,value);if(value){this.parent.setSelected(this);this.parent.setActiveEditor(this);}else{this.parent.setActiveEditor(null);}}}_defineProperty(AnnotationEditor,\"_colorManager\",new _tools.ColorManager());_defineProperty(AnnotationEditor,\"_zIndex\",1);exports.AnnotationEditor=AnnotationEditor;/***/},/* 5 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.KeyboardManager=exports.CommandManager=exports.ColorManager=exports.AnnotationEditorUIManager=void 0;exports.bindEvents=bindEvents;exports.opacityToHex=opacityToHex;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(6);function bindEvents(obj,element,names){for(const name of names){element.addEventListener(name,obj[name].bind(obj));}}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,\"0\");}var _id=/*#__PURE__*/new WeakMap();class IdManager{constructor(){_classPrivateFieldInitSpec(this,_id,{writable:true,value:0});}getId(){var _this$id,_this$id2;return`${_util.AnnotationEditorPrefix}${(_classPrivateFieldSet(this,_id,(_this$id=_classPrivateFieldGet(this,_id),_this$id2=_this$id++,_this$id)),_this$id2)}`;}}var _commands=/*#__PURE__*/new WeakMap();var _locked=/*#__PURE__*/new WeakMap();var _maxSize=/*#__PURE__*/new WeakMap();var _position=/*#__PURE__*/new WeakMap();class CommandManager{constructor(maxSize=128){_classPrivateFieldInitSpec(this,_commands,{writable:true,value:[]});_classPrivateFieldInitSpec(this,_locked,{writable:true,value:false});_classPrivateFieldInitSpec(this,_maxSize,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_position,{writable:true,value:-1});_classPrivateFieldSet(this,_maxSize,maxSize);}add({cmd,undo,mustExec,type=NaN,overwriteIfSameType=false,keepUndo=false}){if(mustExec){cmd();}if(_classPrivateFieldGet(this,_locked)){return;}const save={cmd,undo,type};if(_classPrivateFieldGet(this,_position)===-1){if(_classPrivateFieldGet(this,_commands).length>0){_classPrivateFieldGet(this,_commands).length=0;}_classPrivateFieldSet(this,_position,0);_classPrivateFieldGet(this,_commands).push(save);return;}if(overwriteIfSameType&&_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].type===type){if(keepUndo){save.undo=_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].undo;}_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)]=save;return;}const next=_classPrivateFieldGet(this,_position)+1;if(next===_classPrivateFieldGet(this,_maxSize)){_classPrivateFieldGet(this,_commands).splice(0,1);}else{_classPrivateFieldSet(this,_position,next);if(next<_classPrivateFieldGet(this,_commands).length){_classPrivateFieldGet(this,_commands).splice(next);}}_classPrivateFieldGet(this,_commands).push(save);}undo(){if(_classPrivateFieldGet(this,_position)===-1){return;}_classPrivateFieldSet(this,_locked,true);_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].undo();_classPrivateFieldSet(this,_locked,false);_classPrivateFieldSet(this,_position,_classPrivateFieldGet(this,_position)-1);}redo(){if(_classPrivateFieldGet(this,_position)<_classPrivateFieldGet(this,_commands).length-1){_classPrivateFieldSet(this,_position,_classPrivateFieldGet(this,_position)+1);_classPrivateFieldSet(this,_locked,true);_classPrivateFieldGet(this,_commands)[_classPrivateFieldGet(this,_position)].cmd();_classPrivateFieldSet(this,_locked,false);}}hasSomethingToUndo(){return _classPrivateFieldGet(this,_position)!==-1;}hasSomethingToRedo(){return _classPrivateFieldGet(this,_position)<_classPrivateFieldGet(this,_commands).length-1;}destroy(){_classPrivateFieldSet(this,_commands,null);}}exports.CommandManager=CommandManager;var _serialize=/*#__PURE__*/new WeakSet();class KeyboardManager{constructor(callbacks){_classPrivateMethodInitSpec(this,_serialize);this.buffer=[];this.callbacks=new Map();this.allKeys=new Set();const{isMac}=_util.FeatureTest.platform;for(const[keys,callback]of callbacks){for(const key of keys){const isMacKey=key.startsWith(\"mac+\");if(isMac&&isMacKey){this.callbacks.set(key.slice(4),callback);this.allKeys.add(key.split(\"+\").at(-1));}else if(!isMac&&!isMacKey){this.callbacks.set(key,callback);this.allKeys.add(key.split(\"+\").at(-1));}}}}exec(self,event){if(!this.allKeys.has(event.key)){return;}const callback=this.callbacks.get(_classPrivateMethodGet(this,_serialize,_serialize2).call(this,event));if(!callback){return;}callback.bind(self)();event.stopPropagation();event.preventDefault();}}function _serialize2(event){if(event.altKey){this.buffer.push(\"alt\");}if(event.ctrlKey){this.buffer.push(\"ctrl\");}if(event.metaKey){this.buffer.push(\"meta\");}if(event.shiftKey){this.buffer.push(\"shift\");}this.buffer.push(event.key);const str=this.buffer.join(\"+\");this.buffer.length=0;return str;}exports.KeyboardManager=KeyboardManager;class ColorManager{get _colors(){const colors=new Map([[\"CanvasText\",null],[\"Canvas\",null]]);(0,_display_utils.getColorValues)(colors);return(0,_util.shadow)(this,\"_colors\",colors);}convert(color){const rgb=(0,_display_utils.getRGB)(color);if(!window.matchMedia(\"(forced-colors: active)\").matches){return rgb;}for(const[name,RGB]of this._colors){if(RGB.every((x,i)=>x===rgb[i])){return ColorManager._colorsMapping.get(name);}}return rgb;}getHexCode(name){const rgb=this._colors.get(name);if(!rgb){return name;}return _util.Util.makeHexColor(...rgb);}}_defineProperty(ColorManager,\"_colorsMapping\",new Map([[\"CanvasText\",[0,0,0]],[\"Canvas\",[255,255,255]]]));exports.ColorManager=ColorManager;var _activeEditor=/*#__PURE__*/new WeakMap();var _allEditors=/*#__PURE__*/new WeakMap();var _allLayers=/*#__PURE__*/new WeakMap();var _annotationStorage=/*#__PURE__*/new WeakMap();var _commandManager=/*#__PURE__*/new WeakMap();var _currentPageIndex=/*#__PURE__*/new WeakMap();var _editorTypes=/*#__PURE__*/new WeakMap();var _editorsToRescale=/*#__PURE__*/new WeakMap();var _eventBus=/*#__PURE__*/new WeakMap();var _idManager=/*#__PURE__*/new WeakMap();var _isEnabled=/*#__PURE__*/new WeakMap();var _mode=/*#__PURE__*/new WeakMap();var _selectedEditors=/*#__PURE__*/new WeakMap();var _boundCopy=/*#__PURE__*/new WeakMap();var _boundCut=/*#__PURE__*/new WeakMap();var _boundPaste=/*#__PURE__*/new WeakMap();var _boundKeydown=/*#__PURE__*/new WeakMap();var _boundOnEditingAction=/*#__PURE__*/new WeakMap();var _boundOnPageChanging=/*#__PURE__*/new WeakMap();var _boundOnScaleChanging=/*#__PURE__*/new WeakMap();var _boundOnRotationChanging=/*#__PURE__*/new WeakMap();var _previousStates=/*#__PURE__*/new WeakMap();var _container=/*#__PURE__*/new WeakMap();var _addKeyboardManager=/*#__PURE__*/new WeakSet();var _removeKeyboardManager=/*#__PURE__*/new WeakSet();var _addCopyPasteListeners=/*#__PURE__*/new WeakSet();var _removeCopyPasteListeners=/*#__PURE__*/new WeakSet();var _dispatchUpdateStates=/*#__PURE__*/new WeakSet();var _dispatchUpdateUI=/*#__PURE__*/new WeakSet();var _enableAll=/*#__PURE__*/new WeakSet();var _disableAll=/*#__PURE__*/new WeakSet();var _addEditorToLayer=/*#__PURE__*/new WeakSet();var _isEmpty=/*#__PURE__*/new WeakSet();var _selectEditors=/*#__PURE__*/new WeakSet();class AnnotationEditorUIManager{constructor(container,eventBus,annotationStorage){_classPrivateMethodInitSpec(this,_selectEditors);_classPrivateMethodInitSpec(this,_isEmpty);_classPrivateMethodInitSpec(this,_addEditorToLayer);_classPrivateMethodInitSpec(this,_disableAll);_classPrivateMethodInitSpec(this,_enableAll);_classPrivateMethodInitSpec(this,_dispatchUpdateUI);_classPrivateMethodInitSpec(this,_dispatchUpdateStates);_classPrivateMethodInitSpec(this,_removeCopyPasteListeners);_classPrivateMethodInitSpec(this,_addCopyPasteListeners);_classPrivateMethodInitSpec(this,_removeKeyboardManager);_classPrivateMethodInitSpec(this,_addKeyboardManager);_classPrivateFieldInitSpec(this,_activeEditor,{writable:true,value:null});_classPrivateFieldInitSpec(this,_allEditors,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_allLayers,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_annotationStorage,{writable:true,value:null});_classPrivateFieldInitSpec(this,_commandManager,{writable:true,value:new CommandManager()});_classPrivateFieldInitSpec(this,_currentPageIndex,{writable:true,value:0});_classPrivateFieldInitSpec(this,_editorTypes,{writable:true,value:null});_classPrivateFieldInitSpec(this,_editorsToRescale,{writable:true,value:new Set()});_classPrivateFieldInitSpec(this,_eventBus,{writable:true,value:null});_classPrivateFieldInitSpec(this,_idManager,{writable:true,value:new IdManager()});_classPrivateFieldInitSpec(this,_isEnabled,{writable:true,value:false});_classPrivateFieldInitSpec(this,_mode,{writable:true,value:_util.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,_selectedEditors,{writable:true,value:new Set()});_classPrivateFieldInitSpec(this,_boundCopy,{writable:true,value:this.copy.bind(this)});_classPrivateFieldInitSpec(this,_boundCut,{writable:true,value:this.cut.bind(this)});_classPrivateFieldInitSpec(this,_boundPaste,{writable:true,value:this.paste.bind(this)});_classPrivateFieldInitSpec(this,_boundKeydown,{writable:true,value:this.keydown.bind(this)});_classPrivateFieldInitSpec(this,_boundOnEditingAction,{writable:true,value:this.onEditingAction.bind(this)});_classPrivateFieldInitSpec(this,_boundOnPageChanging,{writable:true,value:this.onPageChanging.bind(this)});_classPrivateFieldInitSpec(this,_boundOnScaleChanging,{writable:true,value:this.onScaleChanging.bind(this)});_classPrivateFieldInitSpec(this,_boundOnRotationChanging,{writable:true,value:this.onRotationChanging.bind(this)});_classPrivateFieldInitSpec(this,_previousStates,{writable:true,value:{isEditing:false,isEmpty:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false}});_classPrivateFieldInitSpec(this,_container,{writable:true,value:null});_classPrivateFieldSet(this,_container,container);_classPrivateFieldSet(this,_eventBus,eventBus);_classPrivateFieldGet(this,_eventBus)._on(\"editingaction\",_classPrivateFieldGet(this,_boundOnEditingAction));_classPrivateFieldGet(this,_eventBus)._on(\"pagechanging\",_classPrivateFieldGet(this,_boundOnPageChanging));_classPrivateFieldGet(this,_eventBus)._on(\"scalechanging\",_classPrivateFieldGet(this,_boundOnScaleChanging));_classPrivateFieldGet(this,_eventBus)._on(\"rotationchanging\",_classPrivateFieldGet(this,_boundOnRotationChanging));_classPrivateFieldSet(this,_annotationStorage,annotationStorage);this.viewParameters={realScale:_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0};}destroy(){_classPrivateMethodGet(this,_removeKeyboardManager,_removeKeyboardManager2).call(this);_classPrivateFieldGet(this,_eventBus)._off(\"editingaction\",_classPrivateFieldGet(this,_boundOnEditingAction));_classPrivateFieldGet(this,_eventBus)._off(\"pagechanging\",_classPrivateFieldGet(this,_boundOnPageChanging));_classPrivateFieldGet(this,_eventBus)._off(\"scalechanging\",_classPrivateFieldGet(this,_boundOnScaleChanging));_classPrivateFieldGet(this,_eventBus)._off(\"rotationchanging\",_classPrivateFieldGet(this,_boundOnRotationChanging));for(const layer of _classPrivateFieldGet(this,_allLayers).values()){layer.destroy();}_classPrivateFieldGet(this,_allLayers).clear();_classPrivateFieldGet(this,_allEditors).clear();_classPrivateFieldGet(this,_editorsToRescale).clear();_classPrivateFieldSet(this,_activeEditor,null);_classPrivateFieldGet(this,_selectedEditors).clear();_classPrivateFieldGet(this,_commandManager).destroy();}onPageChanging({pageNumber}){_classPrivateFieldSet(this,_currentPageIndex,pageNumber-1);}focusMainContainer(){_classPrivateFieldGet(this,_container).focus();}addShouldRescale(editor){_classPrivateFieldGet(this,_editorsToRescale).add(editor);}removeShouldRescale(editor){_classPrivateFieldGet(this,_editorsToRescale).delete(editor);}onScaleChanging({scale}){this.commitOrRemove();this.viewParameters.realScale=scale*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS;for(const editor of _classPrivateFieldGet(this,_editorsToRescale)){editor.onScaleChanging();}}onRotationChanging({pagesRotation}){this.commitOrRemove();this.viewParameters.rotation=pagesRotation;}addToAnnotationStorage(editor){if(!editor.isEmpty()&&_classPrivateFieldGet(this,_annotationStorage)&&!_classPrivateFieldGet(this,_annotationStorage).has(editor.id)){_classPrivateFieldGet(this,_annotationStorage).setValue(editor.id,editor);}}copy(event){event.preventDefault();if(_classPrivateFieldGet(this,_activeEditor)){_classPrivateFieldGet(this,_activeEditor).commitOrRemove();}if(!this.hasSelection){return;}const editors=[];for(const editor of _classPrivateFieldGet(this,_selectedEditors)){if(!editor.isEmpty()){editors.push(editor.serialize());}}if(editors.length===0){return;}event.clipboardData.setData(\"application/pdfjs\",JSON.stringify(editors));}cut(event){this.copy(event);this.delete();}paste(event){event.preventDefault();let data=event.clipboardData.getData(\"application/pdfjs\");if(!data){return;}try{data=JSON.parse(data);}catch(ex){(0,_util.warn)(`paste: \"${ex.message}\".`);return;}if(!Array.isArray(data)){return;}this.unselectAll();const layer=_classPrivateFieldGet(this,_allLayers).get(_classPrivateFieldGet(this,_currentPageIndex));try{const newEditors=[];for(const editor of data){const deserializedEditor=layer.deserialize(editor);if(!deserializedEditor){return;}newEditors.push(deserializedEditor);}const cmd=()=>{for(const editor of newEditors){_classPrivateMethodGet(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor);}_classPrivateMethodGet(this,_selectEditors,_selectEditors2).call(this,newEditors);};const undo=()=>{for(const editor of newEditors){editor.remove();}};this.addCommands({cmd,undo,mustExec:true});}catch(ex){(0,_util.warn)(`paste: \"${ex.message}\".`);}}keydown(event){if(!this.getActive()?.shouldGetKeyboardEvents()){AnnotationEditorUIManager._keyboardManager.exec(this,event);}}onEditingAction(details){if([\"undo\",\"redo\",\"delete\",\"selectAll\"].includes(details.name)){this[details.name]();}}setEditingState(isEditing){if(isEditing){_classPrivateMethodGet(this,_addKeyboardManager,_addKeyboardManager2).call(this);_classPrivateMethodGet(this,_addCopyPasteListeners,_addCopyPasteListeners2).call(this);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,_mode)!==_util.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,_commandManager).hasSomethingToRedo(),hasSelectedEditor:false});}else{_classPrivateMethodGet(this,_removeKeyboardManager,_removeKeyboardManager2).call(this);_classPrivateMethodGet(this,_removeCopyPasteListeners,_removeCopyPasteListeners2).call(this);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{isEditing:false});}}registerEditorTypes(types){if(_classPrivateFieldGet(this,_editorTypes)){return;}_classPrivateFieldSet(this,_editorTypes,types);for(const editorType of _classPrivateFieldGet(this,_editorTypes)){_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editorType.defaultPropertiesToUpdate);}}getId(){return _classPrivateFieldGet(this,_idManager).getId();}get currentLayer(){return _classPrivateFieldGet(this,_allLayers).get(_classPrivateFieldGet(this,_currentPageIndex));}get currentPageIndex(){return _classPrivateFieldGet(this,_currentPageIndex);}addLayer(layer){_classPrivateFieldGet(this,_allLayers).set(layer.pageIndex,layer);if(_classPrivateFieldGet(this,_isEnabled)){layer.enable();}else{layer.disable();}}removeLayer(layer){_classPrivateFieldGet(this,_allLayers).delete(layer.pageIndex);}updateMode(mode){_classPrivateFieldSet(this,_mode,mode);if(mode===_util.AnnotationEditorType.NONE){this.setEditingState(false);_classPrivateMethodGet(this,_disableAll,_disableAll2).call(this);}else{this.setEditingState(true);_classPrivateMethodGet(this,_enableAll,_enableAll2).call(this);for(const layer of _classPrivateFieldGet(this,_allLayers).values()){layer.updateMode(mode);}}}updateToolbar(mode){if(mode===_classPrivateFieldGet(this,_mode)){return;}_classPrivateFieldGet(this,_eventBus).dispatch(\"switchannotationeditormode\",{source:this,mode});}updateParams(type,value){if(!_classPrivateFieldGet(this,_editorTypes)){return;}for(const editor of _classPrivateFieldGet(this,_selectedEditors)){editor.updateParams(type,value);}for(const editorType of _classPrivateFieldGet(this,_editorTypes)){editorType.updateDefaultParams(type,value);}}getEditors(pageIndex){const editors=[];for(const editor of _classPrivateFieldGet(this,_allEditors).values()){if(editor.pageIndex===pageIndex){editors.push(editor);}}return editors;}getEditor(id){return _classPrivateFieldGet(this,_allEditors).get(id);}addEditor(editor){_classPrivateFieldGet(this,_allEditors).set(editor.id,editor);}removeEditor(editor){_classPrivateFieldGet(this,_allEditors).delete(editor.id);this.unselect(editor);_classPrivateFieldGet(this,_annotationStorage)?.remove(editor.id);}setActiveEditor(editor){if(_classPrivateFieldGet(this,_activeEditor)===editor){return;}_classPrivateFieldSet(this,_activeEditor,editor);if(editor){_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate);}}toggleSelected(editor){if(_classPrivateFieldGet(this,_selectedEditors).has(editor)){_classPrivateFieldGet(this,_selectedEditors).delete(editor);editor.unselect();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});return;}_classPrivateFieldGet(this,_selectedEditors).add(editor);editor.select();_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:true});}setSelected(editor){for(const ed of _classPrivateFieldGet(this,_selectedEditors)){if(ed!==editor){ed.unselect();}}_classPrivateFieldGet(this,_selectedEditors).clear();_classPrivateFieldGet(this,_selectedEditors).add(editor);editor.select();_classPrivateMethodGet(this,_dispatchUpdateUI,_dispatchUpdateUI2).call(this,editor.propertiesToUpdate);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:true});}isSelected(editor){return _classPrivateFieldGet(this,_selectedEditors).has(editor);}unselect(editor){editor.unselect();_classPrivateFieldGet(this,_selectedEditors).delete(editor);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection});}get hasSelection(){return _classPrivateFieldGet(this,_selectedEditors).size!==0;}undo(){_classPrivateFieldGet(this,_commandManager).undo();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,_commandManager).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});}redo(){_classPrivateFieldGet(this,_commandManager).redo();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:_classPrivateFieldGet(this,_commandManager).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});}addCommands(params){_classPrivateFieldGet(this,_commandManager).add(params);_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:_classPrivateMethodGet(this,_isEmpty,_isEmpty2).call(this)});}delete(){this.commitOrRemove();if(!this.hasSelection){return;}const editors=[..._classPrivateFieldGet(this,_selectedEditors)];const cmd=()=>{for(const editor of editors){editor.remove();}};const undo=()=>{for(const editor of editors){_classPrivateMethodGet(this,_addEditorToLayer,_addEditorToLayer2).call(this,editor);}};this.addCommands({cmd,undo,mustExec:true});}commitOrRemove(){_classPrivateFieldGet(this,_activeEditor)?.commitOrRemove();}selectAll(){for(const editor of _classPrivateFieldGet(this,_selectedEditors)){editor.commit();}_classPrivateMethodGet(this,_selectEditors,_selectEditors2).call(this,_classPrivateFieldGet(this,_allEditors).values());}unselectAll(){if(_classPrivateFieldGet(this,_activeEditor)){_classPrivateFieldGet(this,_activeEditor).commitOrRemove();return;}if(_classPrivateFieldGet(this,_selectedEditors).size===0){return;}for(const editor of _classPrivateFieldGet(this,_selectedEditors)){editor.unselect();}_classPrivateFieldGet(this,_selectedEditors).clear();_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:false});}isActive(editor){return _classPrivateFieldGet(this,_activeEditor)===editor;}getActive(){return _classPrivateFieldGet(this,_activeEditor);}getMode(){return _classPrivateFieldGet(this,_mode);}}function _addKeyboardManager2(){_classPrivateFieldGet(this,_container).addEventListener(\"keydown\",_classPrivateFieldGet(this,_boundKeydown));}function _removeKeyboardManager2(){_classPrivateFieldGet(this,_container).removeEventListener(\"keydown\",_classPrivateFieldGet(this,_boundKeydown));}function _addCopyPasteListeners2(){document.addEventListener(\"copy\",_classPrivateFieldGet(this,_boundCopy));document.addEventListener(\"cut\",_classPrivateFieldGet(this,_boundCut));document.addEventListener(\"paste\",_classPrivateFieldGet(this,_boundPaste));}function _removeCopyPasteListeners2(){document.removeEventListener(\"copy\",_classPrivateFieldGet(this,_boundCopy));document.removeEventListener(\"cut\",_classPrivateFieldGet(this,_boundCut));document.removeEventListener(\"paste\",_classPrivateFieldGet(this,_boundPaste));}function _dispatchUpdateStates2(details){const hasChanged=Object.entries(details).some(([key,value])=>_classPrivateFieldGet(this,_previousStates)[key]!==value);if(hasChanged){_classPrivateFieldGet(this,_eventBus).dispatch(\"annotationeditorstateschanged\",{source:this,details:Object.assign(_classPrivateFieldGet(this,_previousStates),details)});}}function _dispatchUpdateUI2(details){_classPrivateFieldGet(this,_eventBus).dispatch(\"annotationeditorparamschanged\",{source:this,details});}function _enableAll2(){if(!_classPrivateFieldGet(this,_isEnabled)){_classPrivateFieldSet(this,_isEnabled,true);for(const layer of _classPrivateFieldGet(this,_allLayers).values()){layer.enable();}}}function _disableAll2(){this.unselectAll();if(_classPrivateFieldGet(this,_isEnabled)){_classPrivateFieldSet(this,_isEnabled,false);for(const layer of _classPrivateFieldGet(this,_allLayers).values()){layer.disable();}}}function _addEditorToLayer2(editor){const layer=_classPrivateFieldGet(this,_allLayers).get(editor.pageIndex);if(layer){layer.addOrRebuild(editor);}else{this.addEditor(editor);}}function _isEmpty2(){if(_classPrivateFieldGet(this,_allEditors).size===0){return true;}if(_classPrivateFieldGet(this,_allEditors).size===1){for(const editor of _classPrivateFieldGet(this,_allEditors).values()){return editor.isEmpty();}}return false;}function _selectEditors2(editors){_classPrivateFieldGet(this,_selectedEditors).clear();for(const editor of editors){if(editor.isEmpty()){continue;}_classPrivateFieldGet(this,_selectedEditors).add(editor);editor.select();}_classPrivateMethodGet(this,_dispatchUpdateStates,_dispatchUpdateStates2).call(this,{hasSelectedEditor:true});}_defineProperty(AnnotationEditorUIManager,\"_keyboardManager\",new KeyboardManager([[[\"ctrl+a\",\"mac+meta+a\"],AnnotationEditorUIManager.prototype.selectAll],[[\"ctrl+z\",\"mac+meta+z\"],AnnotationEditorUIManager.prototype.undo],[[\"ctrl+y\",\"ctrl+shift+Z\",\"mac+meta+shift+Z\"],AnnotationEditorUIManager.prototype.redo],[[\"Backspace\",\"alt+Backspace\",\"ctrl+Backspace\",\"shift+Backspace\",\"mac+Backspace\",\"mac+alt+Backspace\",\"mac+ctrl+Backspace\",\"Delete\",\"ctrl+Delete\",\"shift+Delete\"],AnnotationEditorUIManager.prototype.delete],[[\"Escape\",\"mac+Escape\"],AnnotationEditorUIManager.prototype.unselectAll]]));exports.AnnotationEditorUIManager=AnnotationEditorUIManager;/***/},/* 6 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.StatTimer=exports.RenderingCancelledException=exports.PixelsPerInch=exports.PageViewport=exports.PDFDateString=exports.DOMStandardFontDataFactory=exports.DOMSVGFactory=exports.DOMFilterFactory=exports.DOMCanvasFactory=exports.DOMCMapReaderFactory=exports.AnnotationPrefix=void 0;exports.deprecated=deprecated;exports.getColorValues=getColorValues;exports.getCurrentTransform=getCurrentTransform;exports.getCurrentTransformInverse=getCurrentTransformInverse;exports.getFilenameFromUrl=getFilenameFromUrl;exports.getPdfFilenameFromUrl=getPdfFilenameFromUrl;exports.getRGB=getRGB;exports.getXfaPageViewport=getXfaPageViewport;exports.isDataScheme=isDataScheme;exports.isPdfFile=isPdfFile;exports.isValidFetchUrl=isValidFetchUrl;exports.loadScript=loadScript;exports.setLayerDimensions=setLayerDimensions;var _base_factory=__w_pdfjs_require__(7);var _util=__w_pdfjs_require__(1);const SVG_NS=\"http://www.w3.org/2000/svg\";const AnnotationPrefix=\"pdfjs_internal_id_\";exports.AnnotationPrefix=AnnotationPrefix;class PixelsPerInch{}_defineProperty(PixelsPerInch,\"CSS\",96.0);_defineProperty(PixelsPerInch,\"PDF\",72.0);_defineProperty(PixelsPerInch,\"PDF_TO_CSS_UNITS\",PixelsPerInch.CSS/PixelsPerInch.PDF);exports.PixelsPerInch=PixelsPerInch;var _cache=/*#__PURE__*/new WeakMap();var _defs=/*#__PURE__*/new WeakMap();var _docId2=/*#__PURE__*/new WeakMap();var _document=/*#__PURE__*/new WeakMap();var _hcmFilter=/*#__PURE__*/new WeakMap();var _hcmKey=/*#__PURE__*/new WeakMap();var _hcmUrl=/*#__PURE__*/new WeakMap();var _id2=/*#__PURE__*/new WeakMap();var _cache2=/*#__PURE__*/new WeakMap();var _defs2=/*#__PURE__*/new WeakMap();var _appendFeFunc=/*#__PURE__*/new WeakSet();class DOMFilterFactory extends _base_factory.BaseFilterFactory{constructor({docId,ownerDocument=globalThis.document}={}){super();_classPrivateMethodInitSpec(this,_appendFeFunc);_classPrivateFieldInitSpec(this,_defs2,{get:_get_defs,set:void 0});_classPrivateFieldInitSpec(this,_cache2,{get:_get_cache,set:void 0});_classPrivateFieldInitSpec(this,_cache,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_defs,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_docId2,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_document,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_hcmFilter,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_hcmKey,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_hcmUrl,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_id2,{writable:true,value:0});_classPrivateFieldSet(this,_docId2,docId);_classPrivateFieldSet(this,_document,ownerDocument);}addFilter(maps){var _this$id3,_this$id4;if(!maps){return\"none\";}let value=_classPrivateFieldGet(this,_cache2).get(maps);if(value){return value;}let tableR,tableG,tableB,key;if(maps.length===1){const mapR=maps[0];const buffer=new Array(256);for(let i=0;i<256;i++){buffer[i]=mapR[i]/255;}key=tableR=tableG=tableB=buffer.join(\",\");}else{const[mapR,mapG,mapB]=maps;const bufferR=new Array(256);const bufferG=new Array(256);const bufferB=new Array(256);for(let i=0;i<256;i++){bufferR[i]=mapR[i]/255;bufferG[i]=mapG[i]/255;bufferB[i]=mapB[i]/255;}tableR=bufferR.join(\",\");tableG=bufferG.join(\",\");tableB=bufferB.join(\",\");key=`${tableR}${tableG}${tableB}`;}value=_classPrivateFieldGet(this,_cache2).get(key);if(value){_classPrivateFieldGet(this,_cache2).set(maps,value);return value;}const id=`g_${_classPrivateFieldGet(this,_docId2)}_transfer_map_${(_classPrivateFieldSet(this,_id2,(_this$id3=_classPrivateFieldGet(this,_id2),_this$id4=_this$id3++,_this$id3)),_this$id4)}`;const url=`url(#${id})`;_classPrivateFieldGet(this,_cache2).set(maps,url);_classPrivateFieldGet(this,_cache2).set(key,url);const filter=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"filter\",SVG_NS);filter.setAttribute(\"id\",id);filter.setAttribute(\"color-interpolation-filters\",\"sRGB\");const feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"feComponentTransfer\");filter.append(feComponentTransfer);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncR\",tableR);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncG\",tableG);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncB\",tableB);_classPrivateFieldGet(this,_defs2).append(filter);return url;}addHCMFilter(fgColor,bgColor){const key=`${fgColor}-${bgColor}`;if(_classPrivateFieldGet(this,_hcmKey)===key){return _classPrivateFieldGet(this,_hcmUrl);}_classPrivateFieldSet(this,_hcmKey,key);_classPrivateFieldSet(this,_hcmUrl,\"none\");_classPrivateFieldGet(this,_hcmFilter)?.remove();if(!fgColor||!bgColor){return _classPrivateFieldGet(this,_hcmUrl);}_classPrivateFieldGet(this,_defs2).style.color=fgColor;fgColor=getComputedStyle(_classPrivateFieldGet(this,_defs2)).getPropertyValue(\"color\");const fgRGB=getRGB(fgColor);fgColor=_util.Util.makeHexColor(...fgRGB);_classPrivateFieldGet(this,_defs2).style.color=bgColor;bgColor=getComputedStyle(_classPrivateFieldGet(this,_defs2)).getPropertyValue(\"color\");const bgRGB=getRGB(bgColor);bgColor=_util.Util.makeHexColor(...bgRGB);_classPrivateFieldGet(this,_defs2).style.color=\"\";if(fgColor===\"#000000\"&&bgColor===\"#ffffff\"||fgColor===bgColor){return _classPrivateFieldGet(this,_hcmUrl);}const map=new Array(256);for(let i=0;i<=255;i++){const x=i/255;map[i]=x<=0.03928?x/12.92:((x+0.055)/1.055)**2.4;}const table=map.join(\",\");const id=`g_${_classPrivateFieldGet(this,_docId2)}_hcm_filter`;const filter=_classPrivateFieldSet(this,_hcmFilter,_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"filter\",SVG_NS));filter.setAttribute(\"id\",id);filter.setAttribute(\"color-interpolation-filters\",\"sRGB\");let feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"feComponentTransfer\");filter.append(feComponentTransfer);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncR\",table);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncG\",table);_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncB\",table);const feColorMatrix=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"feColorMatrix\");feColorMatrix.setAttribute(\"type\",\"matrix\");feColorMatrix.setAttribute(\"values\",\"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");filter.append(feColorMatrix);feComponentTransfer=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"feComponentTransfer\");filter.append(feComponentTransfer);const getSteps=(c,n)=>{const start=fgRGB[c]/255;const end=bgRGB[c]/255;const arr=new Array(n+1);for(let i=0;i<=n;i++){arr[i]=start+i/n*(end-start);}return arr.join(\",\");};_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncR\",getSteps(0,5));_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncG\",getSteps(1,5));_classPrivateMethodGet(this,_appendFeFunc,_appendFeFunc2).call(this,feComponentTransfer,\"feFuncB\",getSteps(2,5));_classPrivateFieldGet(this,_defs2).append(filter);_classPrivateFieldSet(this,_hcmUrl,`url(#${id})`);return _classPrivateFieldGet(this,_hcmUrl);}destroy(keepHCM=false){if(keepHCM&&_classPrivateFieldGet(this,_hcmUrl)){return;}if(_classPrivateFieldGet(this,_defs)){_classPrivateFieldGet(this,_defs).parentNode.parentNode.remove();_classPrivateFieldSet(this,_defs,null);}if(_classPrivateFieldGet(this,_cache)){_classPrivateFieldGet(this,_cache).clear();_classPrivateFieldSet(this,_cache,null);}_classPrivateFieldSet(this,_id2,0);}}function _get_cache(){return _classPrivateFieldGet(this,_cache)||_classPrivateFieldSet(this,_cache,new Map());}function _get_defs(){if(!_classPrivateFieldGet(this,_defs)){const div=_classPrivateFieldGet(this,_document).createElement(\"div\");const{style}=div;style.visibility=\"hidden\";style.contain=\"strict\";style.width=style.height=0;style.position=\"absolute\";style.top=style.left=0;style.zIndex=-1;const svg=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"svg\");svg.setAttribute(\"width\",0);svg.setAttribute(\"height\",0);_classPrivateFieldSet(this,_defs,_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,\"defs\"));div.append(svg);svg.append(_classPrivateFieldGet(this,_defs));_classPrivateFieldGet(this,_document).body.append(div);}return _classPrivateFieldGet(this,_defs);}function _appendFeFunc2(feComponentTransfer,func,table){const feFunc=_classPrivateFieldGet(this,_document).createElementNS(SVG_NS,func);feFunc.setAttribute(\"type\",\"discrete\");feFunc.setAttribute(\"tableValues\",table);feComponentTransfer.append(feFunc);}exports.DOMFilterFactory=DOMFilterFactory;class DOMCanvasFactory extends _base_factory.BaseCanvasFactory{constructor({ownerDocument=globalThis.document}={}){super();this._document=ownerDocument;}_createCanvas(width,height){const canvas=this._document.createElement(\"canvas\");canvas.width=width;canvas.height=height;return canvas;}}exports.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(url,asTypedArray=false){if(isValidFetchUrl(url,document.baseURI)){const response=await fetch(url);if(!response.ok){throw new Error(response.statusText);}return asTypedArray?new Uint8Array(await response.arrayBuffer()):(0,_util.stringToBytes)(await response.text());}return new Promise((resolve,reject)=>{const request=new XMLHttpRequest();request.open(\"GET\",url,true);if(asTypedArray){request.responseType=\"arraybuffer\";}request.onreadystatechange=()=>{if(request.readyState!==XMLHttpRequest.DONE){return;}if(request.status===200||request.status===0){let data;if(asTypedArray&&request.response){data=new Uint8Array(request.response);}else if(!asTypedArray&&request.responseText){data=(0,_util.stringToBytes)(request.responseText);}if(data){resolve(data);return;}}reject(new Error(request.statusText));};request.send(null);});}class DOMCMapReaderFactory extends _base_factory.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url,this.isCompressed).then(data=>{return{cMapData:data,compressionType};});}}exports.DOMCMapReaderFactory=DOMCMapReaderFactory;class DOMStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url,true);}}exports.DOMStandardFontDataFactory=DOMStandardFontDataFactory;class DOMSVGFactory extends _base_factory.BaseSVGFactory{_createSVG(type){return document.createElementNS(SVG_NS,type);}}exports.DOMSVGFactory=DOMSVGFactory;class PageViewport{constructor({viewBox,scale,rotation,offsetX=0,offsetY=0,dontFlip=false}){this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;const centerX=(viewBox[2]+viewBox[0])/2;const centerY=(viewBox[3]+viewBox[1])/2;let rotateA,rotateB,rotateC,rotateD;rotation%=360;if(rotation<0){rotation+=360;}switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;case 0:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;default:throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}let offsetCanvasX,offsetCanvasY;let width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=(viewBox[3]-viewBox[1])*scale;height=(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=(viewBox[2]-viewBox[0])*scale;height=(viewBox[3]-viewBox[1])*scale;}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;}get rawDims(){const{viewBox}=this;return(0,_util.shadow)(this,\"rawDims\",{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]});}clone({scale=this.scale,rotation=this.rotation,offsetX=this.offsetX,offsetY=this.offsetY,dontFlip=false}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale,rotation,offsetX,offsetY,dontFlip});}convertToViewportPoint(x,y){return _util.Util.applyTransform([x,y],this.transform);}convertToViewportRectangle(rect){const topLeft=_util.Util.applyTransform([rect[0],rect[1]],this.transform);const bottomRight=_util.Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]];}convertToPdfPoint(x,y){return _util.Util.applyInverseTransform([x,y],this.transform);}}exports.PageViewport=PageViewport;class RenderingCancelledException extends _util.BaseException{constructor(msg,type,extraDelay=0){super(msg,\"RenderingCancelledException\");this.type=type;this.extraDelay=extraDelay;}}exports.RenderingCancelledException=RenderingCancelledException;function isDataScheme(url){const ii=url.length;let i=0;while(i<ii&&url[i].trim()===\"\"){i++;}return url.substring(i,i+5).toLowerCase()===\"data:\";}function isPdfFile(filename){return typeof filename===\"string\"&&/\\.pdf$/i.test(filename);}function getFilenameFromUrl(url,onlyStripPath=false){if(!onlyStripPath){[url]=url.split(/[#?]/,1);}return url.substring(url.lastIndexOf(\"/\")+1);}function getPdfFilenameFromUrl(url,defaultFilename=\"document.pdf\"){if(typeof url!==\"string\"){return defaultFilename;}if(isDataScheme(url)){(0,_util.warn)('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');return defaultFilename;}const reURI=/^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;const reFilename=/[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;const splitURI=reURI.exec(url);let suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.includes(\"%\")){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch(ex){}}}return suggestedFilename||defaultFilename;}class StatTimer{constructor(){_defineProperty(this,\"started\",Object.create(null));_defineProperty(this,\"times\",[]);}time(name){if(name in this.started){(0,_util.warn)(`Timer is already running for ${name}`);}this.started[name]=Date.now();}timeEnd(name){if(!(name in this.started)){(0,_util.warn)(`Timer has not been started for ${name}`);}this.times.push({name,start:this.started[name],end:Date.now()});delete this.started[name];}toString(){const outBuf=[];let longest=0;for(const{name}of this.times){longest=Math.max(name.length,longest);}for(const{name,start,end}of this.times){outBuf.push(`${name.padEnd(longest)} ${end-start}ms\\n`);}return outBuf.join(\"\");}}exports.StatTimer=StatTimer;function isValidFetchUrl(url,baseUrl){try{const{protocol}=baseUrl?new URL(url,baseUrl):new URL(url);return protocol===\"http:\"||protocol===\"https:\";}catch(ex){return false;}}function loadScript(src,removeScriptElement=false){return new Promise((resolve,reject)=>{const script=document.createElement(\"script\");script.src=src;script.onload=function(evt){if(removeScriptElement){script.remove();}resolve(evt);};script.onerror=function(){reject(new Error(`Cannot load script at: ${script.src}`));};(document.head||document.documentElement).append(script);});}function deprecated(details){console.log(\"Deprecated API usage: \"+details);}let pdfDateStringRegex;class PDFDateString{static toDateObject(input){if(!input||typeof input!==\"string\"){return null;}pdfDateStringRegex||=new RegExp(\"^D:\"+\"(\\\\d{4})\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"(\\\\d{2})?\"+\"([Z|+|-])?\"+\"(\\\\d{2})?\"+\"'?\"+\"(\\\\d{2})?\"+\"'?\");const matches=pdfDateStringRegex.exec(input);if(!matches){return null;}const year=parseInt(matches[1],10);let month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;let day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;let hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;let minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;let second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;const universalTimeRelation=matches[7]||\"Z\";let offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;let offsetMinute=parseInt(matches[9],10)||0;offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0;if(universalTimeRelation===\"-\"){hour+=offsetHour;minute+=offsetMinute;}else if(universalTimeRelation===\"+\"){hour-=offsetHour;minute-=offsetMinute;}return new Date(Date.UTC(year,month,day,hour,minute,second));}}exports.PDFDateString=PDFDateString;function getXfaPageViewport(xfaPage,{scale=1,rotation=0}){const{width,height}=xfaPage.attributes.style;const viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox,scale,rotation});}function getRGB(color){if(color.startsWith(\"#\")){const colorRGB=parseInt(color.slice(1),16);return[(colorRGB&0xff0000)>>16,(colorRGB&0x00ff00)>>8,colorRGB&0x0000ff];}if(color.startsWith(\"rgb(\")){return color.slice(4,-1).split(\",\").map(x=>parseInt(x));}if(color.startsWith(\"rgba(\")){return color.slice(5,-1).split(\",\").map(x=>parseInt(x)).slice(0,3);}(0,_util.warn)(`Not a valid color format: \"${color}\"`);return[0,0,0];}function getColorValues(colors){const span=document.createElement(\"span\");span.style.visibility=\"hidden\";document.body.append(span);for(const name of colors.keys()){span.style.color=name;const computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor));}span.remove();}function getCurrentTransform(ctx){const{a,b,c,d,e,f}=ctx.getTransform();return[a,b,c,d,e,f];}function getCurrentTransformInverse(ctx){const{a,b,c,d,e,f}=ctx.getTransform().invertSelf();return[a,b,c,d,e,f];}function setLayerDimensions(div,viewport,mustFlip=false,mustRotate=true){if(viewport instanceof PageViewport){const{pageWidth,pageHeight}=viewport.rawDims;const{style}=div;const widthStr=`calc(var(--scale-factor) * ${pageWidth}px)`;const heightStr=`calc(var(--scale-factor) * ${pageHeight}px)`;if(!mustFlip||viewport.rotation%180===0){style.width=widthStr;style.height=heightStr;}else{style.width=heightStr;style.height=widthStr;}}if(mustRotate){div.setAttribute(\"data-main-rotation\",viewport.rotation);}}/***/},/* 7 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.BaseStandardFontDataFactory=exports.BaseSVGFactory=exports.BaseFilterFactory=exports.BaseCanvasFactory=exports.BaseCMapReaderFactory=void 0;var _util=__w_pdfjs_require__(1);class BaseFilterFactory{constructor(){if(this.constructor===BaseFilterFactory){(0,_util.unreachable)(\"Cannot initialize BaseFilterFactory.\");}}addFilter(maps){return\"none\";}addHCMFilter(fgColor,bgColor){return\"none\";}destroy(keepHCM=false){}}exports.BaseFilterFactory=BaseFilterFactory;class BaseCanvasFactory{constructor(){if(this.constructor===BaseCanvasFactory){(0,_util.unreachable)(\"Cannot initialize BaseCanvasFactory.\");}}create(width,height){if(width<=0||height<=0){throw new Error(\"Invalid canvas size\");}const canvas=this._createCanvas(width,height);return{canvas,context:canvas.getContext(\"2d\")};}reset(canvasAndContext,width,height){if(!canvasAndContext.canvas){throw new Error(\"Canvas is not specified\");}if(width<=0||height<=0){throw new Error(\"Invalid canvas size\");}canvasAndContext.canvas.width=width;canvasAndContext.canvas.height=height;}destroy(canvasAndContext){if(!canvasAndContext.canvas){throw new Error(\"Canvas is not specified\");}canvasAndContext.canvas.width=0;canvasAndContext.canvas.height=0;canvasAndContext.canvas=null;canvasAndContext.context=null;}_createCanvas(width,height){(0,_util.unreachable)(\"Abstract method `_createCanvas` called.\");}}exports.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor({baseUrl=null,isCompressed=true}){if(this.constructor===BaseCMapReaderFactory){(0,_util.unreachable)(\"Cannot initialize BaseCMapReaderFactory.\");}this.baseUrl=baseUrl;this.isCompressed=isCompressed;}async fetch({name}){if(!this.baseUrl){throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that '+'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');}if(!name){throw new Error(\"CMap name must be specified.\");}const url=this.baseUrl+name+(this.isCompressed?\".bcmap\":\"\");const compressionType=this.isCompressed?_util.CMapCompressionType.BINARY:_util.CMapCompressionType.NONE;return this._fetchData(url,compressionType).catch(reason=>{throw new Error(`Unable to load ${this.isCompressed?\"binary \":\"\"}CMap at: ${url}`);});}_fetchData(url,compressionType){(0,_util.unreachable)(\"Abstract method `_fetchData` called.\");}}exports.BaseCMapReaderFactory=BaseCMapReaderFactory;class BaseStandardFontDataFactory{constructor({baseUrl=null}){if(this.constructor===BaseStandardFontDataFactory){(0,_util.unreachable)(\"Cannot initialize BaseStandardFontDataFactory.\");}this.baseUrl=baseUrl;}async fetch({filename}){if(!this.baseUrl){throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that '+'the \"standardFontDataUrl\" API parameter is provided.');}if(!filename){throw new Error(\"Font filename must be specified.\");}const url=`${this.baseUrl}${filename}`;return this._fetchData(url).catch(reason=>{throw new Error(`Unable to load font data at: ${url}`);});}_fetchData(url){(0,_util.unreachable)(\"Abstract method `_fetchData` called.\");}}exports.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){if(this.constructor===BaseSVGFactory){(0,_util.unreachable)(\"Cannot initialize BaseSVGFactory.\");}}create(width,height,skipDimensions=false){if(width<=0||height<=0){throw new Error(\"Invalid SVG dimensions\");}const svg=this._createSVG(\"svg:svg\");svg.setAttribute(\"version\",\"1.1\");if(!skipDimensions){svg.setAttribute(\"width\",`${width}px`);svg.setAttribute(\"height\",`${height}px`);}svg.setAttribute(\"preserveAspectRatio\",\"none\");svg.setAttribute(\"viewBox\",`0 0 ${width} ${height}`);return svg;}createElement(type){if(typeof type!==\"string\"){throw new Error(\"Invalid SVG element type\");}return this._createSVG(type);}_createSVG(type){(0,_util.unreachable)(\"Abstract method `_createSVG` called.\");}}exports.BaseSVGFactory=BaseSVGFactory;/***/},/* 8 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.MurmurHash3_64=void 0;var _util=__w_pdfjs_require__(1);const SEED=0xc3d2e1f0;const MASK_HIGH=0xffff0000;const MASK_LOW=0xffff;class MurmurHash3_64{constructor(seed){this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}update(input){let data,length;if(typeof input===\"string\"){data=new Uint8Array(input.length*2);length=0;for(let i=0,ii=input.length;i<ii;i++){const code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if((0,_util.isArrayBuffer)(input)){data=input.slice();length=data.byteLength;}else{throw new Error(\"Wrong data format in MurmurHash3_64_update. \"+\"Input must be a string or array.\");}const blockCounts=length>>2;const tailLength=length-blockCounts*4;const dataUint32=new Uint32Array(data.buffer,0,blockCounts);let k1=0,k2=0;let h1=this.h1,h2=this.h2;const C1=0xcc9e2d51,C2=0x1b873593;const C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(let i=0;i<blockCounts;i++){if(i&1){k1=dataUint32[i];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[i];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}hexdigest(){let h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,\"0\")+(h2>>>0).toString(16).padStart(8,\"0\");}}exports.MurmurHash3_64=MurmurHash3_64;/***/},/* 9 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.FontLoader=exports.FontFaceObject=void 0;var _util=__w_pdfjs_require__(1);var _is_node=__w_pdfjs_require__(10);var _systemFonts=/*#__PURE__*/new WeakMap();class FontLoader{constructor({ownerDocument=globalThis.document,styleElement=null}){_classPrivateFieldInitSpec(this,_systemFonts,{writable:true,value:new Set()});this._document=ownerDocument;this.nativeFontFaces=new Set();this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0;}addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace);this._document.fonts.add(nativeFontFace);}removeNativeFontFace(nativeFontFace){this.nativeFontFaces.delete(nativeFontFace);this._document.fonts.delete(nativeFontFace);}insertRule(rule){if(!this.styleElement){this.styleElement=this._document.createElement(\"style\");this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);}const styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);}clear(){for(const nativeFontFace of this.nativeFontFaces){this._document.fonts.delete(nativeFontFace);}this.nativeFontFaces.clear();_classPrivateFieldGet(this,_systemFonts).clear();if(this.styleElement){this.styleElement.remove();this.styleElement=null;}}async loadSystemFont(info){if(!info||_classPrivateFieldGet(this,_systemFonts).has(info.loadedName)){return;}(0,_util.assert)(!this.disableFontFace,\"loadSystemFont shouldn't be called when `disableFontFace` is set.\");if(this.isFontLoadingAPISupported){const{loadedName,src,style}=info;const fontFace=new FontFace(loadedName,src,style);this.addNativeFontFace(fontFace);try{await fontFace.load();_classPrivateFieldGet(this,_systemFonts).add(loadedName);}catch{(0,_util.warn)(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);this.removeNativeFontFace(fontFace);}return;}(0,_util.unreachable)(\"Not implemented: loadSystemFont without the Font Loading API.\");}async bind(font){if(font.attached||font.missingFile&&!font.systemFontInfo){return;}font.attached=true;if(font.systemFontInfo){await this.loadSystemFont(font.systemFontInfo);return;}if(this.isFontLoadingAPISupported){const nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);try{await nativeFontFace.loaded;}catch(ex){(0,_util.warn)(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);font.disableFontFace=true;throw ex;}}return;}const rule=font.createFontFaceRule();if(rule){this.insertRule(rule);if(this.isSyncFontLoadingSupported){return;}await new Promise(resolve=>{const request=this._queueLoadingCallback(resolve);this._prepareFontLoadEvent(font,request);});}}get isFontLoadingAPISupported(){const hasFonts=!!this._document?.fonts;return(0,_util.shadow)(this,\"isFontLoadingAPISupported\",hasFonts);}get isSyncFontLoadingSupported(){let supported=false;if(_is_node.isNodeJS){supported=true;}else if(typeof navigator!==\"undefined\"&&/Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)){supported=true;}return(0,_util.shadow)(this,\"isSyncFontLoadingSupported\",supported);}_queueLoadingCallback(callback){function completeRequest(){(0,_util.assert)(!request.done,\"completeRequest() cannot be called twice.\");request.done=true;while(loadingRequests.length>0&&loadingRequests[0].done){const otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0);}}const{loadingRequests}=this;const request={done:false,complete:completeRequest,callback};loadingRequests.push(request);return request;}get _loadTestFont(){const testFont=atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\"+\"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\"+\"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\"+\"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\"+\"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\"+\"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\"+\"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\"+\"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\"+\"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\"+\"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\"+\"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\"+\"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\"+\"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"+\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\"+\"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\"+\"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\"+\"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\"+\"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");return(0,_util.shadow)(this,\"_loadTestFont\",testFont);}_prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}function spliceString(s,offset,remove,insert){const chunk1=s.substring(0,offset);const chunk2=s.substring(offset+remove);return chunk1+insert+chunk2;}let i,ii;const canvas=this._document.createElement(\"canvas\");canvas.width=1;canvas.height=1;const ctx=canvas.getContext(\"2d\");let called=0;function isFontReady(name,callback){if(++called>30){(0,_util.warn)(\"Load test font never loaded.\");callback();return;}ctx.font=\"30px \"+name;ctx.fillText(\".\",0,20);const imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}setTimeout(isFontReady.bind(null,name,callback));}const loadTestFontId=`lt${Date.now()}${this.loadTestFontId++}`;let data=this._loadTestFont;const COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);const CFF_CHECKSUM_OFFSET=16;const XXXX_VALUE=0x58585858;let checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+\"XXX\",i)|0;}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,(0,_util.string32)(checksum));const url=`url(data:font/opentype;base64,${btoa(data)});`;const rule=`@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;this.insertRule(rule);const div=this._document.createElement(\"div\");div.style.visibility=\"hidden\";div.style.width=div.style.height=\"10px\";div.style.position=\"absolute\";div.style.top=div.style.left=\"0px\";for(const name of[font.loadedName,loadTestFontId]){const span=this._document.createElement(\"span\");span.textContent=\"Hi\";span.style.fontFamily=name;div.append(span);}this._document.body.append(div);isFontReady(loadTestFontId,()=>{div.remove();request.complete();});}}exports.FontLoader=FontLoader;class FontFaceObject{constructor(translatedData,{isEvalSupported=true,disableFontFace=false,ignoreErrors=false,inspectFont=null}){this.compiledGlyphs=Object.create(null);for(const i in translatedData){this[i]=translatedData[i];}this.isEvalSupported=isEvalSupported!==false;this.disableFontFace=disableFontFace===true;this.ignoreErrors=ignoreErrors===true;this._inspectFont=inspectFont;}createNativeFontFace(){if(!this.data||this.disableFontFace){return null;}let nativeFontFace;if(!this.cssFontInfo){nativeFontFace=new FontFace(this.loadedName,this.data,{});}else{const css={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){css.style=`oblique ${this.cssFontInfo.italicAngle}deg`;}nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css);}this._inspectFont?.(this);return nativeFontFace;}createFontFaceRule(){if(!this.data||this.disableFontFace){return null;}const data=(0,_util.bytesToString)(this.data);const url=`url(data:${this.mimetype};base64,${btoa(data)});`;let rule;if(!this.cssFontInfo){rule=`@font-face {font-family:\"${this.loadedName}\";src:${url}}`;}else{let css=`font-weight: ${this.cssFontInfo.fontWeight};`;if(this.cssFontInfo.italicAngle){css+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;}rule=`@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;}this._inspectFont?.(this,url);return rule;}getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==undefined){return this.compiledGlyphs[character];}let cmds;try{cmds=objs.get(this.loadedName+\"_path_\"+character);}catch(ex){if(!this.ignoreErrors){throw ex;}(0,_util.warn)(`getPathGenerator - ignoring character: \"${ex}\".`);return this.compiledGlyphs[character]=function(c,size){};}if(this.isEvalSupported&&_util.FeatureTest.isEvalSupported){const jsBuf=[];for(const current of cmds){const args=current.args!==undefined?current.args.join(\",\"):\"\";jsBuf.push(\"c.\",current.cmd,\"(\",args,\");\\n\");}return this.compiledGlyphs[character]=new Function(\"c\",\"size\",jsBuf.join(\"\"));}return this.compiledGlyphs[character]=function(c,size){for(const current of cmds){if(current.cmd===\"scale\"){current.args=[size,-size];}c[current.cmd].apply(c,current.args);}};}}exports.FontFaceObject=FontFaceObject;/***/},/* 10 */ /***/(__unused_webpack_module,exports)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.isNodeJS=void 0;const isNodeJS=typeof process===\"object\"&&process+\"\"===\"[object process]\"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!==\"browser\");exports.isNodeJS=isNodeJS;/***/},/* 11 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.CanvasGraphics=void 0;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(6);var _pattern_helper=__w_pdfjs_require__(12);var _image_utils=__w_pdfjs_require__(13);var _is_node=__w_pdfjs_require__(10);const MIN_FONT_SIZE=16;const MAX_FONT_SIZE=100;const MAX_GROUP_SIZE=4096;const EXECUTION_TIME=15;const EXECUTION_STEPS=10;const MAX_SIZE_TO_COMPILE=1000;const FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring){throw new Error(\"Context is already forwarding operations.\");}ctx.__originalSave=ctx.save;ctx.__originalRestore=ctx.restore;ctx.__originalRotate=ctx.rotate;ctx.__originalScale=ctx.scale;ctx.__originalTranslate=ctx.translate;ctx.__originalTransform=ctx.transform;ctx.__originalSetTransform=ctx.setTransform;ctx.__originalResetTransform=ctx.resetTransform;ctx.__originalClip=ctx.clip;ctx.__originalMoveTo=ctx.moveTo;ctx.__originalLineTo=ctx.lineTo;ctx.__originalBezierCurveTo=ctx.bezierCurveTo;ctx.__originalRect=ctx.rect;ctx.__originalClosePath=ctx.closePath;ctx.__originalBeginPath=ctx.beginPath;ctx._removeMirroring=()=>{ctx.save=ctx.__originalSave;ctx.restore=ctx.__originalRestore;ctx.rotate=ctx.__originalRotate;ctx.scale=ctx.__originalScale;ctx.translate=ctx.__originalTranslate;ctx.transform=ctx.__originalTransform;ctx.setTransform=ctx.__originalSetTransform;ctx.resetTransform=ctx.__originalResetTransform;ctx.clip=ctx.__originalClip;ctx.moveTo=ctx.__originalMoveTo;ctx.lineTo=ctx.__originalLineTo;ctx.bezierCurveTo=ctx.__originalBezierCurveTo;ctx.rect=ctx.__originalRect;ctx.closePath=ctx.__originalClosePath;ctx.beginPath=ctx.__originalBeginPath;delete ctx._removeMirroring;};ctx.save=function ctxSave(){destCtx.save();this.__originalSave();};ctx.restore=function ctxRestore(){destCtx.restore();this.__originalRestore();};ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y);this.__originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){destCtx.scale(x,y);this.__originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f);this.__originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f);this.__originalSetTransform(a,b,c,d,e,f);};ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform();this.__originalResetTransform();};ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle);this.__originalRotate(angle);};ctx.clip=function ctxRotate(rule){destCtx.clip(rule);this.__originalClip(rule);};ctx.moveTo=function(x,y){destCtx.moveTo(x,y);this.__originalMoveTo(x,y);};ctx.lineTo=function(x,y){destCtx.lineTo(x,y);this.__originalLineTo(x,y);};ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height);this.__originalRect(x,y,width,height);};ctx.closePath=function(){destCtx.closePath();this.__originalClosePath();};ctx.beginPath=function(){destCtx.beginPath();this.__originalBeginPath();};}class CachedCanvases{constructor(canvasFactory){this.canvasFactory=canvasFactory;this.cache=Object.create(null);}getCanvas(id,width,height){let canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];this.canvasFactory.reset(canvasEntry,width,height);}else{canvasEntry=this.canvasFactory.create(width,height);this.cache[id]=canvasEntry;}return canvasEntry;}delete(id){delete this.cache[id];}clear(){for(const id in this.cache){const canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry);delete this.cache[id];}}}function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){const[a,b,c,d,tx,ty]=(0,_display_utils.getCurrentTransform)(ctx);if(b===0&&c===0){const tlX=destX*a+tx;const rTlX=Math.round(tlX);const tlY=destY*d+ty;const rTlY=Math.round(tlY);const brX=(destX+destW)*a+tx;const rWidth=Math.abs(Math.round(brX)-rTlX)||1;const brY=(destY+destH)*d+ty;const rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight);ctx.setTransform(a,b,c,d,tx,ty);return[rWidth,rHeight];}if(a===0&&d===0){const tlX=destY*c+tx;const rTlX=Math.round(tlX);const tlY=destX*b+ty;const rTlY=Math.round(tlY);const brX=(destY+destH)*c+tx;const rWidth=Math.abs(Math.round(brX)-rTlX)||1;const brY=(destX+destW)*b+ty;const rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(0,Math.sign(b),Math.sign(c),0,rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rHeight,rWidth);ctx.setTransform(a,b,c,d,tx,ty);return[rHeight,rWidth];}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);const scaleX=Math.hypot(a,b);const scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH];}function compileType3Glyph(imgData){const{width,height}=imgData;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE){return null;}const POINT_TO_PROCESS_LIMIT=1000;const POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);const width1=width+1;let points=new Uint8Array(width1*(height+1));let i,j,j0;const lineSize=width+7&~7;let data=new Uint8Array(lineSize*height),pos=0;for(const elem of imgData.data){let mask=128;while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}let count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}pos++;}if(data[pos]!==0){points[j]=2;++count;}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}let sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}pos++;}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}pos++;}if(data[pos]!==0){points[j0+j]=4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}const steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);const path=new Path2D();for(i=0;count&&i<=height;i++){let p=i*width1;const end=p+width;while(p<end&&!points[p]){p++;}if(p===end){continue;}path.moveTo(p%width1,i);const p0=p;let type=points[p];do{const step=steps[type];do{p+=step;}while(!points[p]);const pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}path.lineTo(p%width1,p/width1|0);if(!points[p]){--count;}}while(p0!==p);--i;}data=null;points=null;const drawOutline=function(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.fill(path);c.beginPath();c.restore();};return drawOutline;}class CanvasExtraState{constructor(width,height){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=_util.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=_util.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=_util.TextRenderingMode.FILL;this.textRise=0;this.fillColor=\"#000000\";this.strokeColor=\"#000000\";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=\"none\";this.startNewPathAndClipBox([0,0,width,height]);}clone(){const clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone;}setCurrentPoint(x,y){this.x=x;this.y=y;}updatePathMinMax(transform,x,y){[x,y]=_util.Util.applyTransform([x,y],transform);this.minX=Math.min(this.minX,x);this.minY=Math.min(this.minY,y);this.maxX=Math.max(this.maxX,x);this.maxY=Math.max(this.maxY,y);}updateRectMinMax(transform,rect){const p1=_util.Util.applyTransform(rect,transform);const p2=_util.Util.applyTransform(rect.slice(2),transform);this.minX=Math.min(this.minX,p1[0],p2[0]);this.minY=Math.min(this.minY,p1[1],p2[1]);this.maxX=Math.max(this.maxX,p1[0],p2[0]);this.maxY=Math.max(this.maxY,p1[1],p2[1]);}updateScalingPathMinMax(transform,minMax){_util.Util.scaleMinMax(transform,minMax);this.minX=Math.min(this.minX,minMax[0]);this.maxX=Math.max(this.maxX,minMax[1]);this.minY=Math.min(this.minY,minMax[2]);this.maxY=Math.max(this.maxY,minMax[3]);}updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){const box=_util.Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]);minMax[1]=Math.max(minMax[1],box[0],box[2]);minMax[2]=Math.min(minMax[2],box[1],box[3]);minMax[3]=Math.max(minMax[3],box[1],box[3]);return;}this.updateRectMinMax(transform,box);}getPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform=null){const box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===_pattern_helper.PathType.STROKE){if(!transform){(0,_util.unreachable)(\"Stroke bounding box must include transform.\");}const scale=_util.Util.singularValueDecompose2dScale(transform);const xStrokePad=scale[0]*this.lineWidth/2;const yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad;box[1]-=yStrokePad;box[2]+=xStrokePad;box[3]+=yStrokePad;}return box;}updateClipFromPath(){const intersect=_util.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0]);}isEmptyClip(){return this.minX===Infinity;}startNewPathAndClipBox(box){this.clipBox=box;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0;}getClippedPathBoundingBox(pathType=_pattern_helper.PathType.FILL,transform=null){return _util.Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform));}}function putBinaryImageData(ctx,imgData){if(typeof ImageData!==\"undefined\"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}const height=imgData.height,width=imgData.width;const partialChunkHeight=height%FULL_CHUNK_HEIGHT;const fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;const totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;const chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0,destPos;const src=imgData.data;const dest=chunkImgData.data;let i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===_util.ImageKind.GRAYSCALE_1BPP){const srcLength=src.byteLength;const dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2);const dest32DataLength=dest32.length;const fullSrcDiff=width+7>>3;const white=0xffffffff;const black=_util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){const srcDiff=srcLength-srcPos;let k=0;const kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;const kEndUnrolled=kEnd&~7;let mask=0;let srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}while(destPos<dest32DataLength){dest32[destPos++]=0;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===_util.ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===_util.ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{throw new Error(`bad image kind: ${imgData.kind}`);}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return;}const height=imgData.height,width=imgData.width;const partialChunkHeight=height%FULL_CHUNK_HEIGHT;const fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;const totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;const chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);let srcPos=0;const src=imgData.data;const dest=chunkImgData.data;for(let i=0;i<totalChunks;i++){const thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;({srcPos}=(0,_image_utils.convertBlackAndWhiteToRGBA)({src,srcPos,dest,width,height:thisChunkHeight,nonBlackColor:0}));ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}function copyCtxState(sourceCtx,destCtx){const properties=[\"strokeStyle\",\"fillStyle\",\"fillRule\",\"globalAlpha\",\"lineWidth\",\"lineCap\",\"lineJoin\",\"miterLimit\",\"globalCompositeOperation\",\"font\",\"filter\"];for(const property of properties){if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle=\"#000000\";ctx.fillRule=\"nonzero\";ctx.globalAlpha=1;ctx.lineWidth=1;ctx.lineCap=\"butt\";ctx.lineJoin=\"miter\";ctx.miterLimit=10;ctx.globalCompositeOperation=\"source-over\";ctx.font=\"10px sans-serif\";if(ctx.setLineDash!==undefined){ctx.setLineDash([]);ctx.lineDashOffset=0;}if(!_is_node.isNodeJS){ctx.filter=\"none\";}}function composeSMaskBackdrop(bytes,r0,g0,b0){const length=bytes.length;for(let i=3;i<length;i+=4){const alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0;}else if(alpha<255){const alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8;}}}function composeSMaskAlpha(maskData,layerData,transferMap){const length=maskData.length;const scale=1/255;for(let i=3;i<length;i+=4){const alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0;}}function composeSMaskLuminosity(maskData,layerData,transferMap){const length=maskData.length;for(let i=3;i<length;i+=4){const y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16;}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){const hasBackdrop=!!backdrop;const r0=hasBackdrop?backdrop[0]:0;const g0=hasBackdrop?backdrop[1]:0;const b0=hasBackdrop?backdrop[2]:0;let composeFn;if(subtype===\"Luminosity\"){composeFn=composeSMaskLuminosity;}else{composeFn=composeSMaskAlpha;}const PIXELS_TO_PROCESS=1048576;const chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(let row=0;row<height;row+=chunkSize){const chunkHeight=Math.min(chunkSize,height-row);const maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight);const layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0);}composeFn(maskData.data,layerData.data,transferMap);layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY);}}function composeSMask(ctx,smask,layerCtx,layerBox){const layerOffsetX=layerBox[0];const layerOffsetY=layerBox[1];const layerWidth=layerBox[2]-layerOffsetX;const layerHeight=layerBox[3]-layerOffsetY;if(layerWidth===0||layerHeight===0){return;}genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY);ctx.save();ctx.globalAlpha=1;ctx.globalCompositeOperation=\"source-over\";ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layerCtx.canvas,0,0);ctx.restore();}function getImageSmoothingEnabled(transform,interpolate){const scale=_util.Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]);scale[1]=Math.fround(scale[1]);const actualScale=Math.fround((globalThis.devicePixelRatio||1)*_display_utils.PixelsPerInch.PDF_TO_CSS_UNITS);if(interpolate!==undefined){return interpolate;}else if(scale[0]<=actualScale||scale[1]<=actualScale){return true;}return false;}const LINE_CAP_STYLES=[\"butt\",\"round\",\"square\"];const LINE_JOIN_STYLES=[\"miter\",\"round\",\"bevel\"];const NORMAL_CLIP={};const EO_CLIP={};var _restoreInitialState=/*#__PURE__*/new WeakSet();var _drawFilter=/*#__PURE__*/new WeakSet();class CanvasGraphics{constructor(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,{optionalContentConfig,markedContentStack=null},annotationCanvasMap,pageColors){_classPrivateMethodInitSpec(this,_drawFilter);_classPrivateMethodInitSpec(this,_restoreInitialState);this.ctx=canvasCtx;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=markedContentStack||[];this.optionalContentConfig=optionalContentConfig;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map();this.annotationCanvasMap=annotationCanvasMap;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.pageColors=pageColors;this._cachedScaleForStroking=[-1,0];this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map();}getObject(data,fallback=null){if(typeof data===\"string\"){return data.startsWith(\"g_\")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}beginDrawing({transform,viewport,transparency=false,background=null}){const width=this.ctx.canvas.width;const height=this.ctx.canvas.height;const savedFillStyle=this.ctx.fillStyle;this.ctx.fillStyle=background||\"#ffffff\";this.ctx.fillRect(0,0,width,height);this.ctx.fillStyle=savedFillStyle;if(transparency){const transparentCanvas=this.cachedCanvases.getCanvas(\"transparent\",width,height);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();this.ctx.transform(...(0,_display_utils.getCurrentTransform)(this.compositeCtx));}this.ctx.save();resetCtxToDefault(this.ctx);if(transform){this.ctx.transform(...transform);this.outputScaleX=transform[0];this.outputScaleY=transform[0];}this.ctx.transform(...viewport.transform);this.viewportScale=viewport.scale;this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx);}executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){const argsArray=operatorList.argsArray;const fnArray=operatorList.fnArray;let i=executionStartIdx||0;const argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}const chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback===\"function\";const endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;let steps=0;const commonObjs=this.commonObjs;const objs=this.objs;let fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}fnId=fnArray[i];if(fnId!==_util.OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{for(const depObjId of argsArray[i]){const objsPool=depObjId.startsWith(\"g_\")?commonObjs:objs;if(!objsPool.has(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}i++;if(i===argsArrayLen){return i;}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}steps=0;}}}endDrawing(){_classPrivateMethodGet(this,_restoreInitialState,_restoreInitialState2).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();for(const cache of this._cachedBitmapsMap.values()){for(const canvas of cache.values()){if(typeof HTMLCanvasElement!==\"undefined\"&&canvas instanceof HTMLCanvasElement){canvas.width=canvas.height=0;}}cache.clear();}this._cachedBitmapsMap.clear();_classPrivateMethodGet(this,_drawFilter,_drawFilter2).call(this);}_scaleImage(img,inverseTransform){const width=img.width;const height=img.height;let widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1);let heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1);let paintWidth=width,paintHeight=height;let tmpCanvasId=\"prescale1\";let tmpCanvas,tmpCtx;while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){let newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth;}if(heightScale>2&&paintHeight>1){newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2;heightScale/=paintHeight/newHeight;}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);img=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId===\"prescale1\"?\"prescale2\":\"prescale1\";}return{img,paintWidth,paintHeight};}_createMaskCanvas(img){const ctx=this.ctx;const{width,height}=img;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;const currentTransform=(0,_display_utils.getCurrentTransform)(ctx);let cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){const mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]);cache=this._cachedBitmapsMap.get(mainKey);if(!cache){cache=new Map();this._cachedBitmapsMap.set(mainKey,cache);}const cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){const offsetX=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]);const offsetY=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX,offsetY};}scaled=cachedImage;}if(!scaled){maskCanvas=this.cachedCanvases.getCanvas(\"maskCanvas\",width,height);putBinaryImageMask(maskCanvas.context,img);}let maskToCanvas=_util.Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=_util.Util.transform(maskToCanvas,[1,0,0,1,0,-height]);const cord1=_util.Util.applyTransform([0,0],maskToCanvas);const cord2=_util.Util.applyTransform([width,height],maskToCanvas);const rect=_util.Util.normalizeRect([cord1[0],cord1[1],cord2[0],cord2[1]]);const drawnWidth=Math.round(rect[2]-rect[0])||1;const drawnHeight=Math.round(rect[3]-rect[1])||1;const fillCanvas=this.cachedCanvases.getCanvas(\"fillCanvas\",drawnWidth,drawnHeight);const fillCtx=fillCanvas.context;const offsetX=Math.min(cord1[0],cord2[0]);const offsetY=Math.min(cord1[1],cord2[1]);fillCtx.translate(-offsetX,-offsetY);fillCtx.transform(...maskToCanvas);if(!scaled){scaled=this._scaleImage(maskCanvas.canvas,(0,_display_utils.getCurrentTransformInverse)(fillCtx));scaled=scaled.img;if(cache&&isPatternFill){cache.set(cacheKey,scaled);}}fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(fillCtx),img.interpolate);drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height);fillCtx.globalCompositeOperation=\"source-in\";const inverse=_util.Util.transform((0,_display_utils.getCurrentTransformInverse)(fillCtx),[1,0,0,1,-offsetX,-offsetY]);fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,_pattern_helper.PathType.FILL):fillColor;fillCtx.fillRect(0,0,width,height);if(cache&&!isPatternFill){this.cachedCanvases.delete(\"fillCanvas\");cache.set(cacheKey,fillCanvas.canvas);}return{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)};}setLineWidth(width){if(width!==this.current.lineWidth){this._cachedScaleForStroking[0]=-1;}this.current.lineWidth=width;this.ctx.lineWidth=width;}setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];}setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];}setMiterLimit(limit){this.ctx.miterLimit=limit;}setDash(dashArray,dashPhase){const ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states){switch(key){case\"LW\":this.setLineWidth(value);break;case\"LC\":this.setLineCap(value);break;case\"LJ\":this.setLineJoin(value);break;case\"ML\":this.setMiterLimit(value);break;case\"D\":this.setDash(value[0],value[1]);break;case\"RI\":this.setRenderingIntent(value);break;case\"FL\":this.setFlatness(value);break;case\"Font\":this.setFont(value[0],value[1]);break;case\"CA\":this.current.strokeAlpha=value;break;case\"ca\":this.current.fillAlpha=value;this.ctx.globalAlpha=value;break;case\"BM\":this.ctx.globalCompositeOperation=value;break;case\"SMask\":this.current.activeSMask=value?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case\"TR\":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break;}}}get inSMaskMode(){return!!this.suspendedCtx;}checkSMaskState(){const inSMaskMode=this.inSMaskMode;if(this.current.activeSMask&&!inSMaskMode){this.beginSMaskMode();}else if(!this.current.activeSMask&&inSMaskMode){this.endSMaskMode();}}beginSMaskMode(){if(this.inSMaskMode){throw new Error(\"beginSMaskMode called while already in smask mode\");}const drawnWidth=this.ctx.canvas.width;const drawnHeight=this.ctx.canvas.height;const cacheId=\"smaskGroupAt\"+this.groupLevel;const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx;this.ctx=scratchCanvas.context;const ctx=this.ctx;ctx.setTransform(...(0,_display_utils.getCurrentTransform)(this.suspendedCtx));copyCtxState(this.suspendedCtx,ctx);mirrorContextOperations(ctx,this.suspendedCtx);this.setGState([[\"BM\",\"source-over\"],[\"ca\",1],[\"CA\",1]]);}endSMaskMode(){if(!this.inSMaskMode){throw new Error(\"endSMaskMode called while not in smask mode\");}this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null;}compose(dirtyBox){if(!this.current.activeSMask){return;}if(!dirtyBox){dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];}else{dirtyBox[0]=Math.floor(dirtyBox[0]);dirtyBox[1]=Math.floor(dirtyBox[1]);dirtyBox[2]=Math.ceil(dirtyBox[2]);dirtyBox[3]=Math.ceil(dirtyBox[3]);}const smask=this.current.activeSMask;const suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore();}save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save();}else{this.ctx.save();}const old=this.current;this.stateStack.push(old);this.current=old.clone();}restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode();}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx);}else{this.ctx.restore();}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}}transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}constructPath(ops,args,minMax){const ctx=this.ctx;const current=this.current;let x=current.x,y=current.y;let startX,startY;const currentTransform=(0,_display_utils.getCurrentTransform)(ctx);const isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0;const minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(let i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case _util.OPS.rectangle:x=args[j++];y=args[j++];const width=args[j++];const height=args[j++];const xw=x+width;const yh=y+height;ctx.moveTo(x,y);if(width===0||height===0){ctx.lineTo(xw,yh);}else{ctx.lineTo(xw,y);ctx.lineTo(xw,yh);ctx.lineTo(x,yh);}if(!isScalingMatrix){current.updateRectMinMax(currentTransform,[x,y,xw,yh]);}ctx.closePath();break;case _util.OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case _util.OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case _util.OPS.curveTo:startX=x;startY=y;x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier);j+=6;break;case _util.OPS.curveTo2:startX=x;startY=y;ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier);x=args[j+2];y=args[j+3];j+=4;break;case _util.OPS.curveTo3:startX=x;startY=y;x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier);j+=4;break;case _util.OPS.closePath:ctx.closePath();break;}}if(isScalingMatrix){current.updateScalingPathMinMax(currentTransform,minMaxForBezier);}current.setCurrentPoint(x,y);}closePath(){this.ctx.closePath();}stroke(consumePath=true){const ctx=this.ctx;const strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(typeof strokeColor===\"object\"&&strokeColor?.getPattern){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.STROKE);this.rescaleAndStroke(false);ctx.restore();}else{this.rescaleAndStroke(true);}}if(consumePath){this.consumePath(this.current.getClippedPathBoundingBox());}ctx.globalAlpha=this.current.fillAlpha;}closeStroke(){this.closePath();this.stroke();}fill(consumePath=true){const ctx=this.ctx;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;let needRestore=false;if(isPatternFill){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);needRestore=true;}const intersect=this.current.getClippedPathBoundingBox();if(this.contentVisible&&intersect!==null){if(this.pendingEOFill){ctx.fill(\"evenodd\");this.pendingEOFill=false;}else{ctx.fill();}}if(needRestore){ctx.restore();}if(consumePath){this.consumePath(intersect);}}eoFill(){this.pendingEOFill=true;this.fill();}fillStroke(){this.fill(false);this.stroke(false);this.consumePath();}eoFillStroke(){this.pendingEOFill=true;this.fillStroke();}closeFillStroke(){this.closePath();this.fillStroke();}closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();}endPath(){this.consumePath();}clip(){this.pendingClip=NORMAL_CLIP;}eoClip(){this.pendingClip=EO_CLIP;}beginText(){this.current.textMatrix=_util.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}endText(){const paths=this.pendingTextPaths;const ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}ctx.save();ctx.beginPath();for(const path of paths){ctx.setTransform(...path.transform);ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize);}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths;}setCharSpacing(spacing){this.current.charSpacing=spacing;}setWordSpacing(spacing){this.current.wordSpacing=spacing;}setHScale(scale){this.current.textHScale=scale/100;}setLeading(leading){this.current.leading=-leading;}setFont(fontRefName,size){const fontObj=this.commonObjs.get(fontRefName);const current=this.current;if(!fontObj){throw new Error(`Can't find font for ${fontRefName}`);}current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){(0,_util.warn)(\"Invalid font matrix for font \"+fontRefName);}if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}const name=fontObj.loadedName||\"sans-serif\";const typeface=fontObj.systemFontInfo?.css||`\"${name}\", ${fontObj.fallbackName}`;let bold=\"normal\";if(fontObj.black){bold=\"900\";}else if(fontObj.bold){bold=\"bold\";}const italic=fontObj.italic?\"italic\":\"normal\";let browserFontSize=size;if(size<MIN_FONT_SIZE){browserFontSize=MIN_FONT_SIZE;}else if(size>MAX_FONT_SIZE){browserFontSize=MAX_FONT_SIZE;}this.current.fontSizeScale=size/browserFontSize;this.ctx.font=`${italic} ${bold} ${browserFontSize}px ${typeface}`;}setTextRenderingMode(mode){this.current.textRenderingMode=mode;}setTextRise(rise){this.current.textRise=rise;}moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;}setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.hypot(a,b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}nextLine(){this.moveText(0,this.current.leading);}paintChar(character,x,y,patternTransform){const ctx=this.ctx;const current=this.current;const font=current.font;const textRenderingMode=current.textRenderingMode;const fontSize=current.fontSize/current.fontSizeScale;const fillStrokeMode=textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;const isAddToPathSet=!!(textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG);const patternFill=current.patternFill&&!font.missingFile;let addToPath;if(font.disableFontFace||isAddToPathSet||patternFill){addToPath=font.getPathGenerator(this.commonObjs,character);}if(font.disableFontFace||patternFill){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(patternTransform){ctx.setTransform(...patternTransform);}if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.fill();}if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.stroke();}ctx.restore();}else{if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}if(isAddToPathSet){const paths=this.pendingTextPaths||=[];paths.push({transform:(0,_display_utils.getCurrentTransform)(ctx),x,y,fontSize,addToPath});}}get isFontSubpixelAAEnabled(){const{context:ctx}=this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\",10,10);ctx.scale(1.5,1);ctx.fillText(\"I\",0,10);const data=ctx.getImageData(0,0,10,10).data;let enabled=false;for(let i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}return(0,_util.shadow)(this,\"isFontSubpixelAAEnabled\",enabled);}showText(glyphs){const current=this.current;const font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}const fontSize=current.fontSize;if(fontSize===0){return undefined;}const ctx=this.ctx;const fontSizeScale=current.fontSizeScale;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const fontDirection=current.fontDirection;const textHScale=current.textHScale*fontDirection;const glyphsLength=glyphs.length;const vertical=font.vertical;const spacingDir=vertical?1:-1;const defaultVMetrics=font.defaultVMetrics;const widthAdvanceScale=fontSize*current.fontMatrix[0];const simpleFillText=current.textRenderingMode===_util.TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save();ctx.transform(...current.textMatrix);ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}let patternTransform;if(current.patternFill){ctx.save();const pattern=current.fillColor.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL);patternTransform=(0,_display_utils.getCurrentTransform)(ctx);ctx.restore();ctx.fillStyle=pattern;}let lineWidth=current.lineWidth;const scale=current.textMatrixScale;if(scale===0||lineWidth===0){const fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){lineWidth=this.getSinglePixelWidth();}}else{lineWidth/=scale;}if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale;}ctx.lineWidth=lineWidth;if(font.isInvalidPDFjsFont){const chars=[];let width=0;for(const glyph of glyphs){chars.push(glyph.unicode);width+=glyph.width;}ctx.fillText(chars.join(\"\"),0,0);current.x+=width*widthAdvanceScale*textHScale;ctx.restore();this.compose();return undefined;}let x=0,i;for(i=0;i<glyphsLength;++i){const glyph=glyphs[i];if(typeof glyph===\"number\"){x+=spacingDir*glyph*fontSize/1000;continue;}let restoreNeeded=false;const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const character=glyph.fontChar;const accent=glyph.accent;let scaledX,scaledY;let width=glyph.width;if(vertical){const vmetric=glyph.vmetric||defaultVMetrics;const vx=-(glyph.vmetric?vmetric[1]:width*0.5)*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(font.remeasure&&width>0){const measuredWidth=ctx.measureText(character).width*1000/fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){const characterScaleX=width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX;}else if(width!==measuredWidth){scaledX+=(width-measuredWidth)/2000*fontSize/fontSizeScale;}}if(this.contentVisible&&(glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY,patternTransform);if(accent){const scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale;const scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform);}}}let charWidth;if(vertical){charWidth=width*widthAdvanceScale-spacing*fontDirection;}else{charWidth=width*widthAdvanceScale+spacing*fontDirection;}x+=charWidth;if(restoreNeeded){ctx.restore();}}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}ctx.restore();this.compose();return undefined;}showType3Text(glyphs){const ctx=this.ctx;const current=this.current;const font=current.font;const fontSize=current.fontSize;const fontDirection=current.fontDirection;const spacingDir=font.vertical?1:-1;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const textHScale=current.textHScale*fontDirection;const fontMatrix=current.fontMatrix||_util.FONT_IDENTITY_MATRIX;const glyphsLength=glyphs.length;const isTextInvisible=current.textRenderingMode===_util.TextRenderingMode.INVISIBLE;let i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;ctx.save();ctx.transform(...current.textMatrix);ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(typeof glyph===\"number\"){spacingLength=spacingDir*glyph*fontSize/1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){(0,_util.warn)(`Type3 character \"${glyph.operatorListId}\" is not available.`);continue;}if(this.contentVisible){this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform(...fontMatrix);this.executeOperatorList(operatorList);this.restore();}const transformed=_util.Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}ctx.restore();this.processingType3=null;}setCharWidth(xWidth,yWidth){}setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.ctx.clip();this.endPath();}getColorN_Pattern(IR){let pattern;if(IR[0]===\"TilingPattern\"){const color=IR[1];const baseTransform=this.baseTransform||(0,_display_utils.getCurrentTransform)(this.ctx);const canvasGraphicsFactory={createCanvasGraphics:ctx=>{return new CanvasGraphics(ctx,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack});}};pattern=new _pattern_helper.TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=this._getPattern(IR[1],IR[2]);}return pattern;}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments);}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;}setStrokeRGBColor(r,g,b){const color=_util.Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color;}setFillRGBColor(r,g,b){const color=_util.Util.makeHexColor(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false;}_getPattern(objId,matrix=null){let pattern;if(this.cachedPatterns.has(objId)){pattern=this.cachedPatterns.get(objId);}else{pattern=(0,_pattern_helper.getShadingPattern)(this.getObject(objId));this.cachedPatterns.set(objId,pattern);}if(matrix){pattern.matrix=matrix;}return pattern;}shadingFill(objId){if(!this.contentVisible){return;}const ctx=this.ctx;this.save();const pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.SHADING);const inv=(0,_display_utils.getCurrentTransformInverse)(ctx);if(inv){const canvas=ctx.canvas;const width=canvas.width;const height=canvas.height;const bl=_util.Util.applyTransform([0,0],inv);const br=_util.Util.applyTransform([0,height],inv);const ul=_util.Util.applyTransform([width,0],inv);const ur=_util.Util.applyTransform([width,height],inv);const x0=Math.min(bl[0],br[0],ul[0],ur[0]);const y0=Math.min(bl[1],br[1],ul[1],ur[1]);const x1=Math.max(bl[0],br[0],ul[0],ur[0]);const y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}this.compose(this.current.getClippedPathBoundingBox());this.restore();}beginInlineImage(){(0,_util.unreachable)(\"Should not call beginInlineImage\");}beginImageData(){(0,_util.unreachable)(\"Should not call beginImageData\");}paintFormXObjectBegin(matrix,bbox){if(!this.contentVisible){return;}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(matrix)&&matrix.length===6){this.transform(...matrix);}this.baseTransform=(0,_display_utils.getCurrentTransform)(this.ctx);if(bbox){const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(this.ctx),bbox);this.clip();this.endPath();}}paintFormXObjectEnd(){if(!this.contentVisible){return;}this.restore();this.baseTransform=this.baseTransformStack.pop();}beginGroup(group){if(!this.contentVisible){return;}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null;}const currentCtx=this.ctx;if(!group.isolated){(0,_util.info)(\"TODO: Support non-isolated groups.\");}if(group.knockout){(0,_util.warn)(\"Knockout groups not supported.\");}const currentTransform=(0,_display_utils.getCurrentTransform)(currentCtx);if(group.matrix){currentCtx.transform(...group.matrix);}if(!group.bbox){throw new Error(\"Bounding box is required.\");}let bounds=_util.Util.getAxialAlignedBoundingBox(group.bbox,(0,_display_utils.getCurrentTransform)(currentCtx));const canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=_util.Util.intersect(bounds,canvasBounds)||[0,0,0,0];const offsetX=Math.floor(bounds[0]);const offsetY=Math.floor(bounds[1]);let drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);let drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);let scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE;}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE;}this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);let cacheId=\"groupAt\"+this.groupLevel;if(group.smask){cacheId+=\"_smask_\"+this.smaskCounter++%2;}const scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);const groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform(...currentTransform);if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX,offsetY,scaleX,scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY);currentCtx.save();}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([[\"BM\",\"source-over\"],[\"ca\",1],[\"CA\",1]]);this.groupStack.push(currentCtx);this.groupLevel++;}endGroup(group){if(!this.contentVisible){return;}this.groupLevel--;const groupCtx=this.ctx;const ctx=this.groupStack.pop();this.ctx=ctx;this.ctx.imageSmoothingEnabled=false;if(group.smask){this.tempSMask=this.smaskStack.pop();this.restore();}else{this.ctx.restore();const currentMtx=(0,_display_utils.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();this.ctx.setTransform(...currentMtx);const dirtyBox=_util.Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0);this.ctx.restore();this.compose(dirtyBox);}}beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){_classPrivateMethodGet(this,_restoreInitialState,_restoreInitialState2).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){this.ctx.setTransform(...this.baseTransform);}if(Array.isArray(rect)&&rect.length===4){const width=rect[2]-rect[0];const height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice();transform[4]-=rect[0];transform[5]-=rect[1];rect=rect.slice();rect[0]=rect[1]=0;rect[2]=width;rect[3]=height;const[scaleX,scaleY]=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(this.ctx));const{viewportScale}=this;const canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale);const canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);const{canvas,context}=this.annotationCanvas;this.annotationCanvasMap.set(id,canvas);this.annotationCanvas.savedCtx=this.ctx;this.ctx=context;this.ctx.save();this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY);resetCtxToDefault(this.ctx);}else{resetCtxToDefault(this.ctx);this.ctx.rect(rect[0],rect[1],width,height);this.ctx.clip();this.endPath();}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform(...transform);this.transform(...matrix);}endAnnotation(){if(this.annotationCanvas){this.ctx.restore();_classPrivateMethodGet(this,_drawFilter,_drawFilter2).call(this);this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas;}}paintImageMaskXObject(img){if(!this.contentVisible){return;}const count=img.count;img=this.getObject(img.data,img);img.count=count;const ctx=this.ctx;const glyph=this.processingType3;if(glyph){if(glyph.compiled===undefined){glyph.compiled=compileType3Glyph(img);}if(glyph.compiled){glyph.compiled(ctx);return;}}const mask=this._createMaskCanvas(img);const maskCanvas=mask.canvas;ctx.save();ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY);ctx.restore();this.compose();}paintImageMaskXObjectRepeat(img,scaleX,skewX=0,skewY=0,scaleY,positions){if(!this.contentVisible){return;}img=this.getObject(img.data,img);const ctx=this.ctx;ctx.save();const currentTransform=(0,_display_utils.getCurrentTransform)(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);const mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(let i=0,ii=positions.length;i<ii;i+=2){const trans=_util.Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]);const[x,y]=_util.Util.applyTransform([0,0],trans);ctx.drawImage(mask.canvas,x,y);}ctx.restore();this.compose();}paintImageMaskXObjectGroup(images){if(!this.contentVisible){return;}const ctx=this.ctx;const fillColor=this.current.fillColor;const isPatternFill=this.current.patternFill;for(const image of images){const{data,width,height,transform}=image;const maskCanvas=this.cachedCanvases.getCanvas(\"maskCanvas\",width,height);const maskCtx=maskCanvas.context;maskCtx.save();const img=this.getObject(data,image);putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation=\"source-in\";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,(0,_display_utils.getCurrentTransformInverse)(ctx),_pattern_helper.PathType.FILL):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform(...transform);ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}this.compose();}paintImageXObject(objId){if(!this.contentVisible){return;}const imgData=this.getObject(objId);if(!imgData){(0,_util.warn)(\"Dependent image isn't ready yet\");return;}this.paintInlineImageXObject(imgData);}paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible){return;}const imgData=this.getObject(objId);if(!imgData){(0,_util.warn)(\"Dependent image isn't ready yet\");return;}const width=imgData.width;const height=imgData.height;const map=[];for(let i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}this.paintInlineImageXObjectGroup(imgData,map);}applyTransferMapsToCanvas(ctx){if(this.current.transferMaps!==\"none\"){ctx.filter=this.current.transferMaps;ctx.drawImage(ctx.canvas,0,0);ctx.filter=\"none\";}return ctx.canvas;}applyTransferMapsToBitmap(imgData){if(this.current.transferMaps===\"none\"){return imgData.bitmap;}const{bitmap,width,height}=imgData;const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",width,height);const tmpCtx=tmpCanvas.context;tmpCtx.filter=this.current.transferMaps;tmpCtx.drawImage(bitmap,0,0);tmpCtx.filter=\"none\";return tmpCanvas.canvas;}paintInlineImageXObject(imgData){if(!this.contentVisible){return;}const width=imgData.width;const height=imgData.height;const ctx=this.ctx;this.save();if(!_is_node.isNodeJS){ctx.filter=\"none\";}ctx.scale(1/width,-1/height);let imgToPaint;if(imgData.bitmap){imgToPaint=this.applyTransferMapsToBitmap(imgData);}else if(typeof HTMLElement===\"function\"&&imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",width,height);const tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}const scaled=this._scaleImage(imgToPaint,(0,_display_utils.getCurrentTransformInverse)(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled((0,_display_utils.getCurrentTransform)(ctx),imgData.interpolate);drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);this.compose();this.restore();}paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible){return;}const ctx=this.ctx;let imgToPaint;if(imgData.bitmap){imgToPaint=imgData.bitmap;}else{const w=imgData.width;const h=imgData.height;const tmpCanvas=this.cachedCanvases.getCanvas(\"inlineImage\",w,h);const tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}for(const entry of map){ctx.save();ctx.transform(...entry.transform);ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);ctx.restore();}this.compose();}paintSolidColorImageMask(){if(!this.contentVisible){return;}this.ctx.fillRect(0,0,1,1);this.compose();}markPoint(tag){}markPointProps(tag,properties){}beginMarkedContent(tag){this.markedContentStack.push({visible:true});}beginMarkedContentProps(tag,properties){if(tag===\"OC\"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)});}else{this.markedContentStack.push({visible:true});}this.contentVisible=this.isContentVisible();}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible();}beginCompat(){}endCompat(){}consumePath(clipBox){const isEmpty=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath();}if(!this.pendingClip){this.compose(clipBox);}const ctx=this.ctx;if(this.pendingClip){if(!isEmpty){if(this.pendingClip===EO_CLIP){ctx.clip(\"evenodd\");}else{ctx.clip();}}this.pendingClip=null;}this.current.startNewPathAndClipBox(this.current.clipBox);ctx.beginPath();}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,_display_utils.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));}else{const absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);const normX=Math.hypot(m[0],m[2]);const normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet;}}return this._cachedGetSinglePixelWidth;}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth}=this.current;const{a,b,c,d}=this.ctx.getTransform();let scaleX,scaleY;if(b===0&&c===0){const normX=Math.abs(a);const normY=Math.abs(d);if(normX===normY){if(lineWidth===0){scaleX=scaleY=1/normX;}else{const scaledLineWidth=normX*lineWidth;scaleX=scaleY=scaledLineWidth<1?1/scaledLineWidth:1;}}else if(lineWidth===0){scaleX=1/normX;scaleY=1/normY;}else{const scaledXLineWidth=normX*lineWidth;const scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1;scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1;}}else{const absDet=Math.abs(a*d-b*c);const normX=Math.hypot(a,b);const normY=Math.hypot(c,d);if(lineWidth===0){scaleX=normY/absDet;scaleY=normX/absDet;}else{const baseArea=lineWidth*absDet;scaleX=normY>baseArea?normY/baseArea:1;scaleY=normX>baseArea?normX/baseArea:1;}}this._cachedScaleForStroking[0]=scaleX;this._cachedScaleForStroking[1]=scaleY;}return this._cachedScaleForStroking;}rescaleAndStroke(saveRestore){const{ctx}=this;const{lineWidth}=this.current;const[scaleX,scaleY]=this.getScaleForStroking();ctx.lineWidth=lineWidth||1;if(scaleX===1&&scaleY===1){ctx.stroke();return;}const dashes=ctx.getLineDash();if(saveRestore){ctx.save();}ctx.scale(scaleX,scaleY);if(dashes.length>0){const scale=Math.max(scaleX,scaleY);ctx.setLineDash(dashes.map(x=>x/scale));ctx.lineDashOffset/=scale;}ctx.stroke();if(saveRestore){ctx.restore();}}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--){if(!this.markedContentStack[i].visible){return false;}}return true;}}function _restoreInitialState2(){while(this.stateStack.length||this.inSMaskMode){this.restore();}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}}function _drawFilter2(){if(this.pageColors){const hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(hcmFilterId!==\"none\"){const savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=savedFilter;}}}exports.CanvasGraphics=CanvasGraphics;for(const op in _util.OPS){if(CanvasGraphics.prototype[op]!==undefined){CanvasGraphics.prototype[_util.OPS[op]]=CanvasGraphics.prototype[op];}}/***/},/* 12 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.TilingPattern=exports.PathType=void 0;exports.getShadingPattern=getShadingPattern;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(6);const PathType={FILL:\"Fill\",STROKE:\"Stroke\",SHADING:\"Shading\"};exports.PathType=PathType;function applyBoundingBox(ctx,bbox){if(!bbox){return;}const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];const region=new Path2D();region.rect(bbox[0],bbox[1],width,height);ctx.clip(region);}class BaseShadingPattern{constructor(){if(this.constructor===BaseShadingPattern){(0,_util.unreachable)(\"Cannot initialize BaseShadingPattern.\");}}getPattern(){(0,_util.unreachable)(\"Abstract method `getPattern` called.\");}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(IR){super();this._type=IR[1];this._bbox=IR[2];this._colorStops=IR[3];this._p0=IR[4];this._p1=IR[5];this._r0=IR[6];this._r1=IR[7];this.matrix=null;}_createGradient(ctx){let grad;if(this._type===\"axial\"){grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]);}else if(this._type===\"radial\"){grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1);}for(const colorStop of this._colorStops){grad.addColorStop(colorStop[0],colorStop[1]);}return grad;}getPattern(ctx,owner,inverse,pathType){let pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){const ownerBBox=owner.current.getClippedPathBoundingBox(pathType,(0,_display_utils.getCurrentTransform)(ctx))||[0,0,0,0];const width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1;const height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1;const tmpCanvas=owner.cachedCanvases.getCanvas(\"pattern\",width,height,true);const tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.beginPath();tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]);inverse=_util.Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]);tmpCtx.transform(...owner.baseTransform);if(this.matrix){tmpCtx.transform(...this.matrix);}applyBoundingBox(tmpCtx,this._bbox);tmpCtx.fillStyle=this._createGradient(tmpCtx);tmpCtx.fill();pattern=ctx.createPattern(tmpCanvas.canvas,\"no-repeat\");const domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix);}else{applyBoundingBox(ctx,this._bbox);pattern=this._createGradient(ctx);}return pattern;}}function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){const coords=context.coords,colors=context.colors;const bytes=data.data,rowSize=data.width*4;let tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}const x1=(coords[p1]+context.offsetX)*context.scaleX;const y1=(coords[p1+1]+context.offsetY)*context.scaleY;const x2=(coords[p2]+context.offsetX)*context.scaleX;const y2=(coords[p2+1]+context.offsetY)*context.scaleY;const x3=(coords[p3]+context.offsetX)*context.scaleX;const y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}const c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];const c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];const c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];const minY=Math.round(y1),maxY=Math.round(y3);let xa,car,cag,cab;let xb,cbr,cbg,cbb;for(let y=minY;y<=maxY;y++){if(y<y2){let k;if(y<y1){k=0;}else{k=(y1-y)/(y1-y2);}xa=x1-(x1-x2)*k;car=c1r-(c1r-c2r)*k;cag=c1g-(c1g-c2g)*k;cab=c1b-(c1b-c2b)*k;}else{let k;if(y>y3){k=1;}else if(y2===y3){k=0;}else{k=(y2-y)/(y2-y3);}xa=x2-(x2-x3)*k;car=c2r-(c2r-c3r)*k;cag=c2g-(c2g-c3g)*k;cab=c2b-(c2b-c3b)*k;}let k;if(y<y1){k=0;}else if(y>y3){k=1;}else{k=(y1-y)/(y1-y3);}xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;const x1_=Math.round(Math.min(xa,xb));const x2_=Math.round(Math.max(xa,xb));let j=rowSize*y+x1_*4;for(let x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);if(k<0){k=0;}else if(k>1){k=1;}bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}function drawFigure(data,figure,context){const ps=figure.coords;const cs=figure.colors;let i,ii;switch(figure.type){case\"lattice\":const verticesPerRow=figure.verticesPerRow;const rows=Math.floor(ps.length/verticesPerRow)-1;const cols=verticesPerRow-1;for(i=0;i<rows;i++){let q=i*verticesPerRow;for(let j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}break;case\"triangles\":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}break;default:throw new Error(\"illegal figure\");}}class MeshShadingPattern extends BaseShadingPattern{constructor(IR){super();this._coords=IR[2];this._colors=IR[3];this._figures=IR[4];this._bounds=IR[5];this._bbox=IR[7];this._background=IR[8];this.matrix=null;}_createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){const EXPECTED_SCALE=1.1;const MAX_PATTERN_SIZE=3000;const BORDER_SIZE=2;const offsetX=Math.floor(this._bounds[0]);const offsetY=Math.floor(this._bounds[1]);const boundsWidth=Math.ceil(this._bounds[2])-offsetX;const boundsHeight=Math.ceil(this._bounds[3])-offsetY;const width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);const height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);const scaleX=boundsWidth/width;const scaleY=boundsHeight/height;const context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};const paddedWidth=width+BORDER_SIZE*2;const paddedHeight=height+BORDER_SIZE*2;const tmpCanvas=cachedCanvases.getCanvas(\"mesh\",paddedWidth,paddedHeight,false);const tmpCtx=tmpCanvas.context;const data=tmpCtx.createImageData(width,height);if(backgroundColor){const bytes=data.data;for(let i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}for(const figure of this._figures){drawFigure(data,figure,context);}tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);const canvas=tmpCanvas.canvas;return{canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX,scaleY};}getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);let scale;if(pathType===PathType.SHADING){scale=_util.Util.singularValueDecompose2dScale((0,_display_utils.getCurrentTransform)(ctx));}else{scale=_util.Util.singularValueDecompose2dScale(owner.baseTransform);if(this.matrix){const matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}const temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);if(pathType!==PathType.SHADING){ctx.setTransform(...owner.baseTransform);if(this.matrix){ctx.transform(...this.matrix);}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,\"no-repeat\");}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return\"hotpink\";}}function getShadingPattern(IR){switch(IR[0]){case\"RadialAxial\":return new RadialAxialShadingPattern(IR);case\"Mesh\":return new MeshShadingPattern(IR);case\"Dummy\":return new DummyShadingPattern();}throw new Error(`Unknown IR type: ${IR[0]}`);}const PaintType={COLORED:1,UNCOLORED:2};class TilingPattern{constructor(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.ctx=ctx;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;}createPatternCanvas(owner){const operatorList=this.operatorList;const bbox=this.bbox;const xstep=this.xstep;const ystep=this.ystep;const paintType=this.paintType;const tilingType=this.tilingType;const color=this.color;const canvasGraphicsFactory=this.canvasGraphicsFactory;(0,_util.info)(\"TilingType: \"+tilingType);const x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];const matrixScale=_util.Util.singularValueDecompose2dScale(this.matrix);const curMatrixScale=_util.Util.singularValueDecompose2dScale(this.baseTransform);const combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];const dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]);const dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]);const tmpCanvas=owner.cachedCanvases.getCanvas(\"pattern\",dimx.size,dimy.size,true);const tmpCtx=tmpCanvas.context;const graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(graphics,paintType,color);let adjustedX0=x0;let adjustedY0=y0;let adjustedX1=x1;let adjustedY1=y1;if(x0<0){adjustedX0=0;adjustedX1+=Math.abs(x0);}if(y0<0){adjustedY0=0;adjustedY1+=Math.abs(y0);}tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0));graphics.transform(dimx.scale,0,0,dimy.scale,0,0);tmpCtx.save();this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1);graphics.baseTransform=(0,_display_utils.getCurrentTransform)(graphics.ctx);graphics.executeOperatorList(operatorList);graphics.endDrawing();return{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0};}getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);const maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);let size=Math.ceil(step*scale);if(size>=maxSize){size=maxSize;}else{scale=size/step;}return{scale,size};}clipBbox(graphics,x0,y0,x1,y1){const bboxWidth=x1-x0;const bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.current.updateRectMinMax((0,_display_utils.getCurrentTransform)(graphics.ctx),[x0,y0,x1,y1]);graphics.clip();graphics.endPath();}setFillAndStrokeStyleToContext(graphics,paintType,color){const context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:const ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;current.fillColor=ctx.fillStyle;current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:const cssColor=_util.Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;current.fillColor=cssColor;current.strokeColor=cssColor;break;default:throw new _util.FormatError(`Unsupported paint type: ${paintType}`);}}getPattern(ctx,owner,inverse,pathType){let matrix=inverse;if(pathType!==PathType.SHADING){matrix=_util.Util.transform(matrix,owner.baseTransform);if(this.matrix){matrix=_util.Util.transform(matrix,this.matrix);}}const temporaryPatternCanvas=this.createPatternCanvas(owner);let domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);const pattern=ctx.createPattern(temporaryPatternCanvas.canvas,\"repeat\");pattern.setTransform(domMatrix);return pattern;}}_defineProperty(TilingPattern,\"MAX_PATTERN_SIZE\",3000);exports.TilingPattern=TilingPattern;/***/},/* 13 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.convertBlackAndWhiteToRGBA=convertBlackAndWhiteToRGBA;exports.convertToRGBA=convertToRGBA;exports.grayToRGBA=grayToRGBA;var _util=__w_pdfjs_require__(1);function convertToRGBA(params){switch(params.kind){case _util.ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case _util.ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA({src,srcPos=0,dest,width,height,nonBlackColor=0xffffffff,inverseDecode=false}){const black=_util.FeatureTest.isLittleEndian?0xff000000:0x000000ff;const[zeroMapping,oneMapping]=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor];const widthInSource=width>>3;const widthRemainder=width&7;const srcLength=src.length;dest=new Uint32Array(dest.buffer);let destPos=0;for(let i=0;i<height;i++){for(const max=srcPos+widthInSource;srcPos<max;srcPos++){const elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=elem&0b10000000?oneMapping:zeroMapping;dest[destPos++]=elem&0b1000000?oneMapping:zeroMapping;dest[destPos++]=elem&0b100000?oneMapping:zeroMapping;dest[destPos++]=elem&0b10000?oneMapping:zeroMapping;dest[destPos++]=elem&0b1000?oneMapping:zeroMapping;dest[destPos++]=elem&0b100?oneMapping:zeroMapping;dest[destPos++]=elem&0b10?oneMapping:zeroMapping;dest[destPos++]=elem&0b1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}const elem=srcPos<srcLength?src[srcPos++]:255;for(let j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos,destPos};}function convertRGBToRGBA({src,srcPos=0,dest,destPos=0,width,height}){let i=0;const len32=src.length>>2;const src32=new Uint32Array(src.buffer,srcPos,len32);if(_util.FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i];const s2=src32[i+1];const s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(let j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){const s1=src32[i];const s2=src32[i+1];const s3=src32[i+2];dest[destPos]=s1|0xff;dest[destPos+1]=s1<<24|s2>>>8|0xff;dest[destPos+2]=s2<<16|s3>>>16|0xff;dest[destPos+3]=s3<<8|0xff;}for(let j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]<<24|src[j+1]<<16|src[j+2]<<8|0xff;}}return{srcPos,destPos};}function grayToRGBA(src,dest){if(_util.FeatureTest.isLittleEndian){for(let i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(let i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x1010100|0x000000ff;}}}/***/},/* 14 */ /***/(__unused_webpack_module,exports)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.GlobalWorkerOptions=void 0;const GlobalWorkerOptions=Object.create(null);exports.GlobalWorkerOptions=GlobalWorkerOptions;GlobalWorkerOptions.workerPort=null;GlobalWorkerOptions.workerSrc=\"\";/***/},/* 15 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.MessageHandler=void 0;var _util=__w_pdfjs_require__(1);const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2};const StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){if(!(reason instanceof Error||typeof reason===\"object\"&&reason!==null)){(0,_util.unreachable)('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');}switch(reason.name){case\"AbortException\":return new _util.AbortException(reason.message);case\"MissingPDFException\":return new _util.MissingPDFException(reason.message);case\"PasswordException\":return new _util.PasswordException(reason.message,reason.code);case\"UnexpectedResponseException\":return new _util.UnexpectedResponseException(reason.message,reason.status);case\"UnknownErrorException\":return new _util.UnknownErrorException(reason.message,reason.details);default:return new _util.UnknownErrorException(reason.message,reason.toString());}}var _createStreamSink=/*#__PURE__*/new WeakSet();var _processStreamMessage=/*#__PURE__*/new WeakSet();var _deleteStreamController=/*#__PURE__*/new WeakSet();class MessageHandler{constructor(_sourceName,_targetName,_comObj){_classPrivateMethodInitSpec(this,_deleteStreamController);_classPrivateMethodInitSpec(this,_processStreamMessage);_classPrivateMethodInitSpec(this,_createStreamSink);this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=event=>{const data=event.data;if(data.targetName!==this.sourceName){return;}if(data.stream){_classPrivateMethodGet(this,_processStreamMessage,_processStreamMessage2).call(this,data);return;}if(data.callback){const callbackId=data.callbackId;const capability=this.callbackCapabilities[callbackId];if(!capability){throw new Error(`Cannot resolve callback ${callbackId}`);}delete this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error(\"Unexpected callback case\");}return;}const action=this.actionHandler[data.action];if(!action){throw new Error(`Unknown action from worker: ${data.action}`);}if(data.callbackId){const cbSourceName=this.sourceName;const cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data));}).then(function(result){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){_classPrivateMethodGet(this,_createStreamSink,_createStreamSink2).call(this,data);return;}action(data.data);};_comObj.addEventListener(\"message\",this._onComObjOnMessage);}on(actionName,handler){const ah=this.actionHandler;if(ah[actionName]){throw new Error(`There is already an actionName called \"${actionName}\"`);}ah[actionName]=handler;}send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data},transfers);}sendWithPromise(actionName,data,transfers){const callbackId=this.callbackId++;const capability=new _util.PromiseCapability();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId,data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}sendWithStream(actionName,data,queueingStrategy,transfers){const streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:controller=>{const startCapability=new _util.PromiseCapability();this.streamControllers[streamId]={controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName,targetName,action:actionName,streamId,data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:controller=>{const pullCapability=new _util.PromiseCapability();this.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL,streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:reason=>{(0,_util.assert)(reason instanceof Error,\"cancel must have a valid reason\");const cancelCapability=new _util.PromiseCapability();this.streamControllers[streamId].cancelCall=cancelCapability;this.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL,streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}destroy(){this.comObj.removeEventListener(\"message\",this._onComObjOnMessage);}}function _createStreamSink2(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;const self=this,action=this.actionHandler[data.action];const streamSink={enqueue(chunk,size=1,transfers){if(this.isCancelled){return;}const lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=new _util.PromiseCapability();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName,targetName,stream:StreamKind.ENQUEUE,streamId,chunk},transfers);},close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.CLOSE,streamId});delete self.streamSinks[streamId];},error(reason){(0,_util.assert)(reason instanceof Error,\"error must have a valid reason\");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName,targetName,stream:StreamKind.ERROR,streamId,reason:wrapReason(reason)});},sinkCapability:new _util.PromiseCapability(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;new Promise(function(resolve){resolve(action(data.data,streamSink));}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.START_COMPLETE,streamId,reason:wrapReason(reason)});});}function _processStreamMessage2(data){const streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;const streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;new Promise(function(resolve){resolve(streamSink.onPull?.());}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.PULL_COMPLETE,streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:(0,_util.assert)(streamController,\"enqueue should have stream controller\");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:(0,_util.assert)(streamController,\"close should have stream controller\");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.ERROR:(0,_util.assert)(streamController,\"error should have stream controller\");streamController.controller.error(wrapReason(data.reason));_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}_classPrivateMethodGet(this,_deleteStreamController,_deleteStreamController2).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}new Promise(function(resolve){resolve(streamSink.onCancel?.(wrapReason(data.reason)));}).then(function(){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,success:true});},function(reason){comObj.postMessage({sourceName,targetName,stream:StreamKind.CANCEL_COMPLETE,streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(wrapReason(data.reason));streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error(\"Unexpected stream case\");}}async function _deleteStreamController2(streamController,streamId){await Promise.allSettled([streamController.startCall?.promise,streamController.pullCall?.promise,streamController.cancelCall?.promise]);delete this.streamControllers[streamId];}exports.MessageHandler=MessageHandler;/***/},/* 16 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.Metadata=void 0;var _util=__w_pdfjs_require__(1);var _metadataMap=/*#__PURE__*/new WeakMap();var _data=/*#__PURE__*/new WeakMap();class Metadata{constructor({parsedData,rawData}){_classPrivateFieldInitSpec(this,_metadataMap,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_data,{writable:true,value:void 0});_classPrivateFieldSet(this,_metadataMap,parsedData);_classPrivateFieldSet(this,_data,rawData);}getRaw(){return _classPrivateFieldGet(this,_data);}get(name){return _classPrivateFieldGet(this,_metadataMap).get(name)??null;}getAll(){return(0,_util.objectFromMap)(_classPrivateFieldGet(this,_metadataMap));}has(name){return _classPrivateFieldGet(this,_metadataMap).has(name);}}exports.Metadata=Metadata;/***/},/* 17 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.OptionalContentConfig=void 0;var _util=__w_pdfjs_require__(1);var _murmurhash=__w_pdfjs_require__(8);const INTERNAL=Symbol(\"INTERNAL\");var _visible=/*#__PURE__*/new WeakMap();class OptionalContentGroup{constructor(name,intent){_classPrivateFieldInitSpec(this,_visible,{writable:true,value:true});this.name=name;this.intent=intent;}get visible(){return _classPrivateFieldGet(this,_visible);}_setVisible(internal,visible){if(internal!==INTERNAL){(0,_util.unreachable)(\"Internal method `_setVisible` called.\");}_classPrivateFieldSet(this,_visible,visible);}}var _cachedGetHash=/*#__PURE__*/new WeakMap();var _groups=/*#__PURE__*/new WeakMap();var _initialHash=/*#__PURE__*/new WeakMap();var _order=/*#__PURE__*/new WeakMap();var _evaluateVisibilityExpression=/*#__PURE__*/new WeakSet();class OptionalContentConfig{constructor(data){_classPrivateMethodInitSpec(this,_evaluateVisibilityExpression);_classPrivateFieldInitSpec(this,_cachedGetHash,{writable:true,value:null});_classPrivateFieldInitSpec(this,_groups,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_initialHash,{writable:true,value:null});_classPrivateFieldInitSpec(this,_order,{writable:true,value:null});this.name=null;this.creator=null;if(data===null){return;}this.name=data.name;this.creator=data.creator;_classPrivateFieldSet(this,_order,data.order);for(const group of data.groups){_classPrivateFieldGet(this,_groups).set(group.id,new OptionalContentGroup(group.name,group.intent));}if(data.baseState===\"OFF\"){for(const group of _classPrivateFieldGet(this,_groups).values()){group._setVisible(INTERNAL,false);}}for(const on of data.on){_classPrivateFieldGet(this,_groups).get(on)._setVisible(INTERNAL,true);}for(const off of data.off){_classPrivateFieldGet(this,_groups).get(off)._setVisible(INTERNAL,false);}_classPrivateFieldSet(this,_initialHash,this.getHash());}isVisible(group){if(_classPrivateFieldGet(this,_groups).size===0){return true;}if(!group){(0,_util.warn)(\"Optional content group not defined.\");return true;}if(group.type===\"OCG\"){if(!_classPrivateFieldGet(this,_groups).has(group.id)){(0,_util.warn)(`Optional content group not found: ${group.id}`);return true;}return _classPrivateFieldGet(this,_groups).get(group.id).visible;}else if(group.type===\"OCMD\"){if(group.expression){return _classPrivateMethodGet(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,group.expression);}if(!group.policy||group.policy===\"AnyOn\"){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)(`Optional content group not found: ${id}`);return true;}if(_classPrivateFieldGet(this,_groups).get(id).visible){return true;}}return false;}else if(group.policy===\"AllOn\"){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)(`Optional content group not found: ${id}`);return true;}if(!_classPrivateFieldGet(this,_groups).get(id).visible){return false;}}return true;}else if(group.policy===\"AnyOff\"){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)(`Optional content group not found: ${id}`);return true;}if(!_classPrivateFieldGet(this,_groups).get(id).visible){return true;}}return false;}else if(group.policy===\"AllOff\"){for(const id of group.ids){if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)(`Optional content group not found: ${id}`);return true;}if(_classPrivateFieldGet(this,_groups).get(id).visible){return false;}}return true;}(0,_util.warn)(`Unknown optional content policy ${group.policy}.`);return true;}(0,_util.warn)(`Unknown group type ${group.type}.`);return true;}setVisibility(id,visible=true){if(!_classPrivateFieldGet(this,_groups).has(id)){(0,_util.warn)(`Optional content group not found: ${id}`);return;}_classPrivateFieldGet(this,_groups).get(id)._setVisible(INTERNAL,!!visible);_classPrivateFieldSet(this,_cachedGetHash,null);}get hasInitialVisibility(){return this.getHash()===_classPrivateFieldGet(this,_initialHash);}getOrder(){if(!_classPrivateFieldGet(this,_groups).size){return null;}if(_classPrivateFieldGet(this,_order)){return _classPrivateFieldGet(this,_order).slice();}return[..._classPrivateFieldGet(this,_groups).keys()];}getGroups(){return _classPrivateFieldGet(this,_groups).size>0?(0,_util.objectFromMap)(_classPrivateFieldGet(this,_groups)):null;}getGroup(id){return _classPrivateFieldGet(this,_groups).get(id)||null;}getHash(){if(_classPrivateFieldGet(this,_cachedGetHash)!==null){return _classPrivateFieldGet(this,_cachedGetHash);}const hash=new _murmurhash.MurmurHash3_64();for(const[id,group]of _classPrivateFieldGet(this,_groups)){hash.update(`${id}:${group.visible}`);}return _classPrivateFieldSet(this,_cachedGetHash,hash.hexdigest());}}function _evaluateVisibilityExpression2(array){const length=array.length;if(length<2){return true;}const operator=array[0];for(let i=1;i<length;i++){const element=array[i];let state;if(Array.isArray(element)){state=_classPrivateMethodGet(this,_evaluateVisibilityExpression,_evaluateVisibilityExpression2).call(this,element);}else if(_classPrivateFieldGet(this,_groups).has(element)){state=_classPrivateFieldGet(this,_groups).get(element).visible;}else{(0,_util.warn)(`Optional content group not found: ${element}`);return true;}switch(operator){case\"And\":if(!state){return false;}break;case\"Or\":if(state){return true;}break;case\"Not\":return!state;default:return true;}}return operator===\"And\";}exports.OptionalContentConfig=OptionalContentConfig;/***/},/* 18 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.PDFDataTransportStream=void 0;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(6);class PDFDataTransportStream{constructor({length,initialData,progressiveDone=false,contentDispositionFilename=null,disableRange=false,disableStream=false},pdfDataRangeTransport){(0,_util.assert)(pdfDataRangeTransport,'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');this._queuedChunks=[];this._progressiveDone=progressiveDone;this._contentDispositionFilename=contentDispositionFilename;if(initialData?.length>0){const buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer);}this._pdfDataRangeTransport=pdfDataRangeTransport;this._isStreamingSupported=!disableStream;this._isRangeSupported=!disableRange;this._contentLength=length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener((begin,chunk)=>{this._onReceiveData({begin,chunk});});this._pdfDataRangeTransport.addProgressListener((loaded,total)=>{this._onProgress({loaded,total});});this._pdfDataRangeTransport.addProgressiveReadListener(chunk=>{this._onReceiveData({chunk});});this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone();});this._pdfDataRangeTransport.transportReady();}_onReceiveData({begin,chunk}){const buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(buffer);}else{this._queuedChunks.push(buffer);}}else{const found=this._rangeReaders.some(function(rangeReader){if(rangeReader._begin!==begin){return false;}rangeReader._enqueue(buffer);return true;});(0,_util.assert)(found,\"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}_onProgress(evt){if(evt.total===undefined){this._rangeReaders[0]?.onProgress?.({loaded:evt.loaded});}else{this._fullRequestReader?.onProgress?.({loaded:evt.loaded,total:evt.total});}}_onProgressiveDone(){this._fullRequestReader?.progressiveDone();this._progressiveDone=true;}_removeRangeReader(reader){const i=this._rangeReaders.indexOf(reader);if(i>=0){this._rangeReaders.splice(i,1);}}getFullReader(){(0,_util.assert)(!this._fullRequestReader,\"PDFDataTransportStream.getFullReader can only be called once.\");const queuedChunks=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename);}getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}const reader=new PDFDataTransportStreamRangeReader(this,begin,end);this._pdfDataRangeTransport.requestDataRange(begin,end);this._rangeReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeReaders.slice(0)){reader.cancel(reason);}this._pdfDataRangeTransport.abort();}}exports.PDFDataTransportStream=PDFDataTransportStream;class PDFDataTransportStreamReader{constructor(stream,queuedChunks,progressiveDone=false,contentDispositionFilename=null){this._stream=stream;this._done=progressiveDone||false;this._filename=(0,_display_utils.isPdfFile)(contentDispositionFilename)?contentDispositionFilename:null;this._queuedChunks=queuedChunks||[];this._loaded=0;for(const chunk of this._queuedChunks){this._loaded+=chunk.byteLength;}this._requests=[];this._headersReady=Promise.resolve();stream._fullRequestReader=this;this.onProgress=null;}_enqueue(chunk){if(this._done){return;}if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunks.push(chunk);}this._loaded+=chunk.byteLength;}get headersReady(){return this._headersReady;}get filename(){return this._filename;}get isRangeSupported(){return this._stream._isRangeSupported;}get isStreamingSupported(){return this._stream._isStreamingSupported;}get contentLength(){return this._stream._contentLength;}async read(){if(this._queuedChunks.length>0){const chunk=this._queuedChunks.shift();return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=new _util.PromiseCapability();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}progressiveDone(){if(this._done){return;}this._done=true;}}class PDFDataTransportStreamRangeReader{constructor(stream,begin,end){this._stream=stream;this._begin=begin;this._end=end;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null;}_enqueue(chunk){if(this._done){return;}if(this._requests.length===0){this._queuedChunk=chunk;}else{const requestsCapability=this._requests.shift();requestsCapability.resolve({value:chunk,done:false});for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}this._done=true;this._stream._removeRangeReader(this);}get isStreamingSupported(){return false;}async read(){if(this._queuedChunk){const chunk=this._queuedChunk;this._queuedChunk=null;return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=new _util.PromiseCapability();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;this._stream._removeRangeReader(this);}}/***/},/* 19 */ /***/(__unused_webpack_module,exports)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.XfaText=void 0;class XfaText{static textContent(xfa){const items=[];const output={items,styles:Object.create(null)};function walk(node){if(!node){return;}let str=null;const name=node.name;if(name===\"#text\"){str=node.value;}else if(!XfaText.shouldBuildText(name)){return;}else if(node?.attributes?.textContent){str=node.attributes.textContent;}else if(node.value){str=node.value;}if(str!==null){items.push({str});}if(!node.children){return;}for(const child of node.children){walk(child);}}walk(xfa);return output;}static shouldBuildText(name){return!(name===\"textarea\"||name===\"input\"||name===\"option\"||name===\"select\");}}exports.XfaText=XfaText;/***/},/* 20 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.NodeStandardFontDataFactory=exports.NodeFilterFactory=exports.NodeCanvasFactory=exports.NodeCMapReaderFactory=void 0;var _base_factory=__w_pdfjs_require__(7);;const fetchData=function(url){return new Promise((resolve,reject)=>{const fs=require(\"fs\");fs.readFile(url,(error,data)=>{if(error||!data){reject(new Error(error));return;}resolve(new Uint8Array(data));});});};class NodeFilterFactory extends _base_factory.BaseFilterFactory{}exports.NodeFilterFactory=NodeFilterFactory;class NodeCanvasFactory extends _base_factory.BaseCanvasFactory{_createCanvas(width,height){const Canvas=require(\"canvas\");return Canvas.createCanvas(width,height);}}exports.NodeCanvasFactory=NodeCanvasFactory;class NodeCMapReaderFactory extends _base_factory.BaseCMapReaderFactory{_fetchData(url,compressionType){return fetchData(url).then(data=>{return{cMapData:data,compressionType};});}}exports.NodeCMapReaderFactory=NodeCMapReaderFactory;class NodeStandardFontDataFactory extends _base_factory.BaseStandardFontDataFactory{_fetchData(url){return fetchData(url);}}exports.NodeStandardFontDataFactory=NodeStandardFontDataFactory;/***/},/* 21 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.PDFNodeStream=void 0;var _util=__w_pdfjs_require__(1);var _network_utils=__w_pdfjs_require__(22);;const fs=require(\"fs\");const http=require(\"http\");const https=require(\"https\");const url=require(\"url\");const fileUriRegex=/^file:\\/\\/\\/[a-zA-Z]:\\//;function parseUrl(sourceUrl){const parsedUrl=url.parse(sourceUrl);if(parsedUrl.protocol===\"file:\"||parsedUrl.host){return parsedUrl;}if(/^[a-z]:[/\\\\]/i.test(sourceUrl)){return url.parse(`file:///${sourceUrl}`);}if(!parsedUrl.host){parsedUrl.protocol=\"file:\";}return parsedUrl;}class PDFNodeStream{constructor(source){this.source=source;this.url=parseUrl(source.url);this.isHttp=this.url.protocol===\"http:\"||this.url.protocol===\"https:\";this.isFsUrl=this.url.protocol===\"file:\";this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}getFullReader(){(0,_util.assert)(!this._fullRequestReader,\"PDFNodeStream.getFullReader can only be called once.\");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader;}getRangeReader(start,end){if(end<=this._progressiveDataLength){return null;}const rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);this._rangeRequestReaders.push(rangeReader);return rangeReader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}exports.PDFNodeStream=PDFNodeStream;class BaseFullReader{constructor(stream){this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;const source=stream.source;this._contentLength=source.length;this._loaded=0;this._filename=null;this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._readableStream=null;this._readCapability=new _util.PromiseCapability();this._headersCapability=new _util.PromiseCapability();}get headersReady(){return this._headersCapability.promise;}get filename(){return this._filename;}get contentLength(){return this._contentLength;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true};}if(this._storedError){throw this._storedError;}const chunk=this._readableStream.read();if(chunk===null){this._readCapability=new _util.PromiseCapability();return this.read();}this._loaded+=chunk.length;this.onProgress?.({loaded:this._loaded,total:this._contentLength});const buffer=new Uint8Array(chunk).buffer;return{value:buffer,done:false};}cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}_error(reason){this._storedError=reason;this._readCapability.resolve();}_setReadableStream(readableStream){this._readableStream=readableStream;readableStream.on(\"readable\",()=>{this._readCapability.resolve();});readableStream.on(\"end\",()=>{readableStream.destroy();this._done=true;this._readCapability.resolve();});readableStream.on(\"error\",reason=>{this._error(reason);});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new _util.AbortException(\"streaming is disabled\"));}if(this._storedError){this._readableStream.destroy(this._storedError);}}}class BaseRangeReader{constructor(stream){this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=new _util.PromiseCapability();const source=stream.source;this._isStreamingSupported=!source.disableStream;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;if(this._done){return{value:undefined,done:true};}if(this._storedError){throw this._storedError;}const chunk=this._readableStream.read();if(chunk===null){this._readCapability=new _util.PromiseCapability();return this.read();}this._loaded+=chunk.length;this.onProgress?.({loaded:this._loaded});const buffer=new Uint8Array(chunk).buffer;return{value:buffer,done:false};}cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}_error(reason){this._storedError=reason;this._readCapability.resolve();}_setReadableStream(readableStream){this._readableStream=readableStream;readableStream.on(\"readable\",()=>{this._readCapability.resolve();});readableStream.on(\"end\",()=>{readableStream.destroy();this._done=true;this._readCapability.resolve();});readableStream.on(\"error\",reason=>{this._error(reason);});if(this._storedError){this._readableStream.destroy(this._storedError);}}}function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:\"GET\",headers};}class PDFNodeStreamFullReader extends BaseFullReader{constructor(stream){super(stream);const handleResponse=response=>{if(response.statusCode===404){const error=new _util.MissingPDFException(`Missing PDF \"${this._url}\".`);this._storedError=error;this._headersCapability.reject(error);return;}this._headersCapability.resolve();this._setReadableStream(response);const getResponseHeader=name=>{return this._readableStream.headers[name.toLowerCase()];};const{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests;this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader);};this._request=null;if(this._url.protocol===\"http:\"){this._request=http.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse);}else{this._request=https.request(createRequestOptions(this._url,stream.httpHeaders),handleResponse);}this._request.on(\"error\",reason=>{this._storedError=reason;this._headersCapability.reject(reason);});this._request.end();}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);this._httpHeaders={};for(const property in stream.httpHeaders){const value=stream.httpHeaders[property];if(value===undefined){continue;}this._httpHeaders[property]=value;}this._httpHeaders.Range=`bytes=${start}-${end-1}`;const handleResponse=response=>{if(response.statusCode===404){const error=new _util.MissingPDFException(`Missing PDF \"${this._url}\".`);this._storedError=error;return;}this._setReadableStream(response);};this._request=null;if(this._url.protocol===\"http:\"){this._request=http.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);}else{this._request=https.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);}this._request.on(\"error\",reason=>{this._storedError=reason;});this._request.end();}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(stream){super(stream);let path=decodeURIComponent(this._url.path);if(fileUriRegex.test(this._url.href)){path=path.replace(/^\\//,\"\");}fs.lstat(path,(error,stat)=>{if(error){if(error.code===\"ENOENT\"){error=new _util.MissingPDFException(`Missing PDF \"${path}\".`);}this._storedError=error;this._headersCapability.reject(error);return;}this._contentLength=stat.size;this._setReadableStream(fs.createReadStream(path));this._headersCapability.resolve();});}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(stream,start,end){super(stream);let path=decodeURIComponent(this._url.path);if(fileUriRegex.test(this._url.href)){path=path.replace(/^\\//,\"\");}this._setReadableStream(fs.createReadStream(path,{start,end:end-1}));}}/***/},/* 22 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.createResponseStatusError=createResponseStatusError;exports.extractFilenameFromHeader=extractFilenameFromHeader;exports.validateRangeRequestCapabilities=validateRangeRequestCapabilities;exports.validateResponseStatus=validateResponseStatus;var _util=__w_pdfjs_require__(1);var _content_disposition=__w_pdfjs_require__(23);var _display_utils=__w_pdfjs_require__(6);function validateRangeRequestCapabilities({getResponseHeader,isHttp,rangeChunkSize,disableRange}){const returnValues={allowRangeRequests:false,suggestedLength:undefined};const length=parseInt(getResponseHeader(\"Content-Length\"),10);if(!Number.isInteger(length)){return returnValues;}returnValues.suggestedLength=length;if(length<=2*rangeChunkSize){return returnValues;}if(disableRange||!isHttp){return returnValues;}if(getResponseHeader(\"Accept-Ranges\")!==\"bytes\"){return returnValues;}const contentEncoding=getResponseHeader(\"Content-Encoding\")||\"identity\";if(contentEncoding!==\"identity\"){return returnValues;}returnValues.allowRangeRequests=true;return returnValues;}function extractFilenameFromHeader(getResponseHeader){const contentDisposition=getResponseHeader(\"Content-Disposition\");if(contentDisposition){let filename=(0,_content_disposition.getFilenameFromContentDispositionHeader)(contentDisposition);if(filename.includes(\"%\")){try{filename=decodeURIComponent(filename);}catch(ex){}}if((0,_display_utils.isPdfFile)(filename)){return filename;}}return null;}function createResponseStatusError(status,url){if(status===404||status===0&&url.startsWith(\"file:\")){return new _util.MissingPDFException('Missing PDF \"'+url+'\".');}return new _util.UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`,status);}function validateResponseStatus(status){return status===200||status===206;}/***/},/* 23 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;var _util=__w_pdfjs_require__(1);function getFilenameFromContentDispositionHeader(contentDisposition){let needsEncodingFixup=true;let tmp=toParamRegExp(\"filename\\\\*\",\"i\").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);filename=unescape(filename);filename=rfc5987decode(filename);filename=rfc2047decode(filename);return fixupEncoding(filename);}tmp=rfc2231getparam(contentDisposition);if(tmp){const filename=rfc2047decode(tmp);return fixupEncoding(filename);}tmp=toParamRegExp(\"filename\",\"i\").exec(contentDisposition);if(tmp){tmp=tmp[1];let filename=rfc2616unquote(tmp);filename=rfc2047decode(filename);return fixupEncoding(filename);}function toParamRegExp(attributePattern,flags){return new RegExp(\"(?:^|;)\\\\s*\"+attributePattern+\"\\\\s*=\\\\s*\"+\"(\"+'[^\";\\\\s][^;\\\\s]*'+\"|\"+'\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?'+\")\",flags);}function textdecode(encoding,value){if(encoding){if(!/^[\\x00-\\xFF]+$/.test(value)){return value;}try{const decoder=new TextDecoder(encoding,{fatal:true});const buffer=(0,_util.stringToBytes)(value);value=decoder.decode(buffer);needsEncodingFixup=false;}catch(e){}}return value;}function fixupEncoding(value){if(needsEncodingFixup&&/[\\x80-\\xff]/.test(value)){value=textdecode(\"utf-8\",value);if(needsEncodingFixup){value=textdecode(\"iso-8859-1\",value);}}return value;}function rfc2231getparam(contentDispositionStr){const matches=[];let match;const iter=toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\",\"ig\");while((match=iter.exec(contentDispositionStr))!==null){let[,n,quot,part]=match;n=parseInt(n,10);if(n in matches){if(n===0){break;}continue;}matches[n]=[quot,part];}const parts=[];for(let n=0;n<matches.length;++n){if(!(n in matches)){break;}let[quot,part]=matches[n];part=rfc2616unquote(part);if(quot){part=unescape(part);if(n===0){part=rfc5987decode(part);}}parts.push(part);}return parts.join(\"\");}function rfc2616unquote(value){if(value.startsWith('\"')){const parts=value.slice(1).split('\\\\\"');for(let i=0;i<parts.length;++i){const quotindex=parts[i].indexOf('\"');if(quotindex!==-1){parts[i]=parts[i].slice(0,quotindex);parts.length=i+1;}parts[i]=parts[i].replaceAll(/\\\\(.)/g,\"$1\");}value=parts.join('\"');}return value;}function rfc5987decode(extvalue){const encodingend=extvalue.indexOf(\"'\");if(encodingend===-1){return extvalue;}const encoding=extvalue.slice(0,encodingend);const langvalue=extvalue.slice(encodingend+1);const value=langvalue.replace(/^[^']*'/,\"\");return textdecode(encoding,value);}function rfc2047decode(value){if(!value.startsWith(\"=?\")||/[\\x00-\\x19\\x80-\\xff]/.test(value)){return value;}return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,function(matches,charset,encoding,text){if(encoding===\"q\"||encoding===\"Q\"){text=text.replaceAll(\"_\",\" \");text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16));});return textdecode(charset,text);}try{text=atob(text);}catch(e){}return textdecode(charset,text);});}return\"\";}/***/},/* 24 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.PDFNetworkStream=void 0;var _util=__w_pdfjs_require__(1);var _network_utils=__w_pdfjs_require__(22);;const OK_RESPONSE=200;const PARTIAL_CONTENT_RESPONSE=206;function getArrayBuffer(xhr){const data=xhr.response;if(typeof data!==\"string\"){return data;}return(0,_util.stringToBytes)(data).buffer;}class NetworkManager{constructor(url,args={}){this.url=url;this.isHttp=/^https?:/i.test(url);this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null);this.withCredentials=args.withCredentials||false;this.currXhrId=0;this.pendingRequests=Object.create(null);}requestRange(begin,end,listeners){const args={begin,end};for(const prop in listeners){args[prop]=listeners[prop];}return this.request(args);}requestFull(listeners){return this.request(listeners);}request(args){const xhr=new XMLHttpRequest();const xhrId=this.currXhrId++;const pendingRequest=this.pendingRequests[xhrId]={xhr};xhr.open(\"GET\",this.url);xhr.withCredentials=this.withCredentials;for(const property in this.httpHeaders){const value=this.httpHeaders[property];if(value===undefined){continue;}xhr.setRequestHeader(property,value);}if(this.isHttp&&\"begin\"in args&&\"end\"in args){xhr.setRequestHeader(\"Range\",`bytes=${args.begin}-${args.end-1}`);pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE;}else{pendingRequest.expectedStatus=OK_RESPONSE;}xhr.responseType=\"arraybuffer\";if(args.onError){xhr.onerror=function(evt){args.onError(xhr.status);};}xhr.onreadystatechange=this.onStateChange.bind(this,xhrId);xhr.onprogress=this.onProgress.bind(this,xhrId);pendingRequest.onHeadersReceived=args.onHeadersReceived;pendingRequest.onDone=args.onDone;pendingRequest.onError=args.onError;pendingRequest.onProgress=args.onProgress;xhr.send(null);return xhrId;}onProgress(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}pendingRequest.onProgress?.(evt);}onStateChange(xhrId,evt){const pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}const xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived){pendingRequest.onHeadersReceived();delete pendingRequest.onHeadersReceived;}if(xhr.readyState!==4){return;}if(!(xhrId in this.pendingRequests)){return;}delete this.pendingRequests[xhrId];if(xhr.status===0&&this.isHttp){pendingRequest.onError?.(xhr.status);return;}const xhrStatus=xhr.status||OK_RESPONSE;const ok_response_on_range_request=xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE;if(!ok_response_on_range_request&&xhrStatus!==pendingRequest.expectedStatus){pendingRequest.onError?.(xhr.status);return;}const chunk=getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){const rangeHeader=xhr.getResponseHeader(\"Content-Range\");const matches=/bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk});}else if(chunk){pendingRequest.onDone({begin:0,chunk});}else{pendingRequest.onError?.(xhr.status);}}getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr;}isPendingRequest(xhrId){return xhrId in this.pendingRequests;}abortRequest(xhrId){const xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId];xhr.abort();}}class PDFNetworkStream{constructor(source){this._source=source;this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials});this._rangeChunkSize=source.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[];}_onRangeRequestReaderClosed(reader){const i=this._rangeRequestReaders.indexOf(reader);if(i>=0){this._rangeRequestReaders.splice(i,1);}}getFullReader(){(0,_util.assert)(!this._fullRequestReader,\"PDFNetworkStream.getFullReader can only be called once.\");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader;}getRangeReader(begin,end){const reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);reader.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}exports.PDFNetworkStream=PDFNetworkStream;class PDFNetworkStreamFullRequestReader{constructor(manager,source){this._manager=manager;const args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url;this._fullRequestId=manager.requestFull(args);this._headersReceivedCapability=new _util.PromiseCapability();this._disableRange=source.disableRange||false;this._contentLength=source.length;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null;}_onHeadersReceived(){const fullRequestXhrId=this._fullRequestId;const fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId);const getResponseHeader=name=>{return fullRequestXhr.getResponseHeader(name);};const{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});if(allowRangeRequests){this._isRangeSupported=true;}this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader);if(this._isRangeSupported){this._manager.abortRequest(fullRequestXhrId);}this._headersReceivedCapability.resolve();}_onDone(data){if(data){if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:data.chunk,done:false});}else{this._cachedChunks.push(data.chunk);}}this._done=true;if(this._cachedChunks.length>0){return;}for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);this._headersReceivedCapability.reject(this._storedError);for(const requestCapability of this._requests){requestCapability.reject(this._storedError);}this._requests.length=0;this._cachedChunks.length=0;}_onProgress(evt){this.onProgress?.({loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength});}get filename(){return this._filename;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}get contentLength(){return this._contentLength;}get headersReady(){return this._headersReceivedCapability.promise;}async read(){if(this._storedError){throw this._storedError;}if(this._cachedChunks.length>0){const chunk=this._cachedChunks.shift();return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=new _util.PromiseCapability();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;this._headersReceivedCapability.reject(reason);for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId);}this._fullRequestReader=null;}}class PDFNetworkStreamRangeRequestReader{constructor(manager,begin,end){this._manager=manager;const args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url;this._requestId=manager.requestRange(begin,end,args);this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null;}_close(){this.onClosed?.(this);}_onDone(data){const chunk=data.chunk;if(this._requests.length>0){const requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunk=chunk;}this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;this._close();}_onError(status){this._storedError=(0,_network_utils.createResponseStatusError)(status,this._url);for(const requestCapability of this._requests){requestCapability.reject(this._storedError);}this._requests.length=0;this._queuedChunk=null;}_onProgress(evt){if(!this.isStreamingSupported){this.onProgress?.({loaded:evt.loaded});}}get isStreamingSupported(){return false;}async read(){if(this._storedError){throw this._storedError;}if(this._queuedChunk!==null){const chunk=this._queuedChunk;this._queuedChunk=null;return{value:chunk,done:false};}if(this._done){return{value:undefined,done:true};}const requestCapability=new _util.PromiseCapability();this._requests.push(requestCapability);return requestCapability.promise;}cancel(reason){this._done=true;for(const requestCapability of this._requests){requestCapability.resolve({value:undefined,done:true});}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId);}this._close();}}/***/},/* 25 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.PDFFetchStream=void 0;var _util=__w_pdfjs_require__(1);var _network_utils=__w_pdfjs_require__(22);;function createFetchOptions(headers,withCredentials,abortController){return{method:\"GET\",headers,signal:abortController.signal,mode:\"cors\",credentials:withCredentials?\"include\":\"same-origin\",redirect:\"follow\"};}function createHeaders(httpHeaders){const headers=new Headers();for(const property in httpHeaders){const value=httpHeaders[property];if(value===undefined){continue;}headers.append(property,value);}return headers;}function getArrayBuffer(val){if(val instanceof Uint8Array){return val.buffer;}if(val instanceof ArrayBuffer){return val;}(0,_util.warn)(`getArrayBuffer - unexpected data format: ${val}`);return new Uint8Array(val).buffer;}class PDFFetchStream{constructor(source){this.source=source;this.isHttp=/^https?:/i.test(source.url);this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0;}getFullReader(){(0,_util.assert)(!this._fullRequestReader,\"PDFFetchStream.getFullReader can only be called once.\");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader;}getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}const reader=new PDFFetchStreamRangeReader(this,begin,end);this._rangeRequestReaders.push(reader);return reader;}cancelAllRequests(reason){this._fullRequestReader?.cancel(reason);for(const reader of this._rangeRequestReaders.slice(0)){reader.cancel(reason);}}}exports.PDFFetchStream=PDFFetchStream;class PDFFetchStreamReader{constructor(stream){this._stream=stream;this._reader=null;this._loaded=0;this._filename=null;const source=stream.source;this._withCredentials=source.withCredentials||false;this._contentLength=source.length;this._headersCapability=new _util.PromiseCapability();this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._abortController=new AbortController();this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._headers=createHeaders(this._stream.httpHeaders);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status)){throw(0,_network_utils.createResponseStatusError)(response.status,url);}this._reader=response.body.getReader();this._headersCapability.resolve();const getResponseHeader=name=>{return response.headers.get(name);};const{allowRangeRequests,suggestedLength}=(0,_network_utils.validateRangeRequestCapabilities)({getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=allowRangeRequests;this._contentLength=suggestedLength||this._contentLength;this._filename=(0,_network_utils.extractFilenameFromHeader)(getResponseHeader);if(!this._isStreamingSupported&&this._isRangeSupported){this.cancel(new _util.AbortException(\"Streaming is disabled.\"));}}).catch(this._headersCapability.reject);this.onProgress=null;}get headersReady(){return this._headersCapability.promise;}get filename(){return this._filename;}get contentLength(){return this._contentLength;}get isRangeSupported(){return this._isRangeSupported;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._headersCapability.promise;const{value,done}=await this._reader.read();if(done){return{value,done};}this._loaded+=value.byteLength;this.onProgress?.({loaded:this._loaded,total:this._contentLength});return{value:getArrayBuffer(value),done:false};}cancel(reason){this._reader?.cancel(reason);this._abortController.abort();}}class PDFFetchStreamRangeReader{constructor(stream,begin,end){this._stream=stream;this._reader=null;this._loaded=0;const source=stream.source;this._withCredentials=source.withCredentials||false;this._readCapability=new _util.PromiseCapability();this._isStreamingSupported=!source.disableStream;this._abortController=new AbortController();this._headers=createHeaders(this._stream.httpHeaders);this._headers.append(\"Range\",`bytes=${begin}-${end-1}`);const url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(response=>{if(!(0,_network_utils.validateResponseStatus)(response.status)){throw(0,_network_utils.createResponseStatusError)(response.status,url);}this._readCapability.resolve();this._reader=response.body.getReader();}).catch(this._readCapability.reject);this.onProgress=null;}get isStreamingSupported(){return this._isStreamingSupported;}async read(){await this._readCapability.promise;const{value,done}=await this._reader.read();if(done){return{value,done};}this._loaded+=value.byteLength;this.onProgress?.({loaded:this._loaded});return{value:getArrayBuffer(value),done:false};}cancel(reason){this._reader?.cancel(reason);this._abortController.abort();}}/***/},/* 26 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.TextLayerRenderTask=void 0;exports.renderTextLayer=renderTextLayer;exports.updateTextLayer=updateTextLayer;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(6);const MAX_TEXT_DIVS_TO_RENDER=100000;const DEFAULT_FONT_SIZE=30;const DEFAULT_FONT_ASCENT=0.8;const ascentCache=new Map();function getCtx(size,isOffscreenCanvasSupported){let ctx;if(isOffscreenCanvasSupported&&_util.FeatureTest.isOffscreenCanvasSupported){ctx=new OffscreenCanvas(size,size).getContext(\"2d\",{alpha:false});}else{const canvas=document.createElement(\"canvas\");canvas.width=canvas.height=size;ctx=canvas.getContext(\"2d\",{alpha:false});}return ctx;}function getAscent(fontFamily,isOffscreenCanvasSupported){const cachedAscent=ascentCache.get(fontFamily);if(cachedAscent){return cachedAscent;}const ctx=getCtx(DEFAULT_FONT_SIZE,isOffscreenCanvasSupported);ctx.font=`${DEFAULT_FONT_SIZE}px ${fontFamily}`;const metrics=ctx.measureText(\"\");let ascent=metrics.fontBoundingBoxAscent;let descent=Math.abs(metrics.fontBoundingBoxDescent);if(ascent){const ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);ctx.canvas.width=ctx.canvas.height=0;return ratio;}ctx.strokeStyle=\"red\";ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText(\"g\",0,0);let pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(let i=pixels.length-1-3;i>=0;i-=4){if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break;}}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText(\"A\",0,DEFAULT_FONT_SIZE);pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;ascent=0;for(let i=0,ii=pixels.length;i<ii;i+=4){if(pixels[i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(i/4/DEFAULT_FONT_SIZE);break;}}ctx.canvas.width=ctx.canvas.height=0;if(ascent){const ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);return ratio;}ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT);return DEFAULT_FONT_ASCENT;}function appendText(task,geom,styles){const textDiv=document.createElement(\"span\");const textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!==\"\",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);const tx=_util.Util.transform(task._transform,geom.transform);let angle=Math.atan2(tx[1],tx[0]);const style=styles[geom.fontName];if(style.vertical){angle+=Math.PI/2;}const fontHeight=Math.hypot(tx[2],tx[3]);const fontAscent=fontHeight*getAscent(style.fontFamily,task._isOffscreenCanvasSupported);let left,top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}const scaleFactorStr=\"calc(var(--scale-factor)*\";const divStyle=textDiv.style;if(task._container===task._rootContainer){divStyle.left=`${(100*left/task._pageWidth).toFixed(2)}%`;divStyle.top=`${(100*top/task._pageHeight).toFixed(2)}%`;}else{divStyle.left=`${scaleFactorStr}${left.toFixed(2)}px)`;divStyle.top=`${scaleFactorStr}${top.toFixed(2)}px)`;}divStyle.fontSize=`${scaleFactorStr}${fontHeight.toFixed(2)}px)`;divStyle.fontFamily=style.fontFamily;textDivProperties.fontSize=fontHeight;textDiv.setAttribute(\"role\",\"presentation\");textDiv.textContent=geom.str;textDiv.dir=geom.dir;if(task._fontInspectorEnabled){textDiv.dataset.fontName=geom.fontName;}if(angle!==0){textDivProperties.angle=angle*(180/Math.PI);}let shouldScaleText=false;if(geom.str.length>1){shouldScaleText=true;}else if(geom.str!==\" \"&&geom.transform[0]!==geom.transform[3]){const absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);if(absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5){shouldScaleText=true;}}if(shouldScaleText){textDivProperties.canvasWidth=style.vertical?geom.height:geom.width;}task._textDivProperties.set(textDiv,textDivProperties);if(task._isReadableStream){task._layoutText(textDiv);}}function layout(params){const{div,scale,properties,ctx,prevFontSize,prevFontFamily}=params;const{style}=div;let transform=\"\";if(properties.canvasWidth!==0&&properties.hasText){const{fontFamily}=style;const{canvasWidth,fontSize}=properties;if(prevFontSize!==fontSize||prevFontFamily!==fontFamily){ctx.font=`${fontSize*scale}px ${fontFamily}`;params.prevFontSize=fontSize;params.prevFontFamily=fontFamily;}const{width}=ctx.measureText(div.textContent);if(width>0){transform=`scaleX(${canvasWidth*scale/width})`;}}if(properties.angle!==0){transform=`rotate(${properties.angle}deg) ${transform}`;}if(transform.length>0){style.transform=transform;}}function render(task){if(task._canceled){return;}const textDivs=task._textDivs;const capability=task._capability;const textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){capability.resolve();return;}if(!task._isReadableStream){for(const textDiv of textDivs){task._layoutText(textDiv);}}capability.resolve();}class TextLayerRenderTask{constructor({textContentSource,container,viewport,textDivs,textDivProperties,textContentItemsStr,isOffscreenCanvasSupported}){this._textContentSource=textContentSource;this._isReadableStream=textContentSource instanceof ReadableStream;this._container=this._rootContainer=container;this._textDivs=textDivs||[];this._textContentItemsStr=textContentItemsStr||[];this._isOffscreenCanvasSupported=isOffscreenCanvasSupported;this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled;this._reader=null;this._textDivProperties=textDivProperties||new WeakMap();this._canceled=false;this._capability=new _util.PromiseCapability();this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx(0,isOffscreenCanvasSupported)};const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight];this._pageWidth=pageWidth;this._pageHeight=pageHeight;(0,_display_utils.setLayerDimensions)(container,viewport);this._capability.promise.finally(()=>{this._layoutTextParams=null;}).catch(()=>{});}get promise(){return this._capability.promise;}cancel(){this._canceled=true;if(this._reader){this._reader.cancel(new _util.AbortException(\"TextLayer task cancelled.\")).catch(()=>{});this._reader=null;}this._capability.reject(new _util.AbortException(\"TextLayer task cancelled.\"));}_processItems(items,styleCache){for(const item of items){if(item.str===undefined){if(item.type===\"beginMarkedContentProps\"||item.type===\"beginMarkedContent\"){const parent=this._container;this._container=document.createElement(\"span\");this._container.classList.add(\"markedContent\");if(item.id!==null){this._container.setAttribute(\"id\",`${item.id}`);}parent.append(this._container);}else if(item.type===\"endMarkedContent\"){this._container=this._container.parentNode;}continue;}this._textContentItemsStr.push(item.str);appendText(this,item,styleCache);}}_layoutText(textDiv){const textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);this._layoutTextParams.div=textDiv;layout(this._layoutTextParams);if(textDivProperties.hasText){this._container.append(textDiv);}if(textDivProperties.hasEOL){const br=document.createElement(\"br\");br.setAttribute(\"role\",\"presentation\");this._container.append(br);}}_render(){const capability=new _util.PromiseCapability();let styleCache=Object.create(null);if(this._isReadableStream){const pump=()=>{this._reader.read().then(({value,done})=>{if(done){capability.resolve();return;}Object.assign(styleCache,value.styles);this._processItems(value.items,styleCache);pump();},capability.reject);};this._reader=this._textContentSource.getReader();pump();}else if(this._textContentSource){const{items,styles}=this._textContentSource;this._processItems(items,styles);capability.resolve();}else{throw new Error('No \"textContentSource\" parameter specified.');}capability.promise.then(()=>{styleCache=null;render(this);},this._capability.reject);}}exports.TextLayerRenderTask=TextLayerRenderTask;function renderTextLayer(params){if(!params.textContentSource&&(params.textContent||params.textContentStream)){(0,_display_utils.deprecated)(\"The TextLayerRender `textContent`/`textContentStream` parameters \"+\"will be removed in the future, please use `textContentSource` instead.\");params.textContentSource=params.textContent||params.textContentStream;}const{container,viewport}=params;const style=getComputedStyle(container);const visibility=style.getPropertyValue(\"visibility\");const scaleFactor=parseFloat(style.getPropertyValue(\"--scale-factor\"));if(visibility===\"visible\"&&(!scaleFactor||Math.abs(scaleFactor-viewport.scale)>1e-5)){console.error(\"The `--scale-factor` CSS-variable must be set, \"+\"to the same value as `viewport.scale`, \"+\"either on the `container`-element itself or higher up in the DOM.\");}const task=new TextLayerRenderTask(params);task._render();return task;}function updateTextLayer({container,viewport,textDivs,textDivProperties,isOffscreenCanvasSupported,mustRotate=true,mustRescale=true}){if(mustRotate){(0,_display_utils.setLayerDimensions)(container,{rotation:viewport.rotation});}if(mustRescale){const ctx=getCtx(0,isOffscreenCanvasSupported);const scale=viewport.scale*(globalThis.devicePixelRatio||1);const params={prevFontSize:null,prevFontFamily:null,div:null,scale,properties:null,ctx};for(const div of textDivs){params.properties=textDivProperties.get(div);params.div=div;layout(params);}}}/***/},/* 27 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.AnnotationEditorLayer=void 0;var _util=__w_pdfjs_require__(1);var _tools=__w_pdfjs_require__(5);var _freetext=__w_pdfjs_require__(28);var _ink=__w_pdfjs_require__(29);var _display_utils=__w_pdfjs_require__(6);var _accessibilityManager=/*#__PURE__*/new WeakMap();var _allowClick=/*#__PURE__*/new WeakMap();var _boundPointerup=/*#__PURE__*/new WeakMap();var _boundPointerdown=/*#__PURE__*/new WeakMap();var _editors=/*#__PURE__*/new WeakMap();var _hadPointerDown=/*#__PURE__*/new WeakMap();var _isCleaningUp=/*#__PURE__*/new WeakMap();var _uiManager=/*#__PURE__*/new WeakMap();var _changeParent=/*#__PURE__*/new WeakSet();var _createNewEditor=/*#__PURE__*/new WeakSet();var _createAndAddNewEditor=/*#__PURE__*/new WeakSet();var _cleanup=/*#__PURE__*/new WeakSet();class AnnotationEditorLayer{constructor(options){_classPrivateMethodInitSpec(this,_cleanup);_classPrivateMethodInitSpec(this,_createAndAddNewEditor);_classPrivateMethodInitSpec(this,_createNewEditor);_classPrivateMethodInitSpec(this,_changeParent);_classPrivateFieldInitSpec(this,_accessibilityManager,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_allowClick,{writable:true,value:false});_classPrivateFieldInitSpec(this,_boundPointerup,{writable:true,value:this.pointerup.bind(this)});_classPrivateFieldInitSpec(this,_boundPointerdown,{writable:true,value:this.pointerdown.bind(this)});_classPrivateFieldInitSpec(this,_editors,{writable:true,value:new Map()});_classPrivateFieldInitSpec(this,_hadPointerDown,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isCleaningUp,{writable:true,value:false});_classPrivateFieldInitSpec(this,_uiManager,{writable:true,value:void 0});if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=true;_freetext.FreeTextEditor.initialize(options.l10n);_ink.InkEditor.initialize(options.l10n);}options.uiManager.registerEditorTypes([_freetext.FreeTextEditor,_ink.InkEditor]);_classPrivateFieldSet(this,_uiManager,options.uiManager);this.pageIndex=options.pageIndex;this.div=options.div;_classPrivateFieldSet(this,_accessibilityManager,options.accessibilityManager);_classPrivateFieldGet(this,_uiManager).addLayer(this);}get isEmpty(){return _classPrivateFieldGet(this,_editors).size===0;}updateToolbar(mode){_classPrivateFieldGet(this,_uiManager).updateToolbar(mode);}updateMode(mode=_classPrivateFieldGet(this,_uiManager).getMode()){_classPrivateMethodGet(this,_cleanup,_cleanup2).call(this);if(mode===_util.AnnotationEditorType.INK){this.addInkEditorIfNeeded(false);this.disableClick();}else{this.enableClick();}_classPrivateFieldGet(this,_uiManager).unselectAll();if(mode!==_util.AnnotationEditorType.NONE){this.div.classList.toggle(\"freeTextEditing\",mode===_util.AnnotationEditorType.FREETEXT);this.div.classList.toggle(\"inkEditing\",mode===_util.AnnotationEditorType.INK);this.div.hidden=false;}}addInkEditorIfNeeded(isCommitting){if(!isCommitting&&_classPrivateFieldGet(this,_uiManager).getMode()!==_util.AnnotationEditorType.INK){return;}if(!isCommitting){for(const editor of _classPrivateFieldGet(this,_editors).values()){if(editor.isEmpty()){editor.setInBackground();return;}}}const editor=_classPrivateMethodGet(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0});editor.setInBackground();}setEditingState(isEditing){_classPrivateFieldGet(this,_uiManager).setEditingState(isEditing);}addCommands(params){_classPrivateFieldGet(this,_uiManager).addCommands(params);}enable(){this.div.style.pointerEvents=\"auto\";for(const editor of _classPrivateFieldGet(this,_editors).values()){editor.enableEditing();}}disable(){this.div.style.pointerEvents=\"none\";for(const editor of _classPrivateFieldGet(this,_editors).values()){editor.disableEditing();}_classPrivateMethodGet(this,_cleanup,_cleanup2).call(this);if(this.isEmpty){this.div.hidden=true;}}setActiveEditor(editor){const currentActive=_classPrivateFieldGet(this,_uiManager).getActive();if(currentActive===editor){return;}_classPrivateFieldGet(this,_uiManager).setActiveEditor(editor);}enableClick(){this.div.addEventListener(\"pointerdown\",_classPrivateFieldGet(this,_boundPointerdown));this.div.addEventListener(\"pointerup\",_classPrivateFieldGet(this,_boundPointerup));}disableClick(){this.div.removeEventListener(\"pointerdown\",_classPrivateFieldGet(this,_boundPointerdown));this.div.removeEventListener(\"pointerup\",_classPrivateFieldGet(this,_boundPointerup));}attach(editor){_classPrivateFieldGet(this,_editors).set(editor.id,editor);}detach(editor){_classPrivateFieldGet(this,_editors).delete(editor.id);_classPrivateFieldGet(this,_accessibilityManager)?.removePointerInTextLayer(editor.contentDiv);}remove(editor){_classPrivateFieldGet(this,_uiManager).removeEditor(editor);this.detach(editor);editor.div.style.display=\"none\";setTimeout(()=>{editor.div.style.display=\"\";editor.div.remove();editor.isAttachedToDOM=false;if(document.activeElement===document.body){_classPrivateFieldGet(this,_uiManager).focusMainContainer();}},0);if(!_classPrivateFieldGet(this,_isCleaningUp)){this.addInkEditorIfNeeded(false);}}add(editor){_classPrivateMethodGet(this,_changeParent,_changeParent2).call(this,editor);_classPrivateFieldGet(this,_uiManager).addEditor(editor);this.attach(editor);if(!editor.isAttachedToDOM){const div=editor.render();this.div.append(div);editor.isAttachedToDOM=true;}this.moveEditorInDOM(editor);editor.onceAdded();_classPrivateFieldGet(this,_uiManager).addToAnnotationStorage(editor);}moveEditorInDOM(editor){_classPrivateFieldGet(this,_accessibilityManager)?.moveElementInDOM(this.div,editor.div,editor.contentDiv,true);}addOrRebuild(editor){if(editor.needsToBeRebuilt()){editor.rebuild();}else{this.add(editor);}}addANewEditor(editor){const cmd=()=>{this.addOrRebuild(editor);};const undo=()=>{editor.remove();};this.addCommands({cmd,undo,mustExec:true});}addUndoableEditor(editor){const cmd=()=>{this.addOrRebuild(editor);};const undo=()=>{editor.remove();};this.addCommands({cmd,undo,mustExec:false});}getNextId(){return _classPrivateFieldGet(this,_uiManager).getId();}deserialize(data){switch(data.annotationType){case _util.AnnotationEditorType.FREETEXT:return _freetext.FreeTextEditor.deserialize(data,this,_classPrivateFieldGet(this,_uiManager));case _util.AnnotationEditorType.INK:return _ink.InkEditor.deserialize(data,this,_classPrivateFieldGet(this,_uiManager));}return null;}setSelected(editor){_classPrivateFieldGet(this,_uiManager).setSelected(editor);}toggleSelected(editor){_classPrivateFieldGet(this,_uiManager).toggleSelected(editor);}isSelected(editor){return _classPrivateFieldGet(this,_uiManager).isSelected(editor);}unselect(editor){_classPrivateFieldGet(this,_uiManager).unselect(editor);}pointerup(event){const{isMac}=_util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}if(!_classPrivateFieldGet(this,_hadPointerDown)){return;}_classPrivateFieldSet(this,_hadPointerDown,false);if(!_classPrivateFieldGet(this,_allowClick)){_classPrivateFieldSet(this,_allowClick,true);return;}_classPrivateMethodGet(this,_createAndAddNewEditor,_createAndAddNewEditor2).call(this,event);}pointerdown(event){const{isMac}=_util.FeatureTest.platform;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}_classPrivateFieldSet(this,_hadPointerDown,true);const editor=_classPrivateFieldGet(this,_uiManager).getActive();_classPrivateFieldSet(this,_allowClick,!editor||editor.isEmpty());}drop(event){const id=event.dataTransfer.getData(\"text/plain\");const editor=_classPrivateFieldGet(this,_uiManager).getEditor(id);if(!editor){return;}event.preventDefault();event.dataTransfer.dropEffect=\"move\";_classPrivateMethodGet(this,_changeParent,_changeParent2).call(this,editor);const rect=this.div.getBoundingClientRect();const endX=event.clientX-rect.x;const endY=event.clientY-rect.y;editor.translate(endX-editor.startX,endY-editor.startY);this.moveEditorInDOM(editor);editor.div.focus();}dragover(event){event.preventDefault();}destroy(){if(_classPrivateFieldGet(this,_uiManager).getActive()?.parent===this){_classPrivateFieldGet(this,_uiManager).setActiveEditor(null);}for(const editor of _classPrivateFieldGet(this,_editors).values()){_classPrivateFieldGet(this,_accessibilityManager)?.removePointerInTextLayer(editor.contentDiv);editor.setParent(null);editor.isAttachedToDOM=false;editor.div.remove();}this.div=null;_classPrivateFieldGet(this,_editors).clear();_classPrivateFieldGet(this,_uiManager).removeLayer(this);}render({viewport}){this.viewport=viewport;(0,_display_utils.setLayerDimensions)(this.div,viewport);(0,_tools.bindEvents)(this,this.div,[\"dragover\",\"drop\"]);for(const editor of _classPrivateFieldGet(this,_uiManager).getEditors(this.pageIndex)){this.add(editor);}this.updateMode();}update({viewport}){_classPrivateFieldGet(this,_uiManager).commitOrRemove();this.viewport=viewport;(0,_display_utils.setLayerDimensions)(this.div,{rotation:viewport.rotation});this.updateMode();}get pageDimensions(){const{pageWidth,pageHeight}=this.viewport.rawDims;return[pageWidth,pageHeight];}}function _changeParent2(editor){if(editor.parent===this){return;}this.attach(editor);editor.parent?.detach(editor);editor.setParent(this);if(editor.div&&editor.isAttachedToDOM){editor.div.remove();this.div.append(editor.div);}}function _createNewEditor2(params){switch(_classPrivateFieldGet(this,_uiManager).getMode()){case _util.AnnotationEditorType.FREETEXT:return new _freetext.FreeTextEditor(params);case _util.AnnotationEditorType.INK:return new _ink.InkEditor(params);}return null;}function _createAndAddNewEditor2(event){const id=this.getNextId();const editor=_classPrivateMethodGet(this,_createNewEditor,_createNewEditor2).call(this,{parent:this,id,x:event.offsetX,y:event.offsetY,uiManager:_classPrivateFieldGet(this,_uiManager)});if(editor){this.add(editor);}return editor;}function _cleanup2(){_classPrivateFieldSet(this,_isCleaningUp,true);for(const editor of _classPrivateFieldGet(this,_editors).values()){if(editor.isEmpty()){editor.remove();}}_classPrivateFieldSet(this,_isCleaningUp,false);}_defineProperty(AnnotationEditorLayer,\"_initialized\",false);exports.AnnotationEditorLayer=AnnotationEditorLayer;/***/},/* 28 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.FreeTextEditor=void 0;var _util=__w_pdfjs_require__(1);var _tools=__w_pdfjs_require__(5);var _editor=__w_pdfjs_require__(4);var _boundEditorDivBlur=/*#__PURE__*/new WeakMap();var _boundEditorDivFocus=/*#__PURE__*/new WeakMap();var _boundEditorDivInput=/*#__PURE__*/new WeakMap();var _boundEditorDivKeydown=/*#__PURE__*/new WeakMap();var _color=/*#__PURE__*/new WeakMap();var _content=/*#__PURE__*/new WeakMap();var _editorDivId=/*#__PURE__*/new WeakMap();var _hasAlreadyBeenCommitted=/*#__PURE__*/new WeakMap();var _fontSize=/*#__PURE__*/new WeakMap();var _updateFontSize=/*#__PURE__*/new WeakSet();var _updateColor=/*#__PURE__*/new WeakSet();var _extractText=/*#__PURE__*/new WeakSet();var _setEditorDimensions=/*#__PURE__*/new WeakSet();class FreeTextEditor extends _editor.AnnotationEditor{constructor(params){super({...params,name:\"freeTextEditor\"});_classPrivateMethodInitSpec(this,_setEditorDimensions);_classPrivateMethodInitSpec(this,_extractText);_classPrivateMethodInitSpec(this,_updateColor);_classPrivateMethodInitSpec(this,_updateFontSize);_classPrivateFieldInitSpec(this,_boundEditorDivBlur,{writable:true,value:this.editorDivBlur.bind(this)});_classPrivateFieldInitSpec(this,_boundEditorDivFocus,{writable:true,value:this.editorDivFocus.bind(this)});_classPrivateFieldInitSpec(this,_boundEditorDivInput,{writable:true,value:this.editorDivInput.bind(this)});_classPrivateFieldInitSpec(this,_boundEditorDivKeydown,{writable:true,value:this.editorDivKeydown.bind(this)});_classPrivateFieldInitSpec(this,_color,{writable:true,value:void 0});_classPrivateFieldInitSpec(this,_content,{writable:true,value:\"\"});_classPrivateFieldInitSpec(this,_editorDivId,{writable:true,value:`${this.id}-editor`});_classPrivateFieldInitSpec(this,_hasAlreadyBeenCommitted,{writable:true,value:false});_classPrivateFieldInitSpec(this,_fontSize,{writable:true,value:void 0});_classPrivateFieldSet(this,_color,params.color||FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(this,_fontSize,params.fontSize||FreeTextEditor._defaultFontSize);}static initialize(l10n){this._l10nPromise=new Map([\"free_text2_default_content\",\"editor_free_text2_aria_label\"].map(str=>[str,l10n.get(str)]));const style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue(\"--freetext-padding\"));}static updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break;}}updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,_updateFontSize,_updateFontSize2).call(this,value);break;case _util.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,_updateColor,_updateColor2).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor]];}get propertiesToUpdate(){return[[_util.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,_fontSize)],[_util.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,_color)]];}getInitialTranslation(){const scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,_fontSize))*scale];}rebuild(){super.rebuild();if(this.div===null){return;}if(!this.isAttachedToDOM){this.parent.add(this);}}enableEditMode(){if(this.isInEditMode()){return;}this.parent.setEditingState(false);this.parent.updateToolbar(_util.AnnotationEditorType.FREETEXT);super.enableEditMode();this.overlayDiv.classList.remove(\"enabled\");this.editorDiv.contentEditable=true;this.div.draggable=false;this.div.removeAttribute(\"aria-activedescendant\");this.editorDiv.addEventListener(\"keydown\",_classPrivateFieldGet(this,_boundEditorDivKeydown));this.editorDiv.addEventListener(\"focus\",_classPrivateFieldGet(this,_boundEditorDivFocus));this.editorDiv.addEventListener(\"blur\",_classPrivateFieldGet(this,_boundEditorDivBlur));this.editorDiv.addEventListener(\"input\",_classPrivateFieldGet(this,_boundEditorDivInput));}disableEditMode(){if(!this.isInEditMode()){return;}this.parent.setEditingState(true);super.disableEditMode();this.overlayDiv.classList.add(\"enabled\");this.editorDiv.contentEditable=false;this.div.setAttribute(\"aria-activedescendant\",_classPrivateFieldGet(this,_editorDivId));this.div.draggable=true;this.editorDiv.removeEventListener(\"keydown\",_classPrivateFieldGet(this,_boundEditorDivKeydown));this.editorDiv.removeEventListener(\"focus\",_classPrivateFieldGet(this,_boundEditorDivFocus));this.editorDiv.removeEventListener(\"blur\",_classPrivateFieldGet(this,_boundEditorDivBlur));this.editorDiv.removeEventListener(\"input\",_classPrivateFieldGet(this,_boundEditorDivInput));this.div.focus({preventScroll:true});this.isEditing=false;this.parent.div.classList.add(\"freeTextEditing\");}focusin(event){super.focusin(event);if(event.target!==this.editorDiv){this.editorDiv.focus();}}onceAdded(){if(this.width){return;}this.enableEditMode();this.editorDiv.focus();}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===\"\";}remove(){this.isEditing=false;this.parent.setEditingState(true);this.parent.div.classList.add(\"freeTextEditing\");super.remove();}commit(){if(!this.isInEditMode()){return;}super.commit();if(!_classPrivateFieldGet(this,_hasAlreadyBeenCommitted)){_classPrivateFieldSet(this,_hasAlreadyBeenCommitted,true);this.parent.addUndoableEditor(this);}this.disableEditMode();_classPrivateFieldSet(this,_content,_classPrivateMethodGet(this,_extractText,_extractText2).call(this).trimEnd());_classPrivateMethodGet(this,_setEditorDimensions,_setEditorDimensions2).call(this);}shouldGetKeyboardEvents(){return this.isInEditMode();}dblclick(event){this.enableEditMode();this.editorDiv.focus();}keydown(event){if(event.target===this.div&&event.key===\"Enter\"){this.enableEditMode();this.editorDiv.focus();}}editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event);}editorDivFocus(event){this.isEditing=true;}editorDivBlur(event){this.isEditing=false;}editorDivInput(event){this.parent.div.classList.toggle(\"freeTextEditing\",this.isEmpty());}disableEditing(){this.editorDiv.setAttribute(\"role\",\"comment\");this.editorDiv.removeAttribute(\"aria-multiline\");}enableEditing(){this.editorDiv.setAttribute(\"role\",\"textbox\");this.editorDiv.setAttribute(\"aria-multiline\",true);}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();this.editorDiv=document.createElement(\"div\");this.editorDiv.className=\"internal\";this.editorDiv.setAttribute(\"id\",_classPrivateFieldGet(this,_editorDivId));this.enableEditing();FreeTextEditor._l10nPromise.get(\"editor_free_text2_aria_label\").then(msg=>this.editorDiv?.setAttribute(\"aria-label\",msg));FreeTextEditor._l10nPromise.get(\"free_text2_default_content\").then(msg=>this.editorDiv?.setAttribute(\"default-content\",msg));this.editorDiv.contentEditable=true;const{style}=this.editorDiv;style.fontSize=`calc(${_classPrivateFieldGet(this,_fontSize)}px * var(--scale-factor))`;style.color=_classPrivateFieldGet(this,_color);this.div.append(this.editorDiv);this.overlayDiv=document.createElement(\"div\");this.overlayDiv.classList.add(\"overlay\",\"enabled\");this.div.append(this.overlayDiv);(0,_tools.bindEvents)(this,this.div,[\"dblclick\",\"keydown\"]);if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);for(const line of _classPrivateFieldGet(this,_content).split(\"\\n\")){const div=document.createElement(\"div\");div.append(line?document.createTextNode(line):document.createElement(\"br\"));this.editorDiv.append(div);}this.div.draggable=true;this.editorDiv.contentEditable=false;}else{this.div.draggable=false;this.editorDiv.contentEditable=true;}return this.div;}get contentDiv(){return this.editorDiv;}static deserialize(data,parent,uiManager){const editor=super.deserialize(data,parent,uiManager);_classPrivateFieldSet(editor,_fontSize,data.fontSize);_classPrivateFieldSet(editor,_color,_util.Util.makeHexColor(...data.color));_classPrivateFieldSet(editor,_content,data.value);return editor;}serialize(){if(this.isEmpty()){return null;}const padding=FreeTextEditor._internalPadding*this.parentScale;const rect=this.getRect(padding,padding);const color=_editor.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:_classPrivateFieldGet(this,_color));return{annotationType:_util.AnnotationEditorType.FREETEXT,color,fontSize:_classPrivateFieldGet(this,_fontSize),value:_classPrivateFieldGet(this,_content),pageIndex:this.pageIndex,rect,rotation:this.rotation};}}function _updateFontSize2(fontSize){const setFontsize=size=>{this.editorDiv.style.fontSize=`calc(${size}px * var(--scale-factor))`;this.translate(0,-(size-_classPrivateFieldGet(this,_fontSize))*this.parentScale);_classPrivateFieldSet(this,_fontSize,size);_classPrivateMethodGet(this,_setEditorDimensions,_setEditorDimensions2).call(this);};const savedFontsize=_classPrivateFieldGet(this,_fontSize);this.addCommands({cmd:()=>{setFontsize(fontSize);},undo:()=>{setFontsize(savedFontsize);},mustExec:true,type:_util.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true});}function _updateColor2(color){const savedColor=_classPrivateFieldGet(this,_color);this.addCommands({cmd:()=>{_classPrivateFieldSet(this,_color,this.editorDiv.style.color=color);},undo:()=>{_classPrivateFieldSet(this,_color,this.editorDiv.style.color=savedColor);},mustExec:true,type:_util.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true});}function _extractText2(){const divs=this.editorDiv.getElementsByTagName(\"div\");if(divs.length===0){return this.editorDiv.innerText;}const buffer=[];for(const div of divs){buffer.push(div.innerText.replace(/\\r\\n?|\\n/,\"\"));}return buffer.join(\"\\n\");}function _setEditorDimensions2(){const[parentWidth,parentHeight]=this.parentDimensions;let rect;if(this.isAttachedToDOM){rect=this.div.getBoundingClientRect();}else{const{currentLayer,div}=this;const savedDisplay=div.style.display;div.style.display=\"hidden\";currentLayer.div.append(this.div);rect=div.getBoundingClientRect();div.remove();div.style.display=savedDisplay;}this.width=rect.width/parentWidth;this.height=rect.height/parentHeight;}_defineProperty(FreeTextEditor,\"_freeTextDefaultContent\",\"\");_defineProperty(FreeTextEditor,\"_l10nPromise\",void 0);_defineProperty(FreeTextEditor,\"_internalPadding\",0);_defineProperty(FreeTextEditor,\"_defaultColor\",null);_defineProperty(FreeTextEditor,\"_defaultFontSize\",10);_defineProperty(FreeTextEditor,\"_keyboardManager\",new _tools.KeyboardManager([[[\"ctrl+Enter\",\"mac+meta+Enter\",\"Escape\",\"mac+Escape\"],FreeTextEditor.prototype.commitOrRemove]]));_defineProperty(FreeTextEditor,\"_type\",\"freetext\");exports.FreeTextEditor=FreeTextEditor;/***/},/* 29 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.InkEditor=void 0;var _util=__w_pdfjs_require__(1);var _editor=__w_pdfjs_require__(4);var _tools=__w_pdfjs_require__(5);const RESIZER_SIZE=16;var _aspectRatio=/*#__PURE__*/new WeakMap();var _baseHeight=/*#__PURE__*/new WeakMap();var _baseWidth=/*#__PURE__*/new WeakMap();var _boundCanvasContextMenu=/*#__PURE__*/new WeakMap();var _boundCanvasPointermove=/*#__PURE__*/new WeakMap();var _boundCanvasPointerleave=/*#__PURE__*/new WeakMap();var _boundCanvasPointerup=/*#__PURE__*/new WeakMap();var _boundCanvasPointerdown=/*#__PURE__*/new WeakMap();var _currentPath2D=/*#__PURE__*/new WeakMap();var _disableEditing=/*#__PURE__*/new WeakMap();var _hasSomethingToDraw=/*#__PURE__*/new WeakMap();var _isCanvasInitialized=/*#__PURE__*/new WeakMap();var _observer=/*#__PURE__*/new WeakMap();var _realWidth=/*#__PURE__*/new WeakMap();var _realHeight=/*#__PURE__*/new WeakMap();var _requestFrameCallback=/*#__PURE__*/new WeakMap();var _updateThickness=/*#__PURE__*/new WeakSet();var _updateColor3=/*#__PURE__*/new WeakSet();var _updateOpacity=/*#__PURE__*/new WeakSet();var _getInitialBBox=/*#__PURE__*/new WeakSet();var _setStroke=/*#__PURE__*/new WeakSet();var _startDrawing=/*#__PURE__*/new WeakSet();var _draw=/*#__PURE__*/new WeakSet();var _endPath=/*#__PURE__*/new WeakSet();var _stopDrawing=/*#__PURE__*/new WeakSet();var _drawPoints=/*#__PURE__*/new WeakSet();var _makeBezierCurve=/*#__PURE__*/new WeakSet();var _generateBezierPoints=/*#__PURE__*/new WeakSet();var _redraw=/*#__PURE__*/new WeakSet();var _endDrawing=/*#__PURE__*/new WeakSet();var _createCanvas=/*#__PURE__*/new WeakSet();var _createObserver=/*#__PURE__*/new WeakSet();var _setCanvasDims=/*#__PURE__*/new WeakSet();var _setScaleFactor=/*#__PURE__*/new WeakSet();var _updateTransform=/*#__PURE__*/new WeakSet();var _serializePaths=/*#__PURE__*/new WeakSet();var _extractPointsOnBezier=/*#__PURE__*/new WeakSet();var _isAlmostFlat=/*#__PURE__*/new WeakSet();var _getBbox=/*#__PURE__*/new WeakSet();var _getPadding=/*#__PURE__*/new WeakSet();var _fitToContent=/*#__PURE__*/new WeakSet();var _setMinDims=/*#__PURE__*/new WeakSet();class InkEditor extends _editor.AnnotationEditor{constructor(params){super({...params,name:\"inkEditor\"});_classPrivateMethodInitSpec(this,_setMinDims);_classPrivateMethodInitSpec(this,_fitToContent);_classPrivateMethodInitSpec(this,_getPadding);_classPrivateMethodInitSpec(this,_getBbox);_classPrivateMethodInitSpec(this,_isAlmostFlat);_classPrivateMethodInitSpec(this,_extractPointsOnBezier);_classPrivateMethodInitSpec(this,_serializePaths);_classPrivateMethodInitSpec(this,_updateTransform);_classPrivateMethodInitSpec(this,_setScaleFactor);_classPrivateMethodInitSpec(this,_setCanvasDims);_classPrivateMethodInitSpec(this,_createObserver);_classPrivateMethodInitSpec(this,_createCanvas);_classPrivateMethodInitSpec(this,_endDrawing);_classPrivateMethodInitSpec(this,_redraw);_classPrivateMethodInitSpec(this,_generateBezierPoints);_classPrivateMethodInitSpec(this,_makeBezierCurve);_classPrivateMethodInitSpec(this,_drawPoints);_classPrivateMethodInitSpec(this,_stopDrawing);_classPrivateMethodInitSpec(this,_endPath);_classPrivateMethodInitSpec(this,_draw);_classPrivateMethodInitSpec(this,_startDrawing);_classPrivateMethodInitSpec(this,_setStroke);_classPrivateMethodInitSpec(this,_getInitialBBox);_classPrivateMethodInitSpec(this,_updateOpacity);_classPrivateMethodInitSpec(this,_updateColor3);_classPrivateMethodInitSpec(this,_updateThickness);_classPrivateFieldInitSpec(this,_aspectRatio,{writable:true,value:0});_classPrivateFieldInitSpec(this,_baseHeight,{writable:true,value:0});_classPrivateFieldInitSpec(this,_baseWidth,{writable:true,value:0});_classPrivateFieldInitSpec(this,_boundCanvasContextMenu,{writable:true,value:this.canvasContextMenu.bind(this)});_classPrivateFieldInitSpec(this,_boundCanvasPointermove,{writable:true,value:this.canvasPointermove.bind(this)});_classPrivateFieldInitSpec(this,_boundCanvasPointerleave,{writable:true,value:this.canvasPointerleave.bind(this)});_classPrivateFieldInitSpec(this,_boundCanvasPointerup,{writable:true,value:this.canvasPointerup.bind(this)});_classPrivateFieldInitSpec(this,_boundCanvasPointerdown,{writable:true,value:this.canvasPointerdown.bind(this)});_classPrivateFieldInitSpec(this,_currentPath2D,{writable:true,value:new Path2D()});_classPrivateFieldInitSpec(this,_disableEditing,{writable:true,value:false});_classPrivateFieldInitSpec(this,_hasSomethingToDraw,{writable:true,value:false});_classPrivateFieldInitSpec(this,_isCanvasInitialized,{writable:true,value:false});_classPrivateFieldInitSpec(this,_observer,{writable:true,value:null});_classPrivateFieldInitSpec(this,_realWidth,{writable:true,value:0});_classPrivateFieldInitSpec(this,_realHeight,{writable:true,value:0});_classPrivateFieldInitSpec(this,_requestFrameCallback,{writable:true,value:null});this.color=params.color||null;this.thickness=params.thickness||null;this.opacity=params.opacity||null;this.paths=[];this.bezierPath2D=[];this.allRawPaths=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0;}static initialize(l10n){this._l10nPromise=new Map([\"editor_ink_canvas_aria_label\",\"editor_ink2_aria_label\"].map(str=>[str,l10n.get(str)]));}static updateDefaultParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case _util.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case _util.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100;break;}}updateParams(type,value){switch(type){case _util.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,_updateThickness,_updateThickness2).call(this,value);break;case _util.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,_updateColor3,_updateColor4).call(this,value);break;case _util.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,_updateOpacity,_updateOpacity2).call(this,value);break;}}static get defaultPropertiesToUpdate(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(InkEditor._defaultOpacity*100)]];}get propertiesToUpdate(){return[[_util.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[_util.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor],[_util.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??InkEditor._defaultOpacity))]];}rebuild(){super.rebuild();if(this.div===null){return;}if(!this.canvas){_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this);_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);}_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this);}remove(){if(this.canvas===null){return;}if(!this.isEmpty()){this.commit();}this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;_classPrivateFieldGet(this,_observer).disconnect();_classPrivateFieldSet(this,_observer,null);super.remove();}setParent(parent){if(!this.parent&&parent){this._uiManager.removeShouldRescale(this);}else if(this.parent&&parent===null){this._uiManager.addShouldRescale(this);}super.setParent(parent);}onScaleChanging(){const[parentWidth,parentHeight]=this.parentDimensions;const width=this.width*parentWidth;const height=this.height*parentHeight;this.setDimensions(width,height);}enableEditMode(){if(_classPrivateFieldGet(this,_disableEditing)||this.canvas===null){return;}super.enableEditMode();this.div.draggable=false;this.canvas.addEventListener(\"pointerdown\",_classPrivateFieldGet(this,_boundCanvasPointerdown));}disableEditMode(){if(!this.isInEditMode()||this.canvas===null){return;}super.disableEditMode();this.div.draggable=!this.isEmpty();this.div.classList.remove(\"editing\");this.canvas.removeEventListener(\"pointerdown\",_classPrivateFieldGet(this,_boundCanvasPointerdown));}onceAdded(){this.div.draggable=!this.isEmpty();}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0;}commit(){if(_classPrivateFieldGet(this,_disableEditing)){return;}super.commit();this.isEditing=false;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(this,_disableEditing,true);this.div.classList.add(\"disabled\");_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this,true);this.parent.addInkEditorIfNeeded(true);this.parent.moveEditorInDOM(this);this.div.focus({preventScroll:true});}focusin(event){super.focusin(event);this.enableEditMode();}canvasPointerdown(event){if(event.button!==0||!this.isInEditMode()||_classPrivateFieldGet(this,_disableEditing)){return;}this.setInForeground();event.preventDefault();if(event.type!==\"mouse\"){this.div.focus();}_classPrivateMethodGet(this,_startDrawing,_startDrawing2).call(this,event.offsetX,event.offsetY);}canvasContextMenu(event){event.preventDefault();}canvasPointermove(event){event.preventDefault();_classPrivateMethodGet(this,_draw,_draw2).call(this,event.offsetX,event.offsetY);}canvasPointerup(event){event.preventDefault();_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,event);}canvasPointerleave(event){_classPrivateMethodGet(this,_endDrawing,_endDrawing2).call(this,event);}render(){if(this.div){return this.div;}let baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}super.render();InkEditor._l10nPromise.get(\"editor_ink2_aria_label\").then(msg=>this.div?.setAttribute(\"aria-label\",msg));const[x,y,w,h]=_classPrivateMethodGet(this,_getInitialBBox,_getInitialBBox2).call(this);this.setAt(x,y,0,0);this.setDims(w,h);_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this);if(this.width){const[parentWidth,parentHeight]=this.parentDimensions;this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);_classPrivateFieldSet(this,_isCanvasInitialized,true);_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);this.setDims(this.width*parentWidth,this.height*parentHeight);_classPrivateMethodGet(this,_redraw,_redraw2).call(this);_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this);this.div.classList.add(\"disabled\");}else{this.div.classList.add(\"editing\");this.enableEditMode();}_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this);return this.div;}setDimensions(width,height){const roundedWidth=Math.round(width);const roundedHeight=Math.round(height);if(_classPrivateFieldGet(this,_realWidth)===roundedWidth&&_classPrivateFieldGet(this,_realHeight)===roundedHeight){return;}_classPrivateFieldSet(this,_realWidth,roundedWidth);_classPrivateFieldSet(this,_realHeight,roundedHeight);this.canvas.style.visibility=\"hidden\";if(_classPrivateFieldGet(this,_aspectRatio)&&Math.abs(_classPrivateFieldGet(this,_aspectRatio)-width/height)>1e-2){height=Math.ceil(width/_classPrivateFieldGet(this,_aspectRatio));this.setDims(width,height);}const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;if(_classPrivateFieldGet(this,_disableEditing)){_classPrivateMethodGet(this,_setScaleFactor,_setScaleFactor2).call(this,width,height);}_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);_classPrivateMethodGet(this,_redraw,_redraw2).call(this);this.canvas.style.visibility=\"visible\";this.fixDims();}static deserialize(data,parent,uiManager){const editor=super.deserialize(data,parent,uiManager);editor.thickness=data.thickness;editor.color=_util.Util.makeHexColor(...data.color);editor.opacity=data.opacity;const[pageWidth,pageHeight]=editor.pageDimensions;const width=editor.width*pageWidth;const height=editor.height*pageHeight;const scaleFactor=editor.parentScale;const padding=data.thickness/2;_classPrivateFieldSet(editor,_aspectRatio,width/height);_classPrivateFieldSet(editor,_disableEditing,true);_classPrivateFieldSet(editor,_realWidth,Math.round(width));_classPrivateFieldSet(editor,_realHeight,Math.round(height));for(const{bezier}of data.paths){const path=[];editor.paths.push(path);let p0=scaleFactor*(bezier[0]-padding);let p1=scaleFactor*(height-bezier[1]-padding);for(let i=2,ii=bezier.length;i<ii;i+=6){const p10=scaleFactor*(bezier[i]-padding);const p11=scaleFactor*(height-bezier[i+1]-padding);const p20=scaleFactor*(bezier[i+2]-padding);const p21=scaleFactor*(height-bezier[i+3]-padding);const p30=scaleFactor*(bezier[i+4]-padding);const p31=scaleFactor*(height-bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]);p0=p30;p1=p31;}const path2D=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D);}const bbox=_classPrivateMethodGet(editor,_getBbox,_getBbox2).call(editor);_classPrivateFieldSet(editor,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(editor,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));_classPrivateMethodGet(editor,_setScaleFactor,_setScaleFactor2).call(editor,width,height);return editor;}serialize(){if(this.isEmpty()){return null;}const rect=this.getRect(0,0);const height=this.rotation%180===0?rect[3]-rect[1]:rect[2]-rect[0];const color=_editor.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:_util.AnnotationEditorType.INK,color,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,_serializePaths,_serializePaths2).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,height),pageIndex:this.pageIndex,rect,rotation:this.rotation};}}function _updateThickness2(thickness){const savedThickness=this.thickness;this.addCommands({cmd:()=>{this.thickness=thickness;_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this);},undo:()=>{this.thickness=savedThickness;_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this);},mustExec:true,type:_util.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});}function _updateColor4(color){const savedColor=this.color;this.addCommands({cmd:()=>{this.color=color;_classPrivateMethodGet(this,_redraw,_redraw2).call(this);},undo:()=>{this.color=savedColor;_classPrivateMethodGet(this,_redraw,_redraw2).call(this);},mustExec:true,type:_util.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:true,keepUndo:true});}function _updateOpacity2(opacity){opacity/=100;const savedOpacity=this.opacity;this.addCommands({cmd:()=>{this.opacity=opacity;_classPrivateMethodGet(this,_redraw,_redraw2).call(this);},undo:()=>{this.opacity=savedOpacity;_classPrivateMethodGet(this,_redraw,_redraw2).call(this);},mustExec:true,type:_util.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:true,keepUndo:true});}function _getInitialBBox2(){const{parentRotation,parentDimensions:[width,height]}=this;switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height];}}function _setStroke2(){const{ctx,color,opacity,thickness,parentScale,scaleFactor}=this;ctx.lineWidth=thickness*parentScale/scaleFactor;ctx.lineCap=\"round\";ctx.lineJoin=\"round\";ctx.miterLimit=10;ctx.strokeStyle=`${color}${(0,_tools.opacityToHex)(opacity)}`;}function _startDrawing2(x,y){this.canvas.addEventListener(\"contextmenu\",_classPrivateFieldGet(this,_boundCanvasContextMenu));this.canvas.addEventListener(\"pointerleave\",_classPrivateFieldGet(this,_boundCanvasPointerleave));this.canvas.addEventListener(\"pointermove\",_classPrivateFieldGet(this,_boundCanvasPointermove));this.canvas.addEventListener(\"pointerup\",_classPrivateFieldGet(this,_boundCanvasPointerup));this.canvas.removeEventListener(\"pointerdown\",_classPrivateFieldGet(this,_boundCanvasPointerdown));this.isEditing=true;if(!_classPrivateFieldGet(this,_isCanvasInitialized)){_classPrivateFieldSet(this,_isCanvasInitialized,true);_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);this.thickness||=InkEditor._defaultThickness;this.color||=InkEditor._defaultColor||_editor.AnnotationEditor._defaultLineColor;this.opacity??=InkEditor._defaultOpacity;}this.currentPath.push([x,y]);_classPrivateFieldSet(this,_hasSomethingToDraw,false);_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this);_classPrivateFieldSet(this,_requestFrameCallback,()=>{_classPrivateMethodGet(this,_drawPoints,_drawPoints2).call(this);if(_classPrivateFieldGet(this,_requestFrameCallback)){window.requestAnimationFrame(_classPrivateFieldGet(this,_requestFrameCallback));}});window.requestAnimationFrame(_classPrivateFieldGet(this,_requestFrameCallback));}function _draw2(x,y){const[lastX,lastY]=this.currentPath.at(-1);if(this.currentPath.length>1&&x===lastX&&y===lastY){return;}const currentPath=this.currentPath;let path2D=_classPrivateFieldGet(this,_currentPath2D);currentPath.push([x,y]);_classPrivateFieldSet(this,_hasSomethingToDraw,true);if(currentPath.length<=2){path2D.moveTo(...currentPath[0]);path2D.lineTo(x,y);return;}if(currentPath.length===3){_classPrivateFieldSet(this,_currentPath2D,path2D=new Path2D());path2D.moveTo(...currentPath[0]);}_classPrivateMethodGet(this,_makeBezierCurve,_makeBezierCurve2).call(this,path2D,...currentPath.at(-3),...currentPath.at(-2),x,y);}function _endPath2(){if(this.currentPath.length===0){return;}const lastPoint=this.currentPath.at(-1);_classPrivateFieldGet(this,_currentPath2D).lineTo(...lastPoint);}function _stopDrawing2(x,y){_classPrivateFieldSet(this,_requestFrameCallback,null);x=Math.min(Math.max(x,0),this.canvas.width);y=Math.min(Math.max(y,0),this.canvas.height);_classPrivateMethodGet(this,_draw,_draw2).call(this,x,y);_classPrivateMethodGet(this,_endPath,_endPath2).call(this);let bezier;if(this.currentPath.length!==1){bezier=_classPrivateMethodGet(this,_generateBezierPoints,_generateBezierPoints2).call(this);}else{const xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]];}const path2D=_classPrivateFieldGet(this,_currentPath2D);const currentPath=this.currentPath;this.currentPath=[];_classPrivateFieldSet(this,_currentPath2D,new Path2D());const cmd=()=>{this.allRawPaths.push(currentPath);this.paths.push(bezier);this.bezierPath2D.push(path2D);this.rebuild();};const undo=()=>{this.allRawPaths.pop();this.paths.pop();this.bezierPath2D.pop();if(this.paths.length===0){this.remove();}else{if(!this.canvas){_classPrivateMethodGet(this,_createCanvas,_createCanvas2).call(this);_classPrivateMethodGet(this,_createObserver,_createObserver2).call(this);}_classPrivateMethodGet(this,_fitToContent,_fitToContent2).call(this);}};this.addCommands({cmd,undo,mustExec:true});}function _drawPoints2(){if(!_classPrivateFieldGet(this,_hasSomethingToDraw)){return;}_classPrivateFieldSet(this,_hasSomethingToDraw,false);const thickness=Math.ceil(this.thickness*this.parentScale);const lastPoints=this.currentPath.slice(-3);const x=lastPoints.map(xy=>xy[0]);const y=lastPoints.map(xy=>xy[1]);const xMin=Math.min(...x)-thickness;const xMax=Math.max(...x)+thickness;const yMin=Math.min(...y)-thickness;const yMax=Math.max(...y)+thickness;const{ctx}=this;ctx.save();ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(const path of this.bezierPath2D){ctx.stroke(path);}ctx.stroke(_classPrivateFieldGet(this,_currentPath2D));ctx.restore();}function _makeBezierCurve2(path2D,x0,y0,x1,y1,x2,y2){const prevX=(x0+x1)/2;const prevY=(y0+y1)/2;const x3=(x1+x2)/2;const y3=(y1+y2)/2;path2D.bezierCurveTo(prevX+2*(x1-prevX)/3,prevY+2*(y1-prevY)/3,x3+2*(x1-x3)/3,y3+2*(y1-y3)/3,x3,y3);}function _generateBezierPoints2(){const path=this.currentPath;if(path.length<=2){return[[path[0],path[0],path.at(-1),path.at(-1)]];}const bezierPoints=[];let i;let[x0,y0]=path[0];for(i=1;i<path.length-2;i++){const[x1,y1]=path[i];const[x2,y2]=path[i+1];const x3=(x1+x2)/2;const y3=(y1+y2)/2;const control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];const control2=[x3+2*(x1-x3)/3,y3+2*(y1-y3)/3];bezierPoints.push([[x0,y0],control1,control2,[x3,y3]]);[x0,y0]=[x3,y3];}const[x1,y1]=path[i];const[x2,y2]=path[i+1];const control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];const control2=[x2+2*(x1-x2)/3,y2+2*(y1-y2)/3];bezierPoints.push([[x0,y0],control1,control2,[x2,y2]]);return bezierPoints;}function _redraw2(){if(this.isEmpty()){_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);return;}_classPrivateMethodGet(this,_setStroke,_setStroke2).call(this);const{canvas,ctx}=this;ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);for(const path of this.bezierPath2D){ctx.stroke(path);}}function _endDrawing2(event){this.canvas.removeEventListener(\"pointerleave\",_classPrivateFieldGet(this,_boundCanvasPointerleave));this.canvas.removeEventListener(\"pointermove\",_classPrivateFieldGet(this,_boundCanvasPointermove));this.canvas.removeEventListener(\"pointerup\",_classPrivateFieldGet(this,_boundCanvasPointerup));this.canvas.addEventListener(\"pointerdown\",_classPrivateFieldGet(this,_boundCanvasPointerdown));setTimeout(()=>{this.canvas.removeEventListener(\"contextmenu\",_classPrivateFieldGet(this,_boundCanvasContextMenu));},10);_classPrivateMethodGet(this,_stopDrawing,_stopDrawing2).call(this,event.offsetX,event.offsetY);this.addToAnnotationStorage();this.setInBackground();}function _createCanvas2(){this.canvas=document.createElement(\"canvas\");this.canvas.width=this.canvas.height=0;this.canvas.className=\"inkEditorCanvas\";InkEditor._l10nPromise.get(\"editor_ink_canvas_aria_label\").then(msg=>this.canvas?.setAttribute(\"aria-label\",msg));this.div.append(this.canvas);this.ctx=this.canvas.getContext(\"2d\");}function _createObserver2(){_classPrivateFieldSet(this,_observer,new ResizeObserver(entries=>{const rect=entries[0].contentRect;if(rect.width&&rect.height){this.setDimensions(rect.width,rect.height);}}));_classPrivateFieldGet(this,_observer).observe(this.div);}function _setCanvasDims2(){if(!_classPrivateFieldGet(this,_isCanvasInitialized)){return;}const[parentWidth,parentHeight]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*parentWidth);this.canvas.height=Math.ceil(this.height*parentHeight);_classPrivateMethodGet(this,_updateTransform,_updateTransform2).call(this);}function _setScaleFactor2(width,height){const padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this);const scaleFactorW=(width-padding)/_classPrivateFieldGet(this,_baseWidth);const scaleFactorH=(height-padding)/_classPrivateFieldGet(this,_baseHeight);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH);}function _updateTransform2(){const padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding);}function _buildPath2D(bezier){const path2D=new Path2D();for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];if(i===0){path2D.moveTo(...first);}path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1]);}return path2D;}function _serializePaths2(s,tx,ty,h){const NUMBER_OF_POINTS_ON_BEZIER_CURVE=4;const paths=[];const padding=this.thickness/2;let buffer,points;for(const bezier of this.paths){buffer=[];points=[];for(let i=0,ii=bezier.length;i<ii;i++){const[first,control1,control2,second]=bezier[i];const p10=s*(first[0]+tx)+padding;const p11=h-s*(first[1]+ty)-padding;const p20=s*(control1[0]+tx)+padding;const p21=h-s*(control1[1]+ty)-padding;const p30=s*(control2[0]+tx)+padding;const p31=h-s*(control2[1]+ty)-padding;const p40=s*(second[0]+tx)+padding;const p41=h-s*(second[1]+ty)-padding;if(i===0){buffer.push(p10,p11);points.push(p10,p11);}buffer.push(p20,p21,p30,p31,p40,p41);_classPrivateMethodGet(this,_extractPointsOnBezier,_extractPointsOnBezier2).call(this,p10,p11,p20,p21,p30,p31,p40,p41,NUMBER_OF_POINTS_ON_BEZIER_CURVE,points);}paths.push({bezier:buffer,points});}return paths;}function _extractPointsOnBezier2(p10,p11,p20,p21,p30,p31,p40,p41,n,points){if(_classPrivateMethodGet(this,_isAlmostFlat,_isAlmostFlat2).call(this,p10,p11,p20,p21,p30,p31,p40,p41)){points.push(p40,p41);return;}for(let i=1;i<n-1;i++){const t=i/n;const mt=1-t;let q10=t*p10+mt*p20;let q11=t*p11+mt*p21;let q20=t*p20+mt*p30;let q21=t*p21+mt*p31;const q30=t*p30+mt*p40;const q31=t*p31+mt*p41;q10=t*q10+mt*q20;q11=t*q11+mt*q21;q20=t*q20+mt*q30;q21=t*q21+mt*q31;q10=t*q10+mt*q20;q11=t*q11+mt*q21;points.push(q10,q11);}points.push(p40,p41);}function _isAlmostFlat2(p10,p11,p20,p21,p30,p31,p40,p41){const tol=10;const ax=(3*p20-2*p10-p40)**2;const ay=(3*p21-2*p11-p41)**2;const bx=(3*p30-p10-2*p40)**2;const by=(3*p31-p11-2*p41)**2;return Math.max(ax,bx)+Math.max(ay,by)<=tol;}function _getBbox2(){let xMin=Infinity;let xMax=-Infinity;let yMin=Infinity;let yMax=-Infinity;for(const path of this.paths){for(const[first,control1,control2,second]of path){const bbox=_util.Util.bezierBoundingBox(...first,...control1,...control2,...second);xMin=Math.min(xMin,bbox[0]);yMin=Math.min(yMin,bbox[1]);xMax=Math.max(xMax,bbox[2]);yMax=Math.max(yMax,bbox[3]);}}return[xMin,yMin,xMax,yMax];}function _getPadding2(){return _classPrivateFieldGet(this,_disableEditing)?Math.ceil(this.thickness*this.parentScale):0;}function _fitToContent2(firstTime=false){if(this.isEmpty()){return;}if(!_classPrivateFieldGet(this,_disableEditing)){_classPrivateMethodGet(this,_redraw,_redraw2).call(this);return;}const bbox=_classPrivateMethodGet(this,_getBbox,_getBbox2).call(this);const padding=_classPrivateMethodGet(this,_getPadding,_getPadding2).call(this);_classPrivateFieldSet(this,_baseWidth,Math.max(RESIZER_SIZE,bbox[2]-bbox[0]));_classPrivateFieldSet(this,_baseHeight,Math.max(RESIZER_SIZE,bbox[3]-bbox[1]));const width=Math.ceil(padding+_classPrivateFieldGet(this,_baseWidth)*this.scaleFactor);const height=Math.ceil(padding+_classPrivateFieldGet(this,_baseHeight)*this.scaleFactor);const[parentWidth,parentHeight]=this.parentDimensions;this.width=width/parentWidth;this.height=height/parentHeight;_classPrivateFieldSet(this,_aspectRatio,width/height);_classPrivateMethodGet(this,_setMinDims,_setMinDims2).call(this);const prevTranslationX=this.translationX;const prevTranslationY=this.translationY;this.translationX=-bbox[0];this.translationY=-bbox[1];_classPrivateMethodGet(this,_setCanvasDims,_setCanvasDims2).call(this);_classPrivateMethodGet(this,_redraw,_redraw2).call(this);_classPrivateFieldSet(this,_realWidth,width);_classPrivateFieldSet(this,_realHeight,height);this.setDims(width,height);const unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding);}function _setMinDims2(){const{style}=this.div;if(_classPrivateFieldGet(this,_aspectRatio)>=1){style.minHeight=`${RESIZER_SIZE}px`;style.minWidth=`${Math.round(_classPrivateFieldGet(this,_aspectRatio)*RESIZER_SIZE)}px`;}else{style.minWidth=`${RESIZER_SIZE}px`;style.minHeight=`${Math.round(RESIZER_SIZE/_classPrivateFieldGet(this,_aspectRatio))}px`;}}_defineProperty(InkEditor,\"_defaultColor\",null);_defineProperty(InkEditor,\"_defaultOpacity\",1);_defineProperty(InkEditor,\"_defaultThickness\",1);_defineProperty(InkEditor,\"_l10nPromise\",void 0);_defineProperty(InkEditor,\"_type\",\"ink\");exports.InkEditor=InkEditor;/***/},/* 30 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.AnnotationLayer=void 0;var _util=__w_pdfjs_require__(1);var _display_utils=__w_pdfjs_require__(6);var _annotation_storage=__w_pdfjs_require__(3);var _scripting_utils=__w_pdfjs_require__(31);var _xfa_layer=__w_pdfjs_require__(32);const DEFAULT_TAB_INDEX=1000;const DEFAULT_FONT_SIZE=9;const GetElementsByNameSet=new WeakSet();function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]};}class AnnotationElementFactory{static create(parameters){const subtype=parameters.data.annotationType;switch(subtype){case _util.AnnotationType.LINK:return new LinkAnnotationElement(parameters);case _util.AnnotationType.TEXT:return new TextAnnotationElement(parameters);case _util.AnnotationType.WIDGET:const fieldType=parameters.data.fieldType;switch(fieldType){case\"Tx\":return new TextWidgetAnnotationElement(parameters);case\"Btn\":if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}return new PushButtonWidgetAnnotationElement(parameters);case\"Ch\":return new ChoiceWidgetAnnotationElement(parameters);}return new WidgetAnnotationElement(parameters);case _util.AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case _util.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case _util.AnnotationType.LINE:return new LineAnnotationElement(parameters);case _util.AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case _util.AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case _util.AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case _util.AnnotationType.CARET:return new CaretAnnotationElement(parameters);case _util.AnnotationType.INK:return new InkAnnotationElement(parameters);case _util.AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case _util.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case _util.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case _util.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case _util.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case _util.AnnotationType.STAMP:return new StampAnnotationElement(parameters);case _util.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}}class AnnotationElement{constructor(parameters,{isRenderable=false,ignoreBorder=false,createQuadrilaterals=false}={}){this.isRenderable=isRenderable;this.data=parameters.data;this.layer=parameters.layer;this.page=parameters.page;this.viewport=parameters.viewport;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderForms=parameters.renderForms;this.svgFactory=parameters.svgFactory;this.annotationStorage=parameters.annotationStorage;this.enableScripting=parameters.enableScripting;this.hasJSActions=parameters.hasJSActions;this._fieldObjects=parameters.fieldObjects;if(isRenderable){this.container=this._createContainer(ignoreBorder);}if(createQuadrilaterals){this.quadrilaterals=this._createQuadrilaterals(ignoreBorder);}}_createContainer(ignoreBorder=false){const{data,page,viewport}=this;const container=document.createElement(\"section\");container.setAttribute(\"data-annotation-id\",data.id);if(data.noRotate){container.classList.add(\"norotate\");}const{pageWidth,pageHeight,pageX,pageY}=viewport.rawDims;const{width,height}=getRectDims(data.rect);const rect=_util.Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth=`${data.borderStyle.width}px`;const horizontalRadius=data.borderStyle.horizontalCornerRadius;const verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){const radius=`calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;container.style.borderRadius=radius;}else if(this instanceof RadioButtonWidgetAnnotationElement){const radius=`calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;container.style.borderRadius=radius;}switch(data.borderStyle.style){case _util.AnnotationBorderStyleType.SOLID:container.style.borderStyle=\"solid\";break;case _util.AnnotationBorderStyleType.DASHED:container.style.borderStyle=\"dashed\";break;case _util.AnnotationBorderStyleType.BEVELED:(0,_util.warn)(\"Unimplemented border style: beveled\");break;case _util.AnnotationBorderStyleType.INSET:(0,_util.warn)(\"Unimplemented border style: inset\");break;case _util.AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle=\"solid\";break;default:break;}const borderColor=data.borderColor||null;if(borderColor){container.style.borderColor=_util.Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0);}else{container.style.borderWidth=0;}}container.style.left=`${100*(rect[0]-pageX)/pageWidth}%`;container.style.top=`${100*(rect[1]-pageY)/pageHeight}%`;const{rotation}=data;if(data.hasOwnCanvas||rotation===0){container.style.width=`${100*width/pageWidth}%`;container.style.height=`${100*height/pageHeight}%`;}else{this.setRotation(rotation,container);}return container;}setRotation(angle,container=this.container){const{pageWidth,pageHeight}=this.viewport.rawDims;const{width,height}=getRectDims(this.data.rect);let elementWidth,elementHeight;if(angle%180===0){elementWidth=100*width/pageWidth;elementHeight=100*height/pageHeight;}else{elementWidth=100*height/pageWidth;elementHeight=100*width/pageHeight;}container.style.width=`${elementWidth}%`;container.style.height=`${elementHeight}%`;container.setAttribute(\"data-main-rotation\",(360-angle)%360);}get _commonActions(){const setColor=(jsName,styleName,event)=>{const color=event.detail[jsName];event.target.style[styleName]=_scripting_utils.ColorConverters[`${color[0]}_HTML`](color.slice(1));};return(0,_util.shadow)(this,\"_commonActions\",{display:event=>{const hidden=event.detail.display%2===1;this.container.style.visibility=hidden?\"hidden\":\"visible\";this.annotationStorage.setValue(this.data.id,{hidden,print:event.detail.display===0||event.detail.display===3});},print:event=>{this.annotationStorage.setValue(this.data.id,{print:event.detail.print});},hidden:event=>{this.container.style.visibility=event.detail.hidden?\"hidden\":\"visible\";this.annotationStorage.setValue(this.data.id,{hidden:event.detail.hidden});},focus:event=>{setTimeout(()=>event.target.focus({preventScroll:false}),0);},userName:event=>{event.target.title=event.detail.userName;},readonly:event=>{if(event.detail.readonly){event.target.setAttribute(\"readonly\",\"\");}else{event.target.removeAttribute(\"readonly\");}},required:event=>{this._setRequired(event.target,event.detail.required);},bgColor:event=>{setColor(\"bgColor\",\"backgroundColor\",event);},fillColor:event=>{setColor(\"fillColor\",\"backgroundColor\",event);},fgColor:event=>{setColor(\"fgColor\",\"color\",event);},textColor:event=>{setColor(\"textColor\",\"color\",event);},borderColor:event=>{setColor(\"borderColor\",\"borderColor\",event);},strokeColor:event=>{setColor(\"strokeColor\",\"borderColor\",event);},rotation:event=>{const angle=event.detail.rotation;this.setRotation(angle);this.annotationStorage.setValue(this.data.id,{rotation:angle});}});}_dispatchEventFromSandbox(actions,jsEvent){const commonActions=this._commonActions;for(const name of Object.keys(jsEvent.detail)){const action=actions[name]||commonActions[name];action?.(jsEvent);}}_setDefaultPropertiesFromJS(element){if(!this.enableScripting){return;}const storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData){return;}const commonActions=this._commonActions;for(const[actionName,detail]of Object.entries(storedData)){const action=commonActions[actionName];if(action){const eventProxy={detail:{[actionName]:detail},target:element};action(eventProxy);delete storedData[actionName];}}}_createQuadrilaterals(ignoreBorder=false){if(!this.data.quadPoints){return null;}const quadrilaterals=[];const savedRect=this.data.rect;for(const quadPoint of this.data.quadPoints){this.data.rect=[quadPoint[2].x,quadPoint[2].y,quadPoint[1].x,quadPoint[1].y];quadrilaterals.push(this._createContainer(ignoreBorder));}this.data.rect=savedRect;return quadrilaterals;}_createPopup(trigger,data){let container=this.container;if(this.quadrilaterals){trigger||=this.quadrilaterals;container=this.quadrilaterals[0];}if(!trigger){trigger=document.createElement(\"div\");trigger.classList.add(\"popupTriggerArea\");container.append(trigger);}const popupElement=new PopupElement({container,trigger,color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,hideWrapper:true});const popup=popupElement.render();popup.style.left=\"100%\";container.append(popup);}_renderQuadrilaterals(className){for(const quadrilateral of this.quadrilaterals){quadrilateral.classList.add(className);}return this.quadrilaterals;}render(){(0,_util.unreachable)(\"Abstract method `AnnotationElement.render` called\");}_getElementsByName(name,skipId=null){const fields=[];if(this._fieldObjects){const fieldObj=this._fieldObjects[name];if(fieldObj){for(const{page,id,exportValues}of fieldObj){if(page===-1){continue;}if(id===skipId){continue;}const exportValue=typeof exportValues===\"string\"?exportValues:null;const domElement=document.querySelector(`[data-element-id=\"${id}\"]`);if(domElement&&!GetElementsByNameSet.has(domElement)){(0,_util.warn)(`_getElementsByName - element not allowed: ${id}`);continue;}fields.push({id,exportValue,domElement});}}return fields;}for(const domElement of document.getElementsByName(name)){const{exportValue}=domElement;const id=domElement.getAttribute(\"data-element-id\");if(id===skipId){continue;}if(!GetElementsByNameSet.has(domElement)){continue;}fields.push({id,exportValue,domElement});}return fields;}}var _setInternalLink=/*#__PURE__*/new WeakSet();var _bindSetOCGState=/*#__PURE__*/new WeakSet();class LinkAnnotationElement extends AnnotationElement{constructor(parameters,options=null){super(parameters,{isRenderable:true,ignoreBorder:!!options?.ignoreBorder,createQuadrilaterals:true});_classPrivateMethodInitSpec(this,_bindSetOCGState);_classPrivateMethodInitSpec(this,_setInternalLink);this.isTooltipOnly=parameters.data.isTooltipOnly;}render(){const{data,linkService}=this;const link=document.createElement(\"a\");link.setAttribute(\"data-element-id\",data.id);let isBound=false;if(data.url){linkService.addLinkAttributes(link,data.url,data.newWindow);isBound=true;}else if(data.action){this._bindNamedAction(link,data.action);isBound=true;}else if(data.attachment){this._bindAttachment(link,data.attachment);isBound=true;}else if(data.setOCGState){_classPrivateMethodGet(this,_bindSetOCGState,_bindSetOCGState2).call(this,link,data.setOCGState);isBound=true;}else if(data.dest){this._bindLink(link,data.dest);isBound=true;}else{if(data.actions&&(data.actions.Action||data.actions[\"Mouse Up\"]||data.actions[\"Mouse Down\"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(link,data);isBound=true;}if(data.resetForm){this._bindResetFormAction(link,data.resetForm);isBound=true;}else if(this.isTooltipOnly&&!isBound){this._bindLink(link,\"\");isBound=true;}}if(this.quadrilaterals){return this._renderQuadrilaterals(\"linkAnnotation\").map((quadrilateral,index)=>{const linkElement=index===0?link:link.cloneNode();quadrilateral.append(linkElement);return quadrilateral;});}this.container.classList.add(\"linkAnnotation\");if(isBound){this.container.append(link);}return this.container;}_bindLink(link,destination){link.href=this.linkService.getDestinationHash(destination);link.onclick=()=>{if(destination){this.linkService.goToDestination(destination);}return false;};if(destination||destination===\"\"){_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}}_bindNamedAction(link,action){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.linkService.executeNamedAction(action);return false;};_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}_bindAttachment(link,attachment){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.downloadManager?.openOrDownloadData(this.container,attachment.content,attachment.filename);return false;};_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}_bindJSAction(link,data){link.href=this.linkService.getAnchorUrl(\"\");const map=new Map([[\"Action\",\"onclick\"],[\"Mouse Up\",\"onmouseup\"],[\"Mouse Down\",\"onmousedown\"]]);for(const name of Object.keys(data.actions)){const jsName=map.get(name);if(!jsName){continue;}link[jsName]=()=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:data.id,name}});return false;};}if(!link.onclick){link.onclick=()=>false;}_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}_bindResetFormAction(link,resetForm){const otherClickAction=link.onclick;if(!otherClickAction){link.href=this.linkService.getAnchorUrl(\"\");}_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);if(!this._fieldObjects){(0,_util.warn)(`_bindResetFormAction - \"resetForm\" action not supported, `+\"ensure that the `fieldObjects` parameter is provided.\");if(!otherClickAction){link.onclick=()=>false;}return;}link.onclick=()=>{otherClickAction?.();const{fields:resetFormFields,refs:resetFormRefs,include}=resetForm;const allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){const fieldIds=new Set(resetFormRefs);for(const fieldName of resetFormFields){const fields=this._fieldObjects[fieldName]||[];for(const{id}of fields){fieldIds.add(id);}}for(const fields of Object.values(this._fieldObjects)){for(const field of fields){if(fieldIds.has(field.id)===include){allFields.push(field);}}}}else{for(const fields of Object.values(this._fieldObjects)){allFields.push(...fields);}}const storage=this.annotationStorage;const allIds=[];for(const field of allFields){const{id}=field;allIds.push(id);switch(field.type){case\"text\":{const value=field.defaultValue||\"\";storage.setValue(id,{value});break;}case\"checkbox\":case\"radiobutton\":{const value=field.defaultValue===field.exportValues;storage.setValue(id,{value});break;}case\"combobox\":case\"listbox\":{const value=field.defaultValue||\"\";storage.setValue(id,{value});break;}default:continue;}const domElement=document.querySelector(`[data-element-id=\"${id}\"]`);if(!domElement){continue;}else if(!GetElementsByNameSet.has(domElement)){(0,_util.warn)(`_bindResetFormAction - element not allowed: ${id}`);continue;}domElement.dispatchEvent(new Event(\"resetform\"));}if(this.enableScripting){this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:\"app\",ids:allIds,name:\"ResetForm\"}});}return false;};}}function _setInternalLink2(){this.container.setAttribute(\"data-internal-link\",\"\");}function _bindSetOCGState2(link,action){link.href=this.linkService.getAnchorUrl(\"\");link.onclick=()=>{this.linkService.executeSetOCGState(action);return false;};_classPrivateMethodGet(this,_setInternalLink,_setInternalLink2).call(this);}class TextAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable});}render(){this.container.classList.add(\"textAnnotation\");const image=document.createElement(\"img\");image.src=this.imageResourcesPath+\"annotation-\"+this.data.name.toLowerCase()+\".svg\";image.alt=\"[{{type}} Annotation]\";image.dataset.l10nId=\"text_annotation_type\";image.dataset.l10nArgs=JSON.stringify({type:this.data.name});if(!this.data.hasPopup){this._createPopup(image,this.data);}this.container.append(image);return this.container;}}class WidgetAnnotationElement extends AnnotationElement{render(){if(this.data.alternativeText){this.container.title=this.data.alternativeText;}return this.container;}showElementAndHideCanvas(element){if(this.data.hasOwnCanvas){if(element.previousSibling?.nodeName===\"CANVAS\"){element.previousSibling.hidden=true;}element.hidden=false;}}_getKeyModifier(event){const{isWin,isMac}=_util.FeatureTest.platform;return isWin&&event.ctrlKey||isMac&&event.metaKey;}_setEventListener(element,baseName,eventName,valueGetter){if(baseName.includes(\"mouse\")){element.addEventListener(baseName,event=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:this._getKeyModifier(event)}});});}else{element.addEventListener(baseName,event=>{this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id:this.data.id,name:eventName,value:valueGetter(event)}});});}}_setEventListeners(element,names,getter){for(const[baseName,eventName]of names){if(eventName===\"Action\"||this.data.actions?.[eventName]){this._setEventListener(element,baseName,eventName,getter);}}}_setBackgroundColor(element){const color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?\"transparent\":_util.Util.makeHexColor(color[0],color[1],color[2]);}_setTextStyle(element){const TEXT_ALIGNMENT=[\"left\",\"center\",\"right\"];const{fontColor}=this.data.defaultAppearanceData;const fontSize=this.data.defaultAppearanceData.fontSize||DEFAULT_FONT_SIZE;const style=element.style;let computedFontSize;const BORDER_SIZE=2;const roundToOneDecimal=x=>Math.round(10*x)/10;if(this.data.multiLine){const height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);const numberOfLines=Math.round(height/(_util.LINE_FACTOR*fontSize))||1;const lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/_util.LINE_FACTOR));}else{const height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);computedFontSize=Math.min(fontSize,roundToOneDecimal(height/_util.LINE_FACTOR));}style.fontSize=`calc(${computedFontSize}px * var(--scale-factor))`;style.color=_util.Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]);if(this.data.textAlignment!==null){style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}}_setRequired(element,isRequired){if(isRequired){element.setAttribute(\"required\",true);}else{element.removeAttribute(\"required\");}element.setAttribute(\"aria-required\",isRequired);}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){const isRenderable=parameters.renderForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;super(parameters,{isRenderable});}setPropertyOnSiblings(base,key,value,keyInStorage){const storage=this.annotationStorage;for(const element of this._getElementsByName(base.name,base.id)){if(element.domElement){element.domElement[key]=value;}storage.setValue(element.id,{[keyInStorage]:value});}}render(){const storage=this.annotationStorage;const id=this.data.id;this.container.classList.add(\"textWidgetAnnotation\");let element=null;if(this.renderForms){const storedData=storage.getValue(id,{value:this.data.fieldValue});let textContent=storedData.value||\"\";const maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;if(maxLen&&textContent.length>maxLen){textContent=textContent.slice(0,maxLen);}let fieldFormattedValues=storedData.formattedValue||this.data.textContent?.join(\"\\n\")||null;if(fieldFormattedValues&&this.data.comb){fieldFormattedValues=fieldFormattedValues.replaceAll(/\\s+/g,\"\");}const elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1};if(this.data.multiLine){element=document.createElement(\"textarea\");element.textContent=fieldFormattedValues??textContent;if(this.data.doNotScroll){element.style.overflowY=\"hidden\";}}else{element=document.createElement(\"input\");element.type=\"text\";element.setAttribute(\"value\",fieldFormattedValues??textContent);if(this.data.doNotScroll){element.style.overflowX=\"hidden\";}}if(this.data.hasOwnCanvas){element.hidden=true;}GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=this.data.readOnly;element.name=this.data.fieldName;element.tabIndex=DEFAULT_TAB_INDEX;this._setRequired(element,this.data.required);if(maxLen){element.maxLength=maxLen;}element.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});this.setPropertyOnSiblings(element,\"value\",event.target.value,\"value\");elementData.formattedValue=null;});element.addEventListener(\"resetform\",event=>{const defaultValue=this.data.defaultFieldValue??\"\";element.value=elementData.userValue=defaultValue;elementData.formattedValue=null;});let blurListener=event=>{const{formattedValue}=elementData;if(formattedValue!==null&&formattedValue!==undefined){event.target.value=formattedValue;}event.target.scrollLeft=0;};if(this.enableScripting&&this.hasJSActions){element.addEventListener(\"focus\",event=>{const{target}=event;if(elementData.userValue){target.value=elementData.userValue;}elementData.lastCommittedValue=target.value;elementData.commitKey=1;});element.addEventListener(\"updatefromsandbox\",jsEvent=>{this.showElementAndHideCanvas(jsEvent.target);const actions={value(event){elementData.userValue=event.detail.value??\"\";storage.setValue(id,{value:elementData.userValue.toString()});event.target.value=elementData.userValue;},formattedValue(event){const{formattedValue}=event.detail;elementData.formattedValue=formattedValue;if(formattedValue!==null&&formattedValue!==undefined&&event.target!==document.activeElement){event.target.value=formattedValue;}storage.setValue(id,{formattedValue});},selRange(event){event.target.setSelectionRange(...event.detail.selRange);},charLimit:event=>{const{charLimit}=event.detail;const{target}=event;if(charLimit===0){target.removeAttribute(\"maxLength\");return;}target.setAttribute(\"maxLength\",charLimit);let value=elementData.userValue;if(!value||value.length<=charLimit){return;}value=value.slice(0,charLimit);target.value=elementData.userValue=value;storage.setValue(id,{value});this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}});}};this._dispatchEventFromSandbox(actions,jsEvent);});element.addEventListener(\"keydown\",event=>{elementData.commitKey=1;let commitKey=-1;if(event.key===\"Escape\"){commitKey=0;}else if(event.key===\"Enter\"&&!this.data.multiLine){commitKey=2;}else if(event.key===\"Tab\"){elementData.commitKey=3;}if(commitKey===-1){return;}const{value}=event.target;if(elementData.lastCommittedValue===value){return;}elementData.lastCommittedValue=value;elementData.userValue=value;this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});});const _blurListener=blurListener;blurListener=null;element.addEventListener(\"blur\",event=>{if(!event.relatedTarget){return;}const{value}=event.target;elementData.userValue=value;if(elementData.lastCommittedValue!==value){this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,willCommit:true,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});}_blurListener(event);});if(this.data.actions?.Keystroke){element.addEventListener(\"beforeinput\",event=>{elementData.lastCommittedValue=null;const{data,target}=event;const{value,selectionStart,selectionEnd}=target;let selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case\"deleteWordBackward\":{const match=value.substring(0,selectionStart).match(/\\w*[^\\w]*$/);if(match){selStart-=match[0].length;}break;}case\"deleteWordForward\":{const match=value.substring(selectionStart).match(/^[^\\w]*\\w*/);if(match){selEnd+=match[0].length;}break;}case\"deleteContentBackward\":if(selectionStart===selectionEnd){selStart-=1;}break;case\"deleteContentForward\":if(selectionStart===selectionEnd){selEnd+=1;}break;}event.preventDefault();this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value,change:data||\"\",willCommit:false,selStart,selEnd}});});}this._setEventListeners(element,[[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.value);}if(blurListener){element.addEventListener(\"blur\",blurListener);}if(this.data.comb){const fieldWidth=this.data.rect[2]-this.data.rect[0];const combWidth=fieldWidth/maxLen;element.classList.add(\"comb\");element.style.letterSpacing=`calc(${combWidth}px * var(--scale-factor) - 1ch)`;}}else{element=document.createElement(\"div\");element.textContent=this.data.fieldValue;element.style.verticalAlign=\"middle\";element.style.display=\"table-cell\";}this._setTextStyle(element);this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){const storage=this.annotationStorage;const data=this.data;const id=data.id;let value=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;if(typeof value===\"string\"){value=value!==\"Off\";storage.setValue(id,{value});}this.container.classList.add(\"buttonWidgetAnnotation\",\"checkBox\");const element=document.createElement(\"input\");GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type=\"checkbox\";element.name=data.fieldName;if(value){element.setAttribute(\"checked\",true);}element.setAttribute(\"exportValue\",data.exportValue);element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener(\"change\",event=>{const{name,checked}=event.target;for(const checkbox of this._getElementsByName(name,id)){const curChecked=checked&&checkbox.exportValue===data.exportValue;if(checkbox.domElement){checkbox.domElement.checked=curChecked;}storage.setValue(checkbox.id,{value:curChecked});}storage.setValue(id,{value:checked});});element.addEventListener(\"resetform\",event=>{const defaultValue=data.defaultFieldValue||\"Off\";event.target.checked=defaultValue===data.exportValue;});if(this.enableScripting&&this.hasJSActions){element.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value(event){event.target.checked=event.detail.value!==\"Off\";storage.setValue(id,{value:event.target.checked});}};this._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,[[\"change\",\"Validate\"],[\"change\",\"Action\"],[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.checked);}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){this.container.classList.add(\"buttonWidgetAnnotation\",\"radioButton\");const storage=this.annotationStorage;const data=this.data;const id=data.id;let value=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;if(typeof value===\"string\"){value=value!==data.buttonValue;storage.setValue(id,{value});}const element=document.createElement(\"input\");GetElementsByNameSet.add(element);element.setAttribute(\"data-element-id\",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type=\"radio\";element.name=data.fieldName;if(value){element.setAttribute(\"checked\",true);}element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener(\"change\",event=>{const{name,checked}=event.target;for(const radio of this._getElementsByName(name,id)){storage.setValue(radio.id,{value:false});}storage.setValue(id,{value:checked});});element.addEventListener(\"resetform\",event=>{const defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!==null&&defaultValue!==undefined&&defaultValue===data.buttonValue;});if(this.enableScripting&&this.hasJSActions){const pdfButtonValue=data.buttonValue;element.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value:event=>{const checked=pdfButtonValue===event.detail.value;for(const radio of this._getElementsByName(event.target.name)){const curChecked=checked&&radio.id===id;if(radio.domElement){radio.domElement.checked=curChecked;}storage.setValue(radio.id,{value:curChecked});}}};this._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,[[\"change\",\"Validate\"],[\"change\",\"Action\"],[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"]],event=>event.target.checked);}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(parameters){super(parameters,{ignoreBorder:parameters.data.hasAppearance});}render(){const container=super.render();container.classList.add(\"buttonWidgetAnnotation\",\"pushButton\");if(this.data.alternativeText){container.title=this.data.alternativeText;}const linkElement=container.lastChild;if(this.enableScripting&&this.hasJSActions&&linkElement){this._setDefaultPropertiesFromJS(linkElement);linkElement.addEventListener(\"updatefromsandbox\",jsEvent=>{this._dispatchEventFromSandbox({},jsEvent);});}return container;}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(parameters){super(parameters,{isRenderable:parameters.renderForms});}render(){this.container.classList.add(\"choiceWidgetAnnotation\");const storage=this.annotationStorage;const id=this.data.id;const storedData=storage.getValue(id,{value:this.data.fieldValue});const selectElement=document.createElement(\"select\");GetElementsByNameSet.add(selectElement);selectElement.setAttribute(\"data-element-id\",id);selectElement.disabled=this.data.readOnly;this._setRequired(selectElement,this.data.required);selectElement.name=this.data.fieldName;selectElement.tabIndex=DEFAULT_TAB_INDEX;let addAnEmptyEntry=this.data.combo&&this.data.options.length>0;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}selectElement.addEventListener(\"resetform\",event=>{const defaultValue=this.data.defaultFieldValue;for(const option of selectElement.options){option.selected=option.value===defaultValue;}});for(const option of this.data.options){const optionElement=document.createElement(\"option\");optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(storedData.value.includes(option.exportValue)){optionElement.setAttribute(\"selected\",true);addAnEmptyEntry=false;}selectElement.append(optionElement);}let removeEmptyEntry=null;if(addAnEmptyEntry){const noneOptionElement=document.createElement(\"option\");noneOptionElement.value=\" \";noneOptionElement.setAttribute(\"hidden\",true);noneOptionElement.setAttribute(\"selected\",true);selectElement.prepend(noneOptionElement);removeEmptyEntry=()=>{noneOptionElement.remove();selectElement.removeEventListener(\"input\",removeEmptyEntry);removeEmptyEntry=null;};selectElement.addEventListener(\"input\",removeEmptyEntry);}const getValue=isExport=>{const name=isExport?\"value\":\"textContent\";const{options,multiple}=selectElement;if(!multiple){return options.selectedIndex===-1?null:options[options.selectedIndex][name];}return Array.prototype.filter.call(options,option=>option.selected).map(option=>option[name]);};let selectedValues=getValue(false);const getItems=event=>{const options=event.target.options;return Array.prototype.map.call(options,option=>{return{displayValue:option.textContent,exportValue:option.value};});};if(this.enableScripting&&this.hasJSActions){selectElement.addEventListener(\"updatefromsandbox\",jsEvent=>{const actions={value(event){removeEmptyEntry?.();const value=event.detail.value;const values=new Set(Array.isArray(value)?value:[value]);for(const option of selectElement.options){option.selected=values.has(option.value);}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},multipleSelection(event){selectElement.multiple=true;},remove(event){const options=selectElement.options;const index=event.detail.remove;options[index].selected=false;selectElement.remove(index);if(options.length>0){const i=Array.prototype.findIndex.call(options,option=>option.selected);if(i===-1){options[0].selected=true;}}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},clear(event){while(selectElement.length!==0){selectElement.remove(0);}storage.setValue(id,{value:null,items:[]});selectedValues=getValue(false);},insert(event){const{index,displayValue,exportValue}=event.detail.insert;const selectChild=selectElement.children[index];const optionElement=document.createElement(\"option\");optionElement.textContent=displayValue;optionElement.value=exportValue;if(selectChild){selectChild.before(optionElement);}else{selectElement.append(optionElement);}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},items(event){const{items}=event.detail;while(selectElement.length!==0){selectElement.remove(0);}for(const item of items){const{displayValue,exportValue}=item;const optionElement=document.createElement(\"option\");optionElement.textContent=displayValue;optionElement.value=exportValue;selectElement.append(optionElement);}if(selectElement.options.length>0){selectElement.options[0].selected=true;}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},indices(event){const indices=new Set(event.detail.indices);for(const option of event.target.options){option.selected=indices.has(option.index);}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);},editable(event){event.target.disabled=!event.detail.editable;}};this._dispatchEventFromSandbox(actions,jsEvent);});selectElement.addEventListener(\"input\",event=>{const exportValue=getValue(true);storage.setValue(id,{value:exportValue});event.preventDefault();this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\",{source:this,detail:{id,name:\"Keystroke\",value:selectedValues,changeEx:exportValue,willCommit:false,commitKey:1,keyDown:false}});});this._setEventListeners(selectElement,[[\"focus\",\"Focus\"],[\"blur\",\"Blur\"],[\"mousedown\",\"Mouse Down\"],[\"mouseenter\",\"Mouse Enter\"],[\"mouseleave\",\"Mouse Exit\"],[\"mouseup\",\"Mouse Up\"],[\"input\",\"Action\"],[\"input\",\"Validate\"]],event=>event.target.value);}else{selectElement.addEventListener(\"input\",function(event){storage.setValue(id,{value:getValue(true)});});}if(this.data.combo){this._setTextStyle(selectElement);}else{}this._setBackgroundColor(selectElement);this._setDefaultPropertiesFromJS(selectElement);this.container.append(selectElement);return this.container;}}class PopupAnnotationElement extends AnnotationElement{constructor(parameters){const{data}=parameters;const isRenderable=!PopupAnnotationElement.IGNORE_TYPES.has(data.parentType)&&!!(data.titleObj?.str||data.contentsObj?.str||data.richText?.str);super(parameters,{isRenderable});}render(){this.container.classList.add(\"popupAnnotation\");const parentElements=this.layer.querySelectorAll(`[data-annotation-id=\"${this.data.parentId}\"]`);if(parentElements.length===0){return this.container;}const popup=new PopupElement({container:this.container,trigger:Array.from(parentElements),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText});const page=this.page;const rect=_util.Util.normalizeRect([this.data.parentRect[0],page.view[3]-this.data.parentRect[1]+page.view[1],this.data.parentRect[2],page.view[3]-this.data.parentRect[3]+page.view[1]]);const popupLeft=rect[0]+this.data.parentRect[2]-this.data.parentRect[0];const popupTop=rect[1];const{pageWidth,pageHeight,pageX,pageY}=this.viewport.rawDims;this.container.style.left=`${100*(popupLeft-pageX)/pageWidth}%`;this.container.style.top=`${100*(popupTop-pageY)/pageHeight}%`;this.container.append(popup.render());return this.container;}}_defineProperty(PopupAnnotationElement,\"IGNORE_TYPES\",new Set([\"Line\",\"Square\",\"Circle\",\"PolyLine\",\"Polygon\",\"Ink\"]));class PopupElement{constructor(parameters){this.container=parameters.container;this.trigger=parameters.trigger;this.color=parameters.color;this.titleObj=parameters.titleObj;this.modificationDate=parameters.modificationDate;this.contentsObj=parameters.contentsObj;this.richText=parameters.richText;this.hideWrapper=parameters.hideWrapper||false;this.pinned=false;}render(){const BACKGROUND_ENLIGHT=0.7;const wrapper=document.createElement(\"div\");wrapper.classList.add(\"popupWrapper\");this.hideElement=this.hideWrapper?wrapper:this.container;this.hideElement.hidden=true;const popup=document.createElement(\"div\");popup.classList.add(\"popup\");const color=this.color;if(color){const r=BACKGROUND_ENLIGHT*(255-color[0])+color[0];const g=BACKGROUND_ENLIGHT*(255-color[1])+color[1];const b=BACKGROUND_ENLIGHT*(255-color[2])+color[2];popup.style.backgroundColor=_util.Util.makeHexColor(r|0,g|0,b|0);}const title=document.createElement(\"h1\");title.dir=this.titleObj.dir;title.textContent=this.titleObj.str;popup.append(title);const dateObject=_display_utils.PDFDateString.toDateObject(this.modificationDate);if(dateObject){const modificationDate=document.createElement(\"span\");modificationDate.classList.add(\"popupDate\");modificationDate.textContent=\"{{date}}, {{time}}\";modificationDate.dataset.l10nId=\"annotation_date_string\";modificationDate.dataset.l10nArgs=JSON.stringify({date:dateObject.toLocaleDateString(),time:dateObject.toLocaleTimeString()});popup.append(modificationDate);}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str)){_xfa_layer.XfaLayer.render({xfaHtml:this.richText.html,intent:\"richText\",div:popup});popup.lastChild.classList.add(\"richText\",\"popupContent\");}else{const contents=this._formatContents(this.contentsObj);popup.append(contents);}if(!Array.isArray(this.trigger)){this.trigger=[this.trigger];}for(const element of this.trigger){element.addEventListener(\"click\",this._toggle.bind(this));element.addEventListener(\"mouseover\",this._show.bind(this,false));element.addEventListener(\"mouseout\",this._hide.bind(this,false));}popup.addEventListener(\"click\",this._hide.bind(this,true));wrapper.append(popup);return wrapper;}_formatContents({str,dir}){const p=document.createElement(\"p\");p.classList.add(\"popupContent\");p.dir=dir;const lines=str.split(/(?:\\r\\n?|\\n)/);for(let i=0,ii=lines.length;i<ii;++i){const line=lines[i];p.append(document.createTextNode(line));if(i<ii-1){p.append(document.createElement(\"br\"));}}return p;}_toggle(){if(this.pinned){this._hide(true);}else{this._show(true);}}_show(pin=false){if(pin){this.pinned=true;}if(this.hideElement.hidden){this.hideElement.hidden=false;this.container.style.zIndex=parseInt(this.container.style.zIndex)+1000;}}_hide(unpin=true){if(unpin){this.pinned=false;}if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=true;this.container.style.zIndex=parseInt(this.container.style.zIndex)-1000;}}}class FreeTextAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});this.textContent=parameters.data.textContent;}render(){this.container.classList.add(\"freeTextAnnotation\");if(this.textContent){const content=document.createElement(\"div\");content.classList.add(\"annotationTextContent\");content.setAttribute(\"role\",\"comment\");for(const line of this.textContent){const lineSpan=document.createElement(\"span\");lineSpan.textContent=line;content.append(lineSpan);}this.container.append(content);}if(!this.data.hasPopup){this._createPopup(null,this.data);}return this.container;}}class LineAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});}render(){this.container.classList.add(\"lineAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const line=this.svgFactory.createElement(\"svg:line\");line.setAttribute(\"x1\",data.rect[2]-data.lineCoordinates[0]);line.setAttribute(\"y1\",data.rect[3]-data.lineCoordinates[1]);line.setAttribute(\"x2\",data.rect[2]-data.lineCoordinates[2]);line.setAttribute(\"y2\",data.rect[3]-data.lineCoordinates[3]);line.setAttribute(\"stroke-width\",data.borderStyle.width||1);line.setAttribute(\"stroke\",\"transparent\");line.setAttribute(\"fill\",\"transparent\");svg.append(line);this.container.append(svg);this._createPopup(line,data);return this.container;}}class SquareAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});}render(){this.container.classList.add(\"squareAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const borderWidth=data.borderStyle.width;const square=this.svgFactory.createElement(\"svg:rect\");square.setAttribute(\"x\",borderWidth/2);square.setAttribute(\"y\",borderWidth/2);square.setAttribute(\"width\",width-borderWidth);square.setAttribute(\"height\",height-borderWidth);square.setAttribute(\"stroke-width\",borderWidth||1);square.setAttribute(\"stroke\",\"transparent\");square.setAttribute(\"fill\",\"transparent\");svg.append(square);this.container.append(svg);this._createPopup(square,data);return this.container;}}class CircleAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});}render(){this.container.classList.add(\"circleAnnotation\");const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);const borderWidth=data.borderStyle.width;const circle=this.svgFactory.createElement(\"svg:ellipse\");circle.setAttribute(\"cx\",width/2);circle.setAttribute(\"cy\",height/2);circle.setAttribute(\"rx\",width/2-borderWidth/2);circle.setAttribute(\"ry\",height/2-borderWidth/2);circle.setAttribute(\"stroke-width\",borderWidth||1);circle.setAttribute(\"stroke\",\"transparent\");circle.setAttribute(\"fill\",\"transparent\");svg.append(circle);this.container.append(svg);this._createPopup(circle,data);return this.container;}}class PolylineAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});this.containerClassName=\"polylineAnnotation\";this.svgElementName=\"svg:polyline\";}render(){this.container.classList.add(this.containerClassName);const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);let points=[];for(const coordinate of data.vertices){const x=coordinate.x-data.rect[0];const y=data.rect[3]-coordinate.y;points.push(x+\",\"+y);}points=points.join(\" \");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute(\"points\",points);polyline.setAttribute(\"stroke-width\",data.borderStyle.width||1);polyline.setAttribute(\"stroke\",\"transparent\");polyline.setAttribute(\"fill\",\"transparent\");svg.append(polyline);this.container.append(svg);this._createPopup(polyline,data);return this.container;}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(parameters){super(parameters);this.containerClassName=\"polygonAnnotation\";this.svgElementName=\"svg:polygon\";}}class CaretAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});}render(){this.container.classList.add(\"caretAnnotation\");if(!this.data.hasPopup){this._createPopup(null,this.data);}return this.container;}}class InkAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});this.containerClassName=\"inkAnnotation\";this.svgElementName=\"svg:polyline\";}render(){this.container.classList.add(this.containerClassName);const data=this.data;const{width,height}=getRectDims(data.rect);const svg=this.svgFactory.create(width,height,true);for(const inkList of data.inkLists){let points=[];for(const coordinate of inkList){const x=coordinate.x-data.rect[0];const y=data.rect[3]-coordinate.y;points.push(`${x},${y}`);}points=points.join(\" \");const polyline=this.svgFactory.createElement(this.svgElementName);polyline.setAttribute(\"points\",points);polyline.setAttribute(\"stroke-width\",data.borderStyle.width||1);polyline.setAttribute(\"stroke\",\"transparent\");polyline.setAttribute(\"fill\",\"transparent\");this._createPopup(polyline,data);svg.append(polyline);}this.container.append(svg);return this.container;}}class HighlightAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals(\"highlightAnnotation\");}this.container.classList.add(\"highlightAnnotation\");return this.container;}}class UnderlineAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals(\"underlineAnnotation\");}this.container.classList.add(\"underlineAnnotation\");return this.container;}}class SquigglyAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals(\"squigglyAnnotation\");}this.container.classList.add(\"squigglyAnnotation\");return this.container;}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true,createQuadrilaterals:true});}render(){if(!this.data.hasPopup){this._createPopup(null,this.data);}if(this.quadrilaterals){return this._renderQuadrilaterals(\"strikeoutAnnotation\");}this.container.classList.add(\"strikeoutAnnotation\");return this.container;}}class StampAnnotationElement extends AnnotationElement{constructor(parameters){const isRenderable=!!(parameters.data.hasPopup||parameters.data.titleObj?.str||parameters.data.contentsObj?.str||parameters.data.richText?.str);super(parameters,{isRenderable,ignoreBorder:true});}render(){this.container.classList.add(\"stampAnnotation\");if(!this.data.hasPopup){this._createPopup(null,this.data);}return this.container;}}class FileAttachmentAnnotationElement extends AnnotationElement{constructor(parameters){super(parameters,{isRenderable:true});const{filename,content}=this.data.file;this.filename=(0,_display_utils.getFilenameFromUrl)(filename,true);this.content=content;this.linkService.eventBus?.dispatch(\"fileattachmentannotation\",{source:this,filename,content});}render(){this.container.classList.add(\"fileAttachmentAnnotation\");let trigger;if(this.data.hasAppearance){trigger=document.createElement(\"div\");}else{trigger=document.createElement(\"img\");trigger.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?\"paperclip\":\"pushpin\"}.svg`;}trigger.classList.add(\"popupTriggerArea\");trigger.addEventListener(\"dblclick\",this._download.bind(this));if(!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)){this._createPopup(trigger,this.data);}this.container.append(trigger);return this.container;}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename);}}class AnnotationLayer{static render(params){const{annotations,div,viewport,accessibilityManager}=params;(0,_display_utils.setLayerDimensions)(div,viewport);const elementParams={data:null,layer:div,page:params.page,viewport,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||\"\",renderForms:params.renderForms!==false,svgFactory:new _display_utils.DOMSVGFactory(),annotationStorage:params.annotationStorage||new _annotation_storage.AnnotationStorage(),enableScripting:params.enableScripting===true,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects};let zIndex=0;for(const data of annotations){if(data.noHTML){continue;}if(data.annotationType!==_util.AnnotationType.POPUP){const{width,height}=getRectDims(data.rect);if(width<=0||height<=0){continue;}}elementParams.data=data;const element=AnnotationElementFactory.create(elementParams);if(!element.isRenderable){continue;}const rendered=element.render();if(data.hidden){rendered.style.visibility=\"hidden\";}if(Array.isArray(rendered)){for(const renderedElement of rendered){renderedElement.style.zIndex=zIndex++;_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,renderedElement,data.id,div,accessibilityManager);}}else{rendered.style.zIndex=zIndex++;if(element instanceof PopupAnnotationElement){div.prepend(rendered);}else{_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,rendered,data.id,div,accessibilityManager);}}}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,div,params.annotationCanvasMap);}static update(params){const{annotationCanvasMap,div,viewport}=params;(0,_display_utils.setLayerDimensions)(div,{rotation:viewport.rotation});_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,div,annotationCanvasMap);div.hidden=false;}}function _appendElement(element,id,div,accessibilityManager){const contentElement=element.firstChild||element;contentElement.id=`${_display_utils.AnnotationPrefix}${id}`;div.append(element);accessibilityManager?.moveElementInDOM(div,element,contentElement,false);}function _setAnnotationCanvasMap(div,annotationCanvasMap){if(!annotationCanvasMap){return;}for(const[id,canvas]of annotationCanvasMap){const element=div.querySelector(`[data-annotation-id=\"${id}\"]`);if(!element){continue;}const{firstChild}=element;if(!firstChild){element.append(canvas);}else if(firstChild.nodeName===\"CANVAS\"){firstChild.replaceWith(canvas);}else{firstChild.before(canvas);}}annotationCanvasMap.clear();}exports.AnnotationLayer=AnnotationLayer;/***/},/* 31 */ /***/(__unused_webpack_module,exports)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.ColorConverters=void 0;function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,\"0\");}class ColorConverters{static CMYK_G([c,y,m,k]){return[\"G\",1-Math.min(1,0.3*c+0.59*m+0.11*y+k)];}static G_CMYK([g]){return[\"CMYK\",0,0,0,1-g];}static G_RGB([g]){return[\"RGB\",g,g,g];}static G_HTML([g]){const G=makeColorComp(g);return`#${G}${G}${G}`;}static RGB_G([r,g,b]){return[\"G\",0.3*r+0.59*g+0.11*b];}static RGB_HTML([r,g,b]){const R=makeColorComp(r);const G=makeColorComp(g);const B=makeColorComp(b);return`#${R}${G}${B}`;}static T_HTML(){return\"#00000000\";}static CMYK_RGB([c,y,m,k]){return[\"RGB\",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)];}static CMYK_HTML(components){const rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb);}static RGB_CMYK([r,g,b]){const c=1-r;const m=1-g;const y=1-b;const k=Math.min(c,m,y);return[\"CMYK\",c,m,y,k];}}exports.ColorConverters=ColorConverters;/***/},/* 32 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.XfaLayer=void 0;var _xfa_text=__w_pdfjs_require__(19);class XfaLayer{static setupStorage(html,id,element,storage,intent){const storedData=storage.getValue(id,{value:null});switch(element.name){case\"textarea\":if(storedData.value!==null){html.textContent=storedData.value;}if(intent===\"print\"){break;}html.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});});break;case\"input\":if(element.attributes.type===\"radio\"||element.attributes.type===\"checkbox\"){if(storedData.value===element.attributes.xfaOn){html.setAttribute(\"checked\",true);}else if(storedData.value===element.attributes.xfaOff){html.removeAttribute(\"checked\");}if(intent===\"print\"){break;}html.addEventListener(\"change\",event=>{storage.setValue(id,{value:event.target.checked?event.target.getAttribute(\"xfaOn\"):event.target.getAttribute(\"xfaOff\")});});}else{if(storedData.value!==null){html.setAttribute(\"value\",storedData.value);}if(intent===\"print\"){break;}html.addEventListener(\"input\",event=>{storage.setValue(id,{value:event.target.value});});}break;case\"select\":if(storedData.value!==null){for(const option of element.children){if(option.attributes.value===storedData.value){option.attributes.selected=true;}}}html.addEventListener(\"input\",event=>{const options=event.target.options;const value=options.selectedIndex===-1?\"\":options[options.selectedIndex].value;storage.setValue(id,{value});});break;}}static setAttributes({html,element,storage=null,intent,linkService}){const{attributes}=element;const isHTMLAnchorElement=html instanceof HTMLAnchorElement;if(attributes.type===\"radio\"){attributes.name=`${attributes.name}-${intent}`;}for(const[key,value]of Object.entries(attributes)){if(value===null||value===undefined){continue;}switch(key){case\"class\":if(value.length){html.setAttribute(key,value.join(\" \"));}break;case\"dataId\":break;case\"id\":html.setAttribute(\"data-element-id\",value);break;case\"style\":Object.assign(html.style,value);break;case\"textContent\":html.textContent=value;break;default:if(!isHTMLAnchorElement||key!==\"href\"&&key!==\"newWindow\"){html.setAttribute(key,value);}}}if(isHTMLAnchorElement){linkService.addLinkAttributes(html,attributes.href,attributes.newWindow);}if(storage&&attributes.dataId){this.setupStorage(html,attributes.dataId,element,storage);}}static render(parameters){const storage=parameters.annotationStorage;const linkService=parameters.linkService;const root=parameters.xfaHtml;const intent=parameters.intent||\"display\";const rootHtml=document.createElement(root.name);if(root.attributes){this.setAttributes({html:rootHtml,element:root,intent,linkService});}const stack=[[root,-1,rootHtml]];const rootDiv=parameters.div;rootDiv.append(rootHtml);if(parameters.viewport){const transform=`matrix(${parameters.viewport.transform.join(\",\")})`;rootDiv.style.transform=transform;}if(intent!==\"richText\"){rootDiv.setAttribute(\"class\",\"xfaLayer xfaFont\");}const textDivs=[];while(stack.length>0){const[parent,i,html]=stack.at(-1);if(i+1===parent.children.length){stack.pop();continue;}const child=parent.children[++stack.at(-1)[1]];if(child===null){continue;}const{name}=child;if(name===\"#text\"){const node=document.createTextNode(child.value);textDivs.push(node);html.append(node);continue;}let childHtml;if(child?.attributes?.xmlns){childHtml=document.createElementNS(child.attributes.xmlns,name);}else{childHtml=document.createElement(name);}html.append(childHtml);if(child.attributes){this.setAttributes({html:childHtml,element:child,storage,intent,linkService});}if(child.children&&child.children.length>0){stack.push([child,-1,childHtml]);}else if(child.value){const node=document.createTextNode(child.value);if(_xfa_text.XfaText.shouldBuildText(name)){textDivs.push(node);}childHtml.append(node);}}for(const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")){el.setAttribute(\"readOnly\",true);}return{textDivs};}static update(parameters){const transform=`matrix(${parameters.viewport.transform.join(\",\")})`;parameters.div.style.transform=transform;parameters.div.hidden=false;}}exports.XfaLayer=XfaLayer;/***/},/* 33 */ /***/(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,\"__esModule\",{value:true});exports.SVGGraphics=void 0;var _display_utils=__w_pdfjs_require__(6);var _util=__w_pdfjs_require__(1);var _is_node=__w_pdfjs_require__(10);let SVGGraphics=class{constructor(){(0,_util.unreachable)(\"Not implemented: SVGGraphics\");}};exports.SVGGraphics=SVGGraphics;{const SVG_DEFAULTS={fontStyle:\"normal\",fontWeight:\"normal\",fillColor:\"#000000\"};const XML_NS=\"http://www.w3.org/XML/1998/namespace\";const XLINK_NS=\"http://www.w3.org/1999/xlink\";const LINE_CAP_STYLES=[\"butt\",\"round\",\"square\"];const LINE_JOIN_STYLES=[\"miter\",\"round\",\"bevel\"];const createObjectURL=function(data,contentType=\"\",forceDataSchema=false){if(URL.createObjectURL&&typeof Blob!==\"undefined\"&&!forceDataSchema){return URL.createObjectURL(new Blob([data],{type:contentType}));}const digits=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";let buffer=`data:${contentType};base64,`;for(let i=0,ii=data.length;i<ii;i+=3){const b1=data[i]&0xff;const b2=data[i+1]&0xff;const b3=data[i+2]&0xff;const d1=b1>>2,d2=(b1&3)<<4|b2>>4;const d3=i+1<ii?(b2&0xf)<<2|b3>>6:64;const d4=i+2<ii?b3&0x3f:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4];}return buffer;};const convertImgDataToPng=function(){const PNG_HEADER=new Uint8Array([0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a]);const CHUNK_WRAPPER_SIZE=12;const crcTable=new Int32Array(256);for(let i=0;i<256;i++){let c=i;for(let h=0;h<8;h++){if(c&1){c=0xedb88320^c>>1&0x7fffffff;}else{c=c>>1&0x7fffffff;}}crcTable[i]=c;}function crc32(data,start,end){let crc=-1;for(let i=start;i<end;i++){const a=(crc^data[i])&0xff;const b=crcTable[a];crc=crc>>>8^b;}return crc^-1;}function writePngChunk(type,body,data,offset){let p=offset;const len=body.length;data[p]=len>>24&0xff;data[p+1]=len>>16&0xff;data[p+2]=len>>8&0xff;data[p+3]=len&0xff;p+=4;data[p]=type.charCodeAt(0)&0xff;data[p+1]=type.charCodeAt(1)&0xff;data[p+2]=type.charCodeAt(2)&0xff;data[p+3]=type.charCodeAt(3)&0xff;p+=4;data.set(body,p);p+=body.length;const crc=crc32(data,offset+4,p);data[p]=crc>>24&0xff;data[p+1]=crc>>16&0xff;data[p+2]=crc>>8&0xff;data[p+3]=crc&0xff;}function adler32(data,start,end){let a=1;let b=0;for(let i=start;i<end;++i){a=(a+(data[i]&0xff))%65521;b=(b+a)%65521;}return b<<16|a;}function deflateSync(literals){if(!_is_node.isNodeJS){return deflateSyncUncompressed(literals);}try{let input;if(parseInt(process.versions.node)>=8){input=literals;}else{input=Buffer.from(literals);}const output=require(\"zlib\").deflateSync(input,{level:9});return output instanceof Uint8Array?output:new Uint8Array(output);}catch(e){(0,_util.warn)(\"Not compressing PNG because zlib.deflateSync is unavailable: \"+e);}return deflateSyncUncompressed(literals);}function deflateSyncUncompressed(literals){let len=literals.length;const maxBlockLength=0xffff;const deflateBlocks=Math.ceil(len/maxBlockLength);const idat=new Uint8Array(2+len+deflateBlocks*5+4);let pi=0;idat[pi++]=0x78;idat[pi++]=0x9c;let pos=0;while(len>maxBlockLength){idat[pi++]=0x00;idat[pi++]=0xff;idat[pi++]=0xff;idat[pi++]=0x00;idat[pi++]=0x00;idat.set(literals.subarray(pos,pos+maxBlockLength),pi);pi+=maxBlockLength;pos+=maxBlockLength;len-=maxBlockLength;}idat[pi++]=0x01;idat[pi++]=len&0xff;idat[pi++]=len>>8&0xff;idat[pi++]=~len&0xffff&0xff;idat[pi++]=(~len&0xffff)>>8&0xff;idat.set(literals.subarray(pos),pi);pi+=literals.length-pos;const adler=adler32(literals,0,literals.length);idat[pi++]=adler>>24&0xff;idat[pi++]=adler>>16&0xff;idat[pi++]=adler>>8&0xff;idat[pi++]=adler&0xff;return idat;}function encode(imgData,kind,forceDataSchema,isMask){const width=imgData.width;const height=imgData.height;let bitDepth,colorType,lineSize;const bytes=imgData.data;switch(kind){case _util.ImageKind.GRAYSCALE_1BPP:colorType=0;bitDepth=1;lineSize=width+7>>3;break;case _util.ImageKind.RGB_24BPP:colorType=2;bitDepth=8;lineSize=width*3;break;case _util.ImageKind.RGBA_32BPP:colorType=6;bitDepth=8;lineSize=width*4;break;default:throw new Error(\"invalid format\");}const literals=new Uint8Array((1+lineSize)*height);let offsetLiterals=0,offsetBytes=0;for(let y=0;y<height;++y){literals[offsetLiterals++]=0;literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals);offsetBytes+=lineSize;offsetLiterals+=lineSize;}if(kind===_util.ImageKind.GRAYSCALE_1BPP&&isMask){offsetLiterals=0;for(let y=0;y<height;y++){offsetLiterals++;for(let i=0;i<lineSize;i++){literals[offsetLiterals++]^=0xff;}}}const ihdr=new Uint8Array([width>>24&0xff,width>>16&0xff,width>>8&0xff,width&0xff,height>>24&0xff,height>>16&0xff,height>>8&0xff,height&0xff,bitDepth,colorType,0x00,0x00,0x00]);const idat=deflateSync(literals);const pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length;const data=new Uint8Array(pngLength);let offset=0;data.set(PNG_HEADER,offset);offset+=PNG_HEADER.length;writePngChunk(\"IHDR\",ihdr,data,offset);offset+=CHUNK_WRAPPER_SIZE+ihdr.length;writePngChunk(\"IDATA\",idat,data,offset);offset+=CHUNK_WRAPPER_SIZE+idat.length;writePngChunk(\"IEND\",new Uint8Array(0),data,offset);return createObjectURL(data,\"image/png\",forceDataSchema);}return function convertImgDataToPng(imgData,forceDataSchema,isMask){const kind=imgData.kind===undefined?_util.ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind,forceDataSchema,isMask);};}();class SVGExtraState{constructor(){this.fontSizeScale=1;this.fontWeight=SVG_DEFAULTS.fontWeight;this.fontSize=0;this.textMatrix=_util.IDENTITY_MATRIX;this.fontMatrix=_util.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=_util.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=SVG_DEFAULTS.fillColor;this.strokeColor=\"#000000\";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin=\"\";this.lineCap=\"\";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=\"\";}clone(){return Object.create(this);}setCurrentPoint(x,y){this.x=x;this.y=y;}}function opListToTree(opList){let opTree=[];const tmp=[];for(const opListElement of opList){if(opListElement.fn===\"save\"){opTree.push({fnId:92,fn:\"group\",items:[]});tmp.push(opTree);opTree=opTree.at(-1).items;continue;}if(opListElement.fn===\"restore\"){opTree=tmp.pop();}else{opTree.push(opListElement);}}return opTree;}function pf(value){if(Number.isInteger(value)){return value.toString();}const s=value.toFixed(10);let i=s.length-1;if(s[i]!==\"0\"){return s;}do{i--;}while(s[i]===\"0\");return s.substring(0,s[i]===\".\"?i:i+1);}function pm(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0){if(m[0]===1&&m[3]===1){return\"\";}return`scale(${pf(m[0])} ${pf(m[3])})`;}if(m[0]===m[3]&&m[1]===-m[2]){const a=Math.acos(m[0])*180/Math.PI;return`rotate(${pf(a)})`;}}else{if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1){return`translate(${pf(m[4])} ${pf(m[5])})`;}}return`matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} `+`${pf(m[5])})`;}let clipCount=0;let maskCount=0;let shadingCount=0;exports.SVGGraphics=SVGGraphics=class{constructor(commonObjs,objs,forceDataSchema=false){(0,_display_utils.deprecated)(\"The SVG back-end is no longer maintained and *may* be removed in the future.\");this.svgFactory=new _display_utils.DOMSVGFactory();this.current=new SVGExtraState();this.transformMatrix=_util.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=commonObjs;this.objs=objs;this.pendingClip=null;this.pendingEOFill=false;this.embedFonts=false;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!forceDataSchema;this._operatorIdMapping=[];for(const op in _util.OPS){this._operatorIdMapping[_util.OPS[op]]=op;}}getObject(data,fallback=null){if(typeof data===\"string\"){return data.startsWith(\"g_\")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}save(){this.transformStack.push(this.transformMatrix);const old=this.current;this.extraStack.push(old);this.current=old.clone();}restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null;}group(items){this.save();this.executeOpTree(items);this.restore();}loadDependencies(operatorList){const fnArray=operatorList.fnArray;const argsArray=operatorList.argsArray;for(let i=0,ii=fnArray.length;i<ii;i++){if(fnArray[i]!==_util.OPS.dependency){continue;}for(const obj of argsArray[i]){const objsPool=obj.startsWith(\"g_\")?this.commonObjs:this.objs;const promise=new Promise(resolve=>{objsPool.get(obj,resolve);});this.current.dependencies.push(promise);}}return Promise.all(this.current.dependencies);}transform(a,b,c,d,e,f){const transformMatrix=[a,b,c,d,e,f];this.transformMatrix=_util.Util.transform(this.transformMatrix,transformMatrix);this.tgrp=null;}getSVG(operatorList,viewport){this.viewport=viewport;const svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(()=>{this.transformMatrix=_util.IDENTITY_MATRIX;this.executeOpTree(this.convertOpList(operatorList));return svgElement;});}convertOpList(operatorList){const operatorIdMapping=this._operatorIdMapping;const argsArray=operatorList.argsArray;const fnArray=operatorList.fnArray;const opList=[];for(let i=0,ii=fnArray.length;i<ii;i++){const fnId=fnArray[i];opList.push({fnId,fn:operatorIdMapping[fnId],args:argsArray[i]});}return opListToTree(opList);}executeOpTree(opTree){for(const opTreeElement of opTree){const fn=opTreeElement.fn;const fnId=opTreeElement.fnId;const args=opTreeElement.args;switch(fnId|0){case _util.OPS.beginText:this.beginText();break;case _util.OPS.dependency:break;case _util.OPS.setLeading:this.setLeading(args);break;case _util.OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case _util.OPS.setFont:this.setFont(args);break;case _util.OPS.showText:this.showText(args[0]);break;case _util.OPS.showSpacedText:this.showText(args[0]);break;case _util.OPS.endText:this.endText();break;case _util.OPS.moveText:this.moveText(args[0],args[1]);break;case _util.OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case _util.OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case _util.OPS.setHScale:this.setHScale(args[0]);break;case _util.OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.setTextRise:this.setTextRise(args[0]);break;case _util.OPS.setTextRenderingMode:this.setTextRenderingMode(args[0]);break;case _util.OPS.setLineWidth:this.setLineWidth(args[0]);break;case _util.OPS.setLineJoin:this.setLineJoin(args[0]);break;case _util.OPS.setLineCap:this.setLineCap(args[0]);break;case _util.OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case _util.OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case _util.OPS.setStrokeColorN:this.setStrokeColorN(args);break;case _util.OPS.setFillColorN:this.setFillColorN(args);break;case _util.OPS.shadingFill:this.shadingFill(args[0]);break;case _util.OPS.setDash:this.setDash(args[0],args[1]);break;case _util.OPS.setRenderingIntent:this.setRenderingIntent(args[0]);break;case _util.OPS.setFlatness:this.setFlatness(args[0]);break;case _util.OPS.setGState:this.setGState(args[0]);break;case _util.OPS.fill:this.fill();break;case _util.OPS.eoFill:this.eoFill();break;case _util.OPS.stroke:this.stroke();break;case _util.OPS.fillStroke:this.fillStroke();break;case _util.OPS.eoFillStroke:this.eoFillStroke();break;case _util.OPS.clip:this.clip(\"nonzero\");break;case _util.OPS.eoClip:this.clip(\"evenodd\");break;case _util.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _util.OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case _util.OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case _util.OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case _util.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case _util.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _util.OPS.closePath:this.closePath();break;case _util.OPS.closeStroke:this.closeStroke();break;case _util.OPS.closeFillStroke:this.closeFillStroke();break;case _util.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _util.OPS.nextLine:this.nextLine();break;case _util.OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case _util.OPS.constructPath:this.constructPath(args[0],args[1]);break;case _util.OPS.endPath:this.endPath();break;case 92:this.group(opTreeElement.items);break;default:(0,_util.warn)(`Unimplemented operator ${fn}`);break;}}}setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing;}setCharSpacing(charSpacing){this.current.charSpacing=charSpacing;}nextLine(){this.moveText(0,this.current.leading);}setTextMatrix(a,b,c,d,e,f){const current=this.current;current.textMatrix=current.lineMatrix=[a,b,c,d,e,f];current.textMatrixScale=Math.hypot(a,b);current.x=current.lineX=0;current.y=current.lineY=0;current.xcoords=[];current.ycoords=[];current.tspan=this.svgFactory.createElement(\"svg:tspan\");current.tspan.setAttributeNS(null,\"font-family\",current.fontFamily);current.tspan.setAttributeNS(null,\"font-size\",`${pf(current.fontSize)}px`);current.tspan.setAttributeNS(null,\"y\",pf(-current.y));current.txtElement=this.svgFactory.createElement(\"svg:text\");current.txtElement.append(current.tspan);}beginText(){const current=this.current;current.x=current.lineX=0;current.y=current.lineY=0;current.textMatrix=_util.IDENTITY_MATRIX;current.lineMatrix=_util.IDENTITY_MATRIX;current.textMatrixScale=1;current.tspan=this.svgFactory.createElement(\"svg:tspan\");current.txtElement=this.svgFactory.createElement(\"svg:text\");current.txtgrp=this.svgFactory.createElement(\"svg:g\");current.xcoords=[];current.ycoords=[];}moveText(x,y){const current=this.current;current.x=current.lineX+=x;current.y=current.lineY+=y;current.xcoords=[];current.ycoords=[];current.tspan=this.svgFactory.createElement(\"svg:tspan\");current.tspan.setAttributeNS(null,\"font-family\",current.fontFamily);current.tspan.setAttributeNS(null,\"font-size\",`${pf(current.fontSize)}px`);current.tspan.setAttributeNS(null,\"y\",pf(-current.y));}showText(glyphs){const current=this.current;const font=current.font;const fontSize=current.fontSize;if(fontSize===0){return;}const fontSizeScale=current.fontSizeScale;const charSpacing=current.charSpacing;const wordSpacing=current.wordSpacing;const fontDirection=current.fontDirection;const textHScale=current.textHScale*fontDirection;const vertical=font.vertical;const spacingDir=vertical?1:-1;const defaultVMetrics=font.defaultVMetrics;const widthAdvanceScale=fontSize*current.fontMatrix[0];let x=0;for(const glyph of glyphs){if(glyph===null){x+=fontDirection*wordSpacing;continue;}else if(typeof glyph===\"number\"){x+=spacingDir*glyph*fontSize/1000;continue;}const spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;const character=glyph.fontChar;let scaledX,scaledY;let width=glyph.width;if(vertical){let vx;const vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*0.5;vx=-vx*widthAdvanceScale;const vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(glyph.isInFont||font.missingFile){current.xcoords.push(current.x+scaledX);if(vertical){current.ycoords.push(-current.y+scaledY);}current.tspan.textContent+=character;}else{}let charWidth;if(vertical){charWidth=width*widthAdvanceScale-spacing*fontDirection;}else{charWidth=width*widthAdvanceScale+spacing*fontDirection;}x+=charWidth;}current.tspan.setAttributeNS(null,\"x\",current.xcoords.map(pf).join(\" \"));if(vertical){current.tspan.setAttributeNS(null,\"y\",current.ycoords.map(pf).join(\" \"));}else{current.tspan.setAttributeNS(null,\"y\",pf(-current.y));}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}current.tspan.setAttributeNS(null,\"font-family\",current.fontFamily);current.tspan.setAttributeNS(null,\"font-size\",`${pf(current.fontSize)}px`);if(current.fontStyle!==SVG_DEFAULTS.fontStyle){current.tspan.setAttributeNS(null,\"font-style\",current.fontStyle);}if(current.fontWeight!==SVG_DEFAULTS.fontWeight){current.tspan.setAttributeNS(null,\"font-weight\",current.fontWeight);}const fillStrokeMode=current.textRenderingMode&_util.TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===_util.TextRenderingMode.FILL||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){if(current.fillColor!==SVG_DEFAULTS.fillColor){current.tspan.setAttributeNS(null,\"fill\",current.fillColor);}if(current.fillAlpha<1){current.tspan.setAttributeNS(null,\"fill-opacity\",current.fillAlpha);}}else if(current.textRenderingMode===_util.TextRenderingMode.ADD_TO_PATH){current.tspan.setAttributeNS(null,\"fill\",\"transparent\");}else{current.tspan.setAttributeNS(null,\"fill\",\"none\");}if(fillStrokeMode===_util.TextRenderingMode.STROKE||fillStrokeMode===_util.TextRenderingMode.FILL_STROKE){const lineWidthScale=1/(current.textMatrixScale||1);this._setStrokeAttributes(current.tspan,lineWidthScale);}let textMatrix=current.textMatrix;if(current.textRise!==0){textMatrix=textMatrix.slice();textMatrix[5]+=current.textRise;}current.txtElement.setAttributeNS(null,\"transform\",`${pm(textMatrix)} scale(${pf(textHScale)}, -1)`);current.txtElement.setAttributeNS(XML_NS,\"xml:space\",\"preserve\");current.txtElement.append(current.tspan);current.txtgrp.append(current.txtElement);this._ensureTransformGroup().append(current.txtElement);}setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}addFontStyle(fontObj){if(!fontObj.data){throw new Error(\"addFontStyle: No font data available, \"+'ensure that the \"fontExtraProperties\" API parameter is set.');}if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement(\"svg:style\");this.cssStyle.setAttributeNS(null,\"type\",\"text/css\");this.defs.append(this.cssStyle);}const url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: \"${fontObj.loadedName}\";`+` src: url(${url}); }\\n`;}setFont(details){const current=this.current;const fontObj=this.commonObjs.get(details[0]);let size=details[1];current.font=fontObj;if(this.embedFonts&&!fontObj.missingFile&&!this.embeddedFonts[fontObj.loadedName]){this.addFontStyle(fontObj);this.embeddedFonts[fontObj.loadedName]=fontObj;}current.fontMatrix=fontObj.fontMatrix||_util.FONT_IDENTITY_MATRIX;let bold=\"normal\";if(fontObj.black){bold=\"900\";}else if(fontObj.bold){bold=\"bold\";}const italic=fontObj.italic?\"italic\":\"normal\";if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}current.fontSize=size;current.fontFamily=fontObj.loadedName;current.fontWeight=bold;current.fontStyle=italic;current.tspan=this.svgFactory.createElement(\"svg:tspan\");current.tspan.setAttributeNS(null,\"y\",pf(-current.y));current.xcoords=[];current.ycoords=[];}endText(){const current=this.current;if(current.textRenderingMode&_util.TextRenderingMode.ADD_TO_PATH_FLAG&&current.txtElement?.hasChildNodes()){current.element=current.txtElement;this.clip(\"nonzero\");this.endPath();}}setLineWidth(width){if(width>0){this.current.lineWidth=width;}}setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style];}setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style];}setMiterLimit(limit){this.current.miterLimit=limit;}setStrokeAlpha(strokeAlpha){this.current.strokeAlpha=strokeAlpha;}setStrokeRGBColor(r,g,b){this.current.strokeColor=_util.Util.makeHexColor(r,g,b);}setFillAlpha(fillAlpha){this.current.fillAlpha=fillAlpha;}setFillRGBColor(r,g,b){this.current.fillColor=_util.Util.makeHexColor(r,g,b);this.current.tspan=this.svgFactory.createElement(\"svg:tspan\");this.current.xcoords=[];this.current.ycoords=[];}setStrokeColorN(args){this.current.strokeColor=this._makeColorN_Pattern(args);}setFillColorN(args){this.current.fillColor=this._makeColorN_Pattern(args);}shadingFill(args){const width=this.viewport.width;const height=this.viewport.height;const inv=_util.Util.inverseTransform(this.transformMatrix);const bl=_util.Util.applyTransform([0,0],inv);const br=_util.Util.applyTransform([0,height],inv);const ul=_util.Util.applyTransform([width,0],inv);const ur=_util.Util.applyTransform([width,height],inv);const x0=Math.min(bl[0],br[0],ul[0],ur[0]);const y0=Math.min(bl[1],br[1],ul[1],ur[1]);const x1=Math.max(bl[0],br[0],ul[0],ur[0]);const y1=Math.max(bl[1],br[1],ul[1],ur[1]);const rect=this.svgFactory.createElement(\"svg:rect\");rect.setAttributeNS(null,\"x\",x0);rect.setAttributeNS(null,\"y\",y0);rect.setAttributeNS(null,\"width\",x1-x0);rect.setAttributeNS(null,\"height\",y1-y0);rect.setAttributeNS(null,\"fill\",this._makeShadingPattern(args));if(this.current.fillAlpha<1){rect.setAttributeNS(null,\"fill-opacity\",this.current.fillAlpha);}this._ensureTransformGroup().append(rect);}_makeColorN_Pattern(args){if(args[0]===\"TilingPattern\"){return this._makeTilingPattern(args);}return this._makeShadingPattern(args);}_makeTilingPattern(args){const color=args[1];const operatorList=args[2];const matrix=args[3]||_util.IDENTITY_MATRIX;const[x0,y0,x1,y1]=args[4];const xstep=args[5];const ystep=args[6];const paintType=args[7];const tilingId=`shading${shadingCount++}`;const[tx0,ty0,tx1,ty1]=_util.Util.normalizeRect([..._util.Util.applyTransform([x0,y0],matrix),..._util.Util.applyTransform([x1,y1],matrix)]);const[xscale,yscale]=_util.Util.singularValueDecompose2dScale(matrix);const txstep=xstep*xscale;const tystep=ystep*yscale;const tiling=this.svgFactory.createElement(\"svg:pattern\");tiling.setAttributeNS(null,\"id\",tilingId);tiling.setAttributeNS(null,\"patternUnits\",\"userSpaceOnUse\");tiling.setAttributeNS(null,\"width\",txstep);tiling.setAttributeNS(null,\"height\",tystep);tiling.setAttributeNS(null,\"x\",`${tx0}`);tiling.setAttributeNS(null,\"y\",`${ty0}`);const svg=this.svg;const transformMatrix=this.transformMatrix;const fillColor=this.current.fillColor;const strokeColor=this.current.strokeColor;const bbox=this.svgFactory.create(tx1-tx0,ty1-ty0);this.svg=bbox;this.transformMatrix=matrix;if(paintType===2){const cssColor=_util.Util.makeHexColor(...color);this.current.fillColor=cssColor;this.current.strokeColor=cssColor;}this.executeOpTree(this.convertOpList(operatorList));this.svg=svg;this.transformMatrix=transformMatrix;this.current.fillColor=fillColor;this.current.strokeColor=strokeColor;tiling.append(bbox.childNodes[0]);this.defs.append(tiling);return`url(#${tilingId})`;}_makeShadingPattern(args){if(typeof args===\"string\"){args=this.objs.get(args);}switch(args[0]){case\"RadialAxial\":const shadingId=`shading${shadingCount++}`;const colorStops=args[3];let gradient;switch(args[1]){case\"axial\":const point0=args[4];const point1=args[5];gradient=this.svgFactory.createElement(\"svg:linearGradient\");gradient.setAttributeNS(null,\"id\",shadingId);gradient.setAttributeNS(null,\"gradientUnits\",\"userSpaceOnUse\");gradient.setAttributeNS(null,\"x1\",point0[0]);gradient.setAttributeNS(null,\"y1\",point0[1]);gradient.setAttributeNS(null,\"x2\",point1[0]);gradient.setAttributeNS(null,\"y2\",point1[1]);break;case\"radial\":const focalPoint=args[4];const circlePoint=args[5];const focalRadius=args[6];const circleRadius=args[7];gradient=this.svgFactory.createElement(\"svg:radialGradient\");gradient.setAttributeNS(null,\"id\",shadingId);gradient.setAttributeNS(null,\"gradientUnits\",\"userSpaceOnUse\");gradient.setAttributeNS(null,\"cx\",circlePoint[0]);gradient.setAttributeNS(null,\"cy\",circlePoint[1]);gradient.setAttributeNS(null,\"r\",circleRadius);gradient.setAttributeNS(null,\"fx\",focalPoint[0]);gradient.setAttributeNS(null,\"fy\",focalPoint[1]);gradient.setAttributeNS(null,\"fr\",focalRadius);break;default:throw new Error(`Unknown RadialAxial type: ${args[1]}`);}for(const colorStop of colorStops){const stop=this.svgFactory.createElement(\"svg:stop\");stop.setAttributeNS(null,\"offset\",colorStop[0]);stop.setAttributeNS(null,\"stop-color\",colorStop[1]);gradient.append(stop);}this.defs.append(gradient);return`url(#${shadingId})`;case\"Mesh\":(0,_util.warn)(\"Unimplemented pattern Mesh\");return null;case\"Dummy\":return\"hotpink\";default:throw new Error(`Unknown IR type: ${args[0]}`);}}setDash(dashArray,dashPhase){this.current.dashArray=dashArray;this.current.dashPhase=dashPhase;}constructPath(ops,args){const current=this.current;let x=current.x,y=current.y;let d=[];let j=0;for(const op of ops){switch(op|0){case _util.OPS.rectangle:x=args[j++];y=args[j++];const width=args[j++];const height=args[j++];const xw=x+width;const yh=y+height;d.push(\"M\",pf(x),pf(y),\"L\",pf(xw),pf(y),\"L\",pf(xw),pf(yh),\"L\",pf(x),pf(yh),\"Z\");break;case _util.OPS.moveTo:x=args[j++];y=args[j++];d.push(\"M\",pf(x),pf(y));break;case _util.OPS.lineTo:x=args[j++];y=args[j++];d.push(\"L\",pf(x),pf(y));break;case _util.OPS.curveTo:x=args[j+4];y=args[j+5];d.push(\"C\",pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y));j+=6;break;case _util.OPS.curveTo2:d.push(\"C\",pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]));x=args[j+2];y=args[j+3];j+=4;break;case _util.OPS.curveTo3:x=args[j+2];y=args[j+3];d.push(\"C\",pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y));j+=4;break;case _util.OPS.closePath:d.push(\"Z\");break;}}d=d.join(\" \");if(current.path&&ops.length>0&&ops[0]!==_util.OPS.rectangle&&ops[0]!==_util.OPS.moveTo){d=current.path.getAttributeNS(null,\"d\")+d;}else{current.path=this.svgFactory.createElement(\"svg:path\");this._ensureTransformGroup().append(current.path);}current.path.setAttributeNS(null,\"d\",d);current.path.setAttributeNS(null,\"fill\",\"none\");current.element=current.path;current.setCurrentPoint(x,y);}endPath(){const current=this.current;current.path=null;if(!this.pendingClip){return;}if(!current.element){this.pendingClip=null;return;}const clipId=`clippath${clipCount++}`;const clipPath=this.svgFactory.createElement(\"svg:clipPath\");clipPath.setAttributeNS(null,\"id\",clipId);clipPath.setAttributeNS(null,\"transform\",pm(this.transformMatrix));const clipElement=current.element.cloneNode(true);if(this.pendingClip===\"evenodd\"){clipElement.setAttributeNS(null,\"clip-rule\",\"evenodd\");}else{clipElement.setAttributeNS(null,\"clip-rule\",\"nonzero\");}this.pendingClip=null;clipPath.append(clipElement);this.defs.append(clipPath);if(current.activeClipUrl){current.clipGroup=null;for(const prev of this.extraStack){prev.clipGroup=null;}clipPath.setAttributeNS(null,\"clip-path\",current.activeClipUrl);}current.activeClipUrl=`url(#${clipId})`;this.tgrp=null;}clip(type){this.pendingClip=type;}closePath(){const current=this.current;if(current.path){const d=`${current.path.getAttributeNS(null,\"d\")}Z`;current.path.setAttributeNS(null,\"d\",d);}}setLeading(leading){this.current.leading=-leading;}setTextRise(textRise){this.current.textRise=textRise;}setTextRenderingMode(textRenderingMode){this.current.textRenderingMode=textRenderingMode;}setHScale(scale){this.current.textHScale=scale/100;}setRenderingIntent(intent){}setFlatness(flatness){}setGState(states){for(const[key,value]of states){switch(key){case\"LW\":this.setLineWidth(value);break;case\"LC\":this.setLineCap(value);break;case\"LJ\":this.setLineJoin(value);break;case\"ML\":this.setMiterLimit(value);break;case\"D\":this.setDash(value[0],value[1]);break;case\"RI\":this.setRenderingIntent(value);break;case\"FL\":this.setFlatness(value);break;case\"Font\":this.setFont(value);break;case\"CA\":this.setStrokeAlpha(value);break;case\"ca\":this.setFillAlpha(value);break;default:(0,_util.warn)(`Unimplemented graphic state operator ${key}`);break;}}}fill(){const current=this.current;if(current.element){current.element.setAttributeNS(null,\"fill\",current.fillColor);current.element.setAttributeNS(null,\"fill-opacity\",current.fillAlpha);this.endPath();}}stroke(){const current=this.current;if(current.element){this._setStrokeAttributes(current.element);current.element.setAttributeNS(null,\"fill\",\"none\");this.endPath();}}_setStrokeAttributes(element,lineWidthScale=1){const current=this.current;let dashArray=current.dashArray;if(lineWidthScale!==1&&dashArray.length>0){dashArray=dashArray.map(function(value){return lineWidthScale*value;});}element.setAttributeNS(null,\"stroke\",current.strokeColor);element.setAttributeNS(null,\"stroke-opacity\",current.strokeAlpha);element.setAttributeNS(null,\"stroke-miterlimit\",pf(current.miterLimit));element.setAttributeNS(null,\"stroke-linecap\",current.lineCap);element.setAttributeNS(null,\"stroke-linejoin\",current.lineJoin);element.setAttributeNS(null,\"stroke-width\",pf(lineWidthScale*current.lineWidth)+\"px\");element.setAttributeNS(null,\"stroke-dasharray\",dashArray.map(pf).join(\" \"));element.setAttributeNS(null,\"stroke-dashoffset\",pf(lineWidthScale*current.dashPhase)+\"px\");}eoFill(){this.current.element?.setAttributeNS(null,\"fill-rule\",\"evenodd\");this.fill();}fillStroke(){this.stroke();this.fill();}eoFillStroke(){this.current.element?.setAttributeNS(null,\"fill-rule\",\"evenodd\");this.fillStroke();}closeStroke(){this.closePath();this.stroke();}closeFillStroke(){this.closePath();this.fillStroke();}closeEOFillStroke(){this.closePath();this.eoFillStroke();}paintSolidColorImageMask(){const rect=this.svgFactory.createElement(\"svg:rect\");rect.setAttributeNS(null,\"x\",\"0\");rect.setAttributeNS(null,\"y\",\"0\");rect.setAttributeNS(null,\"width\",\"1px\");rect.setAttributeNS(null,\"height\",\"1px\");rect.setAttributeNS(null,\"fill\",this.current.fillColor);this._ensureTransformGroup().append(rect);}paintImageXObject(objId){const imgData=this.getObject(objId);if(!imgData){(0,_util.warn)(`Dependent image with object ID ${objId} is not ready yet`);return;}this.paintInlineImageXObject(imgData);}paintInlineImageXObject(imgData,mask){const width=imgData.width;const height=imgData.height;const imgSrc=convertImgDataToPng(imgData,this.forceDataSchema,!!mask);const cliprect=this.svgFactory.createElement(\"svg:rect\");cliprect.setAttributeNS(null,\"x\",\"0\");cliprect.setAttributeNS(null,\"y\",\"0\");cliprect.setAttributeNS(null,\"width\",pf(width));cliprect.setAttributeNS(null,\"height\",pf(height));this.current.element=cliprect;this.clip(\"nonzero\");const imgEl=this.svgFactory.createElement(\"svg:image\");imgEl.setAttributeNS(XLINK_NS,\"xlink:href\",imgSrc);imgEl.setAttributeNS(null,\"x\",\"0\");imgEl.setAttributeNS(null,\"y\",pf(-height));imgEl.setAttributeNS(null,\"width\",pf(width)+\"px\");imgEl.setAttributeNS(null,\"height\",pf(height)+\"px\");imgEl.setAttributeNS(null,\"transform\",`scale(${pf(1/width)} ${pf(-1/height)})`);if(mask){mask.append(imgEl);}else{this._ensureTransformGroup().append(imgEl);}}paintImageMaskXObject(img){const imgData=this.getObject(img.data,img);if(imgData.bitmap){(0,_util.warn)(\"paintImageMaskXObject: ImageBitmap support is not implemented, \"+\"ensure that the `isOffscreenCanvasSupported` API parameter is disabled.\");return;}const current=this.current;const width=imgData.width;const height=imgData.height;const fillColor=current.fillColor;current.maskId=`mask${maskCount++}`;const mask=this.svgFactory.createElement(\"svg:mask\");mask.setAttributeNS(null,\"id\",current.maskId);const rect=this.svgFactory.createElement(\"svg:rect\");rect.setAttributeNS(null,\"x\",\"0\");rect.setAttributeNS(null,\"y\",\"0\");rect.setAttributeNS(null,\"width\",pf(width));rect.setAttributeNS(null,\"height\",pf(height));rect.setAttributeNS(null,\"fill\",fillColor);rect.setAttributeNS(null,\"mask\",`url(#${current.maskId})`);this.defs.append(mask);this._ensureTransformGroup().append(rect);this.paintInlineImageXObject(imgData,mask);}paintFormXObjectBegin(matrix,bbox){if(Array.isArray(matrix)&&matrix.length===6){this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]);}if(bbox){const width=bbox[2]-bbox[0];const height=bbox[3]-bbox[1];const cliprect=this.svgFactory.createElement(\"svg:rect\");cliprect.setAttributeNS(null,\"x\",bbox[0]);cliprect.setAttributeNS(null,\"y\",bbox[1]);cliprect.setAttributeNS(null,\"width\",pf(width));cliprect.setAttributeNS(null,\"height\",pf(height));this.current.element=cliprect;this.clip(\"nonzero\");this.endPath();}}paintFormXObjectEnd(){}_initialize(viewport){const svg=this.svgFactory.create(viewport.width,viewport.height);const definitions=this.svgFactory.createElement(\"svg:defs\");svg.append(definitions);this.defs=definitions;const rootGroup=this.svgFactory.createElement(\"svg:g\");rootGroup.setAttributeNS(null,\"transform\",pm(viewport.transform));svg.append(rootGroup);this.svg=rootGroup;return svg;}_ensureClipGroup(){if(!this.current.clipGroup){const clipGroup=this.svgFactory.createElement(\"svg:g\");clipGroup.setAttributeNS(null,\"clip-path\",this.current.activeClipUrl);this.svg.append(clipGroup);this.current.clipGroup=clipGroup;}return this.current.clipGroup;}_ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement(\"svg:g\");this.tgrp.setAttributeNS(null,\"transform\",pm(this.transformMatrix));if(this.current.activeClipUrl){this._ensureClipGroup().append(this.tgrp);}else{this.svg.append(this.tgrp);}}return this.tgrp;}};}/***/}/******/];/************************************************************************/ /******/ // The module cache\n/******/var __webpack_module_cache__={};/******/ /******/ // The require function\n/******/function __w_pdfjs_require__(moduleId){/******/ // Check if module is in cache\n/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/ // Create a new module (and put it into the cache)\n/******/var module=__webpack_module_cache__[moduleId]={/******/ // no module.id needed\n/******/ // no module.loaded needed\n/******/exports:{}/******/};/******/ /******/ // Execute the module function\n/******/__webpack_modules__[moduleId](module,module.exports,__w_pdfjs_require__);/******/ /******/ // Return the exports of the module\n/******/return module.exports;/******/}/******/ /************************************************************************/var __webpack_exports__={};// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,\"__esModule\",{value:true});Object.defineProperty(exports,\"AbortException\",{enumerable:true,get:function(){return _util.AbortException;}});Object.defineProperty(exports,\"AnnotationEditorLayer\",{enumerable:true,get:function(){return _annotation_editor_layer.AnnotationEditorLayer;}});Object.defineProperty(exports,\"AnnotationEditorParamsType\",{enumerable:true,get:function(){return _util.AnnotationEditorParamsType;}});Object.defineProperty(exports,\"AnnotationEditorType\",{enumerable:true,get:function(){return _util.AnnotationEditorType;}});Object.defineProperty(exports,\"AnnotationEditorUIManager\",{enumerable:true,get:function(){return _tools.AnnotationEditorUIManager;}});Object.defineProperty(exports,\"AnnotationLayer\",{enumerable:true,get:function(){return _annotation_layer.AnnotationLayer;}});Object.defineProperty(exports,\"AnnotationMode\",{enumerable:true,get:function(){return _util.AnnotationMode;}});Object.defineProperty(exports,\"CMapCompressionType\",{enumerable:true,get:function(){return _util.CMapCompressionType;}});Object.defineProperty(exports,\"FeatureTest\",{enumerable:true,get:function(){return _util.FeatureTest;}});Object.defineProperty(exports,\"GlobalWorkerOptions\",{enumerable:true,get:function(){return _worker_options.GlobalWorkerOptions;}});Object.defineProperty(exports,\"InvalidPDFException\",{enumerable:true,get:function(){return _util.InvalidPDFException;}});Object.defineProperty(exports,\"MissingPDFException\",{enumerable:true,get:function(){return _util.MissingPDFException;}});Object.defineProperty(exports,\"OPS\",{enumerable:true,get:function(){return _util.OPS;}});Object.defineProperty(exports,\"PDFDataRangeTransport\",{enumerable:true,get:function(){return _api.PDFDataRangeTransport;}});Object.defineProperty(exports,\"PDFDateString\",{enumerable:true,get:function(){return _display_utils.PDFDateString;}});Object.defineProperty(exports,\"PDFWorker\",{enumerable:true,get:function(){return _api.PDFWorker;}});Object.defineProperty(exports,\"PasswordResponses\",{enumerable:true,get:function(){return _util.PasswordResponses;}});Object.defineProperty(exports,\"PermissionFlag\",{enumerable:true,get:function(){return _util.PermissionFlag;}});Object.defineProperty(exports,\"PixelsPerInch\",{enumerable:true,get:function(){return _display_utils.PixelsPerInch;}});Object.defineProperty(exports,\"PromiseCapability\",{enumerable:true,get:function(){return _util.PromiseCapability;}});Object.defineProperty(exports,\"RenderingCancelledException\",{enumerable:true,get:function(){return _display_utils.RenderingCancelledException;}});Object.defineProperty(exports,\"SVGGraphics\",{enumerable:true,get:function(){return _svg.SVGGraphics;}});Object.defineProperty(exports,\"UnexpectedResponseException\",{enumerable:true,get:function(){return _util.UnexpectedResponseException;}});Object.defineProperty(exports,\"Util\",{enumerable:true,get:function(){return _util.Util;}});Object.defineProperty(exports,\"VerbosityLevel\",{enumerable:true,get:function(){return _util.VerbosityLevel;}});Object.defineProperty(exports,\"XfaLayer\",{enumerable:true,get:function(){return _xfa_layer.XfaLayer;}});Object.defineProperty(exports,\"build\",{enumerable:true,get:function(){return _api.build;}});Object.defineProperty(exports,\"createValidAbsoluteUrl\",{enumerable:true,get:function(){return _util.createValidAbsoluteUrl;}});Object.defineProperty(exports,\"getDocument\",{enumerable:true,get:function(){return _api.getDocument;}});Object.defineProperty(exports,\"getFilenameFromUrl\",{enumerable:true,get:function(){return _display_utils.getFilenameFromUrl;}});Object.defineProperty(exports,\"getPdfFilenameFromUrl\",{enumerable:true,get:function(){return _display_utils.getPdfFilenameFromUrl;}});Object.defineProperty(exports,\"getXfaPageViewport\",{enumerable:true,get:function(){return _display_utils.getXfaPageViewport;}});Object.defineProperty(exports,\"isDataScheme\",{enumerable:true,get:function(){return _display_utils.isDataScheme;}});Object.defineProperty(exports,\"isPdfFile\",{enumerable:true,get:function(){return _display_utils.isPdfFile;}});Object.defineProperty(exports,\"loadScript\",{enumerable:true,get:function(){return _display_utils.loadScript;}});Object.defineProperty(exports,\"normalizeUnicode\",{enumerable:true,get:function(){return _util.normalizeUnicode;}});Object.defineProperty(exports,\"renderTextLayer\",{enumerable:true,get:function(){return _text_layer.renderTextLayer;}});Object.defineProperty(exports,\"setLayerDimensions\",{enumerable:true,get:function(){return _display_utils.setLayerDimensions;}});Object.defineProperty(exports,\"shadow\",{enumerable:true,get:function(){return _util.shadow;}});Object.defineProperty(exports,\"updateTextLayer\",{enumerable:true,get:function(){return _text_layer.updateTextLayer;}});Object.defineProperty(exports,\"version\",{enumerable:true,get:function(){return _api.version;}});var _util=__w_pdfjs_require__(1);var _api=__w_pdfjs_require__(2);var _display_utils=__w_pdfjs_require__(6);var _text_layer=__w_pdfjs_require__(26);var _annotation_editor_layer=__w_pdfjs_require__(27);var _tools=__w_pdfjs_require__(5);var _annotation_layer=__w_pdfjs_require__(30);var _worker_options=__w_pdfjs_require__(14);var _svg=__w_pdfjs_require__(33);var _xfa_layer=__w_pdfjs_require__(32);const pdfjsVersion='3.7.107';const pdfjsBuild='036f855dc';})();/******/return __webpack_exports__;/******/})());});","map":{"version":3,"mappings":"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","names":["module","define","exports","root","globalThis","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","MAX_IMAGE_SIZE_TO_CACHE","LINE_FACTOR","LINE_DESCENT_FACTOR","BASELINE_FACTOR","RenderingIntentFlag","ANY","DISPLAY","PRINT","SAVE","ANNOTATIONS_FORMS","ANNOTATIONS_STORAGE","ANNOTATIONS_DISABLE","OPLIST","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorPrefix","AnnotationEditorType","NONE","FREETEXT","INK","AnnotationEditorParamsType","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","PermissionFlag","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","FILL","STROKE","FILL_STROKE","INVISIBLE","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","FILL_STROKE_MASK","ADD_TO_PATH_FLAG","ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","HIGHLIGHT","UNDERLINE","SQUIGGLY","STRIKEOUT","STAMP","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationStateModelType","MARKED","REVIEW","AnnotationMarkedState","UNMARKED","AnnotationReviewState","ACCEPTED","REJECTED","CANCELLED","COMPLETED","AnnotationReplyType","GROUP","REPLY","AnnotationFlag","HIDDEN","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","INSET","AnnotationActionEventType","E","X","D","U","Fo","Bl","PO","PC","PV","PI","K","F","V","C","DocumentActionEventType","WC","WS","DS","WP","DP","PageActionEventType","O","VerbosityLevel","ERRORS","WARNINGS","INFOS","CMapCompressionType","BINARY","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","info","msg","console","log","warn","unreachable","Error","assert","cond","_isValidProtocol","url","protocol","createValidAbsoluteUrl","baseUrl","options","addDefaultProtocol","startsWith","dots","match","length","tryConvertEncoding","stringToUTF8String","ex","absoluteUrl","URL","shadow","obj","prop","value","nonSerializable","Object","defineProperty","enumerable","configurable","writable","BaseException","BaseExceptionClosure","message","name","constructor","prototype","PasswordException","code","UnknownErrorException","details","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","FormatError","AbortException","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","i","chunkEnd","Math","min","chunk","subarray","push","join","stringToBytes","str","Uint8Array","charCodeAt","string32","objectSize","keys","objectFromMap","map","create","key","isLittleEndian","buffer8","view32","Uint32Array","buffer","isEvalSupported","Function","e","FeatureTest","isOffscreenCanvasSupported","OffscreenCanvas","platform","navigator","isWin","isMac","includes","hexNumbers","Array","n","toString","padStart","Util","makeHexColor","r","g","b","scaleMinMax","minMax","temp","m1","m2","applyTransform","p","m","xt","yt","applyInverseTransform","d","getAxialAlignedBoundingBox","p1","p2","slice","p3","p4","max","inverseTransform","singularValueDecompose2dScale","transpose","a","c","first","second","sqrt","sx","sy","normalizeRect","rect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","bezierBoundingBox","x0","y0","x1","y1","x2","y2","x3","y3","tvalues","bounds","t","t1","t2","b2ac","sqrtb2ac","abs","j","mt","jlen","PDFStringTranslateTable","stringToPDFString","encoding","decoder","TextDecoder","fatal","decode","ii","charAt","decodeURIComponent","escape","utf8StringToString","unescape","encodeURIComponent","isArrayBuffer","v","byteLength","isArrayEqual","arr1","arr2","getModificationDate","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","PromiseCapability","promise","Promise","resolve","reject","data","reason","settled","NormalizeRegex","NormalizationMap","normalizeUnicode","Map","replaceAll","_","normalize","get","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","DELAYED_CLEANUP_TIMEOUT","DefaultCanvasFactory","DOMCanvasFactory","DefaultCMapReaderFactory","DOMCMapReaderFactory","DefaultFilterFactory","DOMFilterFactory","DefaultStandardFontDataFactory","DOMStandardFontDataFactory","isNodeJS","NodeCanvasFactory","NodeCMapReaderFactory","NodeFilterFactory","NodeStandardFontDataFactory","require","createPDFNetworkStream","PDFNodeStream","params","PDFNetworkStream","PDFFetchStream","getDocument","src","range","task","PDFDocumentLoadingTask","docId","getUrlProp","getDataProp","httpHeaders","withCredentials","password","rangeTransport","PDFDataRangeTransport","rangeChunkSize","worker","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","disableFontFace","fontExtraProperties","enableXfa","ownerDocument","document","disableRange","disableStream","disableAutoFetch","pdfBug","NaN","useSystemFonts","useWorkerFetch","baseURI","canvasFactory","filterFactory","styleElement","transportFactory","cMapReaderFactory","isCompressed","standardFontDataFactory","workerParams","port","GlobalWorkerOptions","workerPort","fromPort","_worker","fetchDocParams","apiVersion","evaluatorOptions","transportParams","then","destroyed","workerIdPromise","_fetchDocument","networkStreamPromise","networkStream","PDFDataTransportStream","initialData","progressiveDone","contentDispositionFilename","all","workerId","messageHandler","MessageHandler","transport","WorkerTransport","_transport","send","catch","_capability","source","sendWithPromise","val","href","window","location","Buffer","isNaN","onPassword","onProgress","destroy","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","addProgressiveDoneListener","onDataRange","begin","onDataProgress","loaded","total","onDataProgressiveRead","onDataProgressiveDone","transportReady","requestDataRange","end","abort","PDFDocumentProxy","pdfInfo","_pdfInfo","annotationStorage","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","pageNumber","getPageIndex","ref","getDestinations","getDestination","id","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJavaScript","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getPermissions","getMetadata","getMarkInfo","getData","saveDocument","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","loadingParams","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageIndex","pageInfo","_pageIndex","_pageInfo","_stats","StatTimer","_pdfBug","commonObjs","objs","PDFObjects","_maybeCleanupAfterRender","_intentStates","rotate","userUnit","view","getViewport","scale","rotation","offsetX","offsetY","dontFlip","PageViewport","viewBox","getAnnotations","intent","intentArgs","getRenderingIntent","renderingIntent","getPageJSActions","getXfa","children","render","canvasContext","viewport","annotationMode","background","optionalContentConfigPromise","annotationCanvasMap","pageColors","printAnnotationStorage","arguments","time","intentState","cacheKey","set","streamReaderCancelTimeout","clearTimeout","intentPrint","displayReadyCapability","operatorList","fnArray","argsArray","lastChunk","separateAnnots","_pumpOperatorList","complete","error","renderTasks","delete","internalRenderTask","capability","_abortOperatorList","timeEnd","InternalRenderTask","callback","useRequestAnimationFrame","Set","add","renderTask","transparency","optionalContentConfig","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","streamTextContent","includeMarkedContent","disableNormalization","TEXT_CONTENT_CHUNK_SIZE","sendWithStream","highWaterMark","size","textContent","items","getTextContent","xfa","XfaText","readableStream","pump","reader","read","done","assign","styles","getReader","getStructTree","_destroy","waitOn","values","force","completed","cancel","clear","resetStats","success","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageMap","streamReader","RenderingCancelledException","delay","extraDelay","setTimeout","curCacheKey","curIntentState","stats","delayed","LoopbackPort","postMessage","transfer","event","structuredClone","call","addEventListener","removeEventListener","terminate","PDFWorkerUtil","isWorkerDisabled","fallbackWorkerSrc","fakeWorkerId","__non_webpack_require__","pdfjsFilePath","currentScript","replace","isSameOrigin","otherUrl","base","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","has","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","on","_mainThreadWorkerMessageHandler","workerSrc","Worker","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","pdfjsWorker","loader","mainWorkerMessageHandler","eval","WeakMap","factory","fontLoader","FontLoader","_params","destroyCapability","_passwordCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","AnnotationStorage","isOpList","annotationMap","PrintAnnotationStorage","serializable","getHash","page","hasOwnProperty","resetModified","terminated","cancelAllRequests","sink","getFullReader","evt","onPull","close","ArrayBuffer","enqueue","onCancel","ready","readyReason","headersCapability","fullReader","headersReady","isStreamingSupported","isRangeSupported","contentLength","rangeReader","getRangeReader","_numPages","htmlForXfa","exception","updatePassword","type","exportedData","exportedError","inspectFont","FontInspector","enabled","font","fontAdded","FontFaceObject","bind","finally","imageData","pageProxy","bitmap","width","height","fetch","filename","cachedPromise","num","gen","results","OptionalContentConfig","metadata","Metadata","cleanupSuccessful","objId","RenderTask","onContinue","form","canvas","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","CanvasGraphics","beginDrawing","endDrawing","updateOperatorList","requestAnimationFrame","executeOperatorList","WeakSet","version","build","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","getRawValue","remove","AnnotationEditor","setValue","modified","entry","entries","_type","getAll","setAll","print","clone","serialized","serialize","hash","MurmurHash3_64","update","JSON","stringify","hexdigest","parent","parameters","focusin","focusout","_zIndex","div","_uiManager","uiManager","rawDims","pageWidth","pageHeight","pageX","pageY","pageRotation","viewParameters","pageDimensions","pageTranslation","parentDimensions","x","y","isAttachedToDOM","_defaultLineColor","_colorManager","getHexCode","addCommands","currentLayer","setInBackground","style","zIndex","setInForeground","setParent","setSelected","target","relatedTarget","closest","preventDefault","isMultipleSelection","commitOrRemove","isEmpty","commit","addToAnnotationStorage","dragstart","getBoundingClientRect","startX","clientX","startY","clientY","dataTransfer","setData","effectAllowed","setAt","tx","ty","screenToPageTranslation","left","top","translate","parentRotation","parentScale","realScale","setDims","parentWidth","parentHeight","fixDims","widthPercent","endsWith","heightPercent","parseFloat","getInitialTranslation","createElement","setAttribute","className","pointerdown","button","ctrlKey","shiftKey","metaKey","toggleSelected","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","disableEditMode","isInEditMode","shouldGetKeyboardEvents","needsToBeRebuilt","rebuild","deserialize","editor","getNextId","select","classList","unselect","updateParams","disableEditing","enableEditing","propertiesToUpdate","contentDiv","isEditing","setActiveEditor","ColorManager","bindEvents","element","names","opacityToHex","opacity","round","IdManager","getId","CommandManager","maxSize","cmd","undo","mustExec","overwriteIfSameType","keepUndo","next","splice","redo","hasSomethingToUndo","hasSomethingToRedo","KeyboardManager","callbacks","allKeys","isMacKey","split","at","exec","self","stopPropagation","altKey","_colors","colors","convert","color","rgb","matchMedia","matches","RGB","every","_colorsMapping","AnnotationEditorUIManager","container","eventBus","copy","cut","paste","keydown","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","hasSelectedEditor","_on","PixelsPerInch","PDF_TO_CSS_UNITS","_off","layer","focusMainContainer","focus","addShouldRescale","removeShouldRescale","pagesRotation","hasSelection","editors","clipboardData","parse","isArray","unselectAll","newEditors","deserializedEditor","getActive","_keyboardManager","setEditingState","registerEditorTypes","types","editorType","defaultPropertiesToUpdate","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","mode","updateToolbar","dispatch","updateDefaultParams","getEditors","getEditor","addEditor","removeEditor","ed","isSelected","selectAll","isActive","getMode","hasChanged","some","addOrRebuild","SVG_NS","AnnotationPrefix","CSS","PDF","BaseFilterFactory","addFilter","maps","tableR","tableG","tableB","mapR","mapG","mapB","bufferR","bufferG","bufferB","filter","createElementNS","feComponentTransfer","append","addHCMFilter","fgColor","bgColor","getComputedStyle","getPropertyValue","fgRGB","getRGB","bgRGB","table","feColorMatrix","getSteps","start","arr","keepHCM","parentNode","visibility","contain","position","svg","body","func","feFunc","BaseCanvasFactory","_document","_createCanvas","fetchData","asTypedArray","isValidFetchUrl","response","ok","statusText","arrayBuffer","text","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","BaseCMapReaderFactory","_fetchData","compressionType","cMapData","BaseStandardFontDataFactory","DOMSVGFactory","BaseSVGFactory","_createSVG","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","isDataScheme","trim","substring","toLowerCase","isPdfFile","test","getFilenameFromUrl","onlyStripPath","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","reURI","reFilename","splitURI","suggestedFilename","started","now","times","outBuf","longest","padEnd","loadScript","removeScriptElement","script","onload","onerror","head","documentElement","deprecated","pdfDateStringRegex","PDFDateString","toDateObject","input","RegExp","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","attributes","colorRGB","getColorValues","span","computedColor","getCurrentTransform","ctx","f","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","mustFlip","mustRotate","widthStr","heightStr","context","getContext","reset","canvasAndContext","skipDimensions","SEED","MASK_HIGH","MASK_LOW","seed","h1","h2","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","attached","missingFile","systemFontInfo","createNativeFontFace","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","hasFonts","supported","userAgent","completeRequest","otherRequest","shift","_loadTestFont","testFont","atob","int32","offset","spliceString","s","insert","chunk1","chunk2","called","isFontReady","fillText","getImageData","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","btoa","fontFamily","translatedData","compiledGlyphs","_inspectFont","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","character","cmds","jsBuf","current","args","process","versions","nw","electron","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","EXECUTION_TIME","EXECUTION_STEPS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","mirrorContextOperations","destCtx","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","setTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","beginPath","ctxSave","ctxRestore","ctxTranslate","ctxScale","ctxTransform","ctxSetTransform","ctxResetTransform","ctxRotate","angle","cp1x","cp1y","cp2x","cp2y","CachedCanvases","cache","getCanvas","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","drawImage","scaleX","hypot","scaleY","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","POINT_TYPES","width1","points","j0","lineSize","pos","elem","mask","count","sum","steps","Int32Array","path","Path2D","p0","step","pp","drawOutline","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","fillColor","strokeColor","patternFill","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","minX","minY","maxX","maxY","updateRectMinMax","updateScalingPathMinMax","updateCurvePathMinMax","box","getPathBoundingBox","pathType","PathType","xStrokePad","yStrokePad","updateClipFromPath","isEmptyClip","Infinity","getClippedPathBoundingBox","putBinaryImageData","ImageData","putImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","createImageData","srcPos","destPos","dest","thisChunkHeight","elemsInThisChunk","kind","srcLength","dest32","dest32DataLength","fullSrcDiff","white","black","srcDiff","k","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","nonBlackColor","copyCtxState","sourceCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","strokeStyle","fillStyle","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","subtype","backdrop","layerOffsetX","layerOffsetY","maskOffsetX","maskOffsetY","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","ceil","row","chunkHeight","composeSMask","smask","layerBox","layerWidth","layerHeight","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","canvasCtx","markedContentStack","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransform","baseTransformStack","groupLevel","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedCanvases","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","argsArrayLen","chunkOperations","endTime","fnId","breakIt","depObjId","objsPool","HTMLCanvasElement","_scaleImage","img","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","tmpCanvas","tmpCtx","newWidth","newHeight","floor","clearRect","_createMaskCanvas","isPatternFill","currentTransform","scaled","maskCanvas","mainKey","cachedImage","maskToCanvas","cord1","cord2","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","inverse","getPattern","limit","dashArray","dashPhase","flatness","states","checkSMaskState","inSMaskMode","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","compose","dirtyBox","old","pop","ops","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","rescaleAndStroke","needRestore","paths","pendingTextPaths","addToPath","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternTransform","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","pattern","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","charWidth","isTextInvisible","spacingLength","charProcOperatorList","operatorListId","transformed","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","IR","canvasGraphicsFactory","createCanvasGraphics","TilingPattern","_getPattern","matrix","SHADING","inv","bl","br","ul","ur","bbox","group","currentCtx","isolated","knockout","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","canvasWidth","canvasHeight","annotationCanvas","savedCtx","compiled","skewX","skewY","positions","trans","images","image","w","h","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","tag","visible","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","hcmFilterId","foreground","savedFilter","op","applyBoundingBox","region","BaseShadingPattern","RadialAxialShadingPattern","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","ownerBBox","createPattern","domMatrix","DOMMatrix","drawTriangle","c1","c2","c3","coords","rowSize","tmp","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","EXPECTED_SCALE","MAX_PATTERN_SIZE","BORDER_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","matrixScale","temporaryPatternCanvas","DummyShadingPattern","getShadingPattern","PaintType","COLORED","UNCOLORED","xstep","ystep","paintType","tilingType","createPatternCanvas","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","clipBbox","realOutputSize","bboxWidth","bboxHeight","cssColor","convertToRGBA","convertBlackAndWhiteToRGBA","convertRGBToRGBA","inverseDecode","zeroMapping","oneMapping","widthInSource","widthRemainder","len32","src32","s1","s2","s3","jj","grayToRGBA","CallbackKind","UNKNOWN","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","wrapReason","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","stream","action","cbSourceName","cbTargetName","result","actionName","handler","ah","transfers","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","isCancelled","lastDesiredSize","sinkCapability","streamController","allSettled","parsedData","rawData","getRaw","INTERNAL","Symbol","OptionalContentGroup","_setVisible","internal","creator","order","groups","baseState","off","expression","policy","ids","setVisibility","hasInitialVisibility","getOrder","getGroups","getGroup","array","operator","state","pdfDataRangeTransport","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","_onReceiveData","_onProgress","_onProgressiveDone","_enqueue","found","_begin","_progressiveDataLength","_loaded","_removeRangeReader","indexOf","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","_stream","_done","_filename","_requests","_headersReady","requestCapability","_end","_queuedChunk","requestsCapability","output","walk","node","shouldBuildText","child","fs","readFile","Canvas","createCanvas","http","https","fileUriRegex","parseUrl","sourceUrl","parsedUrl","host","isHttp","isFsUrl","_rangeRequestReaders","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_url","_storedError","_disableRange","_rangeChunkSize","_readableStream","_readCapability","_headersCapability","_error","_setReadableStream","BaseRangeReader","createRequestOptions","headers","auth","hostname","method","handleResponse","statusCode","getResponseHeader","allowRangeRequests","suggestedLength","_request","_httpHeaders","Range","lstat","stat","createReadStream","validateRangeRequestCapabilities","returnValues","contentEncoding","extractFilenameFromHeader","contentDisposition","createResponseStatusError","validateResponseStatus","getFilenameFromContentDispositionHeader","needsEncodingFixup","toParamRegExp","rfc2616unquote","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","contentDispositionStr","iter","quot","part","parts","quotindex","extvalue","encodingend","langvalue","charset","hex","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","getArrayBuffer","xhr","NetworkManager","currXhrId","pendingRequests","requestRange","listeners","requestFull","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","ok_response_on_range_request","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_fullRequestId","_headersReceivedCapability","_cachedChunks","fullRequestXhrId","fullRequestXhr","lengthComputable","_requestId","_close","createFetchOptions","abortController","signal","credentials","redirect","createHeaders","Headers","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_abortController","AbortController","_headers","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_SIZE","DEFAULT_FONT_ASCENT","ascentCache","getCtx","getAscent","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","appendText","geom","textDiv","textDivProperties","hasText","hasEOL","_textDivs","_transform","atan2","fontName","fontHeight","fontAscent","_isOffscreenCanvasSupported","sin","cos","scaleFactorStr","divStyle","_container","_rootContainer","_pageWidth","toFixed","_pageHeight","dir","_fontInspectorEnabled","dataset","shouldScaleText","absScaleX","absScaleY","_textDivProperties","_isReadableStream","_layoutText","layout","prevFontSize","prevFontFamily","_canceled","textDivs","textDivsLength","TextLayerRenderTask","textContentSource","textContentItemsStr","_textContentSource","_textContentItemsStr","_layoutTextParams","_processItems","styleCache","item","_render","renderTextLayer","textContentStream","scaleFactor","updateTextLayer","mustRescale","AnnotationEditorLayer","pointerup","_initialized","FreeTextEditor","initialize","l10n","InkEditor","accessibilityManager","addInkEditorIfNeeded","disableClick","enableClick","toggle","hidden","isCommitting","pointerEvents","currentActive","attach","detach","removePointerInTextLayer","display","activeElement","moveEditorInDOM","moveElementInDOM","addANewEditor","addUndoableEditor","annotationType","drop","dropEffect","endX","endY","dragover","editorDivBlur","editorDivFocus","editorDivInput","editorDivKeydown","_defaultColor","_defaultFontSize","_l10nPromise","_internalPadding","overlayDiv","editorDiv","contentEditable","draggable","removeAttribute","preventScroll","innerText","trimEnd","dblclick","baseX","baseY","line","createTextNode","padding","setFontsize","savedFontsize","savedColor","divs","savedDisplay","RESIZER_SIZE","canvasContextMenu","canvasPointermove","canvasPointerleave","canvasPointerup","canvasPointerdown","thickness","bezierPath2D","allRawPaths","currentPath","translationX","translationY","_defaultThickness","_defaultOpacity","disconnect","setDimensions","roundedWidth","roundedHeight","bezier","p10","p11","p20","p21","p30","p31","path2D","savedThickness","savedOpacity","lastX","lastY","lastPoint","xy","lastPoints","xMin","xMax","yMin","yMax","prevX","prevY","bezierPoints","control1","control2","ResizeObserver","contentRect","observe","scaleFactorW","scaleFactorH","NUMBER_OF_POINTS_ON_BEZIER_CURVE","p40","p41","q10","q11","q20","q21","q30","q31","tol","ax","ay","bx","by","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","minHeight","minWidth","DEFAULT_TAB_INDEX","GetElementsByNameSet","getRectDims","AnnotationElementFactory","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","linkService","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","quadrilaterals","_createQuadrilaterals","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","setRotation","elementWidth","elementHeight","_commonActions","setColor","jsName","styleName","detail","ColorConverters","userName","title","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","storedData","eventProxy","quadPoints","savedRect","quadPoint","_createPopup","trigger","popupElement","PopupElement","titleObj","modificationDate","contentsObj","richText","hideWrapper","popup","_renderQuadrilaterals","quadrilateral","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","querySelector","getElementsByName","getAttribute","isTooltipOnly","link","isBound","addLinkAttributes","newWindow","_bindNamedAction","attachment","_bindAttachment","setOCGState","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","index","linkElement","cloneNode","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","content","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","storage","allIds","dispatchEvent","Event","executeSetOCGState","hasPopup","alt","l10nId","l10nArgs","alternativeText","showElementAndHideCanvas","previousSibling","nodeName","_getKeyModifier","_setEventListener","baseName","eventName","valueGetter","modifier","_setEventListeners","getter","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","numberOfLines","lineHeight","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","elementData","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","disabled","readOnly","tabIndex","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","fieldWidth","combWidth","letterSpacing","verticalAlign","checked","checkbox","curChecked","buttonValue","radio","pdfButtonValue","lastChild","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","option","selected","optionElement","displayValue","removeEmptyEntry","noneOptionElement","prepend","isExport","selectedIndex","selectedValues","getItems","multipleSelection","findIndex","selectChild","before","indices","editable","changeEx","keyDown","IGNORE_TYPES","parentType","parentElements","querySelectorAll","parentId","from","parentRect","popupLeft","popupTop","pinned","BACKGROUND_ENLIGHT","hideElement","dateObject","toLocaleDateString","toLocaleTimeString","XfaLayer","xfaHtml","html","contents","_formatContents","_toggle","_show","_hide","lines","pin","unpin","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","coordinate","vertices","polyline","inkList","inkLists","file","_download","AnnotationLayer","annotations","elementParams","noHTML","rendered","renderedElement","contentElement","firstChild","replaceWith","makeColorComp","CMYK_G","G_CMYK","G_RGB","G_HTML","G","RGB_G","RGB_HTML","R","B","T_HTML","CMYK_RGB","CMYK_HTML","components","RGB_CMYK","setupStorage","xfaOn","xfaOff","setAttributes","isHTMLAnchorElement","HTMLAnchorElement","dataId","rootHtml","stack","rootDiv","childHtml","xmlns","el","SVGGraphics","SVG_DEFAULTS","fontStyle","XML_NS","XLINK_NS","contentType","forceDataSchema","digits","b1","b2","b3","d1","d2","d3","d4","convertImgDataToPng","PNG_HEADER","CHUNK_WRAPPER_SIZE","crcTable","crc32","crc","writePngChunk","len","adler32","deflateSync","literals","deflateSyncUncompressed","maxBlockLength","deflateBlocks","idat","pi","adler","encode","isMask","bitDepth","colorType","offsetLiterals","offsetBytes","ihdr","pngLength","SVGExtraState","dependencies","activeClipUrl","clipGroup","maskId","opListToTree","opList","opTree","opListElement","fn","pf","pm","acos","clipCount","maskCount","shadingCount","transformMatrix","transformStack","extraStack","embedFonts","embeddedFonts","cssStyle","_operatorIdMapping","tgrp","executeOpTree","loadDependencies","getSVG","svgElement","convertOpList","operatorIdMapping","opTreeElement","lineMatrix","xcoords","ycoords","tspan","setAttributeNS","txtElement","txtgrp","lineWidthScale","_setStrokeAttributes","_ensureTransformGroup","addFontStyle","defs","hasChildNodes","setStrokeAlpha","setFillAlpha","_makeColorN_Pattern","_makeShadingPattern","_makeTilingPattern","tilingId","tx0","ty0","tx1","ty1","xscale","yscale","txstep","tystep","tiling","childNodes","shadingId","colorStops","gradient","point0","point1","focalPoint","circlePoint","focalRadius","circleRadius","stop","getAttributeNS","clipId","clipPath","clipElement","prev","imgSrc","cliprect","imgEl","definitions","rootGroup","_ensureClipGroup","__webpack_modules__","pdfjsVersion","pdfjsBuild"],"sourceRoot":"","sources":["webpack://pdfjs-dist/build/pdf/webpack/universalModuleDefinition","webpack://pdfjs-dist/build/pdf/src/shared/util.js","webpack://pdfjs-dist/build/pdf/src/display/api.js","webpack://pdfjs-dist/build/pdf/src/display/annotation_storage.js","webpack://pdfjs-dist/build/pdf/src/display/editor/editor.js","webpack://pdfjs-dist/build/pdf/src/display/editor/tools.js","webpack://pdfjs-dist/build/pdf/src/display/display_utils.js","webpack://pdfjs-dist/build/pdf/src/display/base_factory.js","webpack://pdfjs-dist/build/pdf/src/shared/murmurhash3.js","webpack://pdfjs-dist/build/pdf/src/display/font_loader.js","webpack://pdfjs-dist/build/pdf/src/shared/is_node.js","webpack://pdfjs-dist/build/pdf/src/display/canvas.js","webpack://pdfjs-dist/build/pdf/src/display/pattern_helper.js","webpack://pdfjs-dist/build/pdf/src/shared/image_utils.js","webpack://pdfjs-dist/build/pdf/src/display/worker_options.js","webpack://pdfjs-dist/build/pdf/src/shared/message_handler.js","webpack://pdfjs-dist/build/pdf/src/display/metadata.js","webpack://pdfjs-dist/build/pdf/src/display/optional_content_config.js","webpack://pdfjs-dist/build/pdf/src/display/transport_stream.js","webpack://pdfjs-dist/build/pdf/src/display/xfa_text.js","webpack://pdfjs-dist/build/pdf/src/display/node_utils.js","webpack://pdfjs-dist/build/pdf/src/display/node_stream.js","webpack://pdfjs-dist/build/pdf/src/display/network_utils.js","webpack://pdfjs-dist/build/pdf/src/display/content_disposition.js","webpack://pdfjs-dist/build/pdf/src/display/network.js","webpack://pdfjs-dist/build/pdf/src/display/fetch_stream.js","webpack://pdfjs-dist/build/pdf/src/display/text_layer.js","webpack://pdfjs-dist/build/pdf/src/display/editor/annotation_editor_layer.js","webpack://pdfjs-dist/build/pdf/src/display/editor/freetext.js","webpack://pdfjs-dist/build/pdf/src/display/editor/ink.js","webpack://pdfjs-dist/build/pdf/src/display/annotation_layer.js","webpack://pdfjs-dist/build/pdf/src/shared/scripting_utils.js","webpack://pdfjs-dist/build/pdf/src/display/xfa_layer.js","webpack://pdfjs-dist/build/pdf/src/display/svg.js","webpack://pdfjs-dist/build/pdf/webpack/bootstrap","webpack://pdfjs-dist/build/pdf/src/pdf.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pdfjs-dist/build/pdf\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pdfjs-dist/build/pdf\"] = factory();\n\telse\n\t\troot[\"pdfjs-dist/build/pdf\"] = factory();\n})(globalThis, () => {\nreturn ","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Skip compatibility checks for modern builds and if we already ran the module.\nif (\n  typeof PDFJSDev !== \"undefined\" &&\n  !PDFJSDev.test(\"SKIP_BABEL\") &&\n  !globalThis._pdfjsCompatibilityChecked\n) {\n  globalThis._pdfjsCompatibilityChecked = true;\n  require(\"./compatibility.js\");\n}\n\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6; // Ten megabytes.\n\n// Represent the percentage of the height of a single-line field over\n// the font size. Acrobat seems to use this value.\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\n\n/**\n * Refer to the `WorkerTransport.getRenderingIntent`-method in the API, to see\n * how these flags are being used:\n *  - ANY, DISPLAY, and PRINT are the normal rendering intents, note the\n *    `PDFPageProxy.{render, getOperatorList, getAnnotations}`-methods.\n *  - ANNOTATIONS_FORMS, ANNOTATIONS_STORAGE, ANNOTATIONS_DISABLE control which\n *    annotations are rendered onto the canvas (i.e. by being included in the\n *    operatorList), note the `PDFPageProxy.{render, getOperatorList}`-methods\n *    and their `annotationMode`-option.\n *  - OPLIST is used with the `PDFPageProxy.getOperatorList`-method, note the\n *    `OperatorList`-constructor (on the worker-thread).\n */\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\n\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\n\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\n\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  INK: 15,\n};\n\nconst AnnotationEditorParamsType = {\n  FREETEXT_SIZE: 1,\n  FREETEXT_COLOR: 2,\n  FREETEXT_OPACITY: 3,\n  INK_COLOR: 11,\n  INK_THICKNESS: 12,\n  INK_OPACITY: 13,\n};\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationStateModelType = {\n  MARKED: \"Marked\",\n  REVIEW: \"Review\",\n};\n\nconst AnnotationMarkedState = {\n  MARKED: \"Marked\",\n  UNMARKED: \"Unmarked\",\n};\n\nconst AnnotationReviewState = {\n  ACCEPTED: \"Accepted\",\n  REJECTED: \"Rejected\",\n  CANCELLED: \"Cancelled\",\n  COMPLETED: \"Completed\",\n  NONE: \"None\",\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\",\n};\n\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\",\n};\n\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  // PLEASE NOTE: We purposely keep any removed operators commented out, since\n  //              re-numbering the list would risk breaking third-party users.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  // beginAnnotations: 78,\n  // endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  // paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} [baseUrl] - An absolute URL.\n * @param {Object} [options]\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      // Let URLs beginning with \"www.\" default to using the \"http://\" protocol.\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        // Avoid accidentally matching a *relative* URL pointing to a file named\n        // e.g. \"www.pdf\" or similar.\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n\n      // According to ISO 32000-1:2008, section 12.6.4.7, URIs should be encoded\n      // in 7-bit ASCII. Some bad PDFs use UTF-8 encoding; see bug 1122280.\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch (ex) {}\n      }\n    }\n\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch (ex) {\n    /* `new URL()` will throw on incorrect data. */\n  }\n  return null;\n}\n\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      prop in obj,\n      `shadow: Property \"${prop && prop.toString()}\" not found in object.`\n    );\n  }\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\n\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\n\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\n\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\nfunction string32(value) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      typeof value === \"number\" && Math.abs(value) < 2 ** 32,\n      `string32: Unexpected input \"${value}\".`\n    );\n  }\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\n\n// Ensure that the returned Object has a `null` prototype; hence why\n// `Object.fromEntries(...)` is not used.\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return shadow(\n      this,\n      \"isOffscreenCanvasSupported\",\n      typeof OffscreenCanvas !== \"undefined\"\n    );\n  }\n\n  static get platform() {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n      typeof navigator === \"undefined\"\n    ) {\n      return shadow(this, \"platform\", { isWin: false, isMac: false });\n    }\n    return shadow(this, \"platform\", {\n      isWin: navigator.platform.includes(\"Win\"),\n      isMac: navigator.platform.includes(\"Mac\"),\n    });\n  }\n}\n\nconst hexNumbers = [...Array(256).keys()].map(n =>\n  n.toString(16).padStart(2, \"0\")\n);\n\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n\n  // Apply a scaling matrix to some min/max values.\n  // If a scaling factor is negative then min and max must be\n  // swaped.\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[1] *= transform[0];\n\n      if (transform[3] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[2];\n      minMax[2] = temp;\n      temp = minMax[1];\n      minMax[1] = minMax[3];\n      minMax[3] = temp;\n\n      if (transform[1] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[1];\n      minMax[3] *= transform[1];\n\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[1] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[4];\n    minMax[2] += transform[5];\n    minMax[3] += transform[5];\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = Util.applyTransform(r, m);\n    const p2 = Util.applyTransform(r.slice(2, 4), m);\n    const p3 = Util.applyTransform([r[0], r[3]], m);\n    const p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'null'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(\n      Math.min(rect1[0], rect1[2]),\n      Math.min(rect2[0], rect2[2])\n    );\n    const xHigh = Math.min(\n      Math.max(rect1[0], rect1[2]),\n      Math.max(rect2[0], rect2[2])\n    );\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(\n      Math.min(rect1[1], rect1[3]),\n      Math.min(rect2[1], rect2[3])\n    );\n    const yHigh = Math.min(\n      Math.max(rect1[1], rect1[3]),\n      Math.max(rect2[1], rect2[3])\n    );\n    if (yLow > yHigh) {\n      return null;\n    }\n\n    return [xLow, yLow, xHigh, yHigh];\n  }\n\n  // From https://github.com/adobe-webplatform/Snap.svg/blob/b365287722a72526000ac4bfcf0ce4cac2faa015/src/path.js#L852\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n    const tvalues = [],\n      bounds = [[], []];\n    let a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n    for (let i = 0; i < 2; ++i) {\n      if (i === 0) {\n        b = 6 * x0 - 12 * x1 + 6 * x2;\n        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n        c = 3 * x1 - 3 * x0;\n      } else {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n      if (Math.abs(a) < 1e-12) {\n        if (Math.abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      sqrtb2ac = Math.sqrt(b2ac);\n      if (b2ac < 0) {\n        continue;\n      }\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    let j = tvalues.length,\n      mt;\n    const jlen = j;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      bounds[0][j] =\n        mt * mt * mt * x0 +\n        3 * mt * mt * t * x1 +\n        3 * mt * t * t * x2 +\n        t * t * t * x3;\n      bounds[1][j] =\n        mt * mt * mt * y0 +\n        3 * mt * mt * t * y1 +\n        3 * mt * t * t * y2 +\n        t * t * t * y3;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    bounds[0].length = bounds[1].length = jlen + 2;\n\n    return [\n      Math.min(...bounds[0]),\n      Math.min(...bounds[1]),\n      Math.max(...bounds[0]),\n      Math.max(...bounds[1]),\n    ];\n  }\n}\n\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8,\n  0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192,\n  0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018,\n  0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d,\n  0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\n\nfunction stringToPDFString(str) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(str);\n        return decoder.decode(buffer);\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  // ISO Latin 1\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const code = PDFStringTranslateTable[str.charCodeAt(i)];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === \"object\" && v?.byteLength !== undefined;\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    date.getUTCDate().toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\nclass PromiseCapability {\n  #settled = false;\n\n  constructor() {\n    /**\n     * @type {Promise<any>} The Promise object.\n     */\n    this.promise = new Promise((resolve, reject) => {\n      /**\n       * @type {function} Fulfills the Promise.\n       */\n      this.resolve = data => {\n        this.#settled = true;\n        resolve(data);\n      };\n\n      /**\n       * @type {function} Rejects the Promise.\n       */\n      this.reject = reason => {\n        if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n          assert(reason instanceof Error, 'Expected valid \"reason\" argument.');\n        }\n        this.#settled = true;\n        reject(reason);\n      };\n    });\n  }\n\n  /**\n   * @type {boolean} If the Promise has been fulfilled/rejected.\n   */\n  get settled() {\n    return this.#settled;\n  }\n}\n\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    // In order to generate the following regex:\n    //  - create a PDF containing all the chars in the range 0000-FFFF with\n    //    a NFKC which is different of the char.\n    //  - copy and paste all those chars and get the ones where NFKC is\n    //    required.\n    // It appears that most the chars here contain some ligatures.\n    NormalizeRegex =\n      /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => {\n    return p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2);\n  });\n}\n\nexport {\n  AbortException,\n  AnnotationActionEventType,\n  AnnotationBorderStyleType,\n  AnnotationEditorParamsType,\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMarkedState,\n  AnnotationMode,\n  AnnotationReplyType,\n  AnnotationReviewState,\n  AnnotationStateModelType,\n  AnnotationType,\n  assert,\n  BaseException,\n  BASELINE_FACTOR,\n  bytesToString,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  DocumentActionEventType,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  FormatError,\n  getModificationDate,\n  getVerbosityLevel,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  isArrayEqual,\n  LINE_DESCENT_FACTOR,\n  LINE_FACTOR,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  normalizeUnicode,\n  objectFromMap,\n  objectSize,\n  OPS,\n  PageActionEventType,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  PromiseCapability,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  utf8StringToString,\n  Util,\n  VerbosityLevel,\n  warn,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  AnnotationMode,\n  assert,\n  getVerbosityLevel,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  MAX_IMAGE_SIZE_TO_CACHE,\n  MissingPDFException,\n  PasswordException,\n  PromiseCapability,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  stringToBytes,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  AnnotationStorage,\n  PrintAnnotationStorage,\n} from \"./annotation_storage.js\";\nimport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  isDataScheme,\n  isValidFetchUrl,\n  loadScript,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\nimport { MessageHandler } from \"../shared/message_handler.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { XfaText } from \"./xfa_text.js\";\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\nconst DELAYED_CLEANUP_TIMEOUT = 5000; // ms\n\nlet DefaultCanvasFactory = DOMCanvasFactory;\nlet DefaultCMapReaderFactory = DOMCMapReaderFactory;\nlet DefaultFilterFactory = DOMFilterFactory;\nlet DefaultStandardFontDataFactory = DOMStandardFontDataFactory;\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS) {\n  const {\n    NodeCanvasFactory,\n    NodeCMapReaderFactory,\n    NodeFilterFactory,\n    NodeStandardFontDataFactory,\n  } = require(\"./node_utils.js\");\n\n  DefaultCanvasFactory = NodeCanvasFactory;\n  DefaultCMapReaderFactory = NodeCMapReaderFactory;\n  DefaultFilterFactory = NodeFilterFactory;\n  DefaultStandardFontDataFactory = NodeStandardFontDataFactory;\n}\n\nlet createPDFNetworkStream;\nif (typeof PDFJSDev === \"undefined\") {\n  const streamsPromise = Promise.all([\n    import(\"./network.js\"),\n    import(\"./fetch_stream.js\"),\n  ]);\n\n  createPDFNetworkStream = async params => {\n    const [{ PDFNetworkStream }, { PDFFetchStream }] = await streamsPromise;\n\n    return isValidFetchUrl(params.url)\n      ? new PDFFetchStream(params)\n      : new PDFNetworkStream(params);\n  };\n} else if (PDFJSDev.test(\"GENERIC || CHROME\")) {\n  if (PDFJSDev.test(\"GENERIC\") && isNodeJS) {\n    const { PDFNodeStream } = require(\"./node_stream.js\");\n\n    createPDFNetworkStream = params => {\n      return new PDFNodeStream(params);\n    };\n  } else {\n    const { PDFNetworkStream } = require(\"./network.js\");\n    const { PDFFetchStream } = require(\"./fetch_stream.js\");\n\n    createPDFNetworkStream = params => {\n      return isValidFetchUrl(params.url)\n        ? new PDFFetchStream(params)\n        : new PDFNetworkStream(params);\n    };\n  }\n}\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * @typedef { TypedArray | ArrayBuffer | Array<number> | string } BinaryData\n */\n\n/**\n * @typedef {Object} RefProxy\n * @property {number} num\n * @property {number} gen\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string | URL} [url] - The URL of the PDF.\n * @property {BinaryData} [data] - Binary PDF data.\n *   Use TypedArrays (Uint8Array) to improve the memory usage. If PDF data is\n *   BASE64-encoded, use `atob()` to convert it to a binary string first.\n *\n *   NOTE: If TypedArrays are used they will generally be transferred to the\n *   worker-thread. This will help reduce main-thread memory usage, however\n *   it will take ownership of the TypedArrays.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is {@link DEFAULT_RANGE_CHUNK_SIZE}.\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not. The default value is `true`.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files. Providing a custom factory is useful for\n *   environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMCMapReaderFactory}.\n * @property {boolean} [useSystemFonts] - When `true`, fonts that aren't\n *   embedded in the PDF document will fallback to a system font.\n *   The default value is `true` in web environments and `false` in Node.js;\n *   unless `disableFontFace === true` in which case this defaults to `false`\n *   regardless of the environment (to prevent completely broken fonts).\n * @property {string} [standardFontDataUrl] - The URL where the standard font\n *   files are located. Include the trailing slash.\n * @property {Object} [StandardFontDataFactory] - The factory that will be used\n *   when reading the standard font files. Providing a custom factory is useful\n *   for environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMStandardFontDataFactory}.\n * @property {boolean} [useWorkerFetch] - Enable using the Fetch API in the\n *   worker-thread when reading CMap and standard font files. When `true`,\n *   the `CMapReaderFactory` and `StandardFontDataFactory` options are ignored.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of font rendering, and\n *   when parsing PDF functions. The default value is `true`.\n * @property {boolean} [isOffscreenCanvasSupported] - Determines if we can use\n *   `OffscreenCanvas` in the worker. Primarily used to improve performance of\n *   image conversion/rendering.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [canvasMaxAreaInBytes] - The integer value is used to\n *   know when an image must be resized (uses `OffscreenCanvas` in the worker).\n *   If it's -1 then a possibly slow algorithm is used to guess the max value.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via the Font Loading API or `@font-face` rules.\n *   If disabled, fonts will be rendered using a built-in font renderer that\n *   constructs the glyphs with primitive path commands.\n *   The default value is `false` in web environments and `true` in Node.js.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {boolean} [enableXfa] - Render Xfa forms if any.\n *   The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n * @property {Object} [canvasFactory] - The factory instance that will be used\n *   when creating canvases. The default value is {new DOMCanvasFactory()}.\n * @property {Object} [filterFactory] - A factory instance that will be used\n *   to create SVG filters when rendering some images on the main canvas.\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string | URL | TypedArray | ArrayBuffer | DocumentInitParameters}\n *   src - Can be a URL where a PDF file is located, a typed array (Uint8Array)\n *         already populated with data, or a parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n    if (typeof src === \"string\" || src instanceof URL) {\n      src = { url: src };\n    } else if (isArrayBuffer(src)) {\n      src = { data: src };\n    }\n  }\n  if (typeof src !== \"object\") {\n    throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error(\n      \"Invalid parameter object: need either .data, .range or .url\"\n    );\n  }\n  const task = new PDFDocumentLoadingTask();\n  const { docId } = task;\n\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport =\n    src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize =\n    Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0\n      ? src.rangeChunkSize\n      : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  // Ignore \"data:\"-URLs, since they can't be used to recover valid absolute\n  // URLs anyway. We want to avoid sending them to the worker-thread, since\n  // they contain the *entire* PDF document and can thus be arbitrarily long.\n  const docBaseUrl =\n    typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl)\n      ? src.docBaseUrl\n      : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl =\n    typeof src.standardFontDataUrl === \"string\"\n      ? src.standardFontDataUrl\n      : null;\n  const StandardFontDataFactory =\n    src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize =\n    Number.isInteger(src.maxImageSize) && src.maxImageSize > -1\n      ? src.maxImageSize\n      : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported =\n    typeof src.isOffscreenCanvasSupported === \"boolean\"\n      ? src.isOffscreenCanvasSupported\n      : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes)\n    ? src.canvasMaxAreaInBytes\n    : -1;\n  const disableFontFace =\n    typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n\n  // Parameters whose default values depend on other parameters.\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts =\n    typeof src.useSystemFonts === \"boolean\"\n      ? src.useSystemFonts\n      : !isNodeJS && !disableFontFace;\n  const useWorkerFetch =\n    typeof src.useWorkerFetch === \"boolean\"\n      ? src.useWorkerFetch\n      : (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n        (CMapReaderFactory === DOMCMapReaderFactory &&\n          StandardFontDataFactory === DOMStandardFontDataFactory &&\n          isValidFetchUrl(cMapUrl, document.baseURI) &&\n          isValidFetchUrl(standardFontDataUrl, document.baseURI));\n  const canvasFactory =\n    src.canvasFactory || new DefaultCanvasFactory({ ownerDocument });\n  const filterFactory =\n    src.filterFactory || new DefaultFilterFactory({ docId, ownerDocument });\n\n  // Parameters only intended for development/testing purposes.\n  const styleElement =\n    typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n      ? src.styleElement\n      : null;\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(verbosity);\n\n  // Ensure that the various factories can be initialized, when necessary,\n  // since the user may provide *custom* ones.\n  const transportFactory = {\n    canvasFactory,\n    filterFactory,\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked,\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl,\n    });\n  }\n\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = workerParams.port\n      ? PDFWorker.fromPort(workerParams)\n      : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n\n  const fetchDocParams = {\n    docId,\n    apiVersion:\n      typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n        ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n        : null,\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null,\n    },\n  };\n  const transportParams = {\n    ignoreErrors,\n    isEvalSupported,\n    disableFontFace,\n    fontExtraProperties,\n    enableXfa,\n    ownerDocument,\n    disableAutoFetch,\n    pdfBug,\n    styleElement,\n  };\n\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n\n      const workerIdPromise = _fetchDocument(worker, fetchDocParams);\n      const networkStreamPromise = new Promise(function (resolve) {\n        let networkStream;\n        if (rangeTransport) {\n          networkStream = new PDFDataTransportStream(\n            {\n              length,\n              initialData: rangeTransport.initialData,\n              progressiveDone: rangeTransport.progressiveDone,\n              contentDispositionFilename:\n                rangeTransport.contentDispositionFilename,\n              disableRange,\n              disableStream,\n            },\n            rangeTransport\n          );\n        } else if (!data) {\n          if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n            throw new Error(\"Not implemented: createPDFNetworkStream\");\n          }\n          networkStream = createPDFNetworkStream({\n            url,\n            length,\n            httpHeaders,\n            withCredentials,\n            rangeChunkSize,\n            disableRange,\n            disableStream,\n          });\n        }\n        resolve(networkStream);\n      });\n\n      return Promise.all([workerIdPromise, networkStreamPromise]).then(\n        function ([workerId, networkStream]) {\n          if (task.destroyed) {\n            throw new Error(\"Loading aborted\");\n          }\n\n          const messageHandler = new MessageHandler(\n            docId,\n            workerId,\n            worker.port\n          );\n          const transport = new WorkerTransport(\n            messageHandler,\n            task,\n            networkStream,\n            transportParams,\n            transportFactory\n          );\n          task._transport = transport;\n          messageHandler.send(\"Ready\", null);\n        }\n      );\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n *\n * @param {PDFWorker} worker\n * @param {Object} source\n * @returns {Promise<string>} A promise that is resolved when the worker ID of\n *   the `MessageHandler` is known.\n * @private\n */\nasync function _fetchDocument(worker, source) {\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  const workerId = await worker.messageHandler.sendWithPromise(\n    \"GetDocRequest\",\n    source,\n    source.data ? [source.data.buffer] : null\n  );\n\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  return workerId;\n}\n\nfunction getUrlProp(val) {\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n    return null; // The 'url' is unused with `PDFDataRangeTransport`.\n  }\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    // The full path is required in the 'url' field.\n    return new URL(val, window.location).href;\n  } catch (ex) {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"GENERIC\") &&\n      isNodeJS &&\n      typeof val === \"string\"\n    ) {\n      return val; // Use the url as-is in Node.js environments.\n    }\n  }\n  throw new Error(\n    \"Invalid PDF url data: \" +\n      \"either string or URL-object is expected in the url property.\"\n  );\n}\n\nfunction getDataProp(val) {\n  // Converting string or array-like data to Uint8Array.\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"GENERIC\") &&\n    isNodeJS &&\n    typeof Buffer !== \"undefined\" && // eslint-disable-line no-undef\n    val instanceof Buffer // eslint-disable-line no-undef\n  ) {\n    deprecated(\n      \"Please provide binary data as `Uint8Array`, rather than `Buffer`.\"\n    );\n    return new Uint8Array(val);\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    // Use the data as-is when it's already a Uint8Array that completely\n    // \"utilizes\" its underlying ArrayBuffer, to prevent any possible\n    // issues when transferring it to the worker-thread.\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if ((typeof val === \"object\" && !isNaN(val?.length)) || isArrayBuffer(val)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\n    \"Invalid PDF binary data: either TypedArray, \" +\n      \"string, or array-like object is expected in the data property.\"\n  );\n}\n\n/**\n * @typedef {Object} OnProgressParameters\n * @property {number} loaded - Currently loaded number of bytes.\n * @property {number} total - Total number of bytes in the PDF file.\n */\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n */\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n\n  constructor() {\n    this._capability = new PromiseCapability();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique identifier for the document loading task.\n     * @type {string}\n     */\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n\n    /**\n     * Whether the loading task is destroyed or not.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if a wrong or no password was provided.\n     * The callback receives two parameters: a function that should be called\n     * with the new password, and a reason (see {@link PasswordResponses}).\n     * @type {function}\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar).\n     * The callback receives an {@link OnProgressParameters} argument.\n     * @type {function}\n     */\n    this.onProgress = null;\n  }\n\n  /**\n   * Promise for document loading task completion.\n   * @type {Promise<PDFDocumentProxy>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Abort all network requests and destroy the worker.\n   * @returns {Promise<void>} A promise that is resolved when destruction is\n   *   completed.\n   */\n  async destroy() {\n    this.destroyed = true;\n    await this._transport?.destroy();\n\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\n\n/**\n * Abstract class to support range requests file loading.\n *\n * NOTE: The TypedArrays passed to the constructor and relevant methods below\n * will generally be transferred to the worker-thread. This will help reduce\n * main-thread memory usage, however it will take ownership of the TypedArrays.\n */\nclass PDFDataRangeTransport {\n  /**\n   * @param {number} length\n   * @param {Uint8Array|null} initialData\n   * @param {boolean} [progressiveDone]\n   * @param {string} [contentDispositionFilename]\n   */\n  constructor(\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = new PromiseCapability();\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n\n  /**\n   * @param {function} listener\n   */\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n\n  /**\n   * @param {number} begin\n   * @param {Uint8Array|null} chunk\n   */\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  /**\n   * @param {number} loaded\n   * @param {number|undefined} total\n   */\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  /**\n   * @param {Uint8Array|null} chunk\n   */\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n\n  /**\n   * @param {number} begin\n   * @param {number} end\n   */\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => {\n          return this._transport.getXFADatasets();\n        },\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => {\n          return this._transport.getXRefPrevValue();\n        },\n      });\n    }\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n\n  /**\n   * @type {Object} The filter factory instance.\n   */\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {Array<string, string|null>} A (not guaranteed to be) unique ID to\n   *   identify the PDF document.\n   *   NOTE: The first element will always be defined for all PDF documents,\n   *   whereas the second element is only defined for *modified* PDF documents.\n   */\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * NOTE: This is (mostly) intended to support printing of XFA forms.\n   *\n   * @type {Object | null} An object representing a HTML tree structure\n   *   to render the XFA, or `null` when no XFA form exists.\n   */\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {Promise<number>} A promise that is resolved with the page index,\n   *   starting from zero, that is associated with the reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any> | null>} A promise that is resolved with all\n   *   information of the given named destination, or `null` when the named\n   *   destination is not present in the PDF file.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} of all the JavaScript strings in the name tree, or `null`\n   *   if no JavaScript exists.\n   */\n  getJavaScript() {\n    return this._transport.getJavaScript();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with the JavaScript actions:\n   *     - from the name tree (like getJavaScript);\n   *     - from A or AA entries in the catalog dictionary.\n   *   , or `null` if no JavaScript exists.\n   */\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig() {\n    return this._transport.getOptionalContentConfig();\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @typedef {Object} MarkInfo\n   * Properties correspond to Table 321 of the PDF 32000-1:2008 spec.\n   * @property {boolean} Marked\n   * @property {boolean} UserProperties\n   * @property {boolean} Suspects\n   */\n\n  /**\n   * @returns {Promise<MarkInfo | null>} A promise that is resolved with\n   *   a {MarkInfo} object that contains the MarkInfo flags for the PDF\n   *   document, or `null` when no MarkInfo values are present in the PDF file.\n   */\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the raw data of the PDF document.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @param {boolean} [keepLoadedFonts] - Let fonts remain attached to the DOM.\n   *   NOTE: This will increase persistent memory usage, hence don't use this\n   *   option unless absolutely necessary. The default value is `false`.\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are needed in the viewer.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<Object>> | null>} A promise that is\n   *   resolved with an {Object} containing /AcroForm field data for the JS\n   *   sandbox, or `null` when no field data is present in the PDF file.\n   */\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n\n  /**\n   * @returns {Promise<boolean>} A promise that is resolved with `true`\n   *   if some /AcroForm fields have JavaScript actions.\n   */\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with an\n   *   {Array<string>} containing IDs of annotations that have a calculation\n   *   action, or `null` when no such annotations are present in the PDF file.\n   */\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} [includeMarkedContent] - When true include marked\n *   content items in the items array of TextContent. The default is `false`.\n * @property {boolean} [disableNormalization] - When true the text is *not*\n *   normalized in the worker-thread. The default is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem | TextMarkedContent>} items - Array of\n *   {@link TextItem} and {@link TextMarkedContent} objects. TextMarkedContent\n *   items are included when includeMarkedContent is true.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n * @property {boolean} hasEOL - Indicating if the text content is followed by a\n *   line-break.\n */\n\n/**\n * Page text marked content part.\n *\n * @typedef {Object} TextMarkedContent\n * @property {string} type - Either 'beginMarkedContent',\n *   'beginMarkedContentProps', or 'endMarkedContent'.\n * @property {string} id - The marked content identifier. Only used for type\n *   'beginMarkedContentProps'.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} [intent] - Determines the annotations that are fetched,\n *   can be 'display' (viewable annotations), 'print' (printable annotations),\n *   or 'any' (all annotations). The default value is 'display'.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {CanvasRenderingContext2D} canvasContext - A 2D context of a DOM\n *   Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are rendered\n *   onto the canvas, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {CanvasGradient | CanvasPattern | string} [background] - Background\n *   to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n *\n *   NOTE: This option may be partially, or completely, ignored when the\n *   `pageColors`-option is used.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n *   annotation ids with canvases used to render them.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Page getOperatorList parameters.\n *\n * @typedef {Object} GetOperatorListParameters\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are included\n *   in the operatorList, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {PrintAnnotationStorage} [printAnnotationStorage]\n */\n\n/**\n * Structure tree node. The root node will have a role \"Root\".\n *\n * @typedef {Object} StructTreeNode\n * @property {Array<StructTreeNode | StructTreeContent>} children - Array of\n *   {@link StructTreeNode} and {@link StructTreeContent} objects.\n * @property {string} role - element's role, already mapped if a role map exists\n * in the PDF.\n */\n\n/**\n * Structure tree content.\n *\n * @typedef {Object} StructTreeContent\n * @property {string} type - either \"content\" for page and stream structure\n *   elements or \"object\" for object references.\n * @property {string} id - unique id that will map to the text layer.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n\n  #pendingCleanup = false;\n\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    /** @type {PDFObjects} */\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {RefProxy | null} The reference that points to this page.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} params - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = \"display\" } = {}) {\n    const intentArgs = this._transport.getRenderingIntent(intent);\n\n    return this._transport.getAnnotations(\n      this._pageIndex,\n      intentArgs.renderingIntent\n    );\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an\n   *   {Object} with JS actions.\n   */\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with a fake DOM object (a tree structure where elements\n   *   are {Object} with a name, attributes (class, style, ...), value and\n   *   children, very similar to a HTML DOM tree), or `null` if no XFA exists.\n   */\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params - Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n  }) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n      arguments[0]?.canvasFactory\n    ) {\n      throw new Error(\n        \"render no longer accepts the `canvasFactory`-option, \" +\n          \"please pass it to the `getDocument`-function instead.\"\n      );\n    }\n\n    this._stats?.time(\"Overall\");\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage\n    );\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render...\n    this.#pendingCleanup = false;\n    // ... and ensure that a delayed cleanup is always aborted.\n    this.#abortDelayedCleanup();\n\n    if (!optionalContentConfigPromise) {\n      optionalContentConfigPromise = this._transport.getOptionalContentConfig();\n    }\n\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const intentPrint = !!(\n      intentArgs.renderingIntent & RenderingIntentFlag.PRINT\n    );\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = new PromiseCapability();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup immediately once rendering has finished.\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(/* delayed = */ !intentPrint);\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n\n      this._stats?.timeEnd(\"Rendering\");\n      this._stats?.timeEnd(\"Overall\");\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.#pendingCleanup) {\n          complete();\n          return;\n        }\n        this._stats?.time(\"Rendering\");\n\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @param {GetOperatorListParameters} params - Page getOperatorList\n   *   parameters.\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents the page's operator list.\n   */\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      printAnnotationStorage,\n      /* isOpList = */ true\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = new PromiseCapability();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null,\n      };\n\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        includeMarkedContent: includeMarkedContent === true,\n        disableNormalization: disableNormalization === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      // TODO: We need to revisit this once the XFA foreground patch lands and\n      // only do this for non-foreground XFA.\n      return this.getXfa().then(xfa => {\n        return XfaText.textContent(xfa);\n      });\n    }\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n      };\n      pump();\n    });\n  }\n\n  /**\n   * @returns {Promise<StructTreeNode>} A promise that is resolved with a\n   *   {@link StructTreeNode} object that represents the page's structure tree,\n   *   or `null` when no structure tree is present for the current page.\n   */\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intentState.opListReadCapability) {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(/* delayed = */ false);\n\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @param {boolean} [delayed] - Delay the cleanup, to e.g. improve zooming\n   *   performance in documents with large images.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n\n    if (!this.#pendingCleanup) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(/* delayed = */ false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    this._stats?.timeEnd(\"Page Request\");\n\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(/* delayed = */ true);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList({ renderingIntent, cacheKey, annotationStorageMap }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        Number.isInteger(renderingIntent) && renderingIntent > 0,\n        '_pumpOperatorList: Expected valid \"renderingIntent\" argument.'\n      );\n    }\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage: annotationStorageMap,\n      }\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this.#tryCleanup(/* delayed = */ true);\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        reason instanceof Error,\n        '_abortOperatorList: Expected valid \"reason\" argument.'\n      );\n    }\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < /* ms = */ 1000) {\n          // Above, we prevent the total delay from becoming arbitrarily large.\n          delay += reason.extraDelay;\n        }\n\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({ intentState, reason, force: true });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader\n      .cancel(new AbortException(reason.message))\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {StatTimer | null} Returns page stats, if enabled; returns `null`\n   *   otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\nclass LoopbackPort {\n  #listeners = new Set();\n\n  #deferred = Promise.resolve();\n\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(\n        obj,\n        (typeof PDFJSDev === \"undefined\" ||\n          PDFJSDev.test(\"SKIP_BABEL || TESTING\")) &&\n          transfer\n          ? { transfer }\n          : null\n      ),\n    };\n\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n\n  terminate() {\n    this.#listeners.clear();\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Worker} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level;\n *   the constants from {@link VerbosityLevel} should be used.\n */\n\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fallbackWorkerSrc: null,\n  fakeWorkerId: 0,\n};\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  // eslint-disable-next-line no-undef\n  if (isNodeJS && typeof __non_webpack_require__ === \"function\") {\n    // Workers aren't supported in Node.js, force-disabling them there.\n    PDFWorkerUtil.isWorkerDisabled = true;\n\n    PDFWorkerUtil.fallbackWorkerSrc = PDFJSDev.test(\"LIB\")\n      ? \"../pdf.worker.js\"\n      : \"./pdf.worker.js\";\n  } else if (typeof document === \"object\") {\n    const pdfjsFilePath = document?.currentScript?.src;\n    if (pdfjsFilePath) {\n      PDFWorkerUtil.fallbackWorkerSrc = pdfjsFilePath.replace(\n        /(\\.(?:min\\.)?js)(\\?.*)?$/i,\n        \".worker$1$2\"\n      );\n    }\n  }\n\n  // Check if URLs have the same origin. For non-HTTP based URLs, returns false.\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false; // non-HTTP url\n      }\n    } catch (e) {\n      return false;\n    }\n\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    const wrapper = `importScripts(\"${url}\");`;\n    return URL.createObjectURL(new Blob([wrapper]));\n  };\n}\n\n/**\n * PDF.js web worker abstraction that controls the instantiation of PDF\n * documents. Message handlers are used to pass information from the main\n * thread to the worker thread and vice versa. If the creation of a web\n * worker is not possible, a \"fake\" worker will be used instead.\n *\n * @param {PDFWorkerParameters} params - The worker initialization parameters.\n */\nclass PDFWorker {\n  static #workerPorts = new WeakMap();\n\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel(),\n  } = {}) {\n    if (port && PDFWorker.#workerPorts.has(port)) {\n      throw new Error(\"Cannot use more than one PDFWorker per port.\");\n    }\n\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n\n    this._readyCapability = new PromiseCapability();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n\n    if (port) {\n      PDFWorker.#workerPorts.set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n\n  /**\n   * Promise for worker initialization completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._readyCapability.promise;\n  }\n\n  /**\n   * The current `workerPort`, when it exists.\n   * @type {Worker}\n   */\n  get port() {\n    return this._port;\n  }\n\n  /**\n   * The current MessageHandler-instance.\n   * @type {MessageHandler}\n   */\n  get messageHandler() {\n    return this._messageHandler;\n  }\n\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {\n      // Ignoring \"ready\" event -- MessageHandler should already be initialized\n      // and ready to accept messages.\n    });\n    this._readyCapability.resolve();\n    // Send global setting, e.g. verbosity level.\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity,\n    });\n  }\n\n  _initialize() {\n    // If worker support isn't disabled explicit and the browser has worker\n    // support, create a new web worker and test if it/the browser fulfills\n    // all requirements to run parts of pdf.js in a web worker.\n    // Right now, the requirement is, that an Uint8Array is still an\n    // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n    if (\n      !PDFWorkerUtil.isWorkerDisabled &&\n      !PDFWorker._mainThreadWorkerMessageHandler\n    ) {\n      let { workerSrc } = PDFWorker;\n\n      try {\n        // Wraps workerSrc path into blob URL, if the former does not belong\n        // to the same origin.\n        if (\n          typeof PDFJSDev !== \"undefined\" &&\n          PDFJSDev.test(\"GENERIC\") &&\n          !PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)\n        ) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(\n            new URL(workerSrc, window.location).href\n          );\n        }\n\n        const worker =\n          typeof PDFJSDev === \"undefined\" &&\n          !workerSrc.endsWith(\"/build/pdf.worker.js\")\n            ? new Worker(workerSrc, { type: \"module\" })\n            : new Worker(workerSrc);\n        const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            // Fall back to fake worker if the termination is caused by an\n            // error (e.g. NetworkError / SecurityError).\n            this._setupFakeWorker();\n          }\n        };\n\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            // Worker failed to initialize due to an error. Clean up and fall\n            // back to the fake worker.\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n\n            this._readyCapability.resolve();\n            // Send global setting, e.g. verbosity level.\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          try {\n            sendTest();\n          } catch (e) {\n            // We need fallback to a faked worker.\n            this._setupFakeWorker();\n          }\n        });\n\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          // Ensure that we can use `postMessage` transfers.\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n\n        // It might take time for the worker to initialize. We will try to send\n        // the \"test\" message immediately, and once the \"ready\" message arrives.\n        // The worker shall process only the first received \"test\" message.\n        sendTest();\n        return;\n      } catch (e) {\n        info(\"The worker has been disabled.\");\n      }\n    }\n    // Either workers are disabled, not supported or have thrown an exception.\n    // Thus, we fallback to a faked worker.\n    this._setupFakeWorker();\n  }\n\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n\n    PDFWorker._setupFakeWorkerGlobal\n      .then(WorkerMessageHandler => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        // Send global setting, e.g. verbosity level.\n        messageHandler.send(\"configure\", {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch(reason => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n        );\n      });\n  }\n\n  /**\n   * Destroys the worker instance.\n   */\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      // We need to terminate only web worker created resource.\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n\n  /**\n   * @param {PDFWorkerParameters} params - The worker initialization parameters.\n   */\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    if (this.#workerPorts.has(params.port)) {\n      return this.#workerPorts.get(params.port);\n    }\n    return new PDFWorker(params);\n  }\n\n  /**\n   * The current `workerSrc`, when it exists.\n   * @type {string}\n   */\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n      PDFWorkerUtil.fallbackWorkerSrc !== null\n    ) {\n      if (!isNodeJS) {\n        deprecated('No \"GlobalWorkerOptions.workerSrc\" specified.');\n      }\n      return PDFWorkerUtil.fallbackWorkerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  static get _mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch (ex) {\n      return null;\n    }\n  }\n\n  // Loads worker code into the main-thread.\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      const mainWorkerMessageHandler = this._mainThreadWorkerMessageHandler;\n\n      if (mainWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return mainWorkerMessageHandler;\n      }\n      if (typeof PDFJSDev === \"undefined\") {\n        const worker = await import(\"pdfjs/pdf.worker.js\");\n        return worker.WorkerMessageHandler;\n      }\n      if (\n        PDFJSDev.test(\"GENERIC\") &&\n        isNodeJS &&\n        // eslint-disable-next-line no-undef\n        typeof __non_webpack_require__ === \"function\"\n      ) {\n        // Since bundlers, such as Webpack, cannot be told to leave `require`\n        // statements alone we are thus forced to jump through hoops in order\n        // to prevent `Critical dependency: ...` warnings in third-party\n        // deployments of the built `pdf.js`/`pdf.worker.js` files; see\n        // https://github.com/webpack/webpack/issues/8826\n        //\n        // The following hack is based on the assumption that code running in\n        // Node.js won't ever be affected by e.g. Content Security Policies that\n        // prevent the use of `eval`. If that ever occurs, we should revert this\n        // to a normal `__non_webpack_require__` statement and simply document\n        // the Webpack warnings instead (telling users to ignore them).\n        //\n        // eslint-disable-next-line no-eval\n        const worker = eval(\"require\")(this.workerSrc);\n        return worker.WorkerMessageHandler;\n      }\n      await loadScript(this.workerSrc);\n      return window.pdfjsWorker.WorkerMessageHandler;\n    };\n\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  #methodPromises = new Map();\n\n  #pageCache = new Map();\n\n  #pagePromises = new Map();\n\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._passwordCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = new PromiseCapability();\n\n    this.setupMessageHandler();\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      // For testing purposes.\n      Object.defineProperty(this, \"getXFADatasets\", {\n        value: () => {\n          return this.messageHandler.sendWithPromise(\"GetXFADatasets\", null);\n        },\n      });\n      Object.defineProperty(this, \"getXRefPrevValue\", {\n        value: () => {\n          return this.messageHandler.sendWithPromise(\"GetXRefPrevValue\", null);\n        },\n      });\n    }\n  }\n\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isOpList = false\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY; // Default value.\n    let annotationMap = null;\n\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n\n        const annotationStorage =\n          renderingIntent & RenderingIntentFlag.PRINT &&\n          printAnnotationStorage instanceof PrintAnnotationStorage\n            ? printAnnotationStorage\n            : this.annotationStorage;\n\n        annotationMap = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${AnnotationStorage.getHash(\n        annotationMap\n      )}`,\n      annotationStorageMap: annotationMap,\n    };\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = new PromiseCapability();\n\n    if (this._passwordCapability) {\n      this._passwordCapability.reject(\n        new Error(\"Worker was destroyed during onPassword callback\")\n      );\n    }\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    // Allow `AnnotationStorage`-related clean-up when destroying the document.\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n\n      if (this._networkStream) {\n        this._networkStream.cancelAllRequests(\n          new AbortException(\"Worker was terminated.\")\n        );\n      }\n\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = new PromiseCapability();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        // If stream or range are disabled, it's our only way to report\n        // loading progress.\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n\n      return headersCapability.promise;\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              value instanceof ArrayBuffer,\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this._passwordCapability = new PromiseCapability();\n\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this._passwordCapability.reject(password);\n          } else {\n            this._passwordCapability.resolve({ password });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this._passwordCapability.reject(ex);\n        }\n      } else {\n        this._passwordCapability.reject(\n          new PasswordException(exception.message, exception.code)\n        );\n      }\n      return this._passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (this.commonObjs.has(id)) {\n        return;\n      }\n\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          const inspectFont =\n            params.pdfBug && globalThis.FontInspector?.enabled\n              ? (font, url) => globalThis.FontInspector.fontAdded(font, url)\n              : null;\n          const font = new FontFaceObject(exportedData, {\n            isEvalSupported: params.isEvalSupported,\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            inspectFont,\n          });\n\n          this.fontLoader\n            .bind(font)\n            .catch(reason => {\n              return messageHandler.sendWithPromise(\"FontFallback\", { id });\n            })\n            .finally(() => {\n              if (!params.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return;\n      }\n\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n\n          // Heuristic that will allow us not to store large data.\n          if (imageData) {\n            let length;\n            if (imageData.bitmap) {\n              const { width, height } = imageData;\n              length = width * height * 4;\n            } else {\n              length = imageData.data?.length || 0;\n            }\n\n            if (length > MAX_IMAGE_SIZE_TO_CACHE) {\n              pageProxy._maybeCleanupAfterRender = true;\n            }\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(\n          new Error(\n            \"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(\n          new Error(\n            \"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\n        \"saveDocument called while `annotationStorage` is empty, \" +\n          \"please use the getData-method instead.\"\n      );\n    }\n    return this.messageHandler\n      .sendWithPromise(\"SaveDocument\", {\n        isPureXfa: !!this._htmlForXfa,\n        numPages: this._numPages,\n        annotationStorage: this.annotationStorage.serializable,\n        filename: this._fullReader?.filename ?? null,\n      })\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.pdfBug\n        );\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    if (\n      typeof ref !== \"object\" ||\n      ref === null ||\n      !Number.isInteger(ref.num) ||\n      ref.num < 0 ||\n      !Number.isInteger(ref.gen) ||\n      ref.gen < 0\n    ) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getJavaScript() {\n    return this.messageHandler.sendWithPromise(\"GetJavaScript\", null);\n  }\n\n  getDocJSActions() {\n    return this.messageHandler.sendWithPromise(\"GetDocJSActions\", null);\n  }\n\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex,\n    });\n  }\n\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex,\n    });\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig() {\n    return this.messageHandler\n      .sendWithPromise(\"GetOptionalContentConfig\", null)\n      .then(results => {\n        return new OptionalContentConfig(results);\n      });\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(name, null)\n      .then(results => {\n        return {\n          info: results[0],\n          metadata: results[1] ? new Metadata(results[1]) : null,\n          contentDispositionFilename: this._fullReader?.filename ?? null,\n          contentLength: this._fullReader?.contentLength ?? null,\n        };\n      });\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return; // No need to manually clean-up when destruction has started.\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n\n      if (!cleanupSuccessful) {\n        throw new Error(\n          `startCleanup: Page ${page.pageNumber} is currently rendering.`\n        );\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(/* keepHCM = */ true);\n  }\n\n  get loadingParams() {\n    const { disableAutoFetch, enableXfa } = this._params;\n    return shadow(this, \"loadingParams\", {\n      disableAutoFetch,\n      enableXfa,\n    });\n  }\n}\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n */\nclass PDFObjects {\n  #objs = Object.create(null);\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   *\n   * @param {string} objId\n   * @returns {Object}\n   */\n  #ensureObj(objId) {\n    const obj = this.#objs[objId];\n    if (obj) {\n      return obj;\n    }\n    return (this.#objs[objId] = {\n      capability: new PromiseCapability(),\n      data: null,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   *\n   * @param {string} objId\n   * @param {function} [callback]\n   * @returns {any}\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.capability.promise.then(() => callback(obj.data));\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this.#objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj?.capability.settled) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  has(objId) {\n    const obj = this.#objs[objId];\n    return obj?.capability.settled || false;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   *\n   * @param {string} objId\n   * @param {any} [data]\n   */\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.capability.resolve();\n  }\n\n  clear() {\n    for (const objId in this.#objs) {\n      const { data } = this.#objs[objId];\n      data?.bitmap?.close(); // Release any `ImageBitmap` data.\n    }\n    this.#objs = Object.create(null);\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  #internalRenderTask = null;\n\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   *\n   * @param {number} [extraDelay]\n   */\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(/* error = */ null, extraDelay);\n  }\n\n  /**\n   * Whether form fields are rendered separately from the main operatorList.\n   * @type {boolean}\n   */\n  get separateAnnots() {\n    const { separateAnnots } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const { annotationCanvasMap } = this.#internalRenderTask;\n    return (\n      separateAnnots.form ||\n      (separateAnnots.canvas && annotationCanvasMap?.size > 0)\n    );\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = new PromiseCapability();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n\n  get completed() {\n    return this.capability.promise.catch(function () {\n      // Ignoring errors, since we only want to know when rendering is\n      // no longer pending.\n    });\n  }\n\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          \"Cannot use the same canvas during multiple render() operations. \" +\n            \"Use different canvas or ensure previous operations were \" +\n            \"cancelled or completed.\"\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, background } = this.params;\n\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      this.filterFactory,\n      { optionalContentConfig },\n      this.annotationCanvasMap,\n      this.pageColors\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n\n    if (this._canvas) {\n      InternalRenderTask.#canvasInUse.delete(this._canvas);\n    }\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          \"canvas\",\n          extraDelay\n        )\n    );\n  }\n\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing(this.pageColors);\n        if (this._canvas) {\n          InternalRenderTask.#canvasInUse.delete(this._canvas);\n        }\n        this.callback();\n      }\n    }\n  }\n}\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  build,\n  DefaultCanvasFactory,\n  DefaultCMapReaderFactory,\n  DefaultFilterFactory,\n  DefaultStandardFontDataFactory,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFDocumentLoadingTask,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  PDFWorker,\n  PDFWorkerUtil,\n  RenderTask,\n  version,\n};\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap, unreachable } from \"../shared/util.js\";\nimport { AnnotationEditor } from \"./editor/editor.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  #modified = false;\n\n  #storage = new Map();\n\n  constructor() {\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable effects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n\n  /**\n   * Get the value for a given key if it exists, or return the default value.\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n\n    return Object.assign(defaultValue, value);\n  }\n\n  /**\n   * Get the value for a given key.\n   * @param {string} key\n   * @returns {Object}\n   */\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n\n  /**\n   * Remove a value from the storage.\n   * @param {string} key\n   */\n  remove(key) {\n    this.#storage.delete(key);\n\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n\n  /**\n   * Set the value for a given key\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n\n    if (\n      value instanceof AnnotationEditor &&\n      typeof this.onAnnotationEditor === \"function\"\n    ) {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n\n  /**\n   * Check if the storage contains the given key.\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return this.#storage.has(key);\n  }\n\n  /**\n   * @returns {Object | null}\n   */\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n\n  /**\n   * @param {Object} obj\n   */\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n\n  get size() {\n    return this.#storage.size;\n  }\n\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return null;\n    }\n    const clone = new Map();\n\n    for (const [key, val] of this.#storage) {\n      const serialized =\n        val instanceof AnnotationEditor ? val.serialize() : val;\n      if (serialized) {\n        clone.set(key, serialized);\n      }\n    }\n    return clone;\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  static getHash(map) {\n    if (!map) {\n      return \"\";\n    }\n    const hash = new MurmurHash3_64();\n\n    for (const [key, val] of map) {\n      hash.update(`${key}:${JSON.stringify(val)}`);\n    }\n    return hash.hexdigest();\n  }\n}\n\n/**\n * A special `AnnotationStorage` for use during printing, where the serializable\n * data is *frozen* upon initialization, to prevent scripting from modifying its\n * contents. (Necessary since printing is triggered synchronously in browsers.)\n */\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable = null;\n\n  constructor(parent) {\n    super();\n    // Create a *copy* of the data, since Objects are passed by reference in JS.\n    this.#serializable = structuredClone(parent.serializable);\n  }\n\n  /**\n   * @returns {PrintAnnotationStorage}\n   */\n  // eslint-disable-next-line getter-return\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    return this.#serializable;\n  }\n}\n\nexport { AnnotationStorage, PrintAnnotationStorage };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n\nimport { bindEvents, ColorManager } from \"./tools.js\";\nimport { FeatureTest, shadow, unreachable } from \"../../shared/util.js\";\n\n/**\n * @typedef {Object} AnnotationEditorParameters\n * @property {AnnotationEditorUIManager} uiManager - the global manager\n * @property {AnnotationEditorLayer} parent - the layer containing this editor\n * @property {string} id - editor id\n * @property {number} x - x-coordinate\n * @property {number} y - y-coordinate\n */\n\n/**\n * Base class for editors.\n */\nclass AnnotationEditor {\n  #boundFocusin = this.focusin.bind(this);\n\n  #boundFocusout = this.focusout.bind(this);\n\n  #hasBeenSelected = false;\n\n  #isEditing = false;\n\n  #isInEditMode = false;\n\n  _uiManager = null;\n\n  #zIndex = AnnotationEditor._zIndex++;\n\n  static _colorManager = new ColorManager();\n\n  static _zIndex = 1;\n\n  /**\n   * @param {AnnotationEditorParameters} parameters\n   */\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n\n    const {\n      rotation,\n      rawDims: { pageWidth, pageHeight, pageX, pageY },\n    } = this.parent.viewport;\n\n    this.rotation = rotation;\n    this.pageRotation =\n      (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n\n    this.isAttachedToDOM = false;\n  }\n\n  static get _defaultLineColor() {\n    return shadow(\n      this,\n      \"_defaultLineColor\",\n      this._colorManager.getHexCode(\"CanvasText\")\n    );\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n\n  /**\n   * This editor will be behind the others.\n   */\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n\n  /**\n   * This editor will be in the foreground.\n   */\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    }\n    this.parent = parent;\n  }\n\n  /**\n   * onfocus callback.\n   */\n  focusin(event) {\n    if (!this.#hasBeenSelected) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenSelected = false;\n    }\n  }\n\n  /**\n   * onblur callback.\n   * @param {FocusEvent} event\n   */\n  focusout(event) {\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n\n    // In case of focusout, the relatedTarget is the element which\n    // is grabbing the focus.\n    // So if the related target is an element under the div for this\n    // editor, then the editor isn't unactive.\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n\n  /**\n   * Commit the data contained in this editor.\n   */\n  commit() {\n    this.addToAnnotationStorage();\n  }\n\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n\n  /**\n   * We use drag-and-drop in order to move an editor on a page.\n   * @param {DragEvent} event\n   */\n  dragstart(event) {\n    const rect = this.parent.div.getBoundingClientRect();\n    this.startX = event.clientX - rect.x;\n    this.startY = event.clientY - rect.y;\n    event.dataTransfer.setData(\"text/plain\", this.id);\n    event.dataTransfer.effectAllowed = \"move\";\n  }\n\n  /**\n   * Set the editor position within its parent.\n   * @param {number} x\n   * @param {number} y\n   * @param {number} tx - x-translation in screen coordinates.\n   * @param {number} ty - y-translation in screen coordinates.\n   */\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n\n    this.div.style.left = `${100 * this.x}%`;\n    this.div.style.top = `${100 * this.y}%`;\n  }\n\n  /**\n   * Translate the editor position within its parent.\n   * @param {number} x - x-translation in screen coordinates.\n   * @param {number} y - y-translation in screen coordinates.\n   */\n  translate(x, y) {\n    const [width, height] = this.parentDimensions;\n    [x, y] = this.screenToPageTranslation(x, y);\n\n    this.x += x / width;\n    this.y += y / height;\n\n    this.div.style.left = `${100 * this.x}%`;\n    this.div.style.top = `${100 * this.y}%`;\n  }\n\n  /**\n   * Convert a screen translation into a page one.\n   * @param {number} x\n   * @param {number} y\n   */\n  screenToPageTranslation(x, y) {\n    switch (this.parentRotation) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n\n  get parentDimensions() {\n    const { realScale } = this._uiManager.viewParameters;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return [pageWidth * realScale, pageHeight * realScale];\n  }\n\n  /**\n   * Set the dimensions of this editor.\n   * @param {number} width\n   * @param {number} height\n   */\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${(100 * width) / parentWidth}%`;\n    this.div.style.height = `${(100 * height) / parentHeight}%`;\n  }\n\n  fixDims() {\n    const { style } = this.div;\n    const { height, width } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width)) / parentWidth}%`;\n    }\n    if (!heightPercent) {\n      style.height = `${(100 * parseFloat(height)) / parentHeight}%`;\n    }\n  }\n\n  /**\n   * Get the translation used to position this editor when it's created.\n   * @returns {Array<number>}\n   */\n  getInitialTranslation() {\n    return [0, 0];\n  }\n\n  /**\n   * Render this editor in a div.\n   * @returns {HTMLDivElement}\n   */\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.setAttribute(\"tabIndex\", 0);\n\n    this.setInForeground();\n\n    this.div.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div.addEventListener(\"focusout\", this.#boundFocusout);\n\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n\n    bindEvents(this, this.div, [\"dragstart\", \"pointerdown\"]);\n\n    return this.div;\n  }\n\n  /**\n   * Onpointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Avoid to focus this editor because of a non-left click.\n      event.preventDefault();\n      return;\n    }\n\n    if (\n      (event.ctrlKey && !isMac) ||\n      event.shiftKey ||\n      (event.metaKey && isMac)\n    ) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n\n    this.#hasBeenSelected = true;\n  }\n\n  getRect(tx, ty) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n\n    switch (this.rotation) {\n      case 0:\n        return [\n          x + shiftX + pageX,\n          pageHeight - y - shiftY - height + pageY,\n          x + shiftX + width + pageX,\n          pageHeight - y - shiftY + pageY,\n        ];\n      case 90:\n        return [\n          x + shiftY + pageX,\n          pageHeight - y + shiftX + pageY,\n          x + shiftY + height + pageX,\n          pageHeight - y + shiftX + width + pageY,\n        ];\n      case 180:\n        return [\n          x - shiftX - width + pageX,\n          pageHeight - y + shiftY + pageY,\n          x - shiftX + pageX,\n          pageHeight - y + shiftY + height + pageY,\n        ];\n      case 270:\n        return [\n          x - shiftY - height + pageX,\n          pageHeight - y - shiftX - width + pageY,\n          x - shiftY + pageX,\n          pageHeight - y - shiftX + pageY,\n        ];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n\n    const width = x2 - x1;\n    const height = y2 - y1;\n\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n\n  /**\n   * Executed once this editor has been rendered.\n   */\n  onceAdded() {}\n\n  /**\n   * Check if the editor contains something.\n   * @returns {boolean}\n   */\n  isEmpty() {\n    return false;\n  }\n\n  /**\n   * Enable edit mode.\n   */\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n\n  /**\n   * Disable edit mode.\n   */\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n\n  /**\n   * Check if the editor is edited.\n   * @returns {boolean}\n   */\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n\n  /**\n   * If it returns true, then this editor handle the keyboard\n   * events itself.\n   * @returns {boolean}\n   */\n  shouldGetKeyboardEvents() {\n    return false;\n  }\n\n  /**\n   * Check if this editor needs to be rebuilt or not.\n   * @returns {boolean}\n   */\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n\n  /**\n   * Rebuild the editor in case it has been removed on undo.\n   *\n   * To implement in subclasses.\n   */\n  rebuild() {\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin);\n  }\n\n  /**\n   * Serialize the editor.\n   * The result of the serialization will be used to construct a\n   * new annotation to add to the pdf document.\n   *\n   * To implement in subclasses.\n   */\n  serialize() {\n    unreachable(\"An editor must be serializable\");\n  }\n\n  /**\n   * Deserialize the editor.\n   * The result of the deserialization is a new editor.\n   *\n   * @param {Object} data\n   * @param {AnnotationEditorLayer} parent\n   * @param {AnnotationEditorUIManager} uiManager\n   * @returns {AnnotationEditor}\n   */\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n    });\n    editor.rotation = data.rotation;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(\n      data.rect,\n      pageHeight\n    );\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n\n    return editor;\n  }\n\n  /**\n   * Remove this editor.\n   * It's used on ctrl+backspace action.\n   */\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n\n    if (!this.isEmpty()) {\n      // The editor is removed but it can be back at some point thanks to\n      // undo/redo so we must commit it before.\n      this.commit();\n    }\n    this.parent.remove(this);\n  }\n\n  /**\n   * Select this editor.\n   */\n  select() {\n    this.div?.classList.add(\"selectedEditor\");\n  }\n\n  /**\n   * Unselect this editor.\n   */\n  unselect() {\n    this.div?.classList.remove(\"selectedEditor\");\n  }\n\n  /**\n   * Update some parameters which have been changed through the UI.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {}\n\n  /**\n   * When the user disables the editing mode some editors can change some of\n   * their properties.\n   */\n  disableEditing() {}\n\n  /**\n   * When the user enables the editing mode some editors can change some of\n   * their properties.\n   */\n  enableEditing() {}\n\n  /**\n   * Get some properties to update in the UI.\n   * @returns {Object}\n   */\n  get propertiesToUpdate() {\n    return {};\n  }\n\n  /**\n   * Get the div which really contains the displayed content.\n   */\n  get contentDiv() {\n    return this.div;\n  }\n\n  /**\n   * If true then the editor is currently edited.\n   * @type {boolean}\n   */\n  get isEditing() {\n    return this.#isEditing;\n  }\n\n  /**\n   * When set to true, it means that this editor is currently edited.\n   * @param {boolean} value\n   */\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n}\n\nexport { AnnotationEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./editor.js\").AnnotationEditor} AnnotationEditor */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorPrefix,\n  AnnotationEditorType,\n  FeatureTest,\n  shadow,\n  Util,\n  warn,\n} from \"../../shared/util.js\";\nimport { getColorValues, getRGB, PixelsPerInch } from \"../display_utils.js\";\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\n\n/**\n * Convert a number between 0 and 100 into an hex number between 0 and 255.\n * @param {number} opacity\n * @return {string}\n */\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity)))\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\n/**\n * Class to create some unique ids for the different editors.\n */\nclass IdManager {\n  #id = 0;\n\n  /**\n   * Get a unique id.\n   * @returns {string}\n   */\n  getId() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\n\n/**\n * Class to handle undo/redo.\n * Commands are just saved in a buffer.\n * If we hit some memory issues we could likely use a circular buffer.\n * It has to be used as a singleton.\n */\nclass CommandManager {\n  #commands = [];\n\n  #locked = false;\n\n  #maxSize;\n\n  #position = -1;\n\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n\n  /**\n   * @typedef {Object} addOptions\n   * @property {function} cmd\n   * @property {function} undo\n   * @property {boolean} mustExec\n   * @property {number} type\n   * @property {boolean} overwriteIfSameType\n   * @property {boolean} keepUndo\n   */\n\n  /**\n   * Add a new couple of commands to be used in case of redo/undo.\n   * @param {addOptions} options\n   */\n  add({\n    cmd,\n    undo,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false,\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n\n    if (this.#locked) {\n      return;\n    }\n\n    const save = { cmd, undo, type };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        // All the commands have been undone and then a new one is added\n        // hence we clear the queue.\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      // For example when we change a color we don't want to\n      // be able to undo all the steps, hence we only want to\n      // keep the last undoable action in this sequence of actions.\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n\n    this.#commands.push(save);\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    if (this.#position === -1) {\n      // Nothing to undo.\n      return;\n    }\n\n    // Avoid to insert something during the undo execution.\n    this.#locked = true;\n    this.#commands[this.#position].undo();\n    this.#locked = false;\n\n    this.#position -= 1;\n  }\n\n  /**\n   * Redo the last command.\n   */\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n\n      // Avoid to insert something during the redo execution.\n      this.#locked = true;\n      this.#commands[this.#position].cmd();\n      this.#locked = false;\n    }\n  }\n\n  /**\n   * Check if there is something to undo.\n   * @returns {boolean}\n   */\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n\n  /**\n   * Check if there is something to redo.\n   * @returns {boolean}\n   */\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n\n  destroy() {\n    this.#commands = null;\n  }\n}\n\n/**\n * Class to handle the different keyboards shortcuts we can have on mac or\n * non-mac OSes.\n */\nclass KeyboardManager {\n  /**\n   * Create a new keyboard manager class.\n   * @param {Array<Array>} callbacks - an array containing an array of shortcuts\n   * and a callback to call.\n   * A shortcut is a string like `ctrl+c` or `mac+ctrl+c` for mac OS.\n   */\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n\n    const { isMac } = FeatureTest.platform;\n    for (const [keys, callback] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), callback);\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, callback);\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n\n  /**\n   * Serialize an event into a string in order to match a\n   * potential key for a callback.\n   * @param {KeyboardEvent} event\n   * @returns {string}\n   */\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n\n    return str;\n  }\n\n  /**\n   * Execute a callback, if any, for a given keyboard event.\n   * The self is used as `this` in the callback.\n   * @param {Object} self.\n   * @param {KeyboardEvent} event\n   * @returns\n   */\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const callback = this.callbacks.get(this.#serialize(event));\n    if (!callback) {\n      return;\n    }\n    callback.bind(self)();\n    event.stopPropagation();\n    event.preventDefault();\n  }\n}\n\nclass ColorManager {\n  static _colorsMapping = new Map([\n    [\"CanvasText\", [0, 0, 0]],\n    [\"Canvas\", [255, 255, 255]],\n  ]);\n\n  get _colors() {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"LIB\") &&\n      typeof document === \"undefined\"\n    ) {\n      return shadow(this, \"_colors\", ColorManager._colorsMapping);\n    }\n\n    const colors = new Map([\n      [\"CanvasText\", null],\n      [\"Canvas\", null],\n    ]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n\n  /**\n   * In High Contrast Mode, the color on the screen is not always the\n   * real color used in the pdf.\n   * For example in some cases white can appear to be black but when saving\n   * we want to have white.\n   * @param {string} color\n   * @returns {Array<number>}\n   */\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n\n  /**\n   * An input element must have its color value as a hex string\n   * and not as color name.\n   * So this function converts a name into an hex string.\n   * @param {string} name\n   * @returns {string}\n   */\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\n\n/**\n * A pdf has several pages and each of them when it will rendered\n * will have an AnnotationEditorLayer which will contain the some\n * new Annotations associated to an editor in order to modify them.\n *\n * This class is used to manage all the different layers, editors and\n * some action like copy/paste, undo/redo, ...\n */\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n\n  #allEditors = new Map();\n\n  #allLayers = new Map();\n\n  #annotationStorage = null;\n\n  #commandManager = new CommandManager();\n\n  #currentPageIndex = 0;\n\n  #editorTypes = null;\n\n  #editorsToRescale = new Set();\n\n  #eventBus = null;\n\n  #idManager = new IdManager();\n\n  #isEnabled = false;\n\n  #mode = AnnotationEditorType.NONE;\n\n  #selectedEditors = new Set();\n\n  #boundCopy = this.copy.bind(this);\n\n  #boundCut = this.cut.bind(this);\n\n  #boundPaste = this.paste.bind(this);\n\n  #boundKeydown = this.keydown.bind(this);\n\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n  };\n\n  #container = null;\n\n  static _keyboardManager = new KeyboardManager([\n    [[\"ctrl+a\", \"mac+meta+a\"], AnnotationEditorUIManager.prototype.selectAll],\n    [[\"ctrl+z\", \"mac+meta+z\"], AnnotationEditorUIManager.prototype.undo],\n    [\n      [\"ctrl+y\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"],\n      AnnotationEditorUIManager.prototype.redo,\n    ],\n    [\n      [\n        \"Backspace\",\n        \"alt+Backspace\",\n        \"ctrl+Backspace\",\n        \"shift+Backspace\",\n        \"mac+Backspace\",\n        \"mac+alt+Backspace\",\n        \"mac+ctrl+Backspace\",\n        \"Delete\",\n        \"ctrl+Delete\",\n        \"shift+Delete\",\n      ],\n      AnnotationEditorUIManager.prototype.delete,\n    ],\n    [[\"Escape\", \"mac+Escape\"], AnnotationEditorUIManager.prototype.unselectAll],\n  ]);\n\n  constructor(container, eventBus, annotationStorage) {\n    this.#container = container;\n    this.#eventBus = eventBus;\n    this.#eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this.#eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this.#eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this.#eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#annotationStorage = annotationStorage;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0,\n    };\n  }\n\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this.#eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this.#eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this.#eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n  }\n\n  onPageChanging({ pageNumber }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n\n  focusMainContainer() {\n    this.#container.focus();\n  }\n\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n\n  onScaleChanging({ scale }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n\n  onRotationChanging({ pagesRotation }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n\n  /**\n   * Add an editor in the annotation storage.\n   * @param {AnnotationEditor} editor\n   */\n  addToAnnotationStorage(editor) {\n    if (\n      !editor.isEmpty() &&\n      this.#annotationStorage &&\n      !this.#annotationStorage.has(editor.id)\n    ) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n\n  #addKeyboardManager() {\n    // The keyboard events are caught at the container level in order to be able\n    // to execute some callbacks even if the current page doesn't have focus.\n    this.#container.addEventListener(\"keydown\", this.#boundKeydown);\n  }\n\n  #removeKeyboardManager() {\n    this.#container.removeEventListener(\"keydown\", this.#boundKeydown);\n  }\n\n  #addCopyPasteListeners() {\n    document.addEventListener(\"copy\", this.#boundCopy);\n    document.addEventListener(\"cut\", this.#boundCut);\n    document.addEventListener(\"paste\", this.#boundPaste);\n  }\n\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n\n  /**\n   * Copy callback.\n   * @param {ClipboardEvent} event\n   */\n  copy(event) {\n    event.preventDefault();\n\n    if (this.#activeEditor) {\n      // An editor is being edited so just commit it.\n      this.#activeEditor.commitOrRemove();\n    }\n\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      if (!editor.isEmpty()) {\n        editors.push(editor.serialize());\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n\n  /**\n   * Cut callback.\n   * @param {ClipboardEvent} event\n   */\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n\n  /**\n   * Paste callback.\n   * @param {ClipboardEvent} event\n   */\n  paste(event) {\n    event.preventDefault();\n\n    let data = event.clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n\n    if (!Array.isArray(data)) {\n      return;\n    }\n\n    this.unselectAll();\n    const layer = this.#allLayers.get(this.#currentPageIndex);\n\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({ cmd, undo, mustExec: true });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n\n  /**\n   * Keydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (!this.getActive()?.shouldGetKeyboardEvents()) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n\n  /**\n   * Execute an action for a given name.\n   * For example, the user can click on the \"Undo\" entry in the context menu\n   * and it'll trigger the undo action.\n   * @param {Object} details\n   */\n  onEditingAction(details) {\n    if ([\"undo\", \"redo\", \"delete\", \"selectAll\"].includes(details.name)) {\n      this[details.name]();\n    }\n  }\n\n  /**\n   * Update the different possible states of this manager, e.g. is there\n   * something to undo, redo, ...\n   * @param {Object} details\n   */\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(\n      ([key, value]) => this.#previousStates[key] !== value\n    );\n\n    if (hasChanged) {\n      this.#eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details),\n      });\n    }\n  }\n\n  #dispatchUpdateUI(details) {\n    this.#eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details,\n    });\n  }\n\n  /**\n   * Set the editing state.\n   * It can be useful to temporarily disable it when the user is editing a\n   * FreeText annotation.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addKeyboardManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false,\n      });\n    } else {\n      this.#removeKeyboardManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false,\n      });\n    }\n  }\n\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n\n  /**\n   * Get an id.\n   * @returns {string}\n   */\n  getId() {\n    return this.#idManager.getId();\n  }\n\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n\n  /**\n   * Add a new layer for a page which will contains the editors.\n   * @param {AnnotationEditorLayer} layer\n   */\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n\n  /**\n   * Remove a layer.\n   * @param {AnnotationEditorLayer} layer\n   */\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n\n  /**\n   * Change the editor mode (None, FreeText, Ink, ...)\n   * @param {number} mode\n   */\n  updateMode(mode) {\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n    } else {\n      this.setEditingState(true);\n      this.#enableAll();\n      for (const layer of this.#allLayers.values()) {\n        layer.updateMode(mode);\n      }\n    }\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   * @returns {undefined}\n   */\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this.#eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode,\n    });\n  }\n\n  /**\n   * Update a parameter in the current editor or globally.\n   * @param {number} type\n   * @param {*} value\n   */\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n\n  /**\n   * Enable all the layers.\n   */\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n    }\n  }\n\n  /**\n   * Disable all the layers.\n   */\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n    }\n  }\n\n  /**\n   * Get all the editors belonging to a give page.\n   * @param {number} pageIndex\n   * @returns {Array<AnnotationEditor>}\n   */\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n\n  /**\n   * Get an editor with the given id.\n   * @param {string} id\n   * @returns {AnnotationEditor}\n   */\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n\n  /**\n   * Add a new editor.\n   * @param {AnnotationEditor} editor\n   */\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  removeEditor(editor) {\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    this.#annotationStorage?.remove(editor.id);\n  }\n\n  /**\n   * Add an editor to the layer it belongs to or add it to the global map.\n   * @param {AnnotationEditor} editor\n   */\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n    }\n  }\n\n  /**\n   * Set the given editor as the active one.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection,\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true,\n    });\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection,\n    });\n  }\n\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n\n  /**\n   * Undo the last command.\n   */\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Redo the last undoed command.\n   */\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  /**\n   * Add a command to execute (cmd) and another one to undo it.\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty(),\n    });\n  }\n\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Delete the current editor or all.\n   */\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  commitOrRemove() {\n    // An editor is being edited so just commit it.\n    this.#activeEditor?.commitOrRemove();\n  }\n\n  /**\n   * Select the editors.\n   * @param {Array<AnnotationEditor>} editors\n   */\n  #selectEditors(editors) {\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({ hasSelectedEditor: true });\n  }\n\n  /**\n   * Select all the editors.\n   */\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n\n  /**\n   * Unselect all the selected editors.\n   */\n  unselectAll() {\n    if (this.#activeEditor) {\n      // An editor is being edited so just commit it.\n      this.#activeEditor.commitOrRemove();\n      return;\n    }\n\n    if (this.#selectedEditors.size === 0) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false,\n    });\n  }\n\n  /**\n   * Is the current editor the one passed as argument?\n   * @param {AnnotationEditor} editor\n   * @returns\n   */\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n\n  /**\n   * Get the current active editor.\n   * @returns {AnnotationEditor|null}\n   */\n  getActive() {\n    return this.#activeEditor;\n  }\n\n  /**\n   * Get the current editor mode.\n   * @returns {number}\n   */\n  getMode() {\n    return this.#mode;\n  }\n}\n\nexport {\n  AnnotationEditorUIManager,\n  bindEvents,\n  ColorManager,\n  CommandManager,\n  KeyboardManager,\n  opacityToHex,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n} from \"./base_factory.js\";\nimport {\n  BaseException,\n  shadow,\n  stringToBytes,\n  Util,\n  warn,\n} from \"../shared/util.js\";\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\n\nclass PixelsPerInch {\n  static CSS = 96.0;\n\n  static PDF = 72.0;\n\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\n\n/**\n * FilterFactory aims to create some SVG filters we can use when drawing an\n * image (or whatever) on a canvas.\n * Filters aren't applied with ctx.putImageData because it just overwrites the\n * underlying pixels.\n * With these filters, it's possible for example to apply some transfer maps on\n * an image without the need to apply them on the pixel arrays: the renderer\n * does the magic for us.\n */\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n\n  #_defs;\n\n  #docId;\n\n  #document;\n\n  #hcmFilter;\n\n  #hcmKey;\n\n  #hcmUrl;\n\n  #id = 0;\n\n  constructor({ docId, ownerDocument = globalThis.document } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n\n  get #cache() {\n    return (this.#_cache ||= new Map());\n  }\n\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const { style } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n\n    // When a page is zoomed the page is re-drawn but the maps are likely\n    // the same.\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n\n    let tableR, tableG, tableB, key;\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      key = tableR = tableG = tableB = buffer.join(\",\");\n    } else {\n      const [mapR, mapG, mapB] = maps;\n      const bufferR = new Array(256);\n      const bufferG = new Array(256);\n      const bufferB = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        bufferR[i] = mapR[i] / 255;\n        bufferG[i] = mapG[i] / 255;\n        bufferB[i] = mapB[i] / 255;\n      }\n      tableR = bufferR.join(\",\");\n      tableG = bufferG.join(\",\");\n      tableB = bufferB.join(\",\");\n      key = `${tableR}${tableG}${tableB}`;\n    }\n\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n\n    // We create a SVG filter: feComponentTransferElement\n    //  https://www.w3.org/TR/SVG11/filters.html#feComponentTransferElement\n\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\", SVG_NS);\n    filter.setAttribute(\"id\", id);\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    const feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", tableR);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", tableG);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", tableB);\n\n    this.#defs.append(filter);\n\n    return url;\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    if (this.#hcmKey === key) {\n      return this.#hcmUrl;\n    }\n\n    this.#hcmKey = key;\n    this.#hcmUrl = \"none\";\n    this.#hcmFilter?.remove();\n\n    if (!fgColor || !bgColor) {\n      return this.#hcmUrl;\n    }\n\n    this.#defs.style.color = fgColor;\n    fgColor = getComputedStyle(this.#defs).getPropertyValue(\"color\");\n    const fgRGB = getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    this.#defs.style.color = bgColor;\n    bgColor = getComputedStyle(this.#defs).getPropertyValue(\"color\");\n    const bgRGB = getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n\n    if (\n      (fgColor === \"#000000\" && bgColor === \"#ffffff\") ||\n      fgColor === bgColor\n    ) {\n      return this.#hcmUrl;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_Colors_and_Luminance\n    //\n    // Relative luminance:\n    // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n    //\n    // We compute the rounded luminance of the default background color.\n    // Then for every color in the pdf, if its rounded luminance is the\n    // same as the background one then it's replaced by the new\n    // background color else by the foreground one.\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = (this.#hcmFilter = this.#document.createElementNS(\n      SVG_NS,\n      \"filter\",\n      SVG_NS\n    ));\n    filter.setAttribute(\"id\", id);\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    let feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", table);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", table);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", table);\n\n    const feColorMatrix = this.#document.createElementNS(\n      SVG_NS,\n      \"feColorMatrix\"\n    );\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\n      \"values\",\n      \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\"\n    );\n    filter.append(feColorMatrix);\n\n    feComponentTransfer = this.#document.createElementNS(\n      SVG_NS,\n      \"feComponentTransfer\"\n    );\n    filter.append(feComponentTransfer);\n\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + (i / n) * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", getSteps(0, 5));\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", getSteps(1, 5));\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", getSteps(2, 5));\n\n    this.#defs.append(filter);\n\n    this.#hcmUrl = `url(#${id})`;\n    return this.#hcmUrl;\n  }\n\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmUrl) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\nasync function fetchData(url, asTypedArray = false) {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    isValidFetchUrl(url, document.baseURI)\n  ) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return asTypedArray\n      ? new Uint8Array(await response.arrayBuffer())\n      : stringToBytes(await response.text());\n  }\n\n  // The Fetch API is not supported.\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, /* asTypedArray = */ true);\n\n    if (asTypedArray) {\n      request.responseType = \"arraybuffer\";\n    }\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        let data;\n        if (asTypedArray && request.response) {\n          data = new Uint8Array(request.response);\n        } else if (!asTypedArray && request.responseText) {\n          data = stringToBytes(request.responseText);\n        }\n        if (data) {\n          resolve(data);\n          return;\n        }\n      }\n      reject(new Error(request.statusText));\n    };\n\n    request.send(null);\n  });\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url, /* asTypedArray = */ this.isCompressed).then(data => {\n      return { cMapData: data, compressionType };\n    });\n  }\n}\n\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url, /* asTypedArray = */ true);\n  }\n}\n\nclass DOMSVGFactory extends BaseSVGFactory {\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * The original, un-scaled, viewport dimensions.\n   * @type {Object}\n   */\n  get rawDims() {\n    const { viewBox } = this;\n    return shadow(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1],\n    });\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Array} Array containing `x`- and `y`-coordinates of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, type, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.type = type;\n    this.extraDelay = extraDelay;\n  }\n}\n\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\n\n/**\n * Gets the filename from a given URL.\n * @param {string} url\n * @param {boolean} [onlyStripPath]\n * @returns {string}\n */\nfunction getFilenameFromUrl(url, onlyStripPath = false) {\n  if (!onlyStripPath) {\n    [url] = url.split(/[#?]/, 1);\n  }\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  //              SCHEME        HOST        1.PATH  2.QUERY   3.REF\n  // Pattern to get last matching NAME.pdf\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) ||\n    reFilename.exec(splitURI[2]) ||\n    reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      // URL-encoded %2Fpath%2Fto%2Ffile.pdf should be file.pdf\n      try {\n        suggestedFilename = reFilename.exec(\n          decodeURIComponent(suggestedFilename)\n        )[0];\n      } catch (ex) {\n        // Possible (extremely rare) errors:\n        // URIError \"Malformed URI\", e.g. for \"%AA.pdf\"\n        // TypeError \"null has no properties\", e.g. for \"%2F.pdf\"\n      }\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\n\nclass StatTimer {\n  started = Object.create(null);\n\n  times = [];\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const { name } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const { name, start, end } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    // The Fetch API only supports the http/https protocols, and not file/ftp.\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch (ex) {\n    return false; // `new URL()` will throw on incorrect data.\n  }\n}\n\n/**\n * @param {string} src\n * @param {boolean} [removeScriptElement]\n * @returns {Promise<void>}\n */\nfunction loadScript(src, removeScriptElement = false) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n\n    script.onload = function (evt) {\n      if (removeScriptElement) {\n        script.remove();\n      }\n      resolve(evt);\n    };\n    script.onerror = function () {\n      reject(new Error(`Cannot load script at: ${script.src}`));\n    };\n    (document.head || document.documentElement).append(script);\n  });\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nlet pdfDateStringRegex;\n\nclass PDFDateString {\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    pdfDateStringRegex ||= new RegExp(\n      \"^D:\" + // Prefix (required)\n        \"(\\\\d{4})\" + // Year (required)\n        \"(\\\\d{2})?\" + // Month (optional)\n        \"(\\\\d{2})?\" + // Day (optional)\n        \"(\\\\d{2})?\" + // Hour (optional)\n        \"(\\\\d{2})?\" + // Minute (optional)\n        \"(\\\\d{2})?\" + // Second (optional)\n        \"([Z|+|-])?\" + // Universal time relation (optional)\n        \"(\\\\d{2})?\" + // Offset hour (optional)\n        \"'?\" + // Splitting apostrophe (optional)\n        \"(\\\\d{2})?\" + // Offset minute (optional)\n        \"'?\" // Trailing apostrophe (optional)\n    );\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\n/**\n * NOTE: This is (mostly) intended to support printing of XFA forms.\n */\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\n\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [\n      (colorRGB & 0xff0000) >> 16,\n      (colorRGB & 0x00ff00) >> 8,\n      colorRGB & 0x0000ff,\n    ];\n  }\n\n  if (color.startsWith(\"rgb(\")) {\n    // getComputedStyle(...).color returns a `rgb(R, G, B)` color.\n    return color\n      .slice(/* \"rgb(\".length */ 4, -1) // Strip out \"rgb(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x));\n  }\n\n  if (color.startsWith(\"rgba(\")) {\n    return color\n      .slice(/* \"rgba(\".length */ 5, -1) // Strip out \"rgba(\" and \")\".\n      .split(\",\")\n      .map(x => parseInt(x))\n      .slice(0, 3);\n  }\n\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\n\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\n\nfunction getCurrentTransform(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\n\nfunction getCurrentTransformInverse(ctx) {\n  const { a, b, c, d, e, f } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\n\n/**\n * @param {HTMLDivElement} div\n * @param {PageViewport} viewport\n * @param {boolean} mustFlip\n * @param {boolean} mustRotate\n */\nfunction setLayerDimensions(\n  div,\n  viewport,\n  mustFlip = false,\n  mustRotate = true\n) {\n  if (viewport instanceof PageViewport) {\n    const { pageWidth, pageHeight } = viewport.rawDims;\n    const { style } = div;\n\n    // TODO: Investigate if it could be interesting to use the css round\n    // function (https://developer.mozilla.org/en-US/docs/Web/CSS/round):\n    // const widthStr =\n    //   `round(down, var(--scale-factor) * ${pageWidth}px, 1px)`;\n    // const heightStr =\n    //   `round(down, var(--scale-factor) * ${pageHeight}px, 1px)`;\n    const widthStr = `calc(var(--scale-factor) * ${pageWidth}px)`;\n    const heightStr = `calc(var(--scale-factor) * ${pageHeight}px)`;\n\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\nexport {\n  AnnotationPrefix,\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMFilterFactory,\n  DOMStandardFontDataFactory,\n  DOMSVGFactory,\n  getColorValues,\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getRGB,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  isValidFetchUrl,\n  loadScript,\n  PageViewport,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n  StatTimer,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CMapCompressionType, unreachable } from \"../shared/util.js\";\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n\n  addFilter(maps) {\n    return \"none\";\n  }\n\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n\n  destroy(keepHCM = false) {}\n}\n\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\"),\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = true }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.'\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(\n        `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n      );\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.'\n      );\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n\n    return svg;\n  }\n\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\nexport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n};\n","/* Copyright 2014 Opera Software ASA\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n *\n * Based on https://code.google.com/p/smhasher/wiki/MurmurHash3.\n * Hashes roughly 100 KB per millisecond on i7 3.4 GHz.\n */\n\nimport { isArrayBuffer } from \"./util.js\";\n\nconst SEED = 0xc3d2e1f0;\n// Workaround for missing math precision in JS.\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\n\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (isArrayBuffer(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\n        \"Wrong data format in MurmurHash3_64_update. \" +\n          \"Input must be a string or array.\"\n      );\n    }\n\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    // We don't care about endianness here.\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n\n    k1 = 0;\n\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      /* falls through */\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      /* falls through */\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        /* falls through */\n\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n\n    return (\n      (h1 >>> 0).toString(16).padStart(8, \"0\") +\n      (h2 >>> 0).toString(16).padStart(8, \"0\")\n    );\n  }\n}\n\nexport { MurmurHash3_64 };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  bytesToString,\n  FeatureTest,\n  shadow,\n  string32,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\n\nclass FontLoader {\n  #systemFonts = new Set();\n\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null, // For testing only.\n  }) {\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = new Set();\n    this.styleElement =\n      typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")\n        ? styleElement\n        : null;\n\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n      this.loadingRequests = [];\n      this.loadTestFontId = 0;\n    }\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async loadSystemFont(info) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(\n      !this.disableFontFace,\n      \"loadSystemFont shouldn't be called when `disableFontFace` is set.\"\n    );\n\n    if (this.isFontLoadingAPISupported) {\n      const { loadedName, src, style } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n      } catch {\n        warn(\n          `Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`\n        );\n\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n\n    unreachable(\n      \"Not implemented: loadSystemFont without the Font Loading API.\"\n    );\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || (font.missingFile && !font.systemFontInfo)) {\n      return;\n    }\n    font.attached = true;\n\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font.systemFontInfo);\n      return;\n    }\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n        throw new Error(\"Not implemented: async font loading\");\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      return shadow(\n        this,\n        \"isFontLoadingAPISupported\",\n        hasFonts && !this.styleElement\n      );\n    }\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n\n  get isSyncFontLoadingSupported() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n\n    let supported = false;\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) {\n      if (isNodeJS) {\n        // Node.js - we can pretend that sync font loading is supported.\n        supported = true;\n      } else if (\n        typeof navigator !== \"undefined\" &&\n        // User agent string sniffing is bad, but there is no reliable way to\n        // tell if the font is fully loaded and ready to be used with canvas.\n        /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)\n      ) {\n        // Firefox, from version 14, supports synchronous font loading.\n        supported = true;\n      }\n    }\n    return shadow(this, \"isSyncFontLoadingSupported\", supported);\n  }\n\n  _queueLoadingCallback(callback) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _queueLoadingCallback\");\n    }\n\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n\n      // Sending all completed requests in order of how they were queued.\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n\n    const { loadingRequests } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback,\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n\n  get _loadTestFont() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _loadTestFont\");\n    }\n\n    // This is a CFF font with 1 glyph for '.' that fills its entire width\n    // and height.\n    const testFont = atob(\n      \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n        \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n        \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n        \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n        \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n        \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n        \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n        \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n        \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n        \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n        \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n        \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n        \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n        \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n        \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n        \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n        \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n        \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n    );\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n\n  _prepareFontLoadEvent(font, request) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: _prepareFontLoadEvent\");\n    }\n\n    /** Hack begin */\n    // There's currently no event when a font has finished downloading so the\n    // following code is a dirty hack to 'guess' when a font is ready.\n    // It's assumed fonts are loaded in order, so add a known test font after\n    // the desired fonts and then test for the loading of that test font.\n\n    function int32(data, offset) {\n      return (\n        (data.charCodeAt(offset) << 24) |\n        (data.charCodeAt(offset + 1) << 16) |\n        (data.charCodeAt(offset + 2) << 8) |\n        (data.charCodeAt(offset + 3) & 0xff)\n      );\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n\n    // The temporary canvas is used to determine if fonts are loaded.\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n\n    let called = 0;\n    function isFontReady(name, callback) {\n      // With setTimeout clamping this gives the font ~100ms to load.\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    // Chromium seems to cache fonts based on a hash of the actual font data,\n    // so the font must be modified for each load test else it will appear to\n    // be loaded already.\n    // TODO: This could maybe be made faster by avoiding the btoa of the full\n    // font by splitting it in chunks before hand and padding the font id.\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n    data = spliceString(\n      data,\n      COMMENT_OFFSET,\n      loadTestFontId.length,\n      loadTestFontId\n    );\n    // CFF checksum is important for IE, adjusting it\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      // align to 4 bytes boundary\n      checksum = (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n    /** Hack end */\n  }\n}\n\nclass FontFaceObject {\n  constructor(\n    translatedData,\n    {\n      isEvalSupported = true,\n      disableFontFace = false,\n      ignoreErrors = false,\n      inspectFont = null,\n    }\n  ) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.isEvalSupported = isEvalSupported !== false;\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._inspectFont = inspectFont;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(\n        this.cssFontInfo.fontFamily,\n        this.data,\n        css\n      );\n    }\n\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n\n      return (this.compiledGlyphs[character] = function (c, size) {\n        // No-op function, to allow rendering to continue.\n      });\n    }\n\n    // If we can, compile cmds into JS for MAXIMUM SPEED...\n    if (this.isEvalSupported && FeatureTest.isEvalSupported) {\n      const jsBuf = [];\n      for (const current of cmds) {\n        const args = current.args !== undefined ? current.args.join(\",\") : \"\";\n        jsBuf.push(\"c.\", current.cmd, \"(\", args, \");\\n\");\n      }\n      // eslint-disable-next-line no-new-func\n      return (this.compiledGlyphs[character] = new Function(\n        \"c\",\n        \"size\",\n        jsBuf.join(\"\")\n      ));\n    }\n    // ... but fall back on using Function.prototype.apply() if we're\n    // blocked from using eval() for whatever reason (like CSP policies).\n    return (this.compiledGlyphs[character] = function (c, size) {\n      for (const current of cmds) {\n        if (current.cmd === \"scale\") {\n          current.args = [size, -size];\n        }\n        // eslint-disable-next-line prefer-spread\n        c[current.cmd].apply(c, current.args);\n      }\n    });\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nexport { isNodeJS };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  getCurrentTransform,\n  getCurrentTransformInverse,\n  PixelsPerInch,\n} from \"./display_utils.js\";\nimport {\n  getShadingPattern,\n  PathType,\n  TilingPattern,\n} from \"./pattern_helper.js\";\nimport { convertBlackAndWhiteToRGBA } from \"../shared/image_utils.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n// Minimal font size that would be used during canvas fillText operations.\nconst MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nconst MAX_FONT_SIZE = 100;\nconst MAX_GROUP_SIZE = 4096;\n\n// Defines the time the `executeOperatorList`-method is going to be executing\n// before it stops and schedules a continue of execution.\nconst EXECUTION_TIME = 15; // ms\n// Defines the number of steps before checking the execution time.\nconst EXECUTION_STEPS = 10;\n\n// To disable Type3 compilation, set the value to `-1`.\nconst MAX_SIZE_TO_COMPILE = 1000;\n\nconst FULL_CHUNK_HEIGHT = 16;\n\n/**\n * Overrides certain methods on a 2d ctx so that when they are called they\n * will also call the same method on the destCtx. The methods that are\n * overridden are all the transformation state modifiers, path creation, and\n * save/restore. We only forward these specific methods because they are the\n * only state modifiers that we cannot copy over when we switch contexts.\n *\n * To remove mirroring call `ctx._removeMirroring()`.\n *\n * @param {Object} ctx - The 2d canvas context that will duplicate its calls on\n *   the destCtx.\n * @param {Object} destCtx - The 2d canvas context that will receive the\n *   forwarded calls.\n */\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\n\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n\n  delete(id) {\n    delete this.cache[id];\n  }\n\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\n\nfunction drawImageAtIntegerCoords(\n  ctx,\n  srcImg,\n  srcX,\n  srcY,\n  srcW,\n  srcH,\n  destX,\n  destY,\n  destW,\n  destH\n) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    // top-left corner is at (X, Y) and\n    // bottom-right one is at (X + width, Y + height).\n\n    // If leftX is 4.321 then it's rounded to 4.\n    // If width is 10.432 then it's rounded to 11 because\n    // rightX = leftX + width = 14.753 which is rounded to 15\n    // so after rounding the total width is 11 (15 - 4).\n    // It's why we can't just floor/ceil uniformly, it just depends\n    // on the values we've.\n\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n\n    // Some pdf contains images with 1x1 images so in case of 0-width after\n    // scaling we must fallback on 1 to be sure there is something.\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    // We must apply a transformation in order to apply it on the image itself.\n    // For example if a == 1 && d == -1, it means that the image itself is\n    // mirrored w.r.t. the x-axis.\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rWidth, rHeight];\n  }\n\n  if (a === 0 && d === 0) {\n    // This path is taken in issue9462.pdf (page 3).\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rHeight, rWidth];\n  }\n\n  // Not a scale matrix so let the render handle the case without rounding.\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\n\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([\n    0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0,\n  ]);\n\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n\n  // decodes bit-packed mask data\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding interesting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum =\n        (sum >> 2) +\n        (data[pos + 1] ? 4 : 0) +\n        (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else {\n        // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2) | (type << 2);\n      }\n      path.lineTo(p % width1, (p / width1) | 0);\n\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n\n  // Immediately release the, potentially large, `Uint8Array`s after parsing.\n  data = null;\n  points = null;\n\n  const drawOutline = function (c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nclass CanvasExtraState {\n  constructor(width, height) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1]);\n  }\n\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.maxX = Math.max(this.maxX, minMax[1]);\n    this.minY = Math.min(this.minY, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3);\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], box[0], box[2]);\n      minMax[1] = Math.max(minMax[1], box[0], box[2]);\n      minMax[2] = Math.min(minMax[2], box[1], box[3]);\n      minMax[3] = Math.max(minMax[3], box[1], box[3]);\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      // Stroked paths can be outside of the path bounding box by 1/2 the line\n      // width.\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(\n      this.clipBox,\n      this.getPathBoundingBox(pathType, transform)\n    );\n  }\n}\n\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n\n  // Put the image data to the canvas in chunks, rather than putting the\n  // whole image at once.  This saves JS memory, because the ImageData object\n  // is smaller. It also possibly saves C++ memory within the implementation\n  // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n  // the data passed to putImageData()). |n| shouldn't be too small, however,\n  // because too many putImageData() calls will slow things down.\n  //\n  // Note: as written, if the last chunk is partial, the putImageData() call\n  // will (conceptually) put pixels past the bounds of the canvas.  But\n  // that's ok; any such pixels are ignored.\n\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n\n  // There are multiple forms in which the pixel data can be passed, and\n  // imgData.kind tells us which one this is.\n  if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n    // Grayscale, 1 bit per pixel (i.e. black-and-white).\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    const white = 0xffffffff;\n    const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      // We ran out of input. Make all remaining pixels transparent.\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n    // RGBA, 32-bits per pixel.\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === ImageKind.RGB_24BPP) {\n    // RGB, 24-bits per pixel.\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\n\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    // The bitmap has been created in the worker.\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n\n  // Slow path: OffscreenCanvas isn't available in the worker.\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight =\n      i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n    // Expand the mask so it can be used by the canvas.  Any required\n    // inversion has already been handled.\n\n    ({ srcPos } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0,\n    }));\n\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\n\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillRule\",\n    \"globalAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"globalCompositeOperation\",\n    \"font\",\n    \"filter\",\n  ];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\n\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    !isNodeJS\n  ) {\n    ctx.filter = \"none\";\n  }\n}\n\nfunction composeSMaskBackdrop(bytes, r0, g0, b0) {\n  const length = bytes.length;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = bytes[i];\n    if (alpha === 0) {\n      bytes[i - 3] = r0;\n      bytes[i - 2] = g0;\n      bytes[i - 1] = b0;\n    } else if (alpha < 255) {\n      const alpha_ = 255 - alpha;\n      bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n      bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n      bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n    }\n  }\n}\n\nfunction composeSMaskAlpha(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  const scale = 1 / 255;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n    layerData[i] = (layerData[i] * alpha * scale) | 0;\n  }\n}\n\nfunction composeSMaskLuminosity(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  for (let i = 3; i < length; i += 4) {\n    const y =\n      maskData[i - 3] * 77 + // * 0.3 / 255 * 0x10000\n      maskData[i - 2] * 152 + // * 0.59 ....\n      maskData[i - 1] * 28; // * 0.11 ....\n    layerData[i] = transferMap\n      ? (layerData[i] * transferMap[y >> 8]) >> 8\n      : (layerData[i] * y) >> 16;\n  }\n}\n\nfunction genericComposeSMask(\n  maskCtx,\n  layerCtx,\n  width,\n  height,\n  subtype,\n  backdrop,\n  transferMap,\n  layerOffsetX,\n  layerOffsetY,\n  maskOffsetX,\n  maskOffsetY\n) {\n  const hasBackdrop = !!backdrop;\n  const r0 = hasBackdrop ? backdrop[0] : 0;\n  const g0 = hasBackdrop ? backdrop[1] : 0;\n  const b0 = hasBackdrop ? backdrop[2] : 0;\n\n  let composeFn;\n  if (subtype === \"Luminosity\") {\n    composeFn = composeSMaskLuminosity;\n  } else {\n    composeFn = composeSMaskAlpha;\n  }\n\n  // processing image in chunks to save memory\n  const PIXELS_TO_PROCESS = 1048576;\n  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n  for (let row = 0; row < height; row += chunkSize) {\n    const chunkHeight = Math.min(chunkSize, height - row);\n    const maskData = maskCtx.getImageData(\n      layerOffsetX - maskOffsetX,\n      row + (layerOffsetY - maskOffsetY),\n      width,\n      chunkHeight\n    );\n    const layerData = layerCtx.getImageData(\n      layerOffsetX,\n      row + layerOffsetY,\n      width,\n      chunkHeight\n    );\n\n    if (hasBackdrop) {\n      composeSMaskBackdrop(maskData.data, r0, g0, b0);\n    }\n    composeFn(maskData.data, layerData.data, transferMap);\n\n    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n  }\n}\n\nfunction composeSMask(ctx, smask, layerCtx, layerBox) {\n  const layerOffsetX = layerBox[0];\n  const layerOffsetY = layerBox[1];\n  const layerWidth = layerBox[2] - layerOffsetX;\n  const layerHeight = layerBox[3] - layerOffsetY;\n  if (layerWidth === 0 || layerHeight === 0) {\n    return;\n  }\n  genericComposeSMask(\n    smask.context,\n    layerCtx,\n    layerWidth,\n    layerHeight,\n    smask.subtype,\n    smask.backdrop,\n    smask.transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    smask.offsetX,\n    smask.offsetY\n  );\n  ctx.save();\n  ctx.globalAlpha = 1;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  ctx.drawImage(layerCtx.canvas, 0, 0);\n  ctx.restore();\n}\n\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  const scale = Util.singularValueDecompose2dScale(transform);\n  // Round to a 32bit float so that `<=` check below will pass for numbers that\n  // are very close, but not exactly the same 64bit floats.\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS\n  );\n  if (interpolate !== undefined) {\n    // If the value is explicitly set use it.\n    return interpolate;\n  } else if (scale[0] <= actualScale || scale[1] <= actualScale) {\n    // Smooth when downscaling.\n    return true;\n  }\n  // Don't smooth when upscaling.\n  return false;\n}\n\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\n\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    filterFactory,\n    { optionalContentConfig, markedContentStack = null },\n    annotationCanvasMap,\n    pageColors\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see\n    // PDF spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\")\n        ? this.commonObjs.get(data)\n        : this.objs.get(data);\n    }\n    return fallback;\n  }\n\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null,\n  }) {\n    // For pdfs that use blend modes we have to clear the canvas else certain\n    // blend modes can look wrong since we'd be blending with a white\n    // backdrop. The problem with a transparent backdrop though is we then\n    // don't get sub pixel anti aliasing on text, creating temporary\n    // transparent canvas when we have blend modes.\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\n        \"transparent\",\n        width,\n        height\n      );\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      // The transform can be applied before rendering, transferring it to\n      // the new canvas.\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n\n  executeOperatorList(\n    operatorList,\n    executionStartIdx,\n    continueCallback,\n    stepper\n  ) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n\n    // Sometimes the OperatorList to execute is empty.\n    if (argsArrayLen === i) {\n      return i;\n    }\n\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS &&\n      typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n\n      fnId = fnArray[i];\n\n      if (fnId !== OPS.dependency) {\n        // eslint-disable-next-line prefer-spread\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n          // If the promise isn't resolved yet, add the continueCallback\n          // to the promise and bail out.\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n\n      i++;\n\n      // If the entire operatorList was executed, stop as were done.\n      if (i === argsArrayLen) {\n        return i;\n      }\n\n      // If the execution took longer then a certain amount of time and\n      // `continueCallback` is specified, interrupt the execution.\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n\n      // If the operatorList isn't executed completely yet OR the execution\n      // time was short enough, do another execution round.\n    }\n  }\n\n  #restoreInitialState() {\n    // Finishing all opened operations such as SMask group painting.\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n\n    this.ctx.restore();\n\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n\n  endDrawing() {\n    this.#restoreInitialState();\n\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (\n          typeof HTMLCanvasElement !== \"undefined\" &&\n          canvas instanceof HTMLCanvasElement\n        ) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(\n        this.pageColors.foreground,\n        this.pageColors.background\n      );\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n\n  _scaleImage(img, inverseTransform) {\n    // Vertical or horizontal scaling shall not be more than 2 to not lose the\n    // pixels during drawImage operation, painting on the temporary canvas(es)\n    // that are twice smaller in size.\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(\n      Math.hypot(inverseTransform[0], inverseTransform[1]),\n      1\n    );\n    let heightScale = Math.max(\n      Math.hypot(inverseTransform[2], inverseTransform[3]),\n      1\n    );\n\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (\n      (widthScale > 2 && paintWidth > 1) ||\n      (heightScale > 2 && paintHeight > 1)\n    ) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        // See bug 1820511 (Windows specific bug).\n        // TODO: once the above bug is fixed we could revert to:\n        // newWidth = Math.ceil(paintWidth / 2);\n        newWidth =\n          paintWidth >= 16384\n            ? Math.floor(paintWidth / 2) - 1 || 1\n            : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        // TODO: see the comment above.\n        newHeight =\n          paintHeight >= 16384\n            ? Math.floor(paintHeight / 2) - 1 || 1\n            : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(\n        tmpCanvasId,\n        newWidth,\n        newHeight\n      );\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(\n        img,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      // We're reusing the same image several times, so we can cache it.\n      // In case we've a pattern fill we just keep the scaled version of\n      // the image.\n      // Only the scaling part matters, the translation part is just used\n      // to compute offsets (but not when filling patterns see #15573).\n      // TODO: handle the case of a pattern fill if it's possible.\n      cacheKey = JSON.stringify(\n        isPatternFill\n          ? currentTransform\n          : [currentTransform.slice(0, 4), fillColor]\n      );\n\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) +\n            currentTransform[4]\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) +\n            currentTransform[5]\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n\n    // Create the mask canvas at the size it will be drawn at and also set\n    // its transform to match the current transform so if there are any\n    // patterns applied they will be applied relative to the correct\n    // transform.\n\n    let maskToCanvas = Util.transform(currentTransform, [\n      1 / width,\n      0,\n      0,\n      -1 / height,\n      0,\n      0,\n    ]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const cord1 = Util.applyTransform([0, 0], maskToCanvas);\n    const cord2 = Util.applyTransform([width, height], maskToCanvas);\n    const rect = Util.normalizeRect([cord1[0], cord1[1], cord2[0], cord2[1]]);\n    const drawnWidth = Math.round(rect[2] - rect[0]) || 1;\n    const drawnHeight = Math.round(rect[3] - rect[1]) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\n      \"fillCanvas\",\n      drawnWidth,\n      drawnHeight\n    );\n    const fillCtx = fillCanvas.context;\n\n    // The offset will be the top-left cordinate mask.\n    // If objToCanvas is [a,b,c,d,e,f] then:\n    //   - offsetX = min(a, c) + e\n    //   - offsetY = min(b, d) + f\n    const offsetX = Math.min(cord1[0], cord2[0]);\n    const offsetY = Math.min(cord1[1], cord2[1]);\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n\n    if (!scaled) {\n      // Pre-scale if needed to improve image smoothing.\n      scaled = this._scaleImage(\n        maskCanvas.canvas,\n        getCurrentTransformInverse(fillCtx)\n      );\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(fillCtx),\n      img.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height\n    );\n    fillCtx.globalCompositeOperation = \"source-in\";\n\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n\n    fillCtx.fillRect(0, 0, width, height);\n\n    if (cache && !isPatternFill) {\n      // The fill canvas is put in the cache associated to the mask image\n      // so we must remove from the cached canvas: it mustn't be used again.\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n\n    // Round the offsets to avoid drawing fractional pixels.\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n\n  // Graphics state\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n\n  setRenderingIntent(intent) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setFlatness(flatness) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps =\n            this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n    // Else, the state is okay and nothing needs to be done.\n  }\n\n  /**\n   * Soft mask mode takes the current main drawing canvas and replaces it with\n   * a temporary canvas. Any drawing operations that happen on the temporary\n   * canvas need to be composed with the main canvas that was suspended (see\n   * `compose()`). The temporary canvas also duplicates many of its operations\n   * on the suspended canvas to keep them in sync, so that when the soft mask\n   * mode ends any clipping paths or transformations will still be active and in\n   * the right order on the canvas' graphics state stack.\n   */\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n  }\n\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    // The soft mask is done, now restore the suspended canvas as the main\n    // drawing canvas.\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n\n    this.suspendedCtx = null;\n  }\n\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n\n    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    // Whatever was drawn has been moved to the suspended canvas, now clear it\n    // out of the current canvas.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n\n  save() {\n    if (this.inSMaskMode) {\n      // SMask mode may be turned on/off causing us to lose graphics state.\n      // Copy the temporary canvas state to the main(suspended) canvas to keep\n      // it in sync.\n      copyCtxState(this.ctx, this.suspendedCtx);\n      // Don't bother calling save on the temporary canvas since state is not\n      // saved there.\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        // Graphics state is stored on the main(suspended) canvas. Restore its\n        // state then copy it over to the temporary canvas.\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n\n      // Ensure that the clipping path is reset (fixes issue6413.pdf).\n      this.pendingClip = null;\n\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  // Path\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n\n    // Most of the time the current transform is a scaling matrix\n    // so we don't need to transform points before computing min/max:\n    // we can compute min/max first and then smartly \"apply\" the\n    // transform (see Util.scaleMinMax).\n    // For rectangle, moveTo and lineTo, min/max are computed in the\n    // worker (see evaluator.js).\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3]\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n\n    current.setCurrentPoint(x, y);\n  }\n\n  closePath() {\n    this.ctx.closePath();\n  }\n\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    // For stroke we want to temporarily change the global alpha to the\n    // stroking alpha.\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          getCurrentTransformInverse(ctx),\n          PathType.STROKE\n        );\n        this.rescaleAndStroke(/* saveRestore */ false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(/* saveRestore */ true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    // Restore the global alpha to the fill alpha\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      needRestore = true;\n    }\n\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n\n    this.consumePath();\n  }\n\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n\n  endPath() {\n    this.consumePath();\n  }\n\n  // Clipping\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n\n  // Text\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n    // A valid matrix needs all main diagonal elements to be non-zero\n    // This also ensures we bypass FF bugzilla bug #719844.\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n\n    // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n    // and in some docs this can be negative (inverted x-y axes).\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n\n    if (fontObj.isType3Font) {\n      return; // we don't need ctx.font for Type3 fonts\n    }\n\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface =\n      fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n    // Some font backends cannot handle fonts below certain size.\n    // Keeping the font at minimal size and using the fontSizeScale to change\n    // the current transformation matrix before the fillText/strokeText.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode =\n      textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(\n      textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n    );\n    const patternFill = current.patternFill && !font.missingFile;\n\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n\n    if (isAddToPathSet) {\n      const paths = (this.pendingTextPaths ||= []);\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n\n  get isFontSubpixelAAEnabled() {\n    // Checks if anti-aliasing is enabled when scaled text is painted.\n    // On Windows GDI scaled fonts looks bad.\n    const { context: ctx } = this.cachedCanvases.getCanvas(\n      \"isFontSubpixelAAEnabled\",\n      10,\n      10\n    );\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        getCurrentTransformInverse(ctx),\n        PathType.FILL\n      );\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n\n    ctx.lineWidth = lineWidth;\n\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n\n      return undefined;\n    }\n\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx =\n          -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n\n      if (font.remeasure && width > 0) {\n        // Some standard fonts may not have the exact width: rescale per\n        // character if measured width is greater than expected glyph width\n        // and subpixel-aa is enabled, otherwise just center the glyph.\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) *\n          fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX +=\n            (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n\n      // Only attempt to draw the glyph if it is actually in the embedded font\n      // file or if there isn't a font file so the fallback font is shown.\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX =\n              scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY =\n              scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(\n              accent.fontChar,\n              scaledAccentX,\n              scaledAccentY,\n              patternTransform\n            );\n          }\n        }\n      }\n\n      let charWidth;\n      if (vertical) {\n        charWidth = width * widthAdvanceScale - spacing * fontDirection;\n      } else {\n        charWidth = width * widthAdvanceScale + spacing * fontDirection;\n      }\n      x += charWidth;\n\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n\n    return undefined;\n  }\n\n  showType3Text(glyphs) {\n    // Type3 fonts - each glyph is a \"mini-PDF\"\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible =\n      current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n\n    ctx.scale(textHScale, fontDirection);\n\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n\n  // Type3 fonts\n  setCharWidth(xWidth, yWidth) {\n    // We can safely ignore this since the width should be the same\n    // as the width in the Widths array.\n  }\n\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n\n  // Color\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => {\n          return new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory,\n            this.filterFactory,\n            {\n              optionalContentConfig: this.optionalContentConfig,\n              markedContentStack: this.markedContentStack,\n            }\n          );\n        },\n      };\n      pattern = new TilingPattern(\n        IR,\n        color,\n        this.ctx,\n        canvasGraphicsFactory,\n        baseTransform\n      );\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      getCurrentTransformInverse(ctx),\n      PathType.SHADING\n    );\n\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const canvas = ctx.canvas;\n      const width = canvas.width;\n      const height = canvas.height;\n\n      const bl = Util.applyTransform([0, 0], inv);\n      const br = Util.applyTransform([0, height], inv);\n      const ul = Util.applyTransform([width, 0], inv);\n      const ur = Util.applyTransform([width, height], inv);\n\n      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      // HACK to draw the gradient onto an infinite rectangle.\n      // PDF gradients are drawn across the entire image while\n      // Canvas only allows gradients to be drawn in a rectangle\n      // The following bug should allow us to remove this.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n\n  // Images\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform(...matrix);\n    }\n\n    this.baseTransform = getCurrentTransform(this.ctx);\n\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    this.save();\n    // If there's an active soft mask we don't want it enabled for the group, so\n    // clear it out. The mask and suspended canvas will be restored in endGroup.\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n\n    const currentCtx = this.ctx;\n    // TODO non-isolated groups - according to Rik at adobe non-isolated\n    // group results aren't usually that different and they even have tools\n    // that ignore this setting. Notes from Rik on implementing:\n    // - When you encounter an transparency group, create a new canvas with\n    // the dimensions of the bbox\n    // - copy the content from the previous canvas to the new canvas\n    // - draw as usual\n    // - remove the backdrop alpha:\n    // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n    // value of your transparency group and 'alphaBackdrop' the alpha of the\n    // backdrop\n    // - remove background color:\n    // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n\n    // TODO knockout - supposedly possible with the clever use of compositing\n    // modes.\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n\n    // Based on the current transform figure out how big the bounding box\n    // will actually be.\n    let bounds = Util.getAxialAlignedBoundingBox(\n      group.bbox,\n      getCurrentTransform(currentCtx)\n    );\n    // Clip the bounding box to the current canvas.\n    const canvasBounds = [\n      0,\n      0,\n      currentCtx.canvas.width,\n      currentCtx.canvas.height,\n    ];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    // Use ceil in case we're between sizes so we don't create canvas that is\n    // too small and make the canvas at least 1x1 pixels.\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    let scaleX = 1,\n      scaleY = 1;\n    if (drawnWidth > MAX_GROUP_SIZE) {\n      scaleX = drawnWidth / MAX_GROUP_SIZE;\n      drawnWidth = MAX_GROUP_SIZE;\n    }\n    if (drawnHeight > MAX_GROUP_SIZE) {\n      scaleY = drawnHeight / MAX_GROUP_SIZE;\n      drawnHeight = MAX_GROUP_SIZE;\n    }\n\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      // Using two cache entries is case if masks are used one after another.\n      cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight\n    );\n    const groupCtx = scratchCanvas.context;\n\n    // Since we created a new canvas that is just the size of the bounding box\n    // we have to translate the group ctx.\n    groupCtx.scale(1 / scaleX, 1 / scaleY);\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n\n    if (group.smask) {\n      // Saving state and cached mask to be used in setGState.\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        scaleX,\n        scaleY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null, // used during suspend operation\n      });\n    } else {\n      // Setup the current ctx so when the group is popped we draw it at the\n      // right location.\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.scale(scaleX, scaleY);\n      currentCtx.save();\n    }\n    // The transparency group inherits all off the current graphics state\n    // except the blend mode, soft mask, and alpha constants.\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    // Turn off image smoothing to avoid sub pixel interpolation which can\n    // look kind of blurry for some pdfs.\n    this.ctx.imageSmoothingEnabled = false;\n\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    // The annotations are drawn just after the page content.\n    // The page content drawing can potentially have set a transform,\n    // a clipping path, whatever...\n    // So in order to have something clean, we restore the initial state.\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n\n    this.ctx.save();\n    this.save();\n\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n\n    if (Array.isArray(rect) && rect.length === 4) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(\n          getCurrentTransform(this.ctx)\n        );\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(\n          width * this.outputScaleX * viewportScale\n        );\n        const canvasHeight = Math.ceil(\n          height * this.outputScaleY * viewportScale\n        );\n\n        this.annotationCanvas = this.canvasFactory.create(\n          canvasWidth,\n          canvasHeight\n        );\n        const { canvas, context } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n\n    ctx.save();\n    // The mask is drawn with the transform applied. Reset the current\n    // transform to draw to the identity.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectRepeat(\n    img,\n    scaleX,\n    skewX = 0,\n    skewY = 0,\n    scaleY,\n    positions\n  ) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    img = this.getObject(img.data, img);\n\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n\n    ctx.setTransform(\n      1,\n      0,\n      0,\n      1,\n      mask.offsetX - currentTransform[4],\n      mask.offsetY - currentTransform[5]\n    );\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n\n    for (const image of images) {\n      const { data, width, height, transform } = image;\n\n      const maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(\n            maskCtx,\n            this,\n            getCurrentTransformInverse(ctx),\n            PathType.FILL\n          )\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        maskCanvas.canvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    this.paintInlineImageXObject(imgData);\n  }\n\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const { bitmap, width, height } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\n      \"inlineImage\",\n      width,\n      height\n    );\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n\n    return tmpCanvas.canvas;\n  }\n\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n\n    this.save();\n\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      !isNodeJS\n    ) {\n      // The filter, if any, will be applied in applyTransferMapsToBitmap.\n      // It must be applied to the image before rescaling else some artifacts\n      // could appear.\n      // The final restore will reset it to its value.\n      ctx.filter = \"none\";\n    }\n\n    // scale the image to the unit square\n    ctx.scale(1 / width, -1 / height);\n\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (\n      (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      // typeof check is needed due to node.js support, see issue #8489\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\n        \"inlineImage\",\n        width,\n        height\n      );\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    const scaled = this._scaleImage(\n      imgToPaint,\n      getCurrentTransformInverse(ctx)\n    );\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      getCurrentTransform(ctx),\n      imgData.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height\n    );\n    this.compose();\n    this.restore();\n  }\n\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        imgToPaint,\n        entry.x,\n        entry.y,\n        entry.w,\n        entry.h,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n\n  // Marked content\n\n  markPoint(tag) {\n    // TODO Marked content.\n  }\n\n  markPointProps(tag, properties) {\n    // TODO Marked content.\n  }\n\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n\n  // Compatibility\n\n  beginCompat() {\n    // TODO ignore undefined operators (should we do that anyway?)\n  }\n\n  endCompat() {\n    // TODO stop ignoring undefined operators\n  }\n\n  // Helper functions\n\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        this._cachedGetSinglePixelWidth =\n          1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n\n  getScaleForStroking() {\n    // A pixel has thicknessX = thicknessY = 1;\n    // A transformed pixel is a parallelogram and the thicknesses\n    // corresponds to the heights.\n    // The goal of this function is to rescale before setting the\n    // lineWidth in order to have both thicknesses greater or equal\n    // to 1 after transform.\n    if (this._cachedScaleForStroking[0] === -1) {\n      const { lineWidth } = this.current;\n      const { a, b, c, d } = this.ctx.getTransform();\n      let scaleX, scaleY;\n\n      if (b === 0 && c === 0) {\n        // Fast path\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        // A pixel (base (x, y)) is transformed by M into a parallelogram:\n        //  - its area is |det(M)|;\n        //  - heightY (orthogonal to Mx) has a length: |det(M)| / norm(Mx);\n        //  - heightX (orthogonal to My) has a length: |det(M)| / norm(My).\n        // heightX and heightY are the thicknesses of the transformed pixel\n        // and they must be both greater or equal to 1.\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n\n  // Rescale before stroking in order to have a final lineWidth\n  // with both thicknesses greater or equal to 1.\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n\n    ctx.lineWidth = lineWidth || 1;\n\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n\n    ctx.scale(scaleX, scaleY);\n\n    // How the dashed line is rendered depends on the current transform...\n    // so we added a rescale to handle too thin lines and consequently\n    // the way the line is dashed will be modified.\n    // If scaleX === scaleY, the dashed lines will be rendered correctly\n    // else we'll have some bugs (but only with too thin lines).\n    // Here we take the max... why not taking the min... or something else.\n    // Anyway, as said it's buggy when scaleX !== scaleY.\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n\n    ctx.stroke();\n\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\nexport { CanvasGraphics };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatError, info, unreachable, Util } from \"../shared/util.js\";\nimport { getCurrentTransform } from \"./display_utils.js\";\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\",\n};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\n\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(\n        this._p0[0],\n        this._p0[1],\n        this._p1[0],\n        this._p1[1]\n      );\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1\n      );\n    }\n\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        getCurrentTransform(ctx)\n      ) || [0, 0, 0, 0];\n      // Create a canvas that is only as big as the current path. This doesn't\n      // allow us to cache the pattern, but it generally creates much smaller\n      // canvases and saves memory use. See bug 1722807 for an example.\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        width,\n        height,\n        true\n      );\n\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      // Non shading fill patterns are positioned relative to the base transform\n      // (usually the page's initial transform), but we may have created a\n      // smaller canvas based on the path, so we must account for the shift.\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [\n        1,\n        0,\n        0,\n        1,\n        ownerBBox[0],\n        ownerBBox[1],\n      ]);\n\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      // Shading fills are applied relative to the current matrix which is also\n      // how canvas gradients work, so there's no need to do anything special\n      // here.\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\n\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  // Very basic Gouraud-shaded triangle rasterization algorithm.\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      let k;\n      if (y < y1) {\n        k = 0;\n      } else {\n        k = (y1 - y) / (y1 - y2);\n      }\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\n\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(\n          data,\n          context,\n          ps[i],\n          ps[i + 1],\n          ps[i + 2],\n          cs[i],\n          cs[i + 1],\n          cs[i + 2]\n        );\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\n\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    const EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    const MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    const BORDER_SIZE = 2;\n\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n\n    const tmpCanvas = cachedCanvases.getCanvas(\n      \"mesh\",\n      paddedWidth,\n      paddedHeight,\n      false\n    );\n    const tmpCtx = tmpCanvas.context;\n\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      // Obtain scale from matrix and current transformation matrix.\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n\n    // Rasterizing on the main thread since sending/queue large canvases\n    // might cause OOM.\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases\n    );\n\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n\n    ctx.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\n\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\n\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\n\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\n\nclass TilingPattern {\n  // 10in @ 300dpi shall be enough.\n  static MAX_PATTERN_SIZE = 3000;\n\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n    info(\"TilingType: \" + tilingType);\n\n    // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n    // described by bbox, and may repeat regularly by shifting the cell by\n    // xstep and ystep.\n    // Because the HTML5 canvas API does not support pattern repetition with\n    // gaps in between, we use the xstep/ystep instead of the bbox's size.\n    //\n    // This has the following consequences (similarly for ystep):\n    //\n    // - If xstep is the same as bbox, then there is no observable difference.\n    //\n    // - If xstep is larger than bbox, then the pattern canvas is partially\n    //   empty: the area bounded by bbox is painted, the outside area is void.\n    //\n    // - If xstep is smaller than bbox, then the pixels between xstep and the\n    //   bbox boundary will be missing. This is INCORRECT behavior.\n    //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n    //   but overlapping cells without common pixels are still valid.\n    //   TODO: Fix the implementation, to allow this scenario to be painted\n    //   correctly.\n\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n\n    // Obtain scale from matrix and current transformation matrix.\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(\n      this.baseTransform\n    );\n    const combinedScale = [\n      matrixScale[0] * curMatrixScale[0],\n      matrixScale[1] * curMatrixScale[1],\n    ];\n\n    // Use width and height values that are as close as possible to the end\n    // result when the pattern is used. Too low value makes the pattern look\n    // blurry. Too large value makes it look too crispy.\n    const dimx = this.getSizeAndScale(\n      xstep,\n      this.ctx.canvas.width,\n      combinedScale[0]\n    );\n    const dimy = this.getSizeAndScale(\n      ystep,\n      this.ctx.canvas.height,\n      combinedScale[1]\n    );\n\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\n      \"pattern\",\n      dimx.size,\n      dimy.size,\n      true\n    );\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    // Some bounding boxes have negative x0/y0 coordinates which will cause the\n    // some of the drawing to be off of the canvas. To avoid this shift the\n    // bounding box over.\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n\n    // To match CanvasGraphics beginDrawing we must save the context here or\n    // else we end up with unbalanced save/restores.\n    tmpCtx.save();\n\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n\n    graphics.executeOperatorList(operatorList);\n\n    graphics.endDrawing();\n\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n\n  getSizeAndScale(step, realOutputSize, scale) {\n    // xstep / ystep may be negative -- normalize.\n    step = Math.abs(step);\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    // Use the destination canvas's size if it is bigger than the hard-coded\n    // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n    // whole canvas.\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return { scale, size };\n  }\n\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [\n      x0,\n      y0,\n      x1,\n      y1,\n    ]);\n    graphics.clip();\n    graphics.endPath();\n  }\n\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        // Set color needed by image masks (fixes issues 3226 and 8741).\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n    let domMatrix = new DOMMatrix(matrix);\n    // Rescale and so that the ctx.createPattern call generates a pattern with\n    // the desired size.\n    domMatrix = domMatrix.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY\n    );\n\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n\n    return pattern;\n  }\n}\n\nexport { getShadingPattern, PathType, TilingPattern };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FeatureTest, ImageKind } from \"./util.js\";\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n\n  return null;\n}\n\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false,\n}) {\n  const black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode\n    ? [nonBlackColor, black]\n    : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n  return { srcPos, destPos };\n}\n\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height,\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n\n  if (FeatureTest.isLittleEndian) {\n    // It's a way faster to do the shuffle manually instead of working\n    // component by component with some Uint8 arrays.\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R2B1G1R1\n      const s2 = src32[i + 1]; // G3R3B2G2\n      const s3 = src32[i + 2]; // B4G4R4B3\n\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = (s1 >>> 24) | (s2 << 8) | 0xff000000;\n      dest[destPos + 2] = (s2 >>> 16) | (s3 << 16) | 0xff000000;\n      dest[destPos + 3] = (s3 >>> 8) | 0xff000000;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        src[j] | (src[j + 1] << 8) | (src[j + 2] << 16) | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i]; // R1G1B1R2\n      const s2 = src32[i + 1]; // G2B2R3G3\n      const s3 = src32[i + 2]; // B3R4G4B4\n\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = (s1 << 24) | (s2 >>> 8) | 0xff;\n      dest[destPos + 2] = (s2 << 16) | (s3 >>> 16) | 0xff;\n      dest[destPos + 3] = (s3 << 8) | 0xff;\n    }\n\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] =\n        (src[j] << 24) | (src[j + 1] << 16) | (src[j + 2] << 8) | 0xff;\n    }\n  }\n\n  return { srcPos, destPos };\n}\n\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x10101) | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = (src[i] * 0x1010100) | 0x000000ff;\n    }\n  }\n}\n\nexport { convertBlackAndWhiteToRGBA, convertToRGBA, grayToRGBA };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {Object} GlobalWorkerOptionsType\n * @property {Worker | null} workerPort - Defines global port for worker\n *   process. Overrides the `workerSrc` option.\n * @property {string} workerSrc - A string containing the path and filename\n *   of the worker file.\n *\n *   NOTE: The `workerSrc` option should always be set, in order to prevent any\n *         issues when using the PDF.js library.\n */\n\n/** @type {GlobalWorkerOptionsType} */\nconst GlobalWorkerOptions = Object.create(null);\n\nGlobalWorkerOptions.workerPort = null;\nGlobalWorkerOptions.workerSrc = \"\";\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  MissingPDFException,\n  PasswordException,\n  PromiseCapability,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction wrapReason(reason) {\n  if (\n    !(\n      reason instanceof Error ||\n      (typeof reason === \"object\" && reason !== null)\n    )\n  ) {\n    unreachable(\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\n\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n\n  on(actionName, handler) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = new PromiseCapability();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = new PromiseCapability();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = new PromiseCapability();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = new PromiseCapability();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = new PromiseCapability();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: new PromiseCapability(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink, so when it changes\n        // from negative to positive, set ready property as resolved promise.\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        streamSink.desiredSize = data.desiredSize;\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  async #deleteStreamController(streamController, streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled([\n      streamController.startCall?.promise,\n      streamController.pullCall?.promise,\n      streamController.cancelCall?.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\nexport { MessageHandler };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap } from \"../shared/util.js\";\n\nclass Metadata {\n  #metadataMap;\n\n  #data;\n\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n\n  getRaw() {\n    return this.#data;\n  }\n\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap, unreachable, warn } from \"../shared/util.js\";\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\n\nconst INTERNAL = Symbol(\"INTERNAL\");\n\nclass OptionalContentGroup {\n  #visible = true;\n\n  constructor(name, intent) {\n    this.name = name;\n    this.intent = intent;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get visible() {\n    return this.#visible;\n  }\n\n  /**\n   * @ignore\n   */\n  _setVisible(internal, visible) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#visible = visible;\n  }\n}\n\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n\n  #groups = new Map();\n\n  #initialHash = null;\n\n  #order = null;\n\n  constructor(data) {\n    this.name = null;\n    this.creator = null;\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(\n        group.id,\n        new OptionalContentGroup(group.name, group.intent)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n\n    // The following code must always run *last* in the constructor.\n    this.#initialHash = this.getHash();\n  }\n\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      warn(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available.\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true) {\n    if (!this.#groups.has(id)) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    this.#groups.get(id)._setVisible(INTERNAL, !!visible);\n\n    this.#cachedGetHash = null;\n  }\n\n  get hasInitialVisibility() {\n    return this.getHash() === this.#initialHash;\n  }\n\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return (this.#cachedGetHash = hash.hexdigest());\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, PromiseCapability } from \"../shared/util.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(\n    {\n      length,\n      initialData,\n      progressiveDone = false,\n      contentDispositionFilename = null,\n      disableRange = false,\n      disableStream = false,\n    },\n    pdfDataRangeTransport\n  ) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n\n    if (initialData?.length > 0) {\n      // Prevent any possible issues by only transferring a Uint8Array that\n      // completely \"utilizes\" its underlying ArrayBuffer.\n      const buffer =\n        initialData instanceof Uint8Array &&\n        initialData.byteLength === initialData.buffer.byteLength\n          ? initialData.buffer\n          : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    this._pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData({ begin, chunk }) {\n    // Prevent any possible issues by only transferring a Uint8Array that\n    // completely \"utilizes\" its underlying ArrayBuffer.\n    const buffer =\n      chunk instanceof Uint8Array &&\n      chunk.byteLength === chunk.buffer.byteLength\n        ? chunk.buffer\n        : new Uint8Array(chunk).buffer;\n\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      this._rangeReaders[0]?.onProgress?.({ loaded: evt.loaded });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total,\n      });\n    }\n  }\n\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(\n    stream,\n    queuedChunks,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename)\n      ? contentDispositionFilename\n      : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({ value: undefined, done: true });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass XfaText {\n  /**\n   * Walk an XFA tree and create an array of text nodes that is compatible\n   * with a regular PDFs TextContent. Currently, only TextItem.str is supported,\n   * all other fields and styles haven't been implemented.\n   *\n   * @param {Object} xfa - An XFA fake DOM object.\n   *\n   * @returns {TextContent}\n   */\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n\n  /**\n   * @param {string} name - DOM node name. (lower case)\n   *\n   * @returns {boolean} true if the DOM node should have a corresponding text\n   * node.\n   */\n  static shouldBuildText(name) {\n    return !(\n      name === \"textarea\" ||\n      name === \"input\" ||\n      name === \"option\" ||\n      name === \"select\"\n    );\n  }\n}\n\nexport { XfaText };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseFilterFactory,\n  BaseStandardFontDataFactory,\n} from \"./base_factory.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_utils.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst fetchData = function (url) {\n  return new Promise((resolve, reject) => {\n    const fs = __non_webpack_require__(\"fs\");\n    fs.readFile(url, (error, data) => {\n      if (error || !data) {\n        reject(new Error(error));\n        return;\n      }\n      resolve(new Uint8Array(data));\n    });\n  });\n};\n\nclass NodeFilterFactory extends BaseFilterFactory {}\n\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const Canvas = __non_webpack_require__(\"canvas\");\n    return Canvas.createCanvas(width, height);\n  }\n}\n\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url).then(data => {\n      return { cMapData: data, compressionType };\n    });\n  }\n}\n\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url);\n  }\n}\n\nexport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeFilterFactory,\n  NodeStandardFontDataFactory,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport {\n  AbortException,\n  assert,\n  MissingPDFException,\n  PromiseCapability,\n} from \"../shared/util.js\";\nimport {\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst fs = __non_webpack_require__(\"fs\");\nconst http = __non_webpack_require__(\"http\");\nconst https = __non_webpack_require__(\"https\");\nconst url = __non_webpack_require__(\"url\");\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n\nfunction parseUrl(sourceUrl) {\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  // Prepending 'file:///' to Windows absolute path.\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  // Changes protocol to 'file:' if url refers to filesystem.\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp =\n      this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    // Check if url refers to filesystem.\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = new PromiseCapability();\n    this._headersCapability = new PromiseCapability();\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = new PromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = new PromiseCapability();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = new PromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({ loaded: this._loaded });\n\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers,\n  };\n}\n\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n\n      const getResponseHeader = name => {\n        // Make sure that headers name are in lower case, as mentioned\n        // here: https://nodejs.org/api/http.html#http_message_headers.\n        return this._readableStream.headers[name.toLowerCase()];\n      };\n      const { allowRangeRequests, suggestedLength } =\n        validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n\n      this._isRangeSupported = allowRangeRequests;\n      // Setting right content length.\n      this._contentLength = suggestedLength || this._contentLength;\n\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    // Note: `request.end(data)` is used to write `data` to request body\n    // and notify end of request. But one should always call `request.end()`\n    // even if there is no data to write -- (to notify the end of request).\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    fs.lstat(path, (error, stat) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      // Setting right content length.\n      this._contentLength = stat.size;\n\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    });\n  }\n}\n\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    this._setReadableStream(fs.createReadStream(path, { start, end: end - 1 }));\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  MissingPDFException,\n  UnexpectedResponseException,\n} from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n    assert(\n      Number.isInteger(rangeChunkSize) && rangeChunkSize > 0,\n      \"rangeChunkSize must be an integer larger than zero.\"\n    );\n  }\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch (ex) {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith(\"file:\"))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes } from \"../shared/util.js\";\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch (e) {\n        // TextDecoder constructor threw - unrecognized encoding.\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replaceAll(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replaceAll(\"_\", \" \");\n          text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch (e) {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, PromiseCapability, stringToBytes } from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\n\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = { xhr });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = new PromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    const getResponseHeader = name => {\n      return fullRequestXhr.getResponseHeader(name);\n    };\n    const { allowRangeRequests, suggestedLength } =\n      validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._manager.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersReceivedCapability.resolve();\n  }\n\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: data.chunk, done: false });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _close() {\n    this.onClosed?.(this);\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({ loaded: evt.loaded });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = new PromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  PromiseCapability,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\n\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = new PromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const getResponseHeader = name => {\n          return response.headers.get(name);\n        };\n        const { allowRangeRequests, suggestedLength } =\n          validateRangeRequestCapabilities({\n            getResponseHeader,\n            isHttp: this._stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange,\n          });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength,\n    });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = new PromiseCapability();\n    this._isStreamingSupported = !source.disableStream;\n\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({ loaded: this._loaded });\n\n    return { value: getArrayBuffer(value), done: false };\n  }\n\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\nexport { PDFFetchStream };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./api\").TextContent} TextContent */\n\nimport {\n  AbortException,\n  FeatureTest,\n  PromiseCapability,\n  Util,\n} from \"../shared/util.js\";\nimport { deprecated, setLayerDimensions } from \"./display_utils.js\";\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {ReadableStream | TextContent} textContentSource - Text content to\n *   render, i.e. the value returned by the page's `streamTextContent` or\n *   `getTextContent` method.\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {Array<string>} [textContentItemsStr] - Strings that correspond to\n *   the `str` property of the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {boolean} [isOffscreenCanvasSupported] true if we can use\n *   OffscreenCanvas to measure string widths.\n */\n\n/**\n * Text layer update parameters.\n *\n * @typedef {Object} TextLayerUpdateParameters\n * @property {HTMLElement} container - The DOM node that will contain the text\n *   runs.\n * @property {PageViewport} viewport - The target viewport to properly layout\n *   the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {WeakMap<HTMLElement,Object>} [textDivProperties] - Some properties\n *   weakly mapped to the HTML elements used to render the text.\n * @property {boolean} [isOffscreenCanvasSupported] true if we can use\n *   OffscreenCanvas to measure string widths.\n * @property {boolean} [mustRotate] true if the text layer must be rotated.\n * @property {boolean} [mustRescale] true if the text layer contents must be\n *   rescaled.\n */\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nconst ascentCache = new Map();\n\nfunction getCtx(size, isOffscreenCanvasSupported) {\n  let ctx;\n  if (isOffscreenCanvasSupported && FeatureTest.isOffscreenCanvasSupported) {\n    ctx = new OffscreenCanvas(size, size).getContext(\"2d\", { alpha: false });\n  } else {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = canvas.height = size;\n    ctx = canvas.getContext(\"2d\", { alpha: false });\n  }\n\n  return ctx;\n}\n\nfunction getAscent(fontFamily, isOffscreenCanvasSupported) {\n  const cachedAscent = ascentCache.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n\n  const ctx = getCtx(DEFAULT_FONT_SIZE, isOffscreenCanvasSupported);\n\n  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n  const metrics = ctx.measureText(\"\");\n\n  // Both properties aren't available by default in Firefox.\n  let ascent = metrics.fontBoundingBoxAscent;\n  let descent = Math.abs(metrics.fontBoundingBoxDescent);\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n\n    ctx.canvas.width = ctx.canvas.height = 0;\n    return ratio;\n  }\n\n  // Try basic heuristic to guess ascent/descent.\n  // Draw a g with baseline at 0,0 and then get the line\n  // number where a pixel has non-null red component (starting\n  // from bottom).\n  ctx.strokeStyle = \"red\";\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"g\", 0, 0);\n  let pixels = ctx.getImageData(\n    0,\n    0,\n    DEFAULT_FONT_SIZE,\n    DEFAULT_FONT_SIZE\n  ).data;\n  descent = 0;\n  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n    if (pixels[i] > 0) {\n      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  // Draw an A with baseline at 0,DEFAULT_FONT_SIZE and then get the line\n  // number where a pixel has non-null red component (starting\n  // from top).\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  ascent = 0;\n  for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n    if (pixels[i] > 0) {\n      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  ctx.canvas.width = ctx.canvas.height = 0;\n\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n\n  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n  return DEFAULT_FONT_ASCENT;\n}\n\nfunction appendText(task, geom, styles) {\n  // Initialize all used properties to keep the caches monomorphic.\n  const textDiv = document.createElement(\"span\");\n  const textDivProperties = {\n    angle: 0,\n    canvasWidth: 0,\n    hasText: geom.str !== \"\",\n    hasEOL: geom.hasEOL,\n    fontSize: 0,\n  };\n  task._textDivs.push(textDiv);\n\n  const tx = Util.transform(task._transform, geom.transform);\n  let angle = Math.atan2(tx[1], tx[0]);\n  const style = styles[geom.fontName];\n  if (style.vertical) {\n    angle += Math.PI / 2;\n  }\n  const fontHeight = Math.hypot(tx[2], tx[3]);\n  const fontAscent =\n    fontHeight * getAscent(style.fontFamily, task._isOffscreenCanvasSupported);\n\n  let left, top;\n  if (angle === 0) {\n    left = tx[4];\n    top = tx[5] - fontAscent;\n  } else {\n    left = tx[4] + fontAscent * Math.sin(angle);\n    top = tx[5] - fontAscent * Math.cos(angle);\n  }\n\n  const scaleFactorStr = \"calc(var(--scale-factor)*\";\n  const divStyle = textDiv.style;\n  // Setting the style properties individually, rather than all at once,\n  // should be OK since the `textDiv` isn't appended to the document yet.\n  if (task._container === task._rootContainer) {\n    divStyle.left = `${((100 * left) / task._pageWidth).toFixed(2)}%`;\n    divStyle.top = `${((100 * top) / task._pageHeight).toFixed(2)}%`;\n  } else {\n    // We're in a marked content span, hence we can't use percents.\n    divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n    divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n  }\n  divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n  divStyle.fontFamily = style.fontFamily;\n\n  textDivProperties.fontSize = fontHeight;\n\n  // Keeps screen readers from pausing on every new text span.\n  textDiv.setAttribute(\"role\", \"presentation\");\n\n  textDiv.textContent = geom.str;\n  // geom.dir may be 'ttb' for vertical texts.\n  textDiv.dir = geom.dir;\n\n  // `fontName` is only used by the FontInspector, and we only use `dataset`\n  // here to make the font name available in the debugger.\n  if (task._fontInspectorEnabled) {\n    textDiv.dataset.fontName = geom.fontName;\n  }\n  if (angle !== 0) {\n    textDivProperties.angle = angle * (180 / Math.PI);\n  }\n  // We don't bother scaling single-char text divs, because it has very\n  // little effect on text highlighting. This makes scrolling on docs with\n  // lots of such divs a lot faster.\n  let shouldScaleText = false;\n  if (geom.str.length > 1) {\n    shouldScaleText = true;\n  } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n    const absScaleX = Math.abs(geom.transform[0]),\n      absScaleY = Math.abs(geom.transform[3]);\n    // When the horizontal/vertical scaling differs significantly, also scale\n    // even single-char text to improve highlighting (fixes issue11713.pdf).\n    if (\n      absScaleX !== absScaleY &&\n      Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n    ) {\n      shouldScaleText = true;\n    }\n  }\n  if (shouldScaleText) {\n    textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n  }\n  task._textDivProperties.set(textDiv, textDivProperties);\n  if (task._isReadableStream) {\n    task._layoutText(textDiv);\n  }\n}\n\nfunction layout(params) {\n  const { div, scale, properties, ctx, prevFontSize, prevFontFamily } = params;\n  const { style } = div;\n  let transform = \"\";\n  if (properties.canvasWidth !== 0 && properties.hasText) {\n    const { fontFamily } = style;\n    const { canvasWidth, fontSize } = properties;\n\n    if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n      ctx.font = `${fontSize * scale}px ${fontFamily}`;\n      params.prevFontSize = fontSize;\n      params.prevFontFamily = fontFamily;\n    }\n\n    // Only measure the width for multi-char text divs, see `appendText`.\n    const { width } = ctx.measureText(div.textContent);\n\n    if (width > 0) {\n      transform = `scaleX(${(canvasWidth * scale) / width})`;\n    }\n  }\n  if (properties.angle !== 0) {\n    transform = `rotate(${properties.angle}deg) ${transform}`;\n  }\n  if (transform.length > 0) {\n    style.transform = transform;\n  }\n}\n\nfunction render(task) {\n  if (task._canceled) {\n    return;\n  }\n  const textDivs = task._textDivs;\n  const capability = task._capability;\n  const textDivsLength = textDivs.length;\n\n  // No point in rendering many divs as it would make the browser\n  // unusable even after the divs are rendered.\n  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n    capability.resolve();\n    return;\n  }\n\n  if (!task._isReadableStream) {\n    for (const textDiv of textDivs) {\n      task._layoutText(textDiv);\n    }\n  }\n  capability.resolve();\n}\n\nclass TextLayerRenderTask {\n  constructor({\n    textContentSource,\n    container,\n    viewport,\n    textDivs,\n    textDivProperties,\n    textContentItemsStr,\n    isOffscreenCanvasSupported,\n  }) {\n    this._textContentSource = textContentSource;\n    this._isReadableStream = textContentSource instanceof ReadableStream;\n    this._container = this._rootContainer = container;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._isOffscreenCanvasSupported = isOffscreenCanvasSupported;\n    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n\n    this._reader = null;\n    this._textDivProperties = textDivProperties || new WeakMap();\n    this._canceled = false;\n    this._capability = new PromiseCapability();\n    this._layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale: viewport.scale * (globalThis.devicePixelRatio || 1),\n      properties: null,\n      ctx: getCtx(0, isOffscreenCanvasSupported),\n    };\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    this._transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this._pageWidth = pageWidth;\n    this._pageHeight = pageHeight;\n\n    setLayerDimensions(container, viewport);\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this._capability.promise\n      .finally(() => {\n        this._layoutTextParams = null;\n      })\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n  }\n\n  /**\n   * Promise for textLayer rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Cancel rendering of the textLayer.\n   */\n  cancel() {\n    this._canceled = true;\n    if (this._reader) {\n      this._reader\n        .cancel(new AbortException(\"TextLayer task cancelled.\"))\n        .catch(() => {\n          // Avoid \"Uncaught promise\" messages in the console.\n        });\n      this._reader = null;\n    }\n    this._capability.reject(new AbortException(\"TextLayer task cancelled.\"));\n  }\n\n  /**\n   * @private\n   */\n  _processItems(items, styleCache) {\n    for (const item of items) {\n      if (item.str === undefined) {\n        if (\n          item.type === \"beginMarkedContentProps\" ||\n          item.type === \"beginMarkedContent\"\n        ) {\n          const parent = this._container;\n          this._container = document.createElement(\"span\");\n          this._container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this._container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this._container);\n        } else if (item.type === \"endMarkedContent\") {\n          this._container = this._container.parentNode;\n        }\n        continue;\n      }\n      this._textContentItemsStr.push(item.str);\n      appendText(this, item, styleCache);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _layoutText(textDiv) {\n    const textDivProperties = (this._layoutTextParams.properties =\n      this._textDivProperties.get(textDiv));\n    this._layoutTextParams.div = textDiv;\n    layout(this._layoutTextParams);\n\n    if (textDivProperties.hasText) {\n      this._container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this._container.append(br);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _render() {\n    const capability = new PromiseCapability();\n    let styleCache = Object.create(null);\n\n    if (this._isReadableStream) {\n      const pump = () => {\n        this._reader.read().then(({ value, done }) => {\n          if (done) {\n            capability.resolve();\n            return;\n          }\n\n          Object.assign(styleCache, value.styles);\n          this._processItems(value.items, styleCache);\n          pump();\n        }, capability.reject);\n      };\n\n      this._reader = this._textContentSource.getReader();\n      pump();\n    } else if (this._textContentSource) {\n      const { items, styles } = this._textContentSource;\n      this._processItems(items, styles);\n      capability.resolve();\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n\n    capability.promise.then(() => {\n      styleCache = null;\n      render(this);\n    }, this._capability.reject);\n  }\n}\n\n/**\n * @param {TextLayerRenderParameters} params\n * @returns {TextLayerRenderTask}\n */\nfunction renderTextLayer(params) {\n  if (\n    (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n    !params.textContentSource &&\n    (params.textContent || params.textContentStream)\n  ) {\n    deprecated(\n      \"The TextLayerRender `textContent`/`textContentStream` parameters \" +\n        \"will be removed in the future, please use `textContentSource` instead.\"\n    );\n    params.textContentSource = params.textContent || params.textContentStream;\n  }\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC && !TESTING\")) {\n    const { container, viewport } = params;\n    const style = getComputedStyle(container);\n    const visibility = style.getPropertyValue(\"visibility\");\n    const scaleFactor = parseFloat(style.getPropertyValue(\"--scale-factor\"));\n\n    if (\n      visibility === \"visible\" &&\n      (!scaleFactor || Math.abs(scaleFactor - viewport.scale) > 1e-5)\n    ) {\n      console.error(\n        \"The `--scale-factor` CSS-variable must be set, \" +\n          \"to the same value as `viewport.scale`, \" +\n          \"either on the `container`-element itself or higher up in the DOM.\"\n      );\n    }\n  }\n  const task = new TextLayerRenderTask(params);\n  task._render();\n  return task;\n}\n\n/**\n * @param {TextLayerUpdateParameters} params\n * @returns {undefined}\n */\nfunction updateTextLayer({\n  container,\n  viewport,\n  textDivs,\n  textDivProperties,\n  isOffscreenCanvasSupported,\n  mustRotate = true,\n  mustRescale = true,\n}) {\n  if (mustRotate) {\n    setLayerDimensions(container, { rotation: viewport.rotation });\n  }\n\n  if (mustRescale) {\n    const ctx = getCtx(0, isOffscreenCanvasSupported);\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const params = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      scale,\n      properties: null,\n      ctx,\n    };\n    for (const div of textDivs) {\n      params.properties = textDivProperties.get(div);\n      params.div = div;\n      layout(params);\n    }\n  }\n}\n\nexport { renderTextLayer, TextLayerRenderTask, updateTextLayer };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./editor.js\").AnnotationEditor} AnnotationEditor */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./tools.js\").AnnotationEditorUIManager} AnnotationEditorUIManager */\n/** @typedef {import(\"../display_utils.js\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../../web/text_accessibility.js\").TextAccessibilityManager} TextAccessibilityManager */\n/** @typedef {import(\"../../web/interfaces\").IL10n} IL10n */\n\nimport { AnnotationEditorType, FeatureTest } from \"../../shared/util.js\";\nimport { bindEvents } from \"./tools.js\";\nimport { FreeTextEditor } from \"./freetext.js\";\nimport { InkEditor } from \"./ink.js\";\nimport { setLayerDimensions } from \"../display_utils.js\";\n\n/**\n * @typedef {Object} AnnotationEditorLayerOptions\n * @property {Object} mode\n * @property {HTMLDivElement} div\n * @property {AnnotationEditorUIManager} uiManager\n * @property {boolean} enabled\n * @property {TextAccessibilityManager} [accessibilityManager]\n * @property {number} pageIndex\n * @property {IL10n} l10n\n */\n\n/**\n * @typedef {Object} RenderEditorLayerOptions\n * @property {PageViewport} viewport\n */\n\n/**\n * Manage all the different editors on a page.\n */\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n\n  #allowClick = false;\n\n  #boundPointerup = this.pointerup.bind(this);\n\n  #boundPointerdown = this.pointerdown.bind(this);\n\n  #editors = new Map();\n\n  #hadPointerDown = false;\n\n  #isCleaningUp = false;\n\n  #uiManager;\n\n  static _initialized = false;\n\n  /**\n   * @param {AnnotationEditorLayerOptions} options\n   */\n  constructor(options) {\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      FreeTextEditor.initialize(options.l10n);\n      InkEditor.initialize(options.l10n);\n    }\n    options.uiManager.registerEditorTypes([FreeTextEditor, InkEditor]);\n\n    this.#uiManager = options.uiManager;\n    this.pageIndex = options.pageIndex;\n    this.div = options.div;\n    this.#accessibilityManager = options.accessibilityManager;\n\n    this.#uiManager.addLayer(this);\n  }\n\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n\n  /**\n   * Update the toolbar if it's required to reflect the tool currently used.\n   * @param {number} mode\n   */\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n\n  /**\n   * The mode has changed: it must be updated.\n   * @param {number} mode\n   */\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    if (mode === AnnotationEditorType.INK) {\n      // We always want to an ink editor ready to draw in.\n      this.addInkEditorIfNeeded(false);\n      this.disableClick();\n    } else {\n      this.enableClick();\n    }\n    this.#uiManager.unselectAll();\n\n    if (mode !== AnnotationEditorType.NONE) {\n      this.div.classList.toggle(\n        \"freeTextEditing\",\n        mode === AnnotationEditorType.FREETEXT\n      );\n      this.div.classList.toggle(\n        \"inkEditing\",\n        mode === AnnotationEditorType.INK\n      );\n      this.div.hidden = false;\n    }\n  }\n\n  addInkEditorIfNeeded(isCommitting) {\n    if (\n      !isCommitting &&\n      this.#uiManager.getMode() !== AnnotationEditorType.INK\n    ) {\n      return;\n    }\n\n    if (!isCommitting) {\n      // We're removing an editor but an empty one can already exist so in this\n      // case we don't need to create a new one.\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n\n    const editor = this.#createAndAddNewEditor({ offsetX: 0, offsetY: 0 });\n    editor.setInBackground();\n  }\n\n  /**\n   * Set the editing state.\n   * @param {boolean} isEditing\n   */\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n\n  /**\n   * Add some commands into the CommandManager (undo/redo stuff).\n   * @param {Object} params\n   */\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n\n  /**\n   * Enable pointer events on the main div in order to enable\n   * editor creation.\n   */\n  enable() {\n    this.div.style.pointerEvents = \"auto\";\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n    }\n  }\n\n  /**\n   * Disable editor creation.\n   */\n  disable() {\n    this.div.style.pointerEvents = \"none\";\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n  }\n\n  /**\n   * Set the current editor.\n   * @param {AnnotationEditor} editor\n   */\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n\n    this.#uiManager.setActiveEditor(editor);\n  }\n\n  enableClick() {\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup);\n  }\n\n  disableClick() {\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n  }\n\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n  }\n\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n  }\n\n  /**\n   * Remove an editor.\n   * @param {AnnotationEditor} editor\n   */\n  remove(editor) {\n    // Since we can undo a removal we need to keep the\n    // parent property as it is, so don't null it!\n\n    this.#uiManager.removeEditor(editor);\n    this.detach(editor);\n    editor.div.style.display = \"none\";\n    setTimeout(() => {\n      // When the div is removed from DOM the focus can move on the\n      // document.body, so we just slightly postpone the removal in\n      // order to let an element potentially grab the focus before\n      // the body.\n      editor.div.style.display = \"\";\n      editor.div.remove();\n      editor.isAttachedToDOM = false;\n      if (document.activeElement === document.body) {\n        this.#uiManager.focusMainContainer();\n      }\n    }, 0);\n\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(/* isCommitting = */ false);\n    }\n  }\n\n  /**\n   * An editor can have a different parent, for example after having\n   * being dragged and droped from a page to another.\n   * @param {AnnotationEditor} editor\n   */\n  #changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n\n  /**\n   * Add a new editor in the current view.\n   * @param {AnnotationEditor} editor\n   */\n  add(editor) {\n    this.#changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n\n    this.moveEditorInDOM(editor);\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n  }\n\n  moveEditorInDOM(editor) {\n    this.#accessibilityManager?.moveElementInDOM(\n      this.div,\n      editor.div,\n      editor.contentDiv,\n      /* isRemovable = */ true\n    );\n  }\n\n  /**\n   * Add or rebuild depending if it has been removed or not.\n   * @param {AnnotationEditor} editor\n   */\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.rebuild();\n    } else {\n      this.add(editor);\n    }\n  }\n\n  /**\n   * Add a new editor and make this addition undoable.\n   * @param {AnnotationEditor} editor\n   */\n  addANewEditor(editor) {\n    const cmd = () => {\n      this.addOrRebuild(editor);\n    };\n    const undo = () => {\n      editor.remove();\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  /**\n   * Add a new editor and make this addition undoable.\n   * @param {AnnotationEditor} editor\n   */\n  addUndoableEditor(editor) {\n    const cmd = () => {\n      this.addOrRebuild(editor);\n    };\n    const undo = () => {\n      editor.remove();\n    };\n\n    this.addCommands({ cmd, undo, mustExec: false });\n  }\n\n  /**\n   * Get an id for an editor.\n   * @returns {string}\n   */\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} params\n   * @returns {AnnotationEditor}\n   */\n  #createNewEditor(params) {\n    switch (this.#uiManager.getMode()) {\n      case AnnotationEditorType.FREETEXT:\n        return new FreeTextEditor(params);\n      case AnnotationEditorType.INK:\n        return new InkEditor(params);\n    }\n    return null;\n  }\n\n  /**\n   * Create a new editor\n   * @param {Object} data\n   * @returns {AnnotationEditor}\n   */\n  deserialize(data) {\n    switch (data.annotationType) {\n      case AnnotationEditorType.FREETEXT:\n        return FreeTextEditor.deserialize(data, this, this.#uiManager);\n      case AnnotationEditorType.INK:\n        return InkEditor.deserialize(data, this, this.#uiManager);\n    }\n    return null;\n  }\n\n  /**\n   * Create and add a new editor.\n   * @param {PointerEvent} event\n   * @returns {AnnotationEditor}\n   */\n  #createAndAddNewEditor(event) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n    });\n    if (editor) {\n      this.add(editor);\n    }\n\n    return editor;\n  }\n\n  /**\n   * Set the last selected editor.\n   * @param {AnnotationEditor} editor\n   */\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n\n  /**\n   * Add or remove an editor the current selection.\n   * @param {AnnotationEditor} editor\n   */\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n\n  /**\n   * Check if the editor is selected.\n   * @param {AnnotationEditor} editor\n   */\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n\n  /**\n   * Unselect an editor.\n   * @param {AnnotationEditor} editor\n   */\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n\n  /**\n   * Pointerup callback.\n   * @param {PointerEvent} event\n   */\n  pointerup(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Don't create an editor on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    if (!this.#hadPointerDown) {\n      // It can happen when the user starts a drag inside a text editor\n      // and then releases the mouse button outside of it. In such a case\n      // we don't want to create a new editor, hence we check that a pointerdown\n      // occurred on this div previously.\n      return;\n    }\n    this.#hadPointerDown = false;\n\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n\n    this.#createAndAddNewEditor(event);\n  }\n\n  /**\n   * Pointerdown callback.\n   * @param {PointerEvent} event\n   */\n  pointerdown(event) {\n    const { isMac } = FeatureTest.platform;\n    if (event.button !== 0 || (event.ctrlKey && isMac)) {\n      // Do nothing on right click.\n      return;\n    }\n\n    if (event.target !== this.div) {\n      return;\n    }\n\n    this.#hadPointerDown = true;\n\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n\n  /**\n   * Drag callback.\n   * @param {DragEvent} event\n   */\n  drop(event) {\n    const id = event.dataTransfer.getData(\"text/plain\");\n    const editor = this.#uiManager.getEditor(id);\n    if (!editor) {\n      return;\n    }\n\n    event.preventDefault();\n    event.dataTransfer.dropEffect = \"move\";\n\n    this.#changeParent(editor);\n\n    const rect = this.div.getBoundingClientRect();\n    const endX = event.clientX - rect.x;\n    const endY = event.clientY - rect.y;\n\n    editor.translate(endX - editor.startX, endY - editor.startY);\n    this.moveEditorInDOM(editor);\n    editor.div.focus();\n  }\n\n  /**\n   * Dragover callback.\n   * @param {DragEvent} event\n   */\n  dragover(event) {\n    event.preventDefault();\n  }\n\n  /**\n   * Destroy the main editor.\n   */\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.setActiveEditor(null);\n    }\n\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n\n  #cleanup() {\n    // When we're cleaning up, some editors are removed but we don't want\n    // to add a new one which will induce an addition in this.#editors, hence\n    // an infinite loop.\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n\n  /**\n   * Render the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  render({ viewport }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    bindEvents(this, this.div, [\"dragover\", \"drop\"]);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n    }\n    this.updateMode();\n  }\n\n  /**\n   * Update the main editor.\n   * @param {RenderEditorLayerOptions} parameters\n   */\n  update({ viewport }) {\n    // Editors have their dimensions/positions in percent so to avoid any\n    // issues (see #15582), we must commit the current one before changing\n    // the viewport.\n    this.#uiManager.commitOrRemove();\n\n    this.viewport = viewport;\n    setLayerDimensions(this.div, { rotation: viewport.rotation });\n    this.updateMode();\n  }\n\n  /**\n   * Get page dimensions.\n   * @returns {Object} dimensions.\n   */\n  get pageDimensions() {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n}\n\nexport { AnnotationEditorLayer };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./annotation_editor_layer.js\").AnnotationEditorLayer} AnnotationEditorLayer */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  assert,\n  LINE_FACTOR,\n  Util,\n} from \"../../shared/util.js\";\nimport { bindEvents, KeyboardManager } from \"./tools.js\";\nimport { AnnotationEditor } from \"./editor.js\";\n\n/**\n * Basic text editor in order to create a FreeTex annotation.\n */\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n\n  #color;\n\n  #content = \"\";\n\n  #editorDivId = `${this.id}-editor`;\n\n  #hasAlreadyBeenCommitted = false;\n\n  #fontSize;\n\n  static _freeTextDefaultContent = \"\";\n\n  static _l10nPromise;\n\n  static _internalPadding = 0;\n\n  static _defaultColor = null;\n\n  static _defaultFontSize = 10;\n\n  static _keyboardManager = new KeyboardManager([\n    [\n      [\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"],\n      FreeTextEditor.prototype.commitOrRemove,\n    ],\n  ]);\n\n  static _type = \"freetext\";\n\n  constructor(params) {\n    super({ ...params, name: \"freeTextEditor\" });\n    this.#color =\n      params.color ||\n      FreeTextEditor._defaultColor ||\n      AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n\n  static initialize(l10n) {\n    this._l10nPromise = new Map(\n      [\"free_text2_default_content\", \"editor_free_text2_aria_label\"].map(\n        str => [str, l10n.get(str)]\n      )\n    );\n\n    const style = getComputedStyle(document.documentElement);\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      const lineHeight = parseFloat(\n        style.getPropertyValue(\"--freetext-line-height\")\n      );\n      assert(\n        lineHeight === LINE_FACTOR,\n        \"Update the CSS variable to agree with the constant.\"\n      );\n    }\n\n    this._internalPadding = parseFloat(\n      style.getPropertyValue(\"--freetext-padding\")\n    );\n  }\n\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n\n  static get defaultPropertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.FREETEXT_SIZE,\n        FreeTextEditor._defaultFontSize,\n      ],\n      [\n        AnnotationEditorParamsType.FREETEXT_COLOR,\n        FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n    ];\n  }\n\n  get propertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize],\n      [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color],\n    ];\n  }\n\n  /**\n   * Update the font size and make this action as undoable.\n   * @param {number} fontSize\n   */\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: () => {\n        setFontsize(fontSize);\n      },\n      undo: () => {\n        setFontsize(savedFontsize);\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: () => {\n        this.#color = this.editorDiv.style.color = color;\n      },\n      undo: () => {\n        this.#color = this.editorDiv.style.color = savedColor;\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  getInitialTranslation() {\n    // The start of the base line is where the user clicked.\n    const scale = this.parentScale;\n    return [\n      -FreeTextEditor._internalPadding * scale,\n      -(FreeTextEditor._internalPadding + this.#fontSize) * scale,\n    ];\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilting it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n    }\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this.div.draggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this.div.draggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n\n    // On Chrome, the focus is given to <body> when contentEditable is set to\n    // false, hence we focus the div.\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n\n    // In case the blur callback hasn't been called.\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freeTextEditing\");\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    if (this.width) {\n      // The editor was created in using ctrl+c.\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n\n  /** @inheritdoc */\n  remove() {\n    this.isEditing = false;\n    this.parent.setEditingState(true);\n    this.parent.div.classList.add(\"freeTextEditing\");\n    super.remove();\n  }\n\n  /**\n   * Extract the text from this editor.\n   * @returns {string}\n   */\n  #extractText() {\n    const divs = this.editorDiv.getElementsByTagName(\"div\");\n    if (divs.length === 0) {\n      return this.editorDiv.innerText;\n    }\n    const buffer = [];\n    for (const div of divs) {\n      buffer.push(div.innerText.replace(/\\r\\n?|\\n/, \"\"));\n    }\n    return buffer.join(\"\\n\");\n  }\n\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      // This editor isn't on screen but we need to get its dimensions, so\n      // we just insert it in the DOM, get its bounding box and then remove it.\n      const { currentLayer, div } = this;\n      const savedDisplay = div.style.display;\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n    }\n\n    this.width = rect.width / parentWidth;\n    this.height = rect.height / parentHeight;\n  }\n\n  /**\n   * Commit the content we have in this editor.\n   * @returns {undefined}\n   */\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n\n    super.commit();\n    if (!this.#hasAlreadyBeenCommitted) {\n      // This editor has something and it's the first time\n      // it's commited so we can add it in the undo/redo stack.\n      this.#hasAlreadyBeenCommitted = true;\n      this.parent.addUndoableEditor(this);\n    }\n\n    this.disableEditMode();\n    this.#content = this.#extractText().trimEnd();\n\n    this.#setEditorDimensions();\n  }\n\n  /** @inheritdoc */\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n\n  /**\n   * ondblclick callback.\n   * @param {MouseEvent} event\n   */\n  dblclick(event) {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n\n  /**\n   * onkeydown callback.\n   * @param {KeyboardEvent} event\n   */\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enableEditMode();\n      this.editorDiv.focus();\n    }\n  }\n\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freeTextEditing\", this.isEmpty());\n  }\n\n  /** @inheritdoc */\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n\n  /** @inheritdoc */\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.enableEditing();\n\n    FreeTextEditor._l10nPromise\n      .get(\"editor_free_text2_aria_label\")\n      .then(msg => this.editorDiv?.setAttribute(\"aria-label\", msg));\n\n    FreeTextEditor._l10nPromise\n      .get(\"free_text2_default_content\")\n      .then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n\n    const { style } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n\n    this.div.append(this.editorDiv);\n\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n\n    // TODO: implement paste callback.\n    // The goal is to sanitize and have something suitable for this\n    // editor.\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n\n      for (const line of this.#content.split(\"\\n\")) {\n        const div = document.createElement(\"div\");\n        div.append(\n          line ? document.createTextNode(line) : document.createElement(\"br\")\n        );\n        this.editorDiv.append(div);\n      }\n\n      this.div.draggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this.div.draggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n\n    return this.div;\n  }\n\n  get contentDiv() {\n    return this.editorDiv;\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = data.value;\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n\n    const color = AnnotationEditor._colorManager.convert(\n      this.isAttachedToDOM\n        ? getComputedStyle(this.editorDiv).color\n        : this.#color\n    );\n\n    return {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#content,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n    };\n  }\n}\n\nexport { FreeTextEditor };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  Util,\n} from \"../../shared/util.js\";\nimport { AnnotationEditor } from \"./editor.js\";\nimport { opacityToHex } from \"./tools.js\";\n\n// The dimensions of the resizer is 15x15:\n// https://searchfox.org/mozilla-central/rev/1ce190047b9556c3c10ab4de70a0e61d893e2954/toolkit/content/minimal-xul.css#136-137\n// so each dimension must be greater than RESIZER_SIZE.\nconst RESIZER_SIZE = 16;\n\n/**\n * Basic draw editor in order to generate an Ink annotation.\n */\nclass InkEditor extends AnnotationEditor {\n  #aspectRatio = 0;\n\n  #baseHeight = 0;\n\n  #baseWidth = 0;\n\n  #boundCanvasContextMenu = this.canvasContextMenu.bind(this);\n\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n\n  #currentPath2D = new Path2D();\n\n  #disableEditing = false;\n\n  #hasSomethingToDraw = false;\n\n  #isCanvasInitialized = false;\n\n  #observer = null;\n\n  #realWidth = 0;\n\n  #realHeight = 0;\n\n  #requestFrameCallback = null;\n\n  static _defaultColor = null;\n\n  static _defaultOpacity = 1;\n\n  static _defaultThickness = 1;\n\n  static _l10nPromise;\n\n  static _type = \"ink\";\n\n  constructor(params) {\n    super({ ...params, name: \"inkEditor\" });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n  }\n\n  static initialize(l10n) {\n    this._l10nPromise = new Map(\n      [\"editor_ink_canvas_aria_label\", \"editor_ink2_aria_label\"].map(str => [\n        str,\n        l10n.get(str),\n      ])\n    );\n  }\n\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n\n  /** @inheritdoc */\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n\n  static get defaultPropertiesToUpdate() {\n    return [\n      [AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(InkEditor._defaultOpacity * 100),\n      ],\n    ];\n  }\n\n  /** @inheritdoc */\n  get propertiesToUpdate() {\n    return [\n      [\n        AnnotationEditorParamsType.INK_THICKNESS,\n        this.thickness || InkEditor._defaultThickness,\n      ],\n      [\n        AnnotationEditorParamsType.INK_COLOR,\n        this.color ||\n          InkEditor._defaultColor ||\n          AnnotationEditor._defaultLineColor,\n      ],\n      [\n        AnnotationEditorParamsType.INK_OPACITY,\n        Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity)),\n      ],\n    ];\n  }\n\n  /**\n   * Update the thickness and make this action undoable.\n   * @param {number} thickness\n   */\n  #updateThickness(thickness) {\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: () => {\n        this.thickness = thickness;\n        this.#fitToContent();\n      },\n      undo: () => {\n        this.thickness = savedThickness;\n        this.#fitToContent();\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the color and make this action undoable.\n   * @param {string} color\n   */\n  #updateColor(color) {\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: () => {\n        this.color = color;\n        this.#redraw();\n      },\n      undo: () => {\n        this.color = savedColor;\n        this.#redraw();\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /**\n   * Update the opacity and make this action undoable.\n   * @param {number} opacity\n   */\n  #updateOpacity(opacity) {\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: () => {\n        this.opacity = opacity;\n        this.#redraw();\n      },\n      undo: () => {\n        this.opacity = savedOpacity;\n        this.#redraw();\n      },\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true,\n    });\n  }\n\n  /** @inheritdoc */\n  rebuild() {\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n\n    if (!this.isAttachedToDOM) {\n      // At some point this editor was removed and we're rebuilding it,\n      // hence we must add it to its parent.\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n\n  /** @inheritdoc */\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n\n    // Destroy the canvas.\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n\n    this.#observer.disconnect();\n    this.#observer = null;\n\n    super.remove();\n  }\n\n  setParent(parent) {\n    if (!this.parent && parent) {\n      // We've a parent hence the rescale will be handled thanks to the\n      // ResizeObserver.\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      // The editor is removed from the DOM, hence we handle the rescale thanks\n      // to the onScaleChanging callback.\n      // This way, it'll be saved/printed correctly.\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n\n  /** @inheritdoc */\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n\n    super.enableEditMode();\n    this.div.draggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n\n  /** @inheritdoc */\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n\n    super.disableEditMode();\n    this.div.draggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n  }\n\n  /** @inheritdoc */\n  onceAdded() {\n    this.div.draggable = !this.isEmpty();\n  }\n\n  /** @inheritdoc */\n  isEmpty() {\n    return (\n      this.paths.length === 0 ||\n      (this.paths.length === 1 && this.paths[0].length === 0)\n    );\n  }\n\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height],\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n\n  /**\n   * Set line styles.\n   */\n  #setStroke() {\n    const { ctx, color, opacity, thickness, parentScale, scaleFactor } = this;\n    ctx.lineWidth = (thickness * parentScale) / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n\n  /**\n   * Start to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #startDrawing(x, y) {\n    this.canvas.addEventListener(\"contextmenu\", this.#boundCanvasContextMenu);\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.removeEventListener(\n      \"pointerdown\",\n      this.#boundCanvasPointerdown\n    );\n\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||=\n        InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n\n  /**\n   * Draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n\n    this.#makeBezierCurve(\n      path2D,\n      ...currentPath.at(-3),\n      ...currentPath.at(-2),\n      x,\n      y\n    );\n  }\n\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n\n  /**\n   * Stop to draw on the canvas.\n   * @param {number} x\n   * @param {number} y\n   */\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n\n    this.#draw(x, y);\n    this.#endPath();\n\n    // Interpolate the path entered by the user with some\n    // Bezier's curves in order to have a smoother path and\n    // to reduce the data size used to draw it in the PDF.\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      // We have only one point finally.\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this.rebuild();\n    };\n\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n\n    this.addCommands({ cmd, undo, mustExec: true });\n  }\n\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n\n    const { ctx } = this;\n    ctx.save();\n\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n      // In Chrome, the clip() method doesn't work as expected.\n      ctx.clearRect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.beginPath();\n      ctx.rect(xMin, yMin, xMax - xMin, yMax - yMin);\n      ctx.clip();\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n\n    ctx.restore();\n  }\n\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n\n    path2D.bezierCurveTo(\n      prevX + (2 * (x1 - prevX)) / 3,\n      prevY + (2 * (y1 - prevY)) / 3,\n      x3 + (2 * (x1 - x3)) / 3,\n      y3 + (2 * (y1 - y3)) / 3,\n      x3,\n      y3\n    );\n  }\n\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n\n      // The quadratic is: [[x0, y0], [x1, y1], [x3, y3]].\n      // Convert the quadratic to a cubic\n      // (see https://fontforge.org/docs/techref/bezier.html#converting-truetype-to-postscript)\n      const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n      const control2 = [x3 + (2 * (x1 - x3)) / 3, y3 + (2 * (y1 - y3)) / 3];\n\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n\n      [x0, y0] = [x3, y3];\n    }\n\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n\n    // The quadratic is: [[x0, y0], [x1, y1], [x2, y2]].\n    const control1 = [x0 + (2 * (x1 - x0)) / 3, y0 + (2 * (y1 - y0)) / 3];\n    const control2 = [x2 + (2 * (x1 - x2)) / 3, y2 + (2 * (y1 - y2)) / 3];\n\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n\n  /**\n   * Redraw all the paths.\n   */\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n\n    const { canvas, ctx } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n\n  /**\n   * Commit the curves we have in this editor.\n   */\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n\n    super.commit();\n\n    this.isEditing = false;\n    this.disableEditMode();\n\n    // This editor must be on top of the main ink editor.\n    this.setInForeground();\n\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n\n    this.#fitToContent(/* firstTime = */ true);\n\n    this.parent.addInkEditorIfNeeded(/* isCommitting = */ true);\n\n    // When commiting, the position of this editor is changed, hence we must\n    // move it to the right position in the DOM.\n    this.parent.moveEditorInDOM(this);\n    this.div.focus({\n      preventScroll: true /* See issue #15744 */,\n    });\n  }\n\n  /** @inheritdoc */\n  focusin(event) {\n    super.focusin(event);\n    this.enableEditMode();\n  }\n\n  /**\n   * onpointerdown callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n\n    // We want to draw on top of any other editors.\n    // Since it's the last child, there's no need to give it a higher z-index.\n    this.setInForeground();\n\n    event.preventDefault();\n\n    if (event.type !== \"mouse\") {\n      this.div.focus();\n    }\n\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * oncontextmenu callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasContextMenu(event) {\n    event.preventDefault();\n  }\n\n  /**\n   * onpointermove callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * onpointerup callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n\n  /**\n   * onpointerleave callback for the canvas we're drawing on.\n   * @param {PointerEvent} event\n   */\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n\n  /**\n   * End the drawing.\n   * @param {PointerEvent} event\n   */\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\n      \"pointerleave\",\n      this.#boundCanvasPointerleave\n    );\n    this.canvas.removeEventListener(\n      \"pointermove\",\n      this.#boundCanvasPointermove\n    );\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n\n    // Slight delay to avoid the context menu to appear (it can happen on a long\n    // tap with a pen).\n    setTimeout(() => {\n      this.canvas.removeEventListener(\n        \"contextmenu\",\n        this.#boundCanvasContextMenu\n      );\n    }, 10);\n\n    this.#stopDrawing(event.offsetX, event.offsetY);\n\n    this.addToAnnotationStorage();\n\n    // Since the ink editor covers all of the page and we want to be able\n    // to select another editor, we just put this one in the background.\n    this.setInBackground();\n  }\n\n  /**\n   * Create the canvas element.\n   */\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n\n    InkEditor._l10nPromise\n      .get(\"editor_ink_canvas_aria_label\")\n      .then(msg => this.canvas?.setAttribute(\"aria-label\", msg));\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n\n  /**\n   * Create the resize observer.\n   */\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n\n  /** @inheritdoc */\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n\n    super.render();\n\n    InkEditor._l10nPromise\n      .get(\"editor_ink2_aria_label\")\n      .then(msg => this.div?.setAttribute(\"aria-label\", msg));\n\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n\n    this.#createCanvas();\n\n    if (this.width) {\n      // This editor was created in using copy (ctrl+c).\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(\n        baseX * parentWidth,\n        baseY * parentHeight,\n        this.width * parentWidth,\n        this.height * parentHeight\n      );\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.#setMinDims();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n\n    this.#createObserver();\n\n    return this.div;\n  }\n\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n\n  /**\n   * When the dimensions of the div change the inner canvas must\n   * renew its dimensions, hence it must redraw its own contents.\n   * @param {number} width - the new width of the div\n   * @param {number} height - the new height of the div\n   * @returns\n   */\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (\n      this.#realWidth === roundedWidth &&\n      this.#realHeight === roundedHeight\n    ) {\n      return;\n    }\n\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n\n    this.canvas.style.visibility = \"hidden\";\n\n    if (\n      this.#aspectRatio &&\n      Math.abs(this.#aspectRatio - width / height) > 1e-2\n    ) {\n      height = Math.ceil(width / this.#aspectRatio);\n      this.setDims(width, height);\n    }\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.canvas.style.visibility = \"visible\";\n\n    // For any reason the dimensions couldn't be in percent but in pixels, hence\n    // we must fix them.\n    this.fixDims();\n  }\n\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n\n  /**\n   * Update the canvas transform.\n   */\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(\n      this.scaleFactor,\n      0,\n      0,\n      this.scaleFactor,\n      this.translationX * this.scaleFactor + padding,\n      this.translationY * this.scaleFactor + padding\n    );\n  }\n\n  /**\n   * Convert into a Path2D.\n   * @param {Arra<Array<number>} bezier\n   * @returns {Path2D}\n   */\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(\n        control1[0],\n        control1[1],\n        control2[0],\n        control2[1],\n        second[0],\n        second[1]\n      );\n    }\n    return path2D;\n  }\n\n  /**\n   * Transform and serialize the paths.\n   * @param {number} s - scale factor\n   * @param {number} tx - abscissa of the translation\n   * @param {number} ty - ordinate of the translation\n   * @param {number} h - height of the bounding box\n   */\n  #serializePaths(s, tx, ty, h) {\n    const NUMBER_OF_POINTS_ON_BEZIER_CURVE = 4;\n    const paths = [];\n    const padding = this.thickness / 2;\n    let buffer, points;\n\n    for (const bezier of this.paths) {\n      buffer = [];\n      points = [];\n      for (let i = 0, ii = bezier.length; i < ii; i++) {\n        const [first, control1, control2, second] = bezier[i];\n        const p10 = s * (first[0] + tx) + padding;\n        const p11 = h - s * (first[1] + ty) - padding;\n        const p20 = s * (control1[0] + tx) + padding;\n        const p21 = h - s * (control1[1] + ty) - padding;\n        const p30 = s * (control2[0] + tx) + padding;\n        const p31 = h - s * (control2[1] + ty) - padding;\n        const p40 = s * (second[0] + tx) + padding;\n        const p41 = h - s * (second[1] + ty) - padding;\n\n        if (i === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        this.#extractPointsOnBezier(\n          p10,\n          p11,\n          p20,\n          p21,\n          p30,\n          p31,\n          p40,\n          p41,\n          NUMBER_OF_POINTS_ON_BEZIER_CURVE,\n          points\n        );\n      }\n      paths.push({ bezier: buffer, points });\n    }\n\n    return paths;\n  }\n\n  /**\n   * Extract n-1 points from the cubic Bezier curve.\n   * @param {number} p10\n   * @param {number} p11\n   * @param {number} p20\n   * @param {number} p21\n   * @param {number} p30\n   * @param {number} p31\n   * @param {number} p40\n   * @param {number} p41\n   * @param {number} n\n   * @param {Array<number>} points\n   * @returns {undefined}\n   */\n  #extractPointsOnBezier(p10, p11, p20, p21, p30, p31, p40, p41, n, points) {\n    // If we can save few points thanks to the flatness we must do it.\n    if (this.#isAlmostFlat(p10, p11, p20, p21, p30, p31, p40, p41)) {\n      points.push(p40, p41);\n      return;\n    }\n\n    // Apply the de Casteljau's algorithm in order to get n points belonging\n    // to the Bezier's curve:\n    // https://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm\n\n    // The first point is the last point of the previous Bezier curve\n    // so no need to push the first point.\n    for (let i = 1; i < n - 1; i++) {\n      const t = i / n;\n      const mt = 1 - t;\n\n      let q10 = t * p10 + mt * p20;\n      let q11 = t * p11 + mt * p21;\n\n      let q20 = t * p20 + mt * p30;\n      let q21 = t * p21 + mt * p31;\n\n      const q30 = t * p30 + mt * p40;\n      const q31 = t * p31 + mt * p41;\n\n      q10 = t * q10 + mt * q20;\n      q11 = t * q11 + mt * q21;\n\n      q20 = t * q20 + mt * q30;\n      q21 = t * q21 + mt * q31;\n\n      q10 = t * q10 + mt * q20;\n      q11 = t * q11 + mt * q21;\n\n      points.push(q10, q11);\n    }\n\n    points.push(p40, p41);\n  }\n\n  /**\n   * Check if a cubic Bezier curve is almost flat.\n   * @param {number} p10\n   * @param {number} p11\n   * @param {number} p20\n   * @param {number} p21\n   * @param {number} p30\n   * @param {number} p31\n   * @param {number} p40\n   * @param {number} p41\n   * @returns {boolean}\n   */\n  #isAlmostFlat(p10, p11, p20, p21, p30, p31, p40, p41) {\n    // For reference:\n    //   https://jeremykun.com/tag/bezier-curves/\n    const tol = 10;\n\n    const ax = (3 * p20 - 2 * p10 - p40) ** 2;\n    const ay = (3 * p21 - 2 * p11 - p41) ** 2;\n    const bx = (3 * p30 - p10 - 2 * p40) ** 2;\n    const by = (3 * p31 - p11 - 2 * p41) ** 2;\n\n    return Math.max(ax, bx) + Math.max(ay, by) <= tol;\n  }\n\n  /**\n   * Get the bounding box containing all the paths.\n   * @returns {Array<number>}\n   */\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(\n          ...first,\n          ...control1,\n          ...control2,\n          ...second\n        );\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n\n    return [xMin, yMin, xMax, yMax];\n  }\n\n  /**\n   * The bounding box is computed with null thickness, so we must take\n   * it into account for the display.\n   * It corresponds to the total padding, hence it should be divided by 2\n   * in order to have left/right paddings.\n   * @returns {number}\n   */\n  #getPadding() {\n    return this.#disableEditing\n      ? Math.ceil(this.thickness * this.parentScale)\n      : 0;\n  }\n\n  /**\n   * Set the div position and dimensions in order to fit to\n   * the bounding box of the contents.\n   * @returns {undefined}\n   */\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(RESIZER_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(RESIZER_SIZE, bbox[3] - bbox[1]);\n\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n\n    this.#aspectRatio = width / height;\n    this.#setMinDims();\n\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n\n    this.#realWidth = width;\n    this.#realHeight = height;\n\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(\n      prevTranslationX - this.translationX - unscaledPadding,\n      prevTranslationY - this.translationY - unscaledPadding\n    );\n  }\n\n  #setMinDims() {\n    const { style } = this.div;\n    if (this.#aspectRatio >= 1) {\n      style.minHeight = `${RESIZER_SIZE}px`;\n      style.minWidth = `${Math.round(this.#aspectRatio * RESIZER_SIZE)}px`;\n    } else {\n      style.minWidth = `${RESIZER_SIZE}px`;\n      style.minHeight = `${Math.round(RESIZER_SIZE / this.#aspectRatio)}px`;\n    }\n  }\n\n  /** @inheritdoc */\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n\n    editor.#aspectRatio = width / height;\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n\n    for (const { bezier } of data.paths) {\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (height - bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (height - bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (height - bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (height - bezier[i + 5] - padding);\n        path.push([\n          [p0, p1],\n          [p10, p11],\n          [p20, p21],\n          [p30, p31],\n        ]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(RESIZER_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(RESIZER_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n\n    return editor;\n  }\n\n  /** @inheritdoc */\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const rect = this.getRect(0, 0);\n    const height =\n      this.rotation % 180 === 0 ? rect[3] - rect[1] : rect[2] - rect[0];\n\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(\n        this.scaleFactor / this.parentScale,\n        this.translationX,\n        this.translationY,\n        height\n      ),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n    };\n  }\n}\n\nexport { InkEditor };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport {\n  AnnotationBorderStyleType,\n  AnnotationType,\n  assert,\n  FeatureTest,\n  LINE_FACTOR,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  AnnotationPrefix,\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  PDFDateString,\n  setLayerDimensions,\n} from \"./display_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { ColorConverters } from \"../shared/scripting_utils.js\";\nimport { XfaLayer } from \"./xfa_layer.js\";\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\n\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {PDFPageProxy} page\n * @property {PageViewport} viewport\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} downloadManager\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {Object} svgFactory\n * @property {boolean} [enableScripting]\n * @property {boolean} [hasJSActions]\n * @property {Object} [fieldObjects]\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  constructor(\n    parameters,\n    {\n      isRenderable = false,\n      ignoreBorder = false,\n      createQuadrilaterals = false,\n    } = {}\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.page = parameters.page;\n    this.viewport = parameters.viewport;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this.quadrilaterals = this._createQuadrilaterals(ignoreBorder);\n    }\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLElement} A section element.\n   */\n  _createContainer(ignoreBorder = false) {\n    const { data, page, viewport } = this;\n\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n\n    const { pageWidth, pageHeight, pageX, pageY } = viewport.rawDims;\n    const { width, height } = getRectDims(data.rect);\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      container.style.borderWidth = `${data.borderStyle.width}px`;\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        container.style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        container.style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          container.style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          container.style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          container.style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        container.style.borderColor = Util.makeHexColor(\n          borderColor[0] | 0,\n          borderColor[1] | 0,\n          borderColor[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        container.style.borderWidth = 0;\n      }\n    }\n\n    container.style.left = `${(100 * (rect[0] - pageX)) / pageWidth}%`;\n    container.style.top = `${(100 * (rect[1] - pageY)) / pageHeight}%`;\n\n    const { rotation } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      container.style.width = `${(100 * width) / pageWidth}%`;\n      container.style.height = `${(100 * height) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n\n    return container;\n  }\n\n  setRotation(angle, container = this.container) {\n    const { pageWidth, pageHeight } = this.viewport.rawDims;\n    const { width, height } = getRectDims(this.data.rect);\n\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = (100 * width) / pageWidth;\n      elementHeight = (100 * height) / pageHeight;\n    } else {\n      elementWidth = (100 * height) / pageWidth;\n      elementHeight = (100 * width) / pageHeight;\n    }\n\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      event.target.style[styleName] = ColorConverters[`${color[0]}_HTML`](\n        color.slice(1)\n      );\n    };\n\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const hidden = event.detail.display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          hidden,\n          print: event.detail.display === 0 || event.detail.display === 3,\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          print: event.detail.print,\n        });\n      },\n      hidden: event => {\n        this.container.style.visibility = event.detail.hidden\n          ? \"hidden\"\n          : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          hidden: event.detail.hidden,\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({ preventScroll: false }), 0);\n      },\n      userName: event => {\n        // tooltip\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        if (event.detail.readonly) {\n          event.target.setAttribute(\"readonly\", \"\");\n        } else {\n          event.target.removeAttribute(\"readonly\");\n        }\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle,\n        });\n      },\n    });\n  }\n\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n\n    // Some properties may have been updated thanks to JS.\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail,\n          },\n          target: element,\n        };\n        action(eventProxy);\n        // The action has been consumed: no need to keep it.\n        delete storedData[actionName];\n      }\n    }\n  }\n\n  /**\n   * Create quadrilaterals from the annotation's quadpoints.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLElement>} An array of section elements.\n   */\n  _createQuadrilaterals(ignoreBorder = false) {\n    if (!this.data.quadPoints) {\n      return null;\n    }\n\n    const quadrilaterals = [];\n    const savedRect = this.data.rect;\n    for (const quadPoint of this.data.quadPoints) {\n      this.data.rect = [\n        quadPoint[2].x,\n        quadPoint[2].y,\n        quadPoint[1].x,\n        quadPoint[1].y,\n      ];\n      quadrilaterals.push(this._createContainer(ignoreBorder));\n    }\n    this.data.rect = savedRect;\n    return quadrilaterals;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @private\n   * @param {HTMLDivElement|HTMLImageElement|null} trigger\n   * @param {Object} data\n   * @memberof AnnotationElement\n   */\n  _createPopup(trigger, data) {\n    let container = this.container;\n    if (this.quadrilaterals) {\n      trigger ||= this.quadrilaterals;\n      container = this.quadrilaterals[0];\n    }\n\n    // If no trigger element is specified, create it.\n    if (!trigger) {\n      trigger = document.createElement(\"div\");\n      trigger.classList.add(\"popupTriggerArea\");\n      container.append(trigger);\n    }\n\n    const popupElement = new PopupElement({\n      container,\n      trigger,\n      color: data.color,\n      titleObj: data.titleObj,\n      modificationDate: data.modificationDate,\n      contentsObj: data.contentsObj,\n      richText: data.richText,\n      hideWrapper: true,\n    });\n    const popup = popupElement.render();\n\n    // Position the popup next to the annotation's container.\n    popup.style.left = \"100%\";\n\n    container.append(popup);\n  }\n\n  /**\n   * Render the quadrilaterals of the annotation.\n   *\n   * @private\n   * @param {string} className\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLElement>} An array of section elements.\n   */\n  _renderQuadrilaterals(className) {\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"TESTING\")) {\n      assert(this.quadrilaterals, \"Missing quadrilaterals during rendering\");\n    }\n\n    for (const quadrilateral of this.quadrilaterals) {\n      quadrilateral.classList.add(className);\n    }\n    return this.quadrilaterals;\n  }\n\n  /**\n   * Render the annotation's HTML element(s).\n   *\n   * @public\n   * @memberof AnnotationElement\n   * @returns {HTMLElement|Array<HTMLElement>} A section element or\n   *   an array of section elements.\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n\n  /**\n   * @private\n   * @returns {Array}\n   */\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue =\n            typeof exportValues === \"string\" ? exportValues : null;\n\n          const domElement = document.querySelector(\n            `[data-element-id=\"${id}\"]`\n          );\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({ id, exportValue, domElement });\n        }\n      }\n      return fields;\n    }\n    // Fallback to a regular DOM lookup, to ensure that the standalone\n    // viewer components won't break.\n    for (const domElement of document.getElementsByName(name)) {\n      const { exportValue } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({ id, exportValue, domElement });\n    }\n    return fields;\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this._bindAttachment(link, data.attachment);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (\n        data.actions &&\n        (data.actions.Action ||\n          data.actions[\"Mouse Up\"] ||\n          data.actions[\"Mouse Down\"]) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"linkAnnotation\").map(\n        (quadrilateral, index) => {\n          const linkElement = index === 0 ? link : link.cloneNode();\n          quadrilateral.append(linkElement);\n          return quadrilateral;\n        }\n      );\n    }\n\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n\n    return this.container;\n  }\n\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === /* isTooltipOnly = */ \"\") {\n      this.#setInternalLink();\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind attachments to the link element.\n   * @param {Object} link\n   * @param {Object} attachment\n   */\n  _bindAttachment(link, attachment) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(\n        this.container,\n        attachment.content,\n        attachment.filename\n      );\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind SetOCGState actions to the link element.\n   * @param {Object} link\n   * @param {Object} action\n   */\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n\n  /**\n   * Bind JS actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} data\n   * @memberof LinkAnnotationElement\n   */\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([\n      [\"Action\", \"onclick\"],\n      [\"Mouse Up\", \"onmouseup\"],\n      [\"Mouse Down\", \"onmousedown\"],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          \"ensure that the `fieldObjects` parameter is provided.\"\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n\n    link.onclick = () => {\n      otherClickAction?.();\n\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include,\n      } = resetForm;\n\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"checkbox\":\n          case \"radiobutton\": {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"combobox\":\n          case \"listbox\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          default:\n            continue;\n        }\n\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n\n      if (this.enableScripting) {\n        // Update the values in the sandbox.\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\",\n          },\n        });\n      }\n\n      return false;\n    };\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable });\n  }\n\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n\n    const image = document.createElement(\"img\");\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.alt = \"[{{type}} Annotation]\";\n    image.dataset.l10nId = \"text_annotation_type\";\n    image.dataset.l10nArgs = JSON.stringify({ type: this.data.name });\n\n    if (!this.data.hasPopup) {\n      this._createPopup(image, this.data);\n    }\n\n    this.container.append(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    // Show only the container for unsupported field types.\n    if (this.data.alternativeText) {\n      this.container.title = this.data.alternativeText;\n    }\n\n    return this.container;\n  }\n\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n\n  _getKeyModifier(event) {\n    const { isWin, isMac } = FeatureTest.platform;\n    return (isWin && event.ctrlKey) || (isMac && event.metaKey);\n  }\n\n  _setEventListener(element, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      // Mouse events\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      // Non mouse event\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n\n  _setEventListeners(element, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        this._setEventListener(element, baseName, eventName, getter);\n      }\n    }\n  }\n\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null\n        ? \"transparent\"\n        : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const { fontColor } = this.data.defaultAppearanceData;\n    const fontSize =\n      this.data.defaultAppearanceData.fontSize || DEFAULT_FONT_SIZE;\n\n    const style = element.style;\n\n    // TODO: If the font-size is zero, calculate it based on the height and\n    //       width of the element.\n    // Not setting `style.fontSize` will use the default font-size for now.\n\n    // We don't use the font, as specified in the PDF document, for the <input>\n    // element. Hence using the original `fontSize` could look bad, which is why\n    // it's instead based on the field height.\n    // If the height is \"big\" then it could lead to a too big font size\n    // so in this case use the one we've in the pdf (hence the min).\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(lineHeight / LINE_FACTOR)\n      );\n    } else {\n      const height = Math.abs(\n        this.data.rect[3] - this.data.rect[1] - BORDER_SIZE\n      );\n      computedFontSize = Math.min(\n        fontSize,\n        roundToOneDecimal(height / LINE_FACTOR)\n      );\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, { isRenderable });\n  }\n\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(\n      base.name,\n      /* skipId = */ base.id\n    )) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, { [keyInStorage]: value });\n    }\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.classList.add(\"textWidgetAnnotation\");\n\n    let element = null;\n    if (this.renderForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen,\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n\n      let fieldFormattedValues =\n        storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n      };\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n\n      this._setRequired(element, this.data.required);\n\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, { value: event.target.value });\n        this.setPropertyOnSiblings(\n          element,\n          \"value\",\n          event.target.value,\n          \"value\"\n        );\n        elementData.formattedValue = null;\n      });\n\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n\n      let blurListener = event => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        // Reset the cursor position to the start of the field (issue 12359).\n        event.target.scrollLeft = 0;\n      };\n\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          const { target } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n        });\n\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, { value: elementData.userValue.toString() });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                // Input hasn't the focus so display formatted string\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const { charLimit } = event.detail;\n              const { target } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, { value });\n\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd,\n                },\n              });\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n\n        // Even if the field hasn't any actions\n        // leaving it can still trigger some actions with Calculate\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          // If the key is one of Escape, Enter then the data are committed.\n          // If we've a Tab then data will be committed on blur.\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            // When we've a multiline field, \"Enter\" key is a key as the other\n            // hence we don't commit the data (Acrobat behaves the same way)\n            // (see issue #15627).\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          // Save the entered value\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!event.relatedTarget) {\n            return;\n          }\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n\n            switch (event.inputType) {\n              // https://rawgit.com/w3c/input-events/v1/index.html#interface-InputEvent-Attributes\n              case \"deleteWordBackward\": {\n                const match = value\n                  .substring(0, selectionStart)\n                  .match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case \"deleteWordForward\": {\n                const match = value\n                  .substring(selectionStart)\n                  .match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n\n            // We handle the event ourselves.\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n\n        this._setEventListeners(\n          element,\n          [\n            [\"focus\", \"Focus\"],\n            [\"blur\", \"Blur\"],\n            [\"mousedown\", \"Mouse Down\"],\n            [\"mouseenter\", \"Mouse Enter\"],\n            [\"mouseleave\", \"Mouse Exit\"],\n            [\"mouseup\", \"Mouse Up\"],\n          ],\n          event => event.target.value\n        );\n      }\n\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n    }\n\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== \"Off\";\n      storage.setValue(id, { value });\n    }\n\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, /* skipId = */ id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, { value: curChecked });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, { value: event.target.checked });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== data.buttonValue;\n      storage.setValue(id, { value });\n    }\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, /* skipId = */ id)) {\n        storage.setValue(radio.id, { value: false });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null &&\n        defaultValue !== undefined &&\n        defaultValue === data.buttonValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, { value: curChecked });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.append(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { ignoreBorder: parameters.data.hasAppearance });\n  }\n\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n\n    if (this.data.alternativeText) {\n      container.title = this.data.alternativeText;\n    }\n\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const { options, multiple } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1\n          ? null\n          : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, option => option.selected)\n        .map(option => option[name]);\n    };\n\n    let selectedValues = getValue(/* isExport */ false);\n\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => {\n        return { displayValue: option.textContent, exportValue: option.value };\n      });\n    };\n\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(\n                options,\n                option => option.selected\n              );\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, { value: null, items: [] });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n              items: getItems(event),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(/* isExport */ true),\n            });\n            selectedValues = getValue(/* isExport */ false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(/* isExport */ true);\n        storage.setValue(id, { value: exportValue });\n\n        event.preventDefault();\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n\n      this._setEventListeners(\n        selectElement,\n        [\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n          [\"input\", \"Action\"],\n          [\"input\", \"Validate\"],\n        ],\n        event => event.target.value\n      );\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, { value: getValue(/* isExport */ true) });\n      });\n    }\n\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {\n      // Just use the default font size...\n      // it's a bit hard to guess what is a good size.\n    }\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  // Do not render popup annotations for parent elements with these types as\n  // they create the popups themselves (because of custom trigger divs).\n  static IGNORE_TYPES = new Set([\n    \"Line\",\n    \"Square\",\n    \"Circle\",\n    \"PolyLine\",\n    \"Polygon\",\n    \"Ink\",\n  ]);\n\n  constructor(parameters) {\n    const { data } = parameters;\n    const isRenderable =\n      !PopupAnnotationElement.IGNORE_TYPES.has(data.parentType) &&\n      !!(data.titleObj?.str || data.contentsObj?.str || data.richText?.str);\n    super(parameters, { isRenderable });\n  }\n\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n\n    const parentElements = this.layer.querySelectorAll(\n      `[data-annotation-id=\"${this.data.parentId}\"]`\n    );\n    if (parentElements.length === 0) {\n      return this.container;\n    }\n\n    const popup = new PopupElement({\n      container: this.container,\n      trigger: Array.from(parentElements),\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n    });\n\n    // Position the popup next to the parent annotation's container.\n    // PDF viewers ignore a popup annotation's rectangle.\n    const page = this.page;\n    const rect = Util.normalizeRect([\n      this.data.parentRect[0],\n      page.view[3] - this.data.parentRect[1] + page.view[1],\n      this.data.parentRect[2],\n      page.view[3] - this.data.parentRect[3] + page.view[1],\n    ]);\n    const popupLeft =\n      rect[0] + this.data.parentRect[2] - this.data.parentRect[0];\n    const popupTop = rect[1];\n\n    const { pageWidth, pageHeight, pageX, pageY } = this.viewport.rawDims;\n\n    this.container.style.left = `${(100 * (popupLeft - pageX)) / pageWidth}%`;\n    this.container.style.top = `${(100 * (popupTop - pageY)) / pageHeight}%`;\n\n    this.container.append(popup.render());\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  constructor(parameters) {\n    this.container = parameters.container;\n    this.trigger = parameters.trigger;\n    this.color = parameters.color;\n    this.titleObj = parameters.titleObj;\n    this.modificationDate = parameters.modificationDate;\n    this.contentsObj = parameters.contentsObj;\n    this.richText = parameters.richText;\n    this.hideWrapper = parameters.hideWrapper || false;\n\n    this.pinned = false;\n  }\n\n  render() {\n    const BACKGROUND_ENLIGHT = 0.7;\n\n    const wrapper = document.createElement(\"div\");\n    wrapper.classList.add(\"popupWrapper\");\n\n    // For Popup annotations we hide the entire section because it contains\n    // only the popup. However, for Text annotations without a separate Popup\n    // annotation, we cannot hide the entire container as the image would\n    // disappear too. In that special case, hiding the wrapper suffices.\n    this.hideElement = this.hideWrapper ? wrapper : this.container;\n    this.hideElement.hidden = true;\n\n    const popup = document.createElement(\"div\");\n    popup.classList.add(\"popup\");\n\n    const color = this.color;\n    if (color) {\n      // Enlighten the color.\n      const r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];\n      const g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];\n      const b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];\n      popup.style.backgroundColor = Util.makeHexColor(r | 0, g | 0, b | 0);\n    }\n\n    const title = document.createElement(\"h1\");\n    title.dir = this.titleObj.dir;\n    title.textContent = this.titleObj.str;\n    popup.append(title);\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    const dateObject = PDFDateString.toDateObject(this.modificationDate);\n    if (dateObject) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.textContent = \"{{date}}, {{time}}\";\n      modificationDate.dataset.l10nId = \"annotation_date_string\";\n      modificationDate.dataset.l10nArgs = JSON.stringify({\n        date: dateObject.toLocaleDateString(),\n        time: dateObject.toLocaleTimeString(),\n      });\n      popup.append(modificationDate);\n    }\n\n    if (\n      this.richText?.str &&\n      (!this.contentsObj?.str || this.contentsObj.str === this.richText.str)\n    ) {\n      XfaLayer.render({\n        xfaHtml: this.richText.html,\n        intent: \"richText\",\n        div: popup,\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.contentsObj);\n      popup.append(contents);\n    }\n\n    if (!Array.isArray(this.trigger)) {\n      this.trigger = [this.trigger];\n    }\n\n    // Attach the event listeners to the trigger element.\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this._toggle.bind(this));\n      element.addEventListener(\"mouseover\", this._show.bind(this, false));\n      element.addEventListener(\"mouseout\", this._hide.bind(this, false));\n    }\n    popup.addEventListener(\"click\", this._hide.bind(this, true));\n\n    wrapper.append(popup);\n    return wrapper;\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {Object<string, string>} contentsObj\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents({ str, dir }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   *\n   * @private\n   * @memberof PopupElement\n   */\n  _toggle() {\n    if (this.pinned) {\n      this._hide(true);\n    } else {\n      this._show(true);\n    }\n  }\n\n  /**\n   * Show the popup.\n   *\n   * @private\n   * @param {boolean} pin\n   * @memberof PopupElement\n   */\n  _show(pin = false) {\n    if (pin) {\n      this.pinned = true;\n    }\n    if (this.hideElement.hidden) {\n      this.hideElement.hidden = false;\n      this.container.style.zIndex =\n        parseInt(this.container.style.zIndex) + 1000;\n    }\n  }\n\n  /**\n   * Hide the popup.\n   *\n   * @private\n   * @param {boolean} unpin\n   * @memberof PopupElement\n   */\n  _hide(unpin = true) {\n    if (unpin) {\n      this.pinned = false;\n    }\n    if (!this.hideElement.hidden && !this.pinned) {\n      this.hideElement.hidden = true;\n      this.container.style.zIndex =\n        parseInt(this.container.style.zIndex) - 1000;\n    }\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n    this.textContent = parameters.data.textContent;\n  }\n\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    this._createPopup(line, data);\n\n    return this.container;\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    this._createPopup(square, data);\n\n    return this.container;\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    this._createPopup(circle, data);\n\n    return this.container;\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n\n    const polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n\n    svg.append(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    this._createPopup(polyline, data);\n\n    return this.container;\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.classList.add(this.containerClassName);\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(\n      width,\n      height,\n      /* skipDimensions = */ true\n    );\n\n    for (const inkList of data.inkLists) {\n      // Convert the ink list to a single points string that the SVG\n      // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n      // calculated from a bottom left origin, so transform the polyline\n      // coordinates to a top left origin for the SVG element.\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      polyline.setAttribute(\"points\", points);\n      // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n      // won't be possible to open/close the popup (note e.g. issue 11122).\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n\n      // Create the popup ourselves so that we can bind it to the polyline\n      // instead of to the entire container (which is the default).\n      this._createPopup(polyline, data);\n\n      svg.append(polyline);\n    }\n\n    this.container.append(svg);\n    return this.container;\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"highlightAnnotation\");\n    }\n\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"underlineAnnotation\");\n    }\n\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"squigglyAnnotation\");\n    }\n\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"strikeoutAnnotation\");\n    }\n\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n\n    const { filename, content } = this.data.file;\n    this.filename = getFilenameFromUrl(filename, /* onlyStripPath = */ true);\n    this.content = content;\n\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      filename,\n      content,\n    });\n  }\n\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n\n    let trigger;\n    if (this.data.hasAppearance) {\n      trigger = document.createElement(\"div\");\n    } else {\n      // Unfortunately it seems that it's not clearly specified exactly what\n      // names are actually valid, since Table 184 contains:\n      //   Conforming readers shall provide predefined icon appearances for at\n      //   least the following standard names: GraphPushPin, PaperclipTag.\n      //   Additional names may be supported as well. Default value: PushPin.\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${\n        /paperclip/i.test(this.data.name) ? \"paperclip\" : \"pushpin\"\n      }.svg`;\n    }\n    trigger.classList.add(\"popupTriggerArea\");\n    trigger.addEventListener(\"dblclick\", this._download.bind(this));\n\n    if (\n      !this.data.hasPopup &&\n      (this.data.titleObj?.str ||\n        this.data.contentsObj?.str ||\n        this.data.richText)\n    ) {\n      this._createPopup(trigger, this.data);\n    }\n\n    this.container.append(trigger);\n    return this.container;\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   *\n   * @private\n   * @memberof FileAttachmentAnnotationElement\n   */\n  _download() {\n    this.downloadManager?.openOrDownloadData(\n      this.container,\n      this.content,\n      this.filename\n    );\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPageProxy} page\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} downloadManager\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {boolean} [enableScripting] - Enable embedded script execution.\n * @property {boolean} [hasJSActions] - Some fields have JS actions.\n *   The default value is `false`.\n * @property {Object<string, Array<Object>> | null} [fieldObjects]\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n * @property {TextAccessibilityManager} [accessibilityManager]\n */\n\nclass AnnotationLayer {\n  static #appendElement(element, id, div, accessibilityManager) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n\n    div.append(element);\n    accessibilityManager?.moveElementInDOM(\n      div,\n      element,\n      contentElement,\n      /* isRemovable = */ false\n    );\n  }\n\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @param {AnnotationLayerParameters} params\n   * @memberof AnnotationLayer\n   */\n  static render(params) {\n    const { annotations, div, viewport, accessibilityManager } = params;\n    setLayerDimensions(div, viewport);\n\n    const elementParams = {\n      data: null,\n      layer: div,\n      page: params.page,\n      viewport,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n    };\n    let zIndex = 0;\n\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      if (data.annotationType !== AnnotationType.POPUP) {\n        const { width, height } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue; // Ignore empty annotations.\n        }\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      if (Array.isArray(rendered)) {\n        for (const renderedElement of rendered) {\n          renderedElement.style.zIndex = zIndex++;\n          AnnotationLayer.#appendElement(\n            renderedElement,\n            data.id,\n            div,\n            accessibilityManager\n          );\n        }\n      } else {\n        // The accessibility manager will move the annotation in the DOM in\n        // order to match the visual ordering.\n        // But if an annotation is above an other one, then we must draw it\n        // after the other one whatever the order is in the DOM, hence the\n        // use of the z-index.\n        rendered.style.zIndex = zIndex++;\n\n        if (element instanceof PopupAnnotationElement) {\n          // Popup annotation elements should not be on top of other\n          // annotation elements to prevent interfering with mouse events.\n          div.prepend(rendered);\n        } else {\n          AnnotationLayer.#appendElement(\n            rendered,\n            data.id,\n            div,\n            accessibilityManager\n          );\n        }\n      }\n    }\n\n    this.#setAnnotationCanvasMap(div, params.annotationCanvasMap);\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @param {AnnotationLayerParameters} params\n   * @memberof AnnotationLayer\n   */\n  static update(params) {\n    const { annotationCanvasMap, div, viewport } = params;\n    setLayerDimensions(div, { rotation: viewport.rotation });\n\n    this.#setAnnotationCanvasMap(div, annotationCanvasMap);\n    div.hidden = false;\n  }\n\n  static #setAnnotationCanvasMap(div, annotationCanvasMap) {\n    if (!annotationCanvasMap) {\n      return;\n    }\n    for (const [id, canvas] of annotationCanvasMap) {\n      const element = div.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n\n      const { firstChild } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else {\n        firstChild.before(canvas);\n      }\n    }\n    annotationCanvasMap.clear();\n  }\n}\n\nexport { AnnotationLayer };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PLEASE NOTE: This file is currently imported in both the `../display/` and\n *              `../scripting_api/` folders, hence be EXTREMELY careful about\n *              introducing any dependencies here since that can lead to an\n *              unexpected/unnecessary size increase of the *built* files.\n */\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\n// PDF specifications section 10.3\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n\n  static RGB_HTML([r, g, b]) {\n    const R = makeColorComp(r);\n    const G = makeColorComp(g);\n    const B = makeColorComp(b);\n    return `#${R}${G}${B}`;\n  }\n\n  static T_HTML() {\n    return \"#00000000\";\n  }\n\n  static CMYK_RGB([c, y, m, k]) {\n    return [\n      \"RGB\",\n      1 - Math.min(1, c + k),\n      1 - Math.min(1, m + k),\n      1 - Math.min(1, y + k),\n    ];\n  }\n\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\nexport { ColorConverters };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaText } from \"./xfa_text.js\";\n\n/**\n * @typedef {Object} XfaLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Object} xfaHtml\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {string} [intent] - (default value is 'display').\n */\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, { value: null });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, { value: event.target.value });\n        });\n        break;\n      case \"input\":\n        if (\n          element.attributes.type === \"radio\" ||\n          element.attributes.type === \"checkbox\"\n        ) {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            // The checked attribute may have been set when opening the file,\n            // unset through the UI and we're here because of printing.\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute(\"xfaOn\")\n                : event.target.getAttribute(\"xfaOff\"),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, { value: event.target.value });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value =\n            options.selectedIndex === -1\n              ? \"\"\n              : options[options.selectedIndex].value;\n          storage.setValue(id, { value });\n        });\n        break;\n    }\n  }\n\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n\n    if (attributes.type === \"radio\") {\n      // Avoid to have a radio group when printing with the same as one\n      // already displayed.\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          // We don't need to add dataId in the html object but it can\n          // be useful to know its value when writing printing tests:\n          // in this case, don't skip dataId to have its value.\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || (key !== \"href\" && key !== \"newWindow\")) {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(\n        html,\n        attributes.href,\n        attributes.newWindow\n      );\n    }\n\n    // Set the value after the others to be sure to overwrite any other values.\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n\n  /**\n   * Render the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n    const stack = [[root, -1, rootHtml]];\n\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n\n    // Set defaults.\n    if (intent !== \"richText\") {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n\n    // Text nodes used for the text highlighter.\n    const textDivs = [];\n\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n\n      const { name } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n\n      let childHtml;\n      if (child?.attributes?.xmlns) {\n        childHtml = document.createElementNS(child.attributes.xmlns, name);\n      } else {\n        childHtml = document.createElement(name);\n      }\n\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n\n      if (child.children && child.children.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n\n    /**\n     * TODO: re-enable that stuff once we've JS implementation.\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1719465.\n     *\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaDisabled input, .xfaDisabled textarea\"\n     * )) {\n     * el.setAttribute(\"disabled\", true);\n     * }\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaReadOnly input, .xfaReadOnly textarea\"\n     * )) {\n     * el.setAttribute(\"readOnly\", true);\n     * }\n     */\n\n    for (const el of rootDiv.querySelectorAll(\n      \".xfaNonInteractive input, .xfaNonInteractive textarea\"\n    )) {\n      el.setAttribute(\"readOnly\", true);\n    }\n\n    return {\n      textDivs,\n    };\n  }\n\n  /**\n   * Update the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\nexport { XfaLayer };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport { deprecated, DOMSVGFactory } from \"./display_utils.js\";\nimport {\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  OPS,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\n\n/** @type {any} */\nlet SVGGraphics = class {\n  constructor() {\n    unreachable(\"Not implemented: SVGGraphics\");\n  }\n};\n\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  const SVG_DEFAULTS = {\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fillColor: \"#000000\",\n  };\n  const XML_NS = \"http://www.w3.org/XML/1998/namespace\";\n  const XLINK_NS = \"http://www.w3.org/1999/xlink\";\n  const LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\n  const LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\n\n  const createObjectURL = function (\n    data,\n    contentType = \"\",\n    forceDataSchema = false\n  ) {\n    if (\n      URL.createObjectURL &&\n      typeof Blob !== \"undefined\" &&\n      !forceDataSchema\n    ) {\n      return URL.createObjectURL(new Blob([data], { type: contentType }));\n    }\n    // Blob/createObjectURL is not available, falling back to data schema.\n    const digits =\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n    let buffer = `data:${contentType};base64,`;\n    for (let i = 0, ii = data.length; i < ii; i += 3) {\n      const b1 = data[i] & 0xff;\n      const b2 = data[i + 1] & 0xff;\n      const b3 = data[i + 2] & 0xff;\n      const d1 = b1 >> 2,\n        d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      const d3 = i + 1 < ii ? ((b2 & 0xf) << 2) | (b3 >> 6) : 64;\n      const d4 = i + 2 < ii ? b3 & 0x3f : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n\n  const convertImgDataToPng = (function () {\n    const PNG_HEADER = new Uint8Array([\n      0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a,\n    ]);\n    const CHUNK_WRAPPER_SIZE = 12;\n\n    const crcTable = new Int32Array(256);\n    for (let i = 0; i < 256; i++) {\n      let c = i;\n      for (let h = 0; h < 8; h++) {\n        if (c & 1) {\n          c = 0xedb88320 ^ ((c >> 1) & 0x7fffffff);\n        } else {\n          c = (c >> 1) & 0x7fffffff;\n        }\n      }\n      crcTable[i] = c;\n    }\n\n    function crc32(data, start, end) {\n      let crc = -1;\n      for (let i = start; i < end; i++) {\n        const a = (crc ^ data[i]) & 0xff;\n        const b = crcTable[a];\n        crc = (crc >>> 8) ^ b;\n      }\n      return crc ^ -1;\n    }\n\n    function writePngChunk(type, body, data, offset) {\n      let p = offset;\n      const len = body.length;\n\n      data[p] = (len >> 24) & 0xff;\n      data[p + 1] = (len >> 16) & 0xff;\n      data[p + 2] = (len >> 8) & 0xff;\n      data[p + 3] = len & 0xff;\n      p += 4;\n\n      data[p] = type.charCodeAt(0) & 0xff;\n      data[p + 1] = type.charCodeAt(1) & 0xff;\n      data[p + 2] = type.charCodeAt(2) & 0xff;\n      data[p + 3] = type.charCodeAt(3) & 0xff;\n      p += 4;\n\n      data.set(body, p);\n      p += body.length;\n\n      const crc = crc32(data, offset + 4, p);\n      data[p] = (crc >> 24) & 0xff;\n      data[p + 1] = (crc >> 16) & 0xff;\n      data[p + 2] = (crc >> 8) & 0xff;\n      data[p + 3] = crc & 0xff;\n    }\n\n    function adler32(data, start, end) {\n      let a = 1;\n      let b = 0;\n      for (let i = start; i < end; ++i) {\n        a = (a + (data[i] & 0xff)) % 65521;\n        b = (b + a) % 65521;\n      }\n      return (b << 16) | a;\n    }\n\n    /**\n     * @param {Uint8Array} literals The input data.\n     * @returns {Uint8Array} The DEFLATE-compressed data stream in zlib format.\n     *   This is the required format for compressed streams in the PNG format:\n     *   http://www.libpng.org/pub/png/spec/1.2/PNG-Compression.html\n     */\n    function deflateSync(literals) {\n      if (!isNodeJS) {\n        // zlib is certainly not available outside of Node.js. We can either use\n        // the pako library for client-side DEFLATE compression, or use the\n        // canvas API of the browser to obtain a more optimal PNG file.\n        return deflateSyncUncompressed(literals);\n      }\n      try {\n        // NOTE: This implementation is far from perfect, but already way better\n        // than not applying any compression.\n        //\n        // A better algorithm will try to choose a good predictor/filter and\n        // then choose a suitable zlib compression strategy (e.g. 3,Z_RLE).\n        //\n        // Node v0.11.12 zlib.deflateSync is introduced (and returns a Buffer).\n        // Node v3.0.0   Buffer inherits from Uint8Array.\n        // Node v8.0.0   zlib.deflateSync accepts Uint8Array as input.\n        let input;\n        // eslint-disable-next-line no-undef\n        if (parseInt(process.versions.node) >= 8) {\n          input = literals;\n        } else {\n          // eslint-disable-next-line no-undef\n          input = Buffer.from(literals);\n        }\n        const output = __non_webpack_require__(\"zlib\").deflateSync(input, {\n          level: 9,\n        });\n        return output instanceof Uint8Array ? output : new Uint8Array(output);\n      } catch (e) {\n        warn(\n          \"Not compressing PNG because zlib.deflateSync is unavailable: \" + e\n        );\n      }\n\n      return deflateSyncUncompressed(literals);\n    }\n\n    // An implementation of DEFLATE with compression level 0 (Z_NO_COMPRESSION).\n    function deflateSyncUncompressed(literals) {\n      let len = literals.length;\n      const maxBlockLength = 0xffff;\n\n      const deflateBlocks = Math.ceil(len / maxBlockLength);\n      const idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n      let pi = 0;\n      idat[pi++] = 0x78; // compression method and flags\n      idat[pi++] = 0x9c; // flags\n\n      let pos = 0;\n      while (len > maxBlockLength) {\n        // writing non-final DEFLATE blocks type 0 and length of 65535\n        idat[pi++] = 0x00;\n        idat[pi++] = 0xff;\n        idat[pi++] = 0xff;\n        idat[pi++] = 0x00;\n        idat[pi++] = 0x00;\n        idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n        pi += maxBlockLength;\n        pos += maxBlockLength;\n        len -= maxBlockLength;\n      }\n\n      // writing non-final DEFLATE blocks type 0\n      idat[pi++] = 0x01;\n      idat[pi++] = len & 0xff;\n      idat[pi++] = (len >> 8) & 0xff;\n      idat[pi++] = ~len & 0xffff & 0xff;\n      idat[pi++] = ((~len & 0xffff) >> 8) & 0xff;\n      idat.set(literals.subarray(pos), pi);\n      pi += literals.length - pos;\n\n      const adler = adler32(literals, 0, literals.length); // checksum\n      idat[pi++] = (adler >> 24) & 0xff;\n      idat[pi++] = (adler >> 16) & 0xff;\n      idat[pi++] = (adler >> 8) & 0xff;\n      idat[pi++] = adler & 0xff;\n      return idat;\n    }\n\n    function encode(imgData, kind, forceDataSchema, isMask) {\n      const width = imgData.width;\n      const height = imgData.height;\n      let bitDepth, colorType, lineSize;\n      const bytes = imgData.data;\n\n      switch (kind) {\n        case ImageKind.GRAYSCALE_1BPP:\n          colorType = 0;\n          bitDepth = 1;\n          lineSize = (width + 7) >> 3;\n          break;\n        case ImageKind.RGB_24BPP:\n          colorType = 2;\n          bitDepth = 8;\n          lineSize = width * 3;\n          break;\n        case ImageKind.RGBA_32BPP:\n          colorType = 6;\n          bitDepth = 8;\n          lineSize = width * 4;\n          break;\n        default:\n          throw new Error(\"invalid format\");\n      }\n\n      // prefix every row with predictor 0\n      const literals = new Uint8Array((1 + lineSize) * height);\n      let offsetLiterals = 0,\n        offsetBytes = 0;\n      for (let y = 0; y < height; ++y) {\n        literals[offsetLiterals++] = 0; // no prediction\n        literals.set(\n          bytes.subarray(offsetBytes, offsetBytes + lineSize),\n          offsetLiterals\n        );\n        offsetBytes += lineSize;\n        offsetLiterals += lineSize;\n      }\n\n      if (kind === ImageKind.GRAYSCALE_1BPP && isMask) {\n        // inverting for image masks\n        offsetLiterals = 0;\n        for (let y = 0; y < height; y++) {\n          offsetLiterals++; // skipping predictor\n          for (let i = 0; i < lineSize; i++) {\n            literals[offsetLiterals++] ^= 0xff;\n          }\n        }\n      }\n\n      const ihdr = new Uint8Array([\n        (width >> 24) & 0xff,\n        (width >> 16) & 0xff,\n        (width >> 8) & 0xff,\n        width & 0xff,\n        (height >> 24) & 0xff,\n        (height >> 16) & 0xff,\n        (height >> 8) & 0xff,\n        height & 0xff,\n        bitDepth, // bit depth\n        colorType, // color type\n        0x00, // compression method\n        0x00, // filter method\n        0x00, // interlace method\n      ]);\n      const idat = deflateSync(literals);\n\n      // PNG consists of: header, IHDR+data, IDAT+data, and IEND.\n      const pngLength =\n        PNG_HEADER.length + CHUNK_WRAPPER_SIZE * 3 + ihdr.length + idat.length;\n      const data = new Uint8Array(pngLength);\n      let offset = 0;\n      data.set(PNG_HEADER, offset);\n      offset += PNG_HEADER.length;\n      writePngChunk(\"IHDR\", ihdr, data, offset);\n      offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n      writePngChunk(\"IDATA\", idat, data, offset);\n      offset += CHUNK_WRAPPER_SIZE + idat.length;\n      writePngChunk(\"IEND\", new Uint8Array(0), data, offset);\n\n      return createObjectURL(data, \"image/png\", forceDataSchema);\n    }\n\n    // eslint-disable-next-line no-shadow\n    return function convertImgDataToPng(imgData, forceDataSchema, isMask) {\n      const kind =\n        imgData.kind === undefined ? ImageKind.GRAYSCALE_1BPP : imgData.kind;\n      return encode(imgData, kind, forceDataSchema, isMask);\n    };\n  })();\n\n  class SVGExtraState {\n    constructor() {\n      this.fontSizeScale = 1;\n      this.fontWeight = SVG_DEFAULTS.fontWeight;\n      this.fontSize = 0;\n\n      this.textMatrix = IDENTITY_MATRIX;\n      this.fontMatrix = FONT_IDENTITY_MATRIX;\n      this.leading = 0;\n      this.textRenderingMode = TextRenderingMode.FILL;\n      this.textMatrixScale = 1;\n\n      // Current point (in user coordinates)\n      this.x = 0;\n      this.y = 0;\n\n      // Start of text line (in text coordinates)\n      this.lineX = 0;\n      this.lineY = 0;\n\n      // Character and word spacing\n      this.charSpacing = 0;\n      this.wordSpacing = 0;\n      this.textHScale = 1;\n      this.textRise = 0;\n\n      // Default foreground and background colors\n      this.fillColor = SVG_DEFAULTS.fillColor;\n      this.strokeColor = \"#000000\";\n\n      this.fillAlpha = 1;\n      this.strokeAlpha = 1;\n      this.lineWidth = 1;\n      this.lineJoin = \"\";\n      this.lineCap = \"\";\n      this.miterLimit = 0;\n\n      this.dashArray = [];\n      this.dashPhase = 0;\n\n      this.dependencies = [];\n\n      // Clipping\n      this.activeClipUrl = null;\n      this.clipGroup = null;\n\n      this.maskId = \"\";\n    }\n\n    clone() {\n      return Object.create(this);\n    }\n\n    setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }\n\n  // eslint-disable-next-line no-inner-declarations\n  function opListToTree(opList) {\n    let opTree = [];\n    const tmp = [];\n\n    for (const opListElement of opList) {\n      if (opListElement.fn === \"save\") {\n        opTree.push({ fnId: 92, fn: \"group\", items: [] });\n        tmp.push(opTree);\n        opTree = opTree.at(-1).items;\n        continue;\n      }\n\n      if (opListElement.fn === \"restore\") {\n        opTree = tmp.pop();\n      } else {\n        opTree.push(opListElement);\n      }\n    }\n    return opTree;\n  }\n\n  /**\n   * Format a float number as a string.\n   *\n   * @param value {number} - The float number to format.\n   * @returns {string}\n   */\n  // eslint-disable-next-line no-inner-declarations\n  function pf(value) {\n    if (Number.isInteger(value)) {\n      return value.toString();\n    }\n    const s = value.toFixed(10);\n    let i = s.length - 1;\n    if (s[i] !== \"0\") {\n      return s;\n    }\n\n    // Remove trailing zeros.\n    do {\n      i--;\n    } while (s[i] === \"0\");\n    return s.substring(0, s[i] === \".\" ? i : i + 1);\n  }\n\n  /**\n   * Format a transform matrix as a string. The standard rotation, scale and\n   * translation matrices are replaced by their shorter forms, and for\n   * identity matrices an empty string is returned to save memory.\n   *\n   * @param m {Array} - The transform matrix to format.\n   * @returns {string}\n   */\n  // eslint-disable-next-line no-inner-declarations\n  function pm(m) {\n    if (m[4] === 0 && m[5] === 0) {\n      if (m[1] === 0 && m[2] === 0) {\n        if (m[0] === 1 && m[3] === 1) {\n          return \"\";\n        }\n        return `scale(${pf(m[0])} ${pf(m[3])})`;\n      }\n      if (m[0] === m[3] && m[1] === -m[2]) {\n        const a = (Math.acos(m[0]) * 180) / Math.PI;\n        return `rotate(${pf(a)})`;\n      }\n    } else {\n      if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n        return `translate(${pf(m[4])} ${pf(m[5])})`;\n      }\n    }\n    return (\n      `matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ` +\n      `${pf(m[5])})`\n    );\n  }\n\n  // The counts below are relevant for all pages, so they have to be global\n  // instead of being members of `SVGGraphics` (which is recreated for\n  // each page).\n  let clipCount = 0;\n  let maskCount = 0;\n  let shadingCount = 0;\n\n  SVGGraphics = class {\n    constructor(commonObjs, objs, forceDataSchema = false) {\n      deprecated(\n        \"The SVG back-end is no longer maintained and *may* be removed in the future.\"\n      );\n      this.svgFactory = new DOMSVGFactory();\n\n      this.current = new SVGExtraState();\n      this.transformMatrix = IDENTITY_MATRIX; // Graphics state matrix\n      this.transformStack = [];\n      this.extraStack = [];\n      this.commonObjs = commonObjs;\n      this.objs = objs;\n      this.pendingClip = null;\n      this.pendingEOFill = false;\n\n      this.embedFonts = false;\n      this.embeddedFonts = Object.create(null);\n      this.cssStyle = null;\n      this.forceDataSchema = !!forceDataSchema;\n\n      // In `src/shared/util.js` the operator names are mapped to IDs.\n      // The list below represents the reverse of that, i.e., it maps IDs\n      // to operator names.\n      this._operatorIdMapping = [];\n      for (const op in OPS) {\n        this._operatorIdMapping[OPS[op]] = op;\n      }\n    }\n\n    getObject(data, fallback = null) {\n      if (typeof data === \"string\") {\n        return data.startsWith(\"g_\")\n          ? this.commonObjs.get(data)\n          : this.objs.get(data);\n      }\n      return fallback;\n    }\n\n    save() {\n      this.transformStack.push(this.transformMatrix);\n      const old = this.current;\n      this.extraStack.push(old);\n      this.current = old.clone();\n    }\n\n    restore() {\n      this.transformMatrix = this.transformStack.pop();\n      this.current = this.extraStack.pop();\n      this.pendingClip = null;\n      this.tgrp = null;\n    }\n\n    group(items) {\n      this.save();\n      this.executeOpTree(items);\n      this.restore();\n    }\n\n    loadDependencies(operatorList) {\n      const fnArray = operatorList.fnArray;\n      const argsArray = operatorList.argsArray;\n\n      for (let i = 0, ii = fnArray.length; i < ii; i++) {\n        if (fnArray[i] !== OPS.dependency) {\n          continue;\n        }\n\n        for (const obj of argsArray[i]) {\n          const objsPool = obj.startsWith(\"g_\") ? this.commonObjs : this.objs;\n          const promise = new Promise(resolve => {\n            objsPool.get(obj, resolve);\n          });\n          this.current.dependencies.push(promise);\n        }\n      }\n      return Promise.all(this.current.dependencies);\n    }\n\n    transform(a, b, c, d, e, f) {\n      const transformMatrix = [a, b, c, d, e, f];\n      this.transformMatrix = Util.transform(\n        this.transformMatrix,\n        transformMatrix\n      );\n      this.tgrp = null;\n    }\n\n    getSVG(operatorList, viewport) {\n      this.viewport = viewport;\n\n      const svgElement = this._initialize(viewport);\n      return this.loadDependencies(operatorList).then(() => {\n        this.transformMatrix = IDENTITY_MATRIX;\n        this.executeOpTree(this.convertOpList(operatorList));\n        return svgElement;\n      });\n    }\n\n    convertOpList(operatorList) {\n      const operatorIdMapping = this._operatorIdMapping;\n      const argsArray = operatorList.argsArray;\n      const fnArray = operatorList.fnArray;\n      const opList = [];\n      for (let i = 0, ii = fnArray.length; i < ii; i++) {\n        const fnId = fnArray[i];\n        opList.push({\n          fnId,\n          fn: operatorIdMapping[fnId],\n          args: argsArray[i],\n        });\n      }\n      return opListToTree(opList);\n    }\n\n    executeOpTree(opTree) {\n      for (const opTreeElement of opTree) {\n        const fn = opTreeElement.fn;\n        const fnId = opTreeElement.fnId;\n        const args = opTreeElement.args;\n\n        switch (fnId | 0) {\n          case OPS.beginText:\n            this.beginText();\n            break;\n          case OPS.dependency:\n            // Handled in `loadDependencies`, so no warning should be shown.\n            break;\n          case OPS.setLeading:\n            this.setLeading(args);\n            break;\n          case OPS.setLeadingMoveText:\n            this.setLeadingMoveText(args[0], args[1]);\n            break;\n          case OPS.setFont:\n            this.setFont(args);\n            break;\n          case OPS.showText:\n            this.showText(args[0]);\n            break;\n          case OPS.showSpacedText:\n            this.showText(args[0]);\n            break;\n          case OPS.endText:\n            this.endText();\n            break;\n          case OPS.moveText:\n            this.moveText(args[0], args[1]);\n            break;\n          case OPS.setCharSpacing:\n            this.setCharSpacing(args[0]);\n            break;\n          case OPS.setWordSpacing:\n            this.setWordSpacing(args[0]);\n            break;\n          case OPS.setHScale:\n            this.setHScale(args[0]);\n            break;\n          case OPS.setTextMatrix:\n            this.setTextMatrix(\n              args[0],\n              args[1],\n              args[2],\n              args[3],\n              args[4],\n              args[5]\n            );\n            break;\n          case OPS.setTextRise:\n            this.setTextRise(args[0]);\n            break;\n          case OPS.setTextRenderingMode:\n            this.setTextRenderingMode(args[0]);\n            break;\n          case OPS.setLineWidth:\n            this.setLineWidth(args[0]);\n            break;\n          case OPS.setLineJoin:\n            this.setLineJoin(args[0]);\n            break;\n          case OPS.setLineCap:\n            this.setLineCap(args[0]);\n            break;\n          case OPS.setMiterLimit:\n            this.setMiterLimit(args[0]);\n            break;\n          case OPS.setFillRGBColor:\n            this.setFillRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeRGBColor:\n            this.setStrokeRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeColorN:\n            this.setStrokeColorN(args);\n            break;\n          case OPS.setFillColorN:\n            this.setFillColorN(args);\n            break;\n          case OPS.shadingFill:\n            this.shadingFill(args[0]);\n            break;\n          case OPS.setDash:\n            this.setDash(args[0], args[1]);\n            break;\n          case OPS.setRenderingIntent:\n            this.setRenderingIntent(args[0]);\n            break;\n          case OPS.setFlatness:\n            this.setFlatness(args[0]);\n            break;\n          case OPS.setGState:\n            this.setGState(args[0]);\n            break;\n          case OPS.fill:\n            this.fill();\n            break;\n          case OPS.eoFill:\n            this.eoFill();\n            break;\n          case OPS.stroke:\n            this.stroke();\n            break;\n          case OPS.fillStroke:\n            this.fillStroke();\n            break;\n          case OPS.eoFillStroke:\n            this.eoFillStroke();\n            break;\n          case OPS.clip:\n            this.clip(\"nonzero\");\n            break;\n          case OPS.eoClip:\n            this.clip(\"evenodd\");\n            break;\n          case OPS.paintSolidColorImageMask:\n            this.paintSolidColorImageMask();\n            break;\n          case OPS.paintImageXObject:\n            this.paintImageXObject(args[0]);\n            break;\n          case OPS.paintInlineImageXObject:\n            this.paintInlineImageXObject(args[0]);\n            break;\n          case OPS.paintImageMaskXObject:\n            this.paintImageMaskXObject(args[0]);\n            break;\n          case OPS.paintFormXObjectBegin:\n            this.paintFormXObjectBegin(args[0], args[1]);\n            break;\n          case OPS.paintFormXObjectEnd:\n            this.paintFormXObjectEnd();\n            break;\n          case OPS.closePath:\n            this.closePath();\n            break;\n          case OPS.closeStroke:\n            this.closeStroke();\n            break;\n          case OPS.closeFillStroke:\n            this.closeFillStroke();\n            break;\n          case OPS.closeEOFillStroke:\n            this.closeEOFillStroke();\n            break;\n          case OPS.nextLine:\n            this.nextLine();\n            break;\n          case OPS.transform:\n            this.transform(\n              args[0],\n              args[1],\n              args[2],\n              args[3],\n              args[4],\n              args[5]\n            );\n            break;\n          case OPS.constructPath:\n            this.constructPath(args[0], args[1]);\n            break;\n          case OPS.endPath:\n            this.endPath();\n            break;\n          case 92:\n            this.group(opTreeElement.items);\n            break;\n          default:\n            warn(`Unimplemented operator ${fn}`);\n            break;\n        }\n      }\n    }\n\n    setWordSpacing(wordSpacing) {\n      this.current.wordSpacing = wordSpacing;\n    }\n\n    setCharSpacing(charSpacing) {\n      this.current.charSpacing = charSpacing;\n    }\n\n    nextLine() {\n      this.moveText(0, this.current.leading);\n    }\n\n    setTextMatrix(a, b, c, d, e, f) {\n      const current = this.current;\n      current.textMatrix = current.lineMatrix = [a, b, c, d, e, f];\n      current.textMatrixScale = Math.hypot(a, b);\n\n      current.x = current.lineX = 0;\n      current.y = current.lineY = 0;\n\n      current.xcoords = [];\n      current.ycoords = [];\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n\n      current.txtElement = this.svgFactory.createElement(\"svg:text\");\n      current.txtElement.append(current.tspan);\n    }\n\n    beginText() {\n      const current = this.current;\n      current.x = current.lineX = 0;\n      current.y = current.lineY = 0;\n      current.textMatrix = IDENTITY_MATRIX;\n      current.lineMatrix = IDENTITY_MATRIX;\n      current.textMatrixScale = 1;\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.txtElement = this.svgFactory.createElement(\"svg:text\");\n      current.txtgrp = this.svgFactory.createElement(\"svg:g\");\n      current.xcoords = [];\n      current.ycoords = [];\n    }\n\n    moveText(x, y) {\n      const current = this.current;\n      current.x = current.lineX += x;\n      current.y = current.lineY += y;\n\n      current.xcoords = [];\n      current.ycoords = [];\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n    }\n\n    showText(glyphs) {\n      const current = this.current;\n      const font = current.font;\n      const fontSize = current.fontSize;\n      if (fontSize === 0) {\n        return;\n      }\n\n      const fontSizeScale = current.fontSizeScale;\n      const charSpacing = current.charSpacing;\n      const wordSpacing = current.wordSpacing;\n      const fontDirection = current.fontDirection;\n      const textHScale = current.textHScale * fontDirection;\n      const vertical = font.vertical;\n      const spacingDir = vertical ? 1 : -1;\n      const defaultVMetrics = font.defaultVMetrics;\n      const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      let x = 0;\n      for (const glyph of glyphs) {\n        if (glyph === null) {\n          // Word break\n          x += fontDirection * wordSpacing;\n          continue;\n        } else if (typeof glyph === \"number\") {\n          x += (spacingDir * glyph * fontSize) / 1000;\n          continue;\n        }\n\n        const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        const character = glyph.fontChar;\n        let scaledX, scaledY;\n        let width = glyph.width;\n        if (vertical) {\n          let vx;\n          const vmetric = glyph.vmetric || defaultVMetrics;\n          vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n          vx = -vx * widthAdvanceScale;\n          const vy = vmetric[2] * widthAdvanceScale;\n\n          width = vmetric ? -vmetric[0] : width;\n          scaledX = vx / fontSizeScale;\n          scaledY = (x + vy) / fontSizeScale;\n        } else {\n          scaledX = x / fontSizeScale;\n          scaledY = 0;\n        }\n\n        if (glyph.isInFont || font.missingFile) {\n          current.xcoords.push(current.x + scaledX);\n          if (vertical) {\n            current.ycoords.push(-current.y + scaledY);\n          }\n          current.tspan.textContent += character;\n        } else {\n          // TODO: To assist with text selection, we should replace the missing\n          // character with a space character if charWidth is not zero.\n          // But we cannot just do \"character = ' '\", because the ' ' character\n          // might actually map to a different glyph.\n        }\n\n        let charWidth;\n        if (vertical) {\n          charWidth = width * widthAdvanceScale - spacing * fontDirection;\n        } else {\n          charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        }\n\n        x += charWidth;\n      }\n      current.tspan.setAttributeNS(\n        null,\n        \"x\",\n        current.xcoords.map(pf).join(\" \")\n      );\n      if (vertical) {\n        current.tspan.setAttributeNS(\n          null,\n          \"y\",\n          current.ycoords.map(pf).join(\" \")\n        );\n      } else {\n        current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n      }\n\n      if (vertical) {\n        current.y -= x;\n      } else {\n        current.x += x * textHScale;\n      }\n\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n        current.tspan.setAttributeNS(null, \"font-style\", current.fontStyle);\n      }\n      if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n        current.tspan.setAttributeNS(null, \"font-weight\", current.fontWeight);\n      }\n\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n          current.tspan.setAttributeNS(null, \"fill\", current.fillColor);\n        }\n        if (current.fillAlpha < 1) {\n          current.tspan.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n        }\n      } else if (current.textRenderingMode === TextRenderingMode.ADD_TO_PATH) {\n        // Workaround for Firefox: We must set fill=\"transparent\" because\n        // fill=\"none\" would generate an empty clipping path.\n        current.tspan.setAttributeNS(null, \"fill\", \"transparent\");\n      } else {\n        current.tspan.setAttributeNS(null, \"fill\", \"none\");\n      }\n\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        const lineWidthScale = 1 / (current.textMatrixScale || 1);\n        this._setStrokeAttributes(current.tspan, lineWidthScale);\n      }\n\n      // Include the text rise in the text matrix since the `pm` function\n      // creates the SVG element's `translate` entry (work on a copy to avoid\n      // altering the original text matrix).\n      let textMatrix = current.textMatrix;\n      if (current.textRise !== 0) {\n        textMatrix = textMatrix.slice();\n        textMatrix[5] += current.textRise;\n      }\n\n      current.txtElement.setAttributeNS(\n        null,\n        \"transform\",\n        `${pm(textMatrix)} scale(${pf(textHScale)}, -1)`\n      );\n      current.txtElement.setAttributeNS(XML_NS, \"xml:space\", \"preserve\");\n      current.txtElement.append(current.tspan);\n      current.txtgrp.append(current.txtElement);\n\n      this._ensureTransformGroup().append(current.txtElement);\n    }\n\n    setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    }\n\n    addFontStyle(fontObj) {\n      if (!fontObj.data) {\n        throw new Error(\n          \"addFontStyle: No font data available, \" +\n            'ensure that the \"fontExtraProperties\" API parameter is set.'\n        );\n      }\n      if (!this.cssStyle) {\n        this.cssStyle = this.svgFactory.createElement(\"svg:style\");\n        this.cssStyle.setAttributeNS(null, \"type\", \"text/css\");\n        this.defs.append(this.cssStyle);\n      }\n\n      const url = createObjectURL(\n        fontObj.data,\n        fontObj.mimetype,\n        this.forceDataSchema\n      );\n      this.cssStyle.textContent +=\n        `@font-face { font-family: \"${fontObj.loadedName}\";` +\n        ` src: url(${url}); }\\n`;\n    }\n\n    setFont(details) {\n      const current = this.current;\n      const fontObj = this.commonObjs.get(details[0]);\n      let size = details[1];\n      current.font = fontObj;\n\n      if (\n        this.embedFonts &&\n        !fontObj.missingFile &&\n        !this.embeddedFonts[fontObj.loadedName]\n      ) {\n        this.addFontStyle(fontObj);\n        this.embeddedFonts[fontObj.loadedName] = fontObj;\n      }\n      current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n      let bold = \"normal\";\n      if (fontObj.black) {\n        bold = \"900\";\n      } else if (fontObj.bold) {\n        bold = \"bold\";\n      }\n      const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n      current.fontSize = size;\n      current.fontFamily = fontObj.loadedName;\n      current.fontWeight = bold;\n      current.fontStyle = italic;\n\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n      current.xcoords = [];\n      current.ycoords = [];\n    }\n\n    endText() {\n      const current = this.current;\n      if (\n        current.textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG &&\n        current.txtElement?.hasChildNodes()\n      ) {\n        // If no glyphs are shown (i.e. no child nodes), no clipping occurs.\n        current.element = current.txtElement;\n        this.clip(\"nonzero\");\n        this.endPath();\n      }\n    }\n\n    // Path properties\n    setLineWidth(width) {\n      if (width > 0) {\n        this.current.lineWidth = width;\n      }\n    }\n\n    setLineCap(style) {\n      this.current.lineCap = LINE_CAP_STYLES[style];\n    }\n\n    setLineJoin(style) {\n      this.current.lineJoin = LINE_JOIN_STYLES[style];\n    }\n\n    setMiterLimit(limit) {\n      this.current.miterLimit = limit;\n    }\n\n    setStrokeAlpha(strokeAlpha) {\n      this.current.strokeAlpha = strokeAlpha;\n    }\n\n    setStrokeRGBColor(r, g, b) {\n      this.current.strokeColor = Util.makeHexColor(r, g, b);\n    }\n\n    setFillAlpha(fillAlpha) {\n      this.current.fillAlpha = fillAlpha;\n    }\n\n    setFillRGBColor(r, g, b) {\n      this.current.fillColor = Util.makeHexColor(r, g, b);\n      this.current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      this.current.xcoords = [];\n      this.current.ycoords = [];\n    }\n\n    setStrokeColorN(args) {\n      this.current.strokeColor = this._makeColorN_Pattern(args);\n    }\n\n    setFillColorN(args) {\n      this.current.fillColor = this._makeColorN_Pattern(args);\n    }\n\n    shadingFill(args) {\n      const width = this.viewport.width;\n      const height = this.viewport.height;\n      const inv = Util.inverseTransform(this.transformMatrix);\n      const bl = Util.applyTransform([0, 0], inv);\n      const br = Util.applyTransform([0, height], inv);\n      const ul = Util.applyTransform([width, 0], inv);\n      const ur = Util.applyTransform([width, height], inv);\n      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", x0);\n      rect.setAttributeNS(null, \"y\", y0);\n      rect.setAttributeNS(null, \"width\", x1 - x0);\n      rect.setAttributeNS(null, \"height\", y1 - y0);\n      rect.setAttributeNS(null, \"fill\", this._makeShadingPattern(args));\n      if (this.current.fillAlpha < 1) {\n        rect.setAttributeNS(null, \"fill-opacity\", this.current.fillAlpha);\n      }\n      this._ensureTransformGroup().append(rect);\n    }\n\n    /**\n     * @private\n     */\n    _makeColorN_Pattern(args) {\n      if (args[0] === \"TilingPattern\") {\n        return this._makeTilingPattern(args);\n      }\n      return this._makeShadingPattern(args);\n    }\n\n    /**\n     * @private\n     */\n    _makeTilingPattern(args) {\n      const color = args[1];\n      const operatorList = args[2];\n      const matrix = args[3] || IDENTITY_MATRIX;\n      const [x0, y0, x1, y1] = args[4];\n      const xstep = args[5];\n      const ystep = args[6];\n      const paintType = args[7];\n\n      const tilingId = `shading${shadingCount++}`;\n      const [tx0, ty0, tx1, ty1] = Util.normalizeRect([\n        ...Util.applyTransform([x0, y0], matrix),\n        ...Util.applyTransform([x1, y1], matrix),\n      ]);\n      const [xscale, yscale] = Util.singularValueDecompose2dScale(matrix);\n      const txstep = xstep * xscale;\n      const tystep = ystep * yscale;\n\n      const tiling = this.svgFactory.createElement(\"svg:pattern\");\n      tiling.setAttributeNS(null, \"id\", tilingId);\n      tiling.setAttributeNS(null, \"patternUnits\", \"userSpaceOnUse\");\n      tiling.setAttributeNS(null, \"width\", txstep);\n      tiling.setAttributeNS(null, \"height\", tystep);\n      tiling.setAttributeNS(null, \"x\", `${tx0}`);\n      tiling.setAttributeNS(null, \"y\", `${ty0}`);\n\n      // Save current state.\n      const svg = this.svg;\n      const transformMatrix = this.transformMatrix;\n      const fillColor = this.current.fillColor;\n      const strokeColor = this.current.strokeColor;\n\n      const bbox = this.svgFactory.create(tx1 - tx0, ty1 - ty0);\n      this.svg = bbox;\n      this.transformMatrix = matrix;\n      if (paintType === 2) {\n        const cssColor = Util.makeHexColor(...color);\n        this.current.fillColor = cssColor;\n        this.current.strokeColor = cssColor;\n      }\n      this.executeOpTree(this.convertOpList(operatorList));\n\n      // Restore saved state.\n      this.svg = svg;\n      this.transformMatrix = transformMatrix;\n      this.current.fillColor = fillColor;\n      this.current.strokeColor = strokeColor;\n\n      tiling.append(bbox.childNodes[0]);\n      this.defs.append(tiling);\n      return `url(#${tilingId})`;\n    }\n\n    /**\n     * @private\n     */\n    _makeShadingPattern(args) {\n      if (typeof args === \"string\") {\n        args = this.objs.get(args);\n      }\n      switch (args[0]) {\n        case \"RadialAxial\":\n          const shadingId = `shading${shadingCount++}`;\n          const colorStops = args[3];\n          let gradient;\n\n          switch (args[1]) {\n            case \"axial\":\n              const point0 = args[4];\n              const point1 = args[5];\n              gradient = this.svgFactory.createElement(\"svg:linearGradient\");\n              gradient.setAttributeNS(null, \"id\", shadingId);\n              gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n              gradient.setAttributeNS(null, \"x1\", point0[0]);\n              gradient.setAttributeNS(null, \"y1\", point0[1]);\n              gradient.setAttributeNS(null, \"x2\", point1[0]);\n              gradient.setAttributeNS(null, \"y2\", point1[1]);\n              break;\n            case \"radial\":\n              const focalPoint = args[4];\n              const circlePoint = args[5];\n              const focalRadius = args[6];\n              const circleRadius = args[7];\n              gradient = this.svgFactory.createElement(\"svg:radialGradient\");\n              gradient.setAttributeNS(null, \"id\", shadingId);\n              gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n              gradient.setAttributeNS(null, \"cx\", circlePoint[0]);\n              gradient.setAttributeNS(null, \"cy\", circlePoint[1]);\n              gradient.setAttributeNS(null, \"r\", circleRadius);\n              gradient.setAttributeNS(null, \"fx\", focalPoint[0]);\n              gradient.setAttributeNS(null, \"fy\", focalPoint[1]);\n              gradient.setAttributeNS(null, \"fr\", focalRadius);\n              break;\n            default:\n              throw new Error(`Unknown RadialAxial type: ${args[1]}`);\n          }\n          for (const colorStop of colorStops) {\n            const stop = this.svgFactory.createElement(\"svg:stop\");\n            stop.setAttributeNS(null, \"offset\", colorStop[0]);\n            stop.setAttributeNS(null, \"stop-color\", colorStop[1]);\n            gradient.append(stop);\n          }\n          this.defs.append(gradient);\n          return `url(#${shadingId})`;\n        case \"Mesh\":\n          warn(\"Unimplemented pattern Mesh\");\n          return null;\n        case \"Dummy\":\n          return \"hotpink\";\n        default:\n          throw new Error(`Unknown IR type: ${args[0]}`);\n      }\n    }\n\n    setDash(dashArray, dashPhase) {\n      this.current.dashArray = dashArray;\n      this.current.dashPhase = dashPhase;\n    }\n\n    constructPath(ops, args) {\n      const current = this.current;\n      let x = current.x,\n        y = current.y;\n      let d = [];\n      let j = 0;\n\n      for (const op of ops) {\n        switch (op | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            const width = args[j++];\n            const height = args[j++];\n            const xw = x + width;\n            const yh = y + height;\n            d.push(\n              \"M\",\n              pf(x),\n              pf(y),\n              \"L\",\n              pf(xw),\n              pf(y),\n              \"L\",\n              pf(xw),\n              pf(yh),\n              \"L\",\n              pf(x),\n              pf(yh),\n              \"Z\"\n            );\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            d.push(\"M\", pf(x), pf(y));\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            d.push(\"L\", pf(x), pf(y));\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            d.push(\n              \"C\",\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(args[j + 2]),\n              pf(args[j + 3]),\n              pf(x),\n              pf(y)\n            );\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            d.push(\n              \"C\",\n              pf(x),\n              pf(y),\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(args[j + 2]),\n              pf(args[j + 3])\n            );\n            x = args[j + 2];\n            y = args[j + 3];\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push(\n              \"C\",\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(x),\n              pf(y),\n              pf(x),\n              pf(y)\n            );\n            j += 4;\n            break;\n          case OPS.closePath:\n            d.push(\"Z\");\n            break;\n        }\n      }\n\n      d = d.join(\" \");\n\n      if (\n        current.path &&\n        ops.length > 0 &&\n        ops[0] !== OPS.rectangle &&\n        ops[0] !== OPS.moveTo\n      ) {\n        // If a path does not start with an OPS.rectangle or OPS.moveTo, it has\n        // probably been divided into two OPS.constructPath operators by\n        // OperatorList. Append the commands to the previous path element.\n        d = current.path.getAttributeNS(null, \"d\") + d;\n      } else {\n        current.path = this.svgFactory.createElement(\"svg:path\");\n        this._ensureTransformGroup().append(current.path);\n      }\n\n      current.path.setAttributeNS(null, \"d\", d);\n      current.path.setAttributeNS(null, \"fill\", \"none\");\n\n      // Saving a reference in current.element so that it can be addressed\n      // in 'fill' and 'stroke'\n      current.element = current.path;\n      current.setCurrentPoint(x, y);\n    }\n\n    endPath() {\n      const current = this.current;\n\n      // Painting operators end a path.\n      current.path = null;\n\n      if (!this.pendingClip) {\n        return;\n      }\n      if (!current.element) {\n        this.pendingClip = null;\n        return;\n      }\n\n      // Add the current path to a clipping path.\n      const clipId = `clippath${clipCount++}`;\n      const clipPath = this.svgFactory.createElement(\"svg:clipPath\");\n      clipPath.setAttributeNS(null, \"id\", clipId);\n      clipPath.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n\n      // A deep clone is needed when text is used as a clipping path.\n      const clipElement = current.element.cloneNode(true);\n      if (this.pendingClip === \"evenodd\") {\n        clipElement.setAttributeNS(null, \"clip-rule\", \"evenodd\");\n      } else {\n        clipElement.setAttributeNS(null, \"clip-rule\", \"nonzero\");\n      }\n      this.pendingClip = null;\n      clipPath.append(clipElement);\n      this.defs.append(clipPath);\n\n      if (current.activeClipUrl) {\n        // The previous clipping group content can go out of order -- resetting\n        // cached clipGroups.\n        current.clipGroup = null;\n        for (const prev of this.extraStack) {\n          prev.clipGroup = null;\n        }\n        // Intersect with the previous clipping path.\n        clipPath.setAttributeNS(null, \"clip-path\", current.activeClipUrl);\n      }\n      current.activeClipUrl = `url(#${clipId})`;\n\n      this.tgrp = null;\n    }\n\n    clip(type) {\n      this.pendingClip = type;\n    }\n\n    closePath() {\n      const current = this.current;\n      if (current.path) {\n        const d = `${current.path.getAttributeNS(null, \"d\")}Z`;\n        current.path.setAttributeNS(null, \"d\", d);\n      }\n    }\n\n    setLeading(leading) {\n      this.current.leading = -leading;\n    }\n\n    setTextRise(textRise) {\n      this.current.textRise = textRise;\n    }\n\n    setTextRenderingMode(textRenderingMode) {\n      this.current.textRenderingMode = textRenderingMode;\n    }\n\n    setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    }\n\n    setRenderingIntent(intent) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    }\n\n    setFlatness(flatness) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    }\n\n    setGState(states) {\n      for (const [key, value] of states) {\n        switch (key) {\n          case \"LW\":\n            this.setLineWidth(value);\n            break;\n          case \"LC\":\n            this.setLineCap(value);\n            break;\n          case \"LJ\":\n            this.setLineJoin(value);\n            break;\n          case \"ML\":\n            this.setMiterLimit(value);\n            break;\n          case \"D\":\n            this.setDash(value[0], value[1]);\n            break;\n          case \"RI\":\n            this.setRenderingIntent(value);\n            break;\n          case \"FL\":\n            this.setFlatness(value);\n            break;\n          case \"Font\":\n            this.setFont(value);\n            break;\n          case \"CA\":\n            this.setStrokeAlpha(value);\n            break;\n          case \"ca\":\n            this.setFillAlpha(value);\n            break;\n          default:\n            warn(`Unimplemented graphic state operator ${key}`);\n            break;\n        }\n      }\n    }\n\n    fill() {\n      const current = this.current;\n      if (current.element) {\n        current.element.setAttributeNS(null, \"fill\", current.fillColor);\n        current.element.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n        this.endPath();\n      }\n    }\n\n    stroke() {\n      const current = this.current;\n      if (current.element) {\n        this._setStrokeAttributes(current.element);\n        current.element.setAttributeNS(null, \"fill\", \"none\");\n        this.endPath();\n      }\n    }\n\n    /**\n     * @private\n     */\n    _setStrokeAttributes(element, lineWidthScale = 1) {\n      const current = this.current;\n      let dashArray = current.dashArray;\n      if (lineWidthScale !== 1 && dashArray.length > 0) {\n        dashArray = dashArray.map(function (value) {\n          return lineWidthScale * value;\n        });\n      }\n      element.setAttributeNS(null, \"stroke\", current.strokeColor);\n      element.setAttributeNS(null, \"stroke-opacity\", current.strokeAlpha);\n      element.setAttributeNS(null, \"stroke-miterlimit\", pf(current.miterLimit));\n      element.setAttributeNS(null, \"stroke-linecap\", current.lineCap);\n      element.setAttributeNS(null, \"stroke-linejoin\", current.lineJoin);\n      element.setAttributeNS(\n        null,\n        \"stroke-width\",\n        pf(lineWidthScale * current.lineWidth) + \"px\"\n      );\n      element.setAttributeNS(\n        null,\n        \"stroke-dasharray\",\n        dashArray.map(pf).join(\" \")\n      );\n      element.setAttributeNS(\n        null,\n        \"stroke-dashoffset\",\n        pf(lineWidthScale * current.dashPhase) + \"px\"\n      );\n    }\n\n    eoFill() {\n      this.current.element?.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n      this.fill();\n    }\n\n    fillStroke() {\n      // Order is important since stroke wants fill to be none.\n      // First stroke, then if fill needed, it will be overwritten.\n      this.stroke();\n      this.fill();\n    }\n\n    eoFillStroke() {\n      this.current.element?.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n      this.fillStroke();\n    }\n\n    closeStroke() {\n      this.closePath();\n      this.stroke();\n    }\n\n    closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    }\n\n    closeEOFillStroke() {\n      this.closePath();\n      this.eoFillStroke();\n    }\n\n    paintSolidColorImageMask() {\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", \"0\");\n      rect.setAttributeNS(null, \"y\", \"0\");\n      rect.setAttributeNS(null, \"width\", \"1px\");\n      rect.setAttributeNS(null, \"height\", \"1px\");\n      rect.setAttributeNS(null, \"fill\", this.current.fillColor);\n\n      this._ensureTransformGroup().append(rect);\n    }\n\n    paintImageXObject(objId) {\n      const imgData = this.getObject(objId);\n      if (!imgData) {\n        warn(`Dependent image with object ID ${objId} is not ready yet`);\n        return;\n      }\n      this.paintInlineImageXObject(imgData);\n    }\n\n    paintInlineImageXObject(imgData, mask) {\n      const width = imgData.width;\n      const height = imgData.height;\n\n      const imgSrc = convertImgDataToPng(imgData, this.forceDataSchema, !!mask);\n      const cliprect = this.svgFactory.createElement(\"svg:rect\");\n      cliprect.setAttributeNS(null, \"x\", \"0\");\n      cliprect.setAttributeNS(null, \"y\", \"0\");\n      cliprect.setAttributeNS(null, \"width\", pf(width));\n      cliprect.setAttributeNS(null, \"height\", pf(height));\n      this.current.element = cliprect;\n      this.clip(\"nonzero\");\n\n      const imgEl = this.svgFactory.createElement(\"svg:image\");\n      imgEl.setAttributeNS(XLINK_NS, \"xlink:href\", imgSrc);\n      imgEl.setAttributeNS(null, \"x\", \"0\");\n      imgEl.setAttributeNS(null, \"y\", pf(-height));\n      imgEl.setAttributeNS(null, \"width\", pf(width) + \"px\");\n      imgEl.setAttributeNS(null, \"height\", pf(height) + \"px\");\n      imgEl.setAttributeNS(\n        null,\n        \"transform\",\n        `scale(${pf(1 / width)} ${pf(-1 / height)})`\n      );\n      if (mask) {\n        mask.append(imgEl);\n      } else {\n        this._ensureTransformGroup().append(imgEl);\n      }\n    }\n\n    paintImageMaskXObject(img) {\n      const imgData = this.getObject(img.data, img);\n      if (imgData.bitmap) {\n        warn(\n          \"paintImageMaskXObject: ImageBitmap support is not implemented, \" +\n            \"ensure that the `isOffscreenCanvasSupported` API parameter is disabled.\"\n        );\n        return;\n      }\n      const current = this.current;\n      const width = imgData.width;\n      const height = imgData.height;\n      const fillColor = current.fillColor;\n\n      current.maskId = `mask${maskCount++}`;\n      const mask = this.svgFactory.createElement(\"svg:mask\");\n      mask.setAttributeNS(null, \"id\", current.maskId);\n\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", \"0\");\n      rect.setAttributeNS(null, \"y\", \"0\");\n      rect.setAttributeNS(null, \"width\", pf(width));\n      rect.setAttributeNS(null, \"height\", pf(height));\n      rect.setAttributeNS(null, \"fill\", fillColor);\n      rect.setAttributeNS(null, \"mask\", `url(#${current.maskId})`);\n\n      this.defs.append(mask);\n      this._ensureTransformGroup().append(rect);\n\n      this.paintInlineImageXObject(imgData, mask);\n    }\n\n    paintFormXObjectBegin(matrix, bbox) {\n      if (Array.isArray(matrix) && matrix.length === 6) {\n        this.transform(\n          matrix[0],\n          matrix[1],\n          matrix[2],\n          matrix[3],\n          matrix[4],\n          matrix[5]\n        );\n      }\n\n      if (bbox) {\n        const width = bbox[2] - bbox[0];\n        const height = bbox[3] - bbox[1];\n\n        const cliprect = this.svgFactory.createElement(\"svg:rect\");\n        cliprect.setAttributeNS(null, \"x\", bbox[0]);\n        cliprect.setAttributeNS(null, \"y\", bbox[1]);\n        cliprect.setAttributeNS(null, \"width\", pf(width));\n        cliprect.setAttributeNS(null, \"height\", pf(height));\n        this.current.element = cliprect;\n        this.clip(\"nonzero\");\n        this.endPath();\n      }\n    }\n\n    paintFormXObjectEnd() {}\n\n    /**\n     * @private\n     */\n    _initialize(viewport) {\n      const svg = this.svgFactory.create(viewport.width, viewport.height);\n\n      // Create the definitions element.\n      const definitions = this.svgFactory.createElement(\"svg:defs\");\n      svg.append(definitions);\n      this.defs = definitions;\n\n      // Create the root group element, which acts a container for all other\n      // groups and applies the viewport transform.\n      const rootGroup = this.svgFactory.createElement(\"svg:g\");\n      rootGroup.setAttributeNS(null, \"transform\", pm(viewport.transform));\n      svg.append(rootGroup);\n\n      // For the construction of the SVG image we are only interested in the\n      // root group, so we expose it as the entry point of the SVG image for\n      // the other code in this class.\n      this.svg = rootGroup;\n\n      return svg;\n    }\n\n    /**\n     * @private\n     */\n    _ensureClipGroup() {\n      if (!this.current.clipGroup) {\n        const clipGroup = this.svgFactory.createElement(\"svg:g\");\n        clipGroup.setAttributeNS(null, \"clip-path\", this.current.activeClipUrl);\n        this.svg.append(clipGroup);\n        this.current.clipGroup = clipGroup;\n      }\n      return this.current.clipGroup;\n    }\n\n    /**\n     * @private\n     */\n    _ensureTransformGroup() {\n      if (!this.tgrp) {\n        this.tgrp = this.svgFactory.createElement(\"svg:g\");\n        this.tgrp.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n        if (this.current.activeClipUrl) {\n          this._ensureClipGroup().append(this.tgrp);\n        } else {\n          this.svg.append(this.tgrp);\n        }\n      }\n      return this.tgrp;\n    }\n  };\n}\n\nexport { SVGGraphics };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __w_pdfjs_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").OnProgressParameters} OnProgressParameters */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").PDFDocumentLoadingTask} PDFDocumentLoadingTask */\n/** @typedef {import(\"./display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./display/api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display/api\").RenderTask} RenderTask */\n/** @typedef {import(\"./display/display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/text_layer\").TextLayerRenderTask} TextLayerRenderTask */\n\nimport {\n  AbortException,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationMode,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  FeatureTest,\n  InvalidPDFException,\n  MissingPDFException,\n  normalizeUnicode,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  PromiseCapability,\n  shadow,\n  UnexpectedResponseException,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport {\n  build,\n  getDocument,\n  PDFDataRangeTransport,\n  PDFWorker,\n  version,\n} from \"./display/api.js\";\nimport {\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  loadScript,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  setLayerDimensions,\n} from \"./display/display_utils.js\";\nimport { renderTextLayer, updateTextLayer } from \"./display/text_layer.js\";\nimport { AnnotationEditorLayer } from \"./display/editor/annotation_editor_layer.js\";\nimport { AnnotationEditorUIManager } from \"./display/editor/tools.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { SVGGraphics } from \"./display/svg.js\";\nimport { XfaLayer } from \"./display/xfa_layer.js\";\n\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsVersion =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : void 0;\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsBuild =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : void 0;\n\nexport {\n  AbortException,\n  AnnotationEditorLayer,\n  AnnotationEditorParamsType,\n  AnnotationEditorType,\n  AnnotationEditorUIManager,\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  CMapCompressionType,\n  createValidAbsoluteUrl,\n  FeatureTest,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  InvalidPDFException,\n  isDataScheme,\n  isPdfFile,\n  loadScript,\n  MissingPDFException,\n  normalizeUnicode,\n  OPS,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  PromiseCapability,\n  RenderingCancelledException,\n  renderTextLayer,\n  setLayerDimensions,\n  shadow,\n  SVGGraphics,\n  UnexpectedResponseException,\n  updateTextLayer,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n"]},"metadata":{},"sourceType":"script"}